{"version":3,"file":"data_import_tools.min.js","sources":["../../../apps/frappe/node_modules/sortablejs/Sortable.js","../../../apps/frappe/node_modules/frappe-datatable/dist/frappe-datatable.cjs.js","../../../apps/frappe/frappe/public/js/frappe/data_import/data_exporter.js","../../../apps/frappe/frappe/public/js/frappe/data_import/import_preview.js"],"sourcesContent":["/**!\n * Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\n\n(function sortableModule(factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"Sortable\"] = factory();\n\t}\n})(function sortableFactory() {\n\t\"use strict\";\n\n\tif (typeof window === \"undefined\" || !window.document) {\n\t\treturn function sortableError() {\n\t\t\tthrow new Error(\"Sortable.js requires a window with a document\");\n\t\t};\n\t}\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\t\tlastDownEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\t\tscrollCustomFn,\n\n\t\toldIndex,\n\t\tnewIndex,\n\n\t\tactiveGroup,\n\t\tputSortable,\n\n\t\tautoScrolls = [],\n\t\tscrolling = false,\n\n\t\tawaitingDragStarted = false,\n\t\tignoreNextClick = false,\n\t\tsortables = [],\n\n\t\tpointerElemChangedInterval,\n\t\tlastPointerElemX,\n\t\tlastPointerElemY,\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\n\t\tlastTarget,\n\t\tlastDirection,\n\t\tpastFirstInvertThresh = false,\n\t\tisCircumstantialInvert = false,\n\t\tlastMode, // 'swap' or 'insert'\n\n\t\ttargetMoveDistance,\n\n\n\t\tforRepaintDummy,\n\t\trealDragElRect, // dragEl rect after current animation\n\n\t\t/** @const */\n\t\tR_SPACE = /\\s+/g,\n\n\t\texpando = 'Sortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\t\tsetTimeout = win.setTimeout,\n\n\t\t$ = win.jQuery || win.Zepto,\n\t\tPolymer = win.Polymer,\n\n\t\tcaptureMode = {\n\t\t\tcapture: false,\n\t\t\tpassive: false\n\t\t},\n\n\t\tIE11OrLess = !!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\\.|msie|iemobile)/i),\n\t\tEdge = !!navigator.userAgent.match(/Edge/i),\n\t\t// FireFox = !!navigator.userAgent.match(/firefox/i),\n\n\t\tCSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n\n\t\t// This will not pass for IE9, because IE9 DnD only works on anchors\n\t\tsupportDraggable = ('draggable' in document.createElement('div')),\n\n\t\tsupportCssPointerEvents = (function() {\n\t\t\t// false when <= IE11\n\t\t\tif (IE11OrLess) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar el = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\t\t_alignedSilent = false,\n\n\t\tabs = Math.abs,\n\t\tmin = Math.min,\n\n\t\tsavedInputChecked = [],\n\n\t\t_detectDirection = function(el, options) {\n\t\t\tvar elCSS = _css(el),\n\t\t\t\telWidth = parseInt(elCSS.width),\n\t\t\t\tchild1 = _getChild(el, 0, options),\n\t\t\t\tchild2 = _getChild(el, 1, options),\n\t\t\t\tfirstChildCSS = child1 && _css(child1),\n\t\t\t\tsecondChildCSS = child2 && _css(child2),\n\t\t\t\tfirstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + _getRect(child1).width,\n\t\t\t\tsecondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + _getRect(child2).width;\n\t\t\tif (elCSS.display === 'flex') {\n\t\t\t\treturn elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse'\n\t\t\t\t? 'vertical' : 'horizontal';\n\t\t\t}\n\t\t\tif (child1 && firstChildCSS.float !== 'none') {\n\t\t\t\tvar touchingSideChild2 = firstChildCSS.float === 'left' ? 'left' : 'right';\n\n\t\t\t\treturn child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ?\n\t\t\t\t\t'vertical' : 'horizontal';\n\t\t\t}\n\t\t\treturn (child1 &&\n\t\t\t\t(\n\t\t\t\t\tfirstChildCSS.display === 'block' ||\n\t\t\t\t\tfirstChildCSS.display === 'flex' ||\n\t\t\t\t\tfirstChildCSS.display === 'table' ||\n\t\t\t\t\tfirstChildCSS.display === 'grid' ||\n\t\t\t\t\tfirstChildWidth >= elWidth &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' ||\n\t\t\t\t\tchild2 &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' &&\n\t\t\t\t\tfirstChildWidth + secondChildWidth > elWidth\n\t\t\t\t) ?\n\t\t\t\t'vertical' : 'horizontal'\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\n\t\t * @param  {Number} x      X position\n\t\t * @param  {Number} y      Y position\n\t\t * @return {HTMLElement}   Element of the first found nearest Sortable\n\t\t */\n\t\t_detectNearestEmptySortable = function(x, y) {\n\t\t\tfor (var i = 0; i < sortables.length; i++) {\n\t\t\t\tif (sortables[i].children.length) continue;\n\n\t\t\t\tvar rect = _getRect(sortables[i]),\n\t\t\t\t\tthreshold = sortables[i][expando].options.emptyInsertThreshold,\n\t\t\t\t\tinsideHorizontally = x >= (rect.left - threshold) && x <= (rect.right + threshold),\n\t\t\t\t\tinsideVertically = y >= (rect.top - threshold) && y <= (rect.bottom + threshold);\n\n\t\t\t\tif (insideHorizontally && insideVertically) {\n\t\t\t\t\treturn sortables[i];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_isClientInRowColumn = function(x, y, el, axis, options) {\n\t\t\tvar targetRect = _getRect(el),\n\t\t\t\ttargetS1Opp = axis === 'vertical' ? targetRect.left : targetRect.top,\n\t\t\t\ttargetS2Opp = axis === 'vertical' ? targetRect.right : targetRect.bottom,\n\t\t\t\tmouseOnOppAxis = axis === 'vertical' ? x : y;\n\n\t\t\treturn targetS1Opp < mouseOnOppAxis && mouseOnOppAxis < targetS2Opp;\n\t\t},\n\n\t\t_isElInRowColumn = function(el1, el2, axis) {\n\t\t\tvar el1Rect = el1 === dragEl && realDragElRect || _getRect(el1),\n\t\t\t\tel2Rect = el2 === dragEl && realDragElRect || _getRect(el2),\n\t\t\t\tel1S1Opp = axis === 'vertical' ? el1Rect.left : el1Rect.top,\n\t\t\t\tel1S2Opp = axis === 'vertical' ? el1Rect.right : el1Rect.bottom,\n\t\t\t\tel1OppLength = axis === 'vertical' ? el1Rect.width : el1Rect.height,\n\t\t\t\tel2S1Opp = axis === 'vertical' ? el2Rect.left : el2Rect.top,\n\t\t\t\tel2S2Opp = axis === 'vertical' ? el2Rect.right : el2Rect.bottom,\n\t\t\t\tel2OppLength = axis === 'vertical' ? el2Rect.width : el2Rect.height;\n\n\t\t\treturn (\n\t\t\t\tel1S1Opp === el2S1Opp ||\n\t\t\t\tel1S2Opp === el2S2Opp ||\n\t\t\t\t(el1S1Opp + el1OppLength / 2) === (el2S1Opp + el2OppLength / 2)\n\t\t\t);\n\t\t},\n\n\t\t_getParentAutoScrollElement = function(el, includeSelf) {\n\t\t\t// skip to window\n\t\t\tif (!el || !el.getBoundingClientRect) return win;\n\n\t\t\tvar elem = el;\n\t\t\tvar gotSelf = false;\n\t\t\tdo {\n\t\t\t\t// we don't need to get elem css if it isn't even overflowing in the first place (performance)\n\t\t\t\tif (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n\t\t\t\t\tvar elemCSS = _css(elem);\n\t\t\t\t\tif (\n\t\t\t\t\t\telem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') ||\n\t\t\t\t\t\telem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (!elem || !elem.getBoundingClientRect || elem === document.body) return win;\n\n\t\t\t\t\t\tif (gotSelf || includeSelf) return elem;\n\t\t\t\t\t\tgotSelf = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t\t} while (elem = elem.parentNode);\n\n\t\t\treturn win;\n\t\t},\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl, /**Boolean*/isFallback) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (options.scroll) {\n\t\t\t\tvar _this = rootEl ? rootEl[expando] : window,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinWidth = window.innerWidth,\n\t\t\t\t\twinHeight = window.innerHeight,\n\n\t\t\t\t\tscrollThisInstance = false;\n\n\t\t\t\t// Detect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\t_clearAutoScrolls();\n\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollCustomFn = options.scrollFn;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = _getParentAutoScrollElement(rootEl, true);\n\t\t\t\t\t\tscrollParentEl = scrollEl;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tvar layersOut = 0;\n\t\t\t\tvar currentParent = scrollEl;\n\t\t\t\tdo {\n\t\t\t\t\tvar\tel = currentParent,\n\t\t\t\t\t\trect = _getRect(el),\n\n\t\t\t\t\t\ttop = rect.top,\n\t\t\t\t\t\tbottom = rect.bottom,\n\t\t\t\t\t\tleft = rect.left,\n\t\t\t\t\t\tright = rect.right,\n\n\t\t\t\t\t\twidth = rect.width,\n\t\t\t\t\t\theight = rect.height,\n\n\t\t\t\t\t\tscrollWidth,\n\t\t\t\t\t\tscrollHeight,\n\n\t\t\t\t\t\tcss,\n\n\t\t\t\t\t\tvx,\n\t\t\t\t\t\tvy,\n\n\t\t\t\t\t\tcanScrollX,\n\t\t\t\t\t\tcanScrollY,\n\n\t\t\t\t\t\tscrollPosX,\n\t\t\t\t\t\tscrollPosY;\n\n\n\t\t\t\t\tif (el !== win) {\n\t\t\t\t\t\tscrollWidth = el.scrollWidth;\n\t\t\t\t\t\tscrollHeight = el.scrollHeight;\n\n\t\t\t\t\t\tcss = _css(el);\n\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll');\n\n\t\t\t\t\t\tscrollPosX = el.scrollLeft;\n\t\t\t\t\t\tscrollPosY = el.scrollTop;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscrollWidth = document.documentElement.scrollWidth;\n\t\t\t\t\t\tscrollHeight = document.documentElement.scrollHeight;\n\n\t\t\t\t\t\tcss = _css(document.documentElement);\n\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll' || css.overflowX === 'visible');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll' || css.overflowY === 'visible');\n\n\t\t\t\t\t\tscrollPosX = document.documentElement.scrollLeft;\n\t\t\t\t\t\tscrollPosY = document.documentElement.scrollTop;\n\t\t\t\t\t}\n\n\t\t\t\t\tvx = canScrollX && (abs(right - x) <= sens && (scrollPosX + width) < scrollWidth) - (abs(left - x) <= sens && !!scrollPosX);\n\n\t\t\t\t\tvy = canScrollY && (abs(bottom - y) <= sens && (scrollPosY + height) < scrollHeight) - (abs(top - y) <= sens && !!scrollPosY);\n\n\n\t\t\t\t\tif (!autoScrolls[layersOut]) {\n\t\t\t\t\t\tfor (var i = 0; i <= layersOut; i++) {\n\t\t\t\t\t\t\tif (!autoScrolls[i]) {\n\t\t\t\t\t\t\t\tautoScrolls[i] = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n\t\t\t\t\t\tautoScrolls[layersOut].el = el;\n\t\t\t\t\t\tautoScrolls[layersOut].vx = vx;\n\t\t\t\t\t\tautoScrolls[layersOut].vy = vy;\n\n\t\t\t\t\t\tclearInterval(autoScrolls[layersOut].pid);\n\n\t\t\t\t\t\tif (el && (vx != 0 || vy != 0)) {\n\t\t\t\t\t\t\tscrollThisInstance = true;\n\t\t\t\t\t\t\t/* jshint loopfunc:true */\n\t\t\t\t\t\t\tautoScrolls[layersOut].pid = setInterval((function () {\n\t\t\t\t\t\t\t\t// emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n\t\t\t\t\t\t\t\tif (isFallback && this.layer === 0) {\n\t\t\t\t\t\t\t\t\tSortable.active._emulateDragOver(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n\t\t\t\t\t\t\t\tvar scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n\t\t\t\t\t\t\t\tif ('function' === typeof(scrollCustomFn)) {\n\t\t\t\t\t\t\t\t\tif (scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt, touchEvt, autoScrolls[this.layer].el) !== 'continue') {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (autoScrolls[this.layer].el === win) {\n\t\t\t\t\t\t\t\t\twin.scrollTo(win.pageXOffset + scrollOffsetX, win.pageYOffset + scrollOffsetY);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tautoScrolls[this.layer].el.scrollTop += scrollOffsetY;\n\t\t\t\t\t\t\t\t\tautoScrolls[this.layer].el.scrollLeft += scrollOffsetX;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).bind({layer: layersOut}), 24);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlayersOut++;\n\t\t\t\t} while (options.bubbleScroll && currentParent !== win && (currentParent = _getParentAutoScrollElement(currentParent, false)));\n\t\t\t\tscrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n\t\t\t}\n\t\t}, 30),\n\n\t\t_clearAutoScrolls = function () {\n\t\t\tautoScrolls.forEach(function(autoScroll) {\n\t\t\t\tclearInterval(autoScroll.pid);\n\t\t\t});\n\t\t\tautoScrolls = [];\n\t\t},\n\n\t\t_prepareGroup = function (options) {\n\t\t\tfunction toFn(value, pull) {\n\t\t\t\treturn function(to, from, dragEl, evt) {\n\t\t\t\t\tvar sameGroup = to.options.group.name &&\n\t\t\t\t\t\t\t\t\tfrom.options.group.name &&\n\t\t\t\t\t\t\t\t\tto.options.group.name === from.options.group.name;\n\n\t\t\t\t\tif (value == null && (pull || sameGroup)) {\n\t\t\t\t\t\t// Default pull value\n\t\t\t\t\t\t// Default pull and put value if same group\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (value == null || value === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (pull && value === 'clone') {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t} else if (typeof value === 'function') {\n\t\t\t\t\t\treturn toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar otherGroup = (pull ? to : from).options.group.name;\n\n\t\t\t\t\t\treturn (value === true ||\n\t\t\t\t\t\t(typeof value === 'string' && value === otherGroup) ||\n\t\t\t\t\t\t(value.join && value.indexOf(otherGroup) > -1));\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar group = {};\n\t\t\tvar originalGroup = options.group;\n\n\t\t\tif (!originalGroup || typeof originalGroup != 'object') {\n\t\t\t\toriginalGroup = {name: originalGroup};\n\t\t\t}\n\n\t\t\tgroup.name = originalGroup.name;\n\t\t\tgroup.checkPull = toFn(originalGroup.pull, true);\n\t\t\tgroup.checkPut = toFn(originalGroup.put);\n\t\t\tgroup.revertClone = originalGroup.revertClone;\n\n\t\t\toptions.group = group;\n\t\t},\n\n\t\t_checkAlignment = function(evt) {\n\t\t\tif (!dragEl || !dragEl.parentNode) return;\n\t\t\tdragEl.parentNode[expando] && dragEl.parentNode[expando]._computeIsAligned(evt);\n\t\t},\n\n\t\t_isTrueParentSortable = function(el, target) {\n\t\t\tvar trueParent = target;\n\t\t\twhile (!trueParent[expando]) {\n\t\t\t\ttrueParent = trueParent.parentNode;\n\t\t\t}\n\n\t\t\treturn el === trueParent;\n\t\t},\n\n\t\t_artificalBubble = function(sortable, originalEvt, method) {\n\t\t\t// Artificial IE bubbling\n\t\t\tvar nextParent = sortable.parentNode;\n\t\t\twhile (nextParent && !nextParent[expando]) {\n\t\t\t\tnextParent = nextParent.parentNode;\n\t\t\t}\n\n\t\t\tif (nextParent) {\n\t\t\t\tnextParent[expando][method](_extend(originalEvt, {\n\t\t\t\t\tartificialBubble: true\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\n\t\t_hideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t}\n\t\t},\n\n\t\t_unhideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t}\n\t\t};\n\n\n\t// #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\tdocument.addEventListener('click', function(evt) {\n\t\tif (ignoreNextClick) {\n\t\t\tevt.preventDefault();\n\t\t\tevt.stopPropagation && evt.stopPropagation();\n\t\t\tevt.stopImmediatePropagation && evt.stopImmediatePropagation();\n\t\t\tignoreNextClick = false;\n\t\t\treturn false;\n\t\t}\n\t}, true);\n\n\tvar nearestEmptyInsertDetectEvent = function(evt) {\n\t\tevt = evt.touches ? evt.touches[0] : evt;\n\t\tif (dragEl) {\n\t\t\tvar nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n\t\t\tif (nearest) {\n\t\t\t\tnearest[expando]._onDragOver({\n\t\t\t\t\tclientX: evt.clientX,\n\t\t\t\t\tclientY: evt.clientY,\n\t\t\t\t\ttarget: nearest,\n\t\t\t\t\trootEl: nearest\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\t// We do not want this to be triggered if completed (bubbling canceled), so only define it here\n\t_on(document, 'dragover', nearestEmptyInsertDetectEvent);\n\t_on(document, 'mousemove', nearestEmptyInsertDetectEvent);\n\t_on(document, 'touchmove', nearestEmptyInsertDetectEvent);\n\n\t/**\n\t * @class  Sortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction Sortable(el, options) {\n\t\tif (!(el && el.nodeType && el.nodeType === 1)) {\n\t\t\tthrow 'Sortable: `el` must be HTMLElement, not ' + {}.toString.call(el);\n\t\t}\n\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: null,\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tbubbleScroll: true,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? '>li' : '>*',\n\t\t\tswapThreshold: 1, // percentage; 0 <= x <= 1\n\t\t\tinvertSwap: false, // invert always\n\t\t\tinvertedSwapThreshold: null, // will be set to same as swapThreshold if default\n\t\t\tremoveCloneOnHide: true,\n\t\t\tdirection: function() {\n\t\t\t\treturn _detectDirection(el, this.options);\n\t\t\t},\n\t\t\tghostClass: 'sortable-ghost',\n\t\t\tchosenClass: 'sortable-chosen',\n\t\t\tdragClass: 'sortable-drag',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tpreventOnFilter: true,\n\t\t\tanimation: 0,\n\t\t\teasing: null,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\ttouchStartThreshold: parseInt(window.devicePixelRatio, 10) || 1,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'sortable-fallback',\n\t\t\tfallbackOnBody: false,\n\t\t\tfallbackTolerance: 0,\n\t\t\tfallbackOffset: {x: 0, y: 0},\n\t\t\tsupportPointer: Sortable.supportPointer !== false && (\n\t\t\t\t('PointerEvent' in window) ||\n\t\t\t\twindow.navigator && ('msPointerEnabled' in window.navigator) // microsoft\n\t\t\t),\n\t\t\temptyInsertThreshold: 5\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\t// Bind events\n\t\tif (options.supportPointer) {\n\t\t\t_on(el, 'pointerdown', this._onTapStart);\n\t\t} else {\n\t\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t\t_on(el, 'touchstart', this._onTapStart);\n\t\t}\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\tsortables.push(this.el);\n\n\t\t// Restore sorting\n\t\toptions.store && options.store.get && this.sort(options.store.get(this) || []);\n\t}\n\n\tSortable.prototype = /** @lends Sortable.prototype */ {\n\t\tconstructor: Sortable,\n\n\t\t_computeIsAligned: function(evt) {\n\t\t\tvar target;\n\n\t\t\tif (ghostEl && !supportCssPointerEvents) {\n\t\t\t\t_hideGhostForTarget();\n\t\t\t\ttarget = document.elementFromPoint(evt.clientX, evt.clientY);\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t} else {\n\t\t\t\ttarget = evt.target;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, this.options.draggable, this.el, false);\n\t\t\tif (_alignedSilent) return;\n\t\t\tif (!dragEl || dragEl.parentNode !== this.el) return;\n\n\t\t\tvar children = this.el.children;\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t// Don't change for target in case it is changed to aligned before onDragOver is fired\n\t\t\t\tif (_closest(children[i], this.options.draggable, this.el, false) && children[i] !== target) {\n\t\t\t\t\tchildren[i].sortableMouseAligned = _isClientInRowColumn(evt.clientX, evt.clientY, children[i], this._getDirection(evt, null), this.options);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Used for nulling last target when not in element, nothing to do with checking if aligned\n\t\t\tif (!_closest(target, this.options.draggable, this.el, true)) {\n\t\t\t\tlastTarget = null;\n\t\t\t}\n\n\t\t\t_alignedSilent = true;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_alignedSilent = false;\n\t\t\t}, 30);\n\n\t\t},\n\n\t\t_getDirection: function(evt, target) {\n\t\t\treturn (typeof this.options.direction === 'function') ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n\t\t},\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tif (!evt.cancelable) return;\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\tpreventOnFilter = options.preventOnFilter,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = evt.target.shadowRoot && ((evt.path && evt.path[0]) || (evt.composedPath && evt.composedPath()[0])) || target,\n\t\t\t\tfilter = options.filter,\n\t\t\t\tstartIndex;\n\n\t\t\t_saveInputCheckedState(el);\n\n\n\t\t\t// IE: Calls events in capture mode if event element is nested. This ensures only correct element's _onTapStart goes through.\n\t\t\t// This process is also done in _onDragOver\n\t\t\tif (IE11OrLess && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\t\t\tif (dragEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button and enabled\n\t\t\t}\n\n\t\t\t// cancel dnd if original target is content editable\n\t\t\tif (originalTarget.isContentEditable) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, options.draggable, el, false);\n\n\t\t\tif (!target) {\n\t\t\t\tif (IE11OrLess) {\n\t\t\t\t\t_artificalBubble(el, evt, '_onTapStart');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (lastDownEl === target) {\n\t\t\t\t// Ignoring duplicate `down`\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get the index of the dragged element within its parent\n\t\t\tstartIndex = _index(target, options.draggable);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, el, startIndex);\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el, false);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, el, startIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el, false)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target, startIndex);\n\t\t},\n\n\n\t\t_handleAutoScroll: function(evt, fallback) {\n\t\t\tif (!dragEl || !this.options.scroll) return;\n\t\t\tvar x = evt.clientX,\n\t\t\t\ty = evt.clientY,\n\n\t\t\t\telem = document.elementFromPoint(x, y),\n\t\t\t\t_this = this;\n\n\t\t\t// IE does not seem to have native autoscroll,\n\t\t\t// Edge's autoscroll seems too conditional,\n\t\t\t// Firefox and Chrome are good\n\t\t\tif (fallback || Edge || IE11OrLess) {\n\t\t\t\t_autoScroll(evt, _this.options, elem, fallback);\n\n\t\t\t\t// Listener for pointer element change\n\t\t\t\tvar ogElemScroller = _getParentAutoScrollElement(elem, true);\n\t\t\t\tif (\n\t\t\t\t\tscrolling &&\n\t\t\t\t\t(\n\t\t\t\t\t\t!pointerElemChangedInterval ||\n\t\t\t\t\t\tx !== lastPointerElemX ||\n\t\t\t\t\t\ty !== lastPointerElemY\n\t\t\t\t\t)\n\t\t\t\t) {\n\n\t\t\t\t\tpointerElemChangedInterval && clearInterval(pointerElemChangedInterval);\n\t\t\t\t\t// Detect for pointer elem change, emulating native DnD behaviour\n\t\t\t\t\tpointerElemChangedInterval = setInterval(function() {\n\t\t\t\t\t\tif (!dragEl) return;\n\t\t\t\t\t\t// could also check if scroll direction on newElem changes due to parent autoscrolling\n\t\t\t\t\t\tvar newElem = _getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\t\t\t\t\t\tif (newElem !== ogElemScroller) {\n\t\t\t\t\t\t\togElemScroller = newElem;\n\t\t\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\t\t\t_autoScroll(evt, _this.options, ogElemScroller, fallback);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 10);\n\t\t\t\t\tlastPointerElemX = x;\n\t\t\t\t\tlastPointerElemY = y;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n\t\t\t\tif (!_this.options.bubbleScroll || _getParentAutoScrollElement(elem, true) === window) {\n\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_autoScroll(evt, _this.options, _getParentAutoScrollElement(elem, false), false);\n\t\t\t}\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target, /** Number */startIndex) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tlastDownEl = target;\n\t\t\t\tactiveGroup = options.group;\n\t\t\t\toldIndex = startIndex;\n\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: (touch || evt).clientX,\n\t\t\t\t\tclientY: (touch || evt).clientY\n\t\t\t\t};\n\n\t\t\t\tthis._lastX = (touch || evt).clientX;\n\t\t\t\tthis._lastY = (touch || evt).clientY;\n\n\t\t\t\tdragEl.style['will-change'] = 'all';\n\t\t\t\t// undo animation if needed\n\t\t\t\tdragEl.style.transition = '';\n\t\t\t\tdragEl.style.transform = '';\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDrag();\n\n\t\t\t\t\t// Make the element draggable\n\t\t\t\t\tdragEl.draggable = _this.nativeDraggable;\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(evt, touch);\n\n\t\t\t\t\t// Drag start event\n\t\t\t\t\t_dispatchEvent(_this, rootEl, 'choose', dragEl, rootEl, rootEl, oldIndex);\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, options.chosenClass, true);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\tif (options.supportPointer) {\n\t\t\t\t\t_on(ownerDocument, 'pointerup', _this._onDrop);\n\t\t\t\t} else {\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\t\t\t\t}\n\n\t\t\t\tif (options.delay) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\toptions.supportPointer && _on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_delayedDragTouchMoveHandler: function (/** TouchEvent|PointerEvent **/e) {\n\t\t\tvar touch = e.touches ? e.touches[0] : e;\n\t\t\tif (min(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY))\n\t\t\t\t\t>= this.options.touchStartThreshold\n\t\t\t) {\n\t\t\t\tthis._disableDelayedDrag();\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Event */evt, /** Touch */touch) {\n\t\t\ttouch = touch || (evt.pointerType == 'touch' ? evt : null);\n\n\t\t\tif (!this.nativeDraggable || touch) {\n\t\t\t\tif (this.options.supportPointer) {\n\t\t\t\t\t_on(document, 'pointermove', this._onTouchMove);\n\t\t\t\t} else if (touch) {\n\t\t\t\t\t_on(document, 'touchmove', this._onTouchMove);\n\t\t\t\t} else {\n\t\t\t\t\t_on(document, 'mousemove', this._onTouchMove);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\t// Timeout neccessary for IE9\n\t\t\t\t\t_nextTick(function () {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function (fallback) {\n\t\t\tawaitingDragStarted = false;\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t_on(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t\t_on(document, 'dragover', _checkAlignment);\n\t\t\t\t}\n\t\t\t\tvar options = this.options;\n\n\t\t\t\t// Apply effect\n\t\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, false);\n\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\n\t\t\t\t// In case dragging an animated element\n\t\t\t\t_css(dragEl, 'transform', '');\n\n\t\t\t\tSortable.active = this;\n\n\t\t\t\tfallback && this._appendGhost();\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, rootEl, oldIndex);\n\t\t\t} else {\n\t\t\t\tthis._nulling();\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function (bypassLastTouchCheck) {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY && !bypassLastTouchCheck) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\t_hideGhostForTarget();\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\tvar parent = target;\n\n\t\t\t\twhile (target && target.shadowRoot) {\n\t\t\t\t\ttarget = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\t\tparent = target;\n\t\t\t\t}\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando]) {\n\t\t\t\t\t\t\tvar inserted;\n\n\t\t\t\t\t\t\tinserted = parent[expando]._onDragOver({\n\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (inserted && !this.options.dragoverBubble) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(touchEvt);\n\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt) {\n\t\t\tif (tapEvt) {\n\t\t\t\tvar\toptions = this.options,\n\t\t\t\t\tfallbackTolerance = options.fallbackTolerance,\n\t\t\t\t\tfallbackOffset = options.fallbackOffset,\n\t\t\t\t\ttouch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tmatrix = ghostEl && _matrix(ghostEl),\n\t\t\t\t\tscaleX = ghostEl && matrix && matrix.a,\n\t\t\t\t\tscaleY = ghostEl && matrix && matrix.d,\n\t\t\t\t\tdx = ((touch.clientX - tapEvt.clientX) + fallbackOffset.x) / (scaleX ? scaleX : 1),\n\t\t\t\t\tdy = ((touch.clientY - tapEvt.clientY) + fallbackOffset.y) / (scaleY ? scaleY : 1),\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!Sortable.active && !awaitingDragStarted) {\n\t\t\t\t\tif (fallbackTolerance &&\n\t\t\t\t\t\tmin(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._onDragStart(evt, true);\n\t\t\t\t}\n\n\t\t\t\tthis._handleAutoScroll(touch, true);\n\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar rect = _getRect(dragEl, this.options.fallbackOnBody ? document.body : rootEl, true),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\toptions = this.options;\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, options.fallbackClass, true);\n\t\t\t\t_toggleClass(ghostEl, options.dragClass, true);\n\n\t\t\t\t_css(ghostEl, 'box-sizing', 'border-box');\n\t\t\t\t_css(ghostEl, 'margin', 0);\n\t\t\t\t_css(ghostEl, 'top', rect.top);\n\t\t\t\t_css(ghostEl, 'left', rect.left);\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', 'fixed');\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\toptions.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/fallback) {\n\t\t\tvar _this = this;\n\t\t\tvar dataTransfer = evt.dataTransfer;\n\t\t\tvar options = _this.options;\n\n\t\t\t// Setup clone\n\t\t\tcloneEl = _clone(dragEl);\n\n\t\t\tcloneEl.draggable = false;\n\t\t\tcloneEl.style['will-change'] = '';\n\n\t\t\tthis._hideClone();\n\n\t\t\t_toggleClass(cloneEl, _this.options.chosenClass, false);\n\n\n\t\t\t// #1143: IFrame support workaround\n\t\t\t_this._cloneId = _nextTick(function () {\n\t\t\t\tif (!_this.options.removeCloneOnHide) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t}\n\t\t\t\t_dispatchEvent(_this, rootEl, 'clone', dragEl);\n\t\t\t});\n\n\n\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, true);\n\n\t\t\t// Set proper drop events\n\t\t\tif (fallback) {\n\t\t\t\tignoreNextClick = true;\n\t\t\t\t_this._loopId = setInterval(_this._emulateDragOver, 50);\n\t\t\t} else {\n\t\t\t\t// Undo what was set in _prepareDragStart before drag started\n\t\t\t\t_off(document, 'mouseup', _this._onDrop);\n\t\t\t\t_off(document, 'touchend', _this._onDrop);\n\t\t\t\t_off(document, 'touchcancel', _this._onDrop);\n\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(_this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', _this);\n\n\t\t\t\t// #1276 fix:\n\t\t\t\t_css(dragEl, 'transform', 'translateZ(0)');\n\t\t\t}\n\n\t\t\tawaitingDragStarted = true;\n\n\t\t\t_this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback));\n\t\t\t_on(document, 'selectstart', _this);\n\t\t},\n\n\t\t// Returns true - if no further action is needed (either inserted or another condition)\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget = evt.target,\n\t\t\t\tdragRect,\n\t\t\t\ttargetRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tactiveSortable = Sortable.active,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tcanSort = options.sort,\n\t\t\t\t_this = this;\n\n\t\t\tif (_silent) return;\n\n\t\t\t// IE event order fix\n\t\t\tif (IE11OrLess && !evt.rootEl && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Return invocation when no further action is needed in another sortable\n\t\t\tfunction completed() {\n\t\t\t\tif (activeSortable) {\n\t\t\t\t\t// Set ghost class to new sortable's ghost class\n\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\t\t\t\t}\n\n\t\t\t\tif (putSortable !== _this && _this !== Sortable.active) {\n\t\t\t\t\tputSortable = _this;\n\t\t\t\t} else if (_this === Sortable.active) {\n\t\t\t\t\tputSortable = null;\n\t\t\t\t}\n\n\n\t\t\t\t// Null lastTarget if it is not inside a previously swapped element\n\t\t\t\tif ((target === dragEl && !dragEl.animated) || (target === el && !target.animated)) {\n\t\t\t\t\tlastTarget = null;\n\t\t\t\t}\n\t\t\t\t// no bubbling and not fallback\n\t\t\t\tif (!options.dragoverBubble && !evt.rootEl && target !== document) {\n\t\t\t\t\t_this._handleAutoScroll(evt);\n\t\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(evt);\n\t\t\t\t}\n\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Call when dragEl has been inserted\n\t\t\tfunction changed() {\n\t\t\t\t_dispatchEvent(_this, rootEl, 'change', target, el, rootEl, oldIndex, _index(dragEl, options.draggable), evt);\n\t\t\t}\n\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\n\n\t\t\tmoved = true;\n\n\t\t\ttarget = _closest(target, options.draggable, el, true);\n\n\t\t\t// target is dragEl or target is animated\n\t\t\tif (!!_closest(evt.target, null, dragEl, true) || target.animated) {\n\t\t\t\treturn completed();\n\t\t\t}\n\n\t\t\tif (target !== dragEl) {\n\t\t\t\tignoreNextClick = false;\n\t\t\t}\n\n\t\t\tif (activeSortable && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t: (\n\t\t\t\t\t\tputSortable === this ||\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t(this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) &&\n\t\t\t\t\t\t\tgroup.checkPut(this, activeSortable, dragEl, evt)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tvar axis = this._getDirection(evt, target);\n\n\t\t\t\tdragRect = _getRect(dragEl);\n\n\t\t\t\tif (revert) {\n\t\t\t\t\tthis._hideClone();\n\t\t\t\t\tparentEl = rootEl; // actualization\n\n\t\t\t\t\tif (nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, nextEl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn completed();\n\t\t\t\t}\n\n\t\t\t\tif ((el.children.length === 0) || (el.children[0] === ghostEl) ||\n\t\t\t\t\t_ghostIsLast(evt, axis, el) && !dragEl.animated\n\t\t\t\t) {\n\t\t\t\t\t//assign target only if condition is true\n\t\t\t\t\tif (el.children.length !== 0 && el.children[0] !== ghostEl && el === evt.target) {\n\t\t\t\t\t\ttarget = _lastChild(el);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\ttargetRect = _getRect(target);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\trealDragElRect = null;\n\n\t\t\t\t\t\tchanged();\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\ttarget && this._animate(targetRect, target);\n\t\t\t\t\t\treturn completed();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && target !== dragEl && target.parentNode === el) {\n\t\t\t\t\tvar direction = 0,\n\t\t\t\t\t\ttargetBeforeFirstSwap,\n\t\t\t\t\t\taligned = target.sortableMouseAligned,\n\t\t\t\t\t\tdifferentLevel = dragEl.parentNode !== el,\n\t\t\t\t\t\tscrolledPastTop = _isScrolledPast(target, axis === 'vertical' ? 'top' : 'left');\n\n\t\t\t\t\tif (lastTarget !== target) {\n\t\t\t\t\t\tlastMode = null;\n\t\t\t\t\t\ttargetBeforeFirstSwap = _getRect(target)[axis === 'vertical' ? 'top' : 'left'];\n\t\t\t\t\t\tpastFirstInvertThresh = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Reference: https://www.lucidchart.com/documents/view/10fa0e93-e362-4126-aca2-b709ee56bd8b/0\n\t\t\t\t\tif (\n\t\t\t\t\t\t_isElInRowColumn(dragEl, target, axis) && aligned ||\n\t\t\t\t\t\tdifferentLevel ||\n\t\t\t\t\t\tscrolledPastTop ||\n\t\t\t\t\t\toptions.invertSwap ||\n\t\t\t\t\t\tlastMode === 'insert' ||\n\t\t\t\t\t\t// Needed, in the case that we are inside target and inserted because not aligned... aligned will stay false while inside\n\t\t\t\t\t\t// and lastMode will change to 'insert', but we must swap\n\t\t\t\t\t\tlastMode === 'swap'\n\t\t\t\t\t) {\n\t\t\t\t\t\t// New target that we will be inside\n\t\t\t\t\t\tif (lastMode !== 'swap') {\n\t\t\t\t\t\t\tisCircumstantialInvert = options.invertSwap || differentLevel || scrolling || scrolledPastTop;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdirection = _getSwapDirection(evt, target, axis,\n\t\t\t\t\t\t\toptions.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold,\n\t\t\t\t\t\t\tisCircumstantialInvert,\n\t\t\t\t\t\t\tlastTarget === target);\n\t\t\t\t\t\tlastMode = 'swap';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Insert at position\n\t\t\t\t\t\tdirection = _getInsertDirection(target, options);\n\t\t\t\t\t\tlastMode = 'insert';\n\t\t\t\t\t}\n\t\t\t\t\tif (direction === 0) return completed();\n\n\t\t\t\t\trealDragElRect = null;\n\t\t\t\t\tlastTarget = target;\n\n\t\t\t\t\tlastDirection = direction;\n\n\t\t\t\t\ttargetRect = _getRect(target);\n\n\t\t\t\t\tvar nextSibling = target.nextElementSibling,\n\t\t\t\t\t\tafter = false;\n\n\t\t\t\t\tafter = direction === 1;\n\n\t\t\t\t\tvar moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\t// must be done before animation\n\t\t\t\t\t\tif (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n\t\t\t\t\t\t\ttargetMoveDistance = abs(targetBeforeFirstSwap - _getRect(target)[axis === 'vertical' ? 'top' : 'left']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchanged();\n\t\t\t\t\t\t!differentLevel && this._animate(targetRect, target);\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\n\t\t\t\t\t\treturn completed();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (el.contains(dragEl)) {\n\t\t\t\t\treturn completed();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (IE11OrLess && !evt.rootEl) {\n\t\t\t\t_artificalBubble(el, evt, '_onDragOver');\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = _getRect(target);\n\n\t\t\t\tif (target === dragEl) {\n\t\t\t\t\trealDragElRect = currentRect;\n\t\t\t\t}\n\n\t\t\t\tif (prevRect.nodeType === 1) {\n\t\t\t\t\tprevRect = _getRect(prevRect);\n\t\t\t\t}\n\n\t\t\t\t// Check if actually moving position\n\t\t\t\tif ((prevRect.left + prevRect.width / 2) !== (currentRect.left + currentRect.width / 2)\n\t\t\t\t\t|| (prevRect.top + prevRect.height / 2) !== (currentRect.top + currentRect.height / 2)\n\t\t\t\t) {\n\t\t\t\t\tvar matrix = _matrix(this.el),\n\t\t\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t\t+ (prevRect.left - currentRect.left) / (scaleX ? scaleX : 1) + 'px,'\n\t\t\t\t\t\t+ (prevRect.top - currentRect.top) / (scaleY ? scaleY : 1) + 'px,0)'\n\t\t\t\t\t);\n\n\t\t\t\t\tforRepaintDummy = target.offsetWidth; // repaint\n\t\t\t\t\t_css(target, 'transition', 'transform ' + ms + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n\t\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\t\t\t\t}\n\n\t\t\t\t(typeof target.animated === 'number') && clearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(document, 'pointermove', this._onTouchMove);\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointerup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t\t_off(document, 'selectstart', this);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\t\t\tawaitingDragStarted = false;\n\t\t\tscrolling = false;\n\t\t\tisCircumstantialInvert = false;\n\t\t\tpastFirstInvertThresh = false;\n\n\t\t\tclearInterval(this._loopId);\n\n\t\t\tclearInterval(pointerElemChangedInterval);\n\t\t\t_clearAutoScrolls();\n\t\t\t_cancelThrottle();\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t_cancelNextTick(this._cloneId);\n\t\t\t_cancelNextTick(this._dragStartId);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t\t_off(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t_off(document, 'dragover', _checkAlignment);\n\t\t\t}\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (rootEl === parentEl || (putSortable && putSortable.lastPutMode !== 'clone')) {\n\t\t\t\t\t// Remove clone\n\t\t\t\t\tcloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\t\t\t\t\tdragEl.style['will-change'] = '';\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\t// Drag stop event\n\t\t\t\t\t_dispatchEvent(this, rootEl, 'unchoose', dragEl, parentEl, rootEl, oldIndex, null, evt);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tputSortable && putSortable.save();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Sortable.active) {\n\t\t\t\t\t\t/* jshint eqnull:true */\n\t\t\t\t\t\tif (newIndex == null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tthis._nulling();\n\t\t},\n\n\t\t_nulling: function() {\n\t\t\trootEl =\n\t\t\tdragEl =\n\t\t\tparentEl =\n\t\t\tghostEl =\n\t\t\tnextEl =\n\t\t\tcloneEl =\n\t\t\tlastDownEl =\n\n\t\t\tscrollEl =\n\t\t\tscrollParentEl =\n\t\t\tautoScrolls.length =\n\n\t\t\tpointerElemChangedInterval =\n\t\t\tlastPointerElemX =\n\t\t\tlastPointerElemY =\n\n\t\t\ttapEvt =\n\t\t\ttouchEvt =\n\n\t\t\tmoved =\n\t\t\tnewIndex =\n\t\t\toldIndex =\n\n\t\t\tlastTarget =\n\t\t\tlastDirection =\n\n\t\t\tforRepaintDummy =\n\t\t\trealDragElRect =\n\n\t\t\tputSortable =\n\t\t\tactiveGroup =\n\t\t\tSortable.active = null;\n\n\t\t\tsavedInputChecked.forEach(function (el) {\n\t\t\t\tel.checked = true;\n\t\t\t});\n\n\t\t\tsavedInputChecked.length = 0;\n\t\t},\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tswitch (evt.type) {\n\t\t\t\tcase 'drop':\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis._onDrop(evt);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'dragenter':\n\t\t\t\tcase 'dragover':\n\t\t\t\t\tif (dragEl) {\n\t\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'selectstart':\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el, false)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl, false)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el, false);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\t\t\t_off(el, 'pointerdown', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\tthis._onDrop();\n\n\t\t\tsortables.splice(sortables.indexOf(this.el), 1);\n\n\t\t\tthis.el = el = null;\n\t\t},\n\n\t\t_hideClone: function() {\n\t\t\tif (!cloneEl.cloneHidden) {\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\tcloneEl.cloneHidden = true;\n\t\t\t\tif (cloneEl.parentNode && this.options.removeCloneOnHide) {\n\t\t\t\t\tcloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_showClone: function(putSortable) {\n\t\t\tif (putSortable.lastPutMode !== 'clone') {\n\t\t\t\tthis._hideClone();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (cloneEl.cloneHidden) {\n\t\t\t\t// show clone at dragEl or original position\n\t\t\t\tif (rootEl.contains(dragEl) && !this.options.group.revertClone) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t} else if (nextEl) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, nextEl);\n\t\t\t\t} else {\n\t\t\t\t\trootEl.appendChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (this.options.group.revertClone) {\n\t\t\t\t\tthis._animate(dragEl, cloneEl);\n\t\t\t\t}\n\t\t\t\t_css(cloneEl, 'display', '');\n\t\t\t\tcloneEl.cloneHidden = false;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\n\t\t\tdo {\n\t\t\t\tif (\n\t\t\t\t\tselector != null &&\n\t\t\t\t\t(\n\t\t\t\t\t\tselector[0] === '>' && el.parentNode === ctx && _matches(el, selector.substring(1)) ||\n\t\t\t\t\t\t_matches(el, selector)\n\t\t\t\t\t) ||\n\t\t\t\t\tincludeCTX && el === ctx\n\t\t\t\t) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\n\t\t\t\tif (el === ctx) break;\n\t\t\t\t/* jshint boss:true */\n\t\t\t} while (el = _getParentOrHost(el));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _getParentOrHost(el) {\n\t\treturn (el.host && el !== document && el.host.nodeType)\n\t\t\t? el.host\n\t\t\t: el.parentNode;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.cancelable && evt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el && name) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style) && prop.indexOf('webkit') === -1) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _matrix(el) {\n\t\tvar appliedTransforms = '';\n\t\tdo {\n\t\t\tvar transform = _css(el, 'transform');\n\n\t\t\tif (transform && transform !== 'none') {\n\t\t\t\tappliedTransforms = transform + ' ' + appliedTransforms;\n\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t} while (el = el.parentNode);\n\n\t\tif (window.DOMMatrix) {\n\t\t\treturn new DOMMatrix(appliedTransforms);\n\t\t} else if (window.WebKitCSSMatrix) {\n\t\t\treturn new WebKitCSSMatrix(appliedTransforms);\n\t\t} else if (window.CSSMatrix) {\n\t\t\treturn new CSSMatrix(appliedTransforms);\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(sortable, rootEl, name, targetEl, toEl, fromEl, startIndex, newIndex, originalEvt) {\n\t\tsortable = (sortable || rootEl[expando]);\n\t\tvar evt,\n\t\t\toptions = sortable.options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent(name, {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, true);\n\t\t}\n\n\t\tevt.to = toEl || rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\tevt.originalEvent = originalEvt;\n\n\t\tif (rootEl) {\n\t\t\trootEl.dispatchEvent(evt);\n\t        }\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(sortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvt, willInsertAfter) {\n\t\tvar evt,\n\t\t\tsortable = fromEl[expando],\n\t\t\tonMoveFn = sortable.options.onMove,\n\t\t\tretVal;\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent('move', {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent('move', true, true);\n\t\t}\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || _getRect(toEl);\n\t\tevt.willInsertAfter = willInsertAfter;\n\n\t\tevt.originalEvent = originalEvt;\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(sortable, evt, originalEvt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\t/**\n\t * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n\t * and non-draggable elements\n\t * @param  {HTMLElement} el       The parent element\n\t * @param  {Number} childNum      The index of the child\n\t * @param  {Object} options       Parent Sortable's options\n\t * @return {HTMLElement}          The child at index childNum, or null if not found\n\t */\n\tfunction _getChild(el, childNum, options) {\n\t\tvar currentChild = 0,\n\t\t\ti = 0,\n\t\t\tchildren = el.children;\n\n\t\twhile (i < children.length) {\n\t\t\tif (\n\t\t\t\tchildren[i].style.display !== 'none' &&\n\t\t\t\tchildren[i] !== ghostEl &&\n\t\t\t\tchildren[i] !== dragEl &&\n\t\t\t\t_closest(children[i], options.draggable, el, false)\n\t\t\t) {\n\t\t\t\tif (currentChild === childNum) {\n\t\t\t\t\treturn children[i];\n\t\t\t\t}\n\t\t\t\tcurrentChild++;\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n\t * @param  {HTMLElement} el       Parent element\n\t * @return {HTMLElement}          The last child, ignoring ghostEl\n\t */\n\tfunction _lastChild(el) {\n\t\tvar last = el.lastElementChild;\n\n\t\twhile (last === ghostEl || last.style.display === 'none') {\n\t\t\tlast = last.previousElementSibling;\n\n\t\t\tif (!last) break;\n\t\t}\n\n\t\treturn last || null;\n\t}\n\n\tfunction _ghostIsLast(evt, axis, el) {\n\t\tvar elRect = _getRect(_lastChild(el)),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\tmouseOnOppAxis = axis === 'vertical' ? evt.clientX : evt.clientY,\n\t\t\ttargetS2 = axis === 'vertical' ? elRect.bottom : elRect.right,\n\t\t\ttargetS1Opp = axis === 'vertical' ? elRect.left : elRect.top,\n\t\t\ttargetS2Opp = axis === 'vertical' ? elRect.right : elRect.bottom,\n\t\t\tspacer = 10;\n\n\t\treturn (\n\t\t\taxis === 'vertical' ?\n\t\t\t\t(mouseOnOppAxis > targetS2Opp + spacer || mouseOnOppAxis <= targetS2Opp && mouseOnAxis > targetS2 && mouseOnOppAxis >= targetS1Opp) :\n\t\t\t\t(mouseOnAxis > targetS2 && mouseOnOppAxis > targetS1Opp || mouseOnAxis <= targetS2 && mouseOnOppAxis > targetS2Opp + spacer)\n\t\t);\n\t}\n\n\tfunction _getSwapDirection(evt, target, axis, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n\t\tvar targetRect = _getRect(target),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\ttargetLength = axis === 'vertical' ? targetRect.height : targetRect.width,\n\t\t\ttargetS1 = axis === 'vertical' ? targetRect.top : targetRect.left,\n\t\t\ttargetS2 = axis === 'vertical' ? targetRect.bottom : targetRect.right,\n\t\t\tdragRect = _getRect(dragEl),\n\t\t\tinvert = false;\n\n\n\t\tif (!invertSwap) {\n\t\t\t// Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n\t\t\tif (isLastTarget && targetMoveDistance < targetLength * swapThreshold) { // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n\t\t\t\t// check if past first invert threshold on side opposite of lastDirection\n\t\t\t\tif (!pastFirstInvertThresh &&\n\t\t\t\t\t(lastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\t// past first invert threshold, do not restrict inverted threshold to dragEl shadow\n\t\t\t\t\tpastFirstInvertThresh = true;\n\t\t\t\t}\n\n\t\t\t\tif (!pastFirstInvertThresh) {\n\t\t\t\t\tvar dragS1 = axis === 'vertical' ? dragRect.top : dragRect.left,\n\t\t\t\t\t\tdragS2 = axis === 'vertical' ? dragRect.bottom : dragRect.right;\n\t\t\t\t\t// dragEl shadow (target move distance shadow)\n\t\t\t\t\tif (\n\t\t\t\t\t\tlastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS2 - targetMoveDistance\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn lastDirection * -1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tinvert = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Regular\n\t\t\t\tif (\n\t\t\t\t\tmouseOnAxis > targetS1 + (targetLength * (1 - swapThreshold) / 2) &&\n\t\t\t\t\tmouseOnAxis < targetS2 - (targetLength * (1 - swapThreshold) / 2)\n\t\t\t\t) {\n\t\t\t\t\treturn ((mouseOnAxis > targetS1 + targetLength / 2) ? -1 : 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinvert = invert || invertSwap;\n\n\t\tif (invert) {\n\t\t\t// Invert of regular\n\t\t\tif (\n\t\t\t\tmouseOnAxis < targetS1 + (targetLength * invertedSwapThreshold / 2) ||\n\t\t\t\tmouseOnAxis > targetS2 - (targetLength * invertedSwapThreshold / 2)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn ((mouseOnAxis > targetS1 + targetLength / 2) ? 1 : -1);\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Gets the direction dragEl must be swapped relative to target in order to make it\n\t * seem that dragEl has been \"inserted\" into that element's position\n\t * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\n\t * @param  {Object} options           options of the parent sortable\n\t * @return {Number}                   Direction dragEl must be swapped\n\t */\n\tfunction _getInsertDirection(target, options) {\n\t\tvar dragElIndex = _index(dragEl, options.draggable),\n\t\t\ttargetIndex = _index(target, options.draggable);\n\n\t\tif (dragElIndex < targetIndex) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent for a selected set of\n\t * elements\n\t * @param  {HTMLElement} el\n\t * @param  {selector} selector\n\t * @return {number}\n\t */\n\tfunction _index(el, selector) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && el !== cloneEl) {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _matches(/**HTMLElement*/el, /**String*/selector) {\n\t\tif (el) {\n\t\t\ttry {\n\t\t\t\tif (el.matches) {\n\t\t\t\t\treturn el.matches(selector);\n\t\t\t\t} else if (el.msMatchesSelector) {\n\t\t\t\t\treturn el.msMatchesSelector(selector);\n\t\t\t\t} else if (el.webkitMatchesSelector) {\n\t\t\t\t\treturn el.webkitMatchesSelector(selector);\n\t\t\t\t}\n\t\t\t} catch(_) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tvar _throttleTimeout;\n\tfunction _throttle(callback, ms) {\n\t\treturn function () {\n\t\t\tif (!_throttleTimeout) {\n\t\t\t\tvar args = arguments,\n\t\t\t\t\t_this = this;\n\n\t\t\t\t_throttleTimeout = setTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\t_throttleTimeout = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _cancelThrottle() {\n\t\tclearTimeout(_throttleTimeout);\n\t\t_throttleTimeout = void 0;\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\tfunction _clone(el) {\n\t\tif (Polymer && Polymer.dom) {\n\t\t\treturn Polymer.dom(el).cloneNode(true);\n\t\t}\n\t\telse if ($) {\n\t\t\treturn $(el).clone(true)[0];\n\t\t}\n\t\telse {\n\t\t\treturn el.cloneNode(true);\n\t\t}\n\t}\n\n\tfunction _saveInputCheckedState(root) {\n\t\tsavedInputChecked.length = 0;\n\n\t\tvar inputs = root.getElementsByTagName('input');\n\t\tvar idx = inputs.length;\n\n\t\twhile (idx--) {\n\t\t\tvar el = inputs[idx];\n\t\t\tel.checked && savedInputChecked.push(el);\n\t\t}\n\t}\n\n\tfunction _nextTick(fn) {\n\t\treturn setTimeout(fn, 0);\n\t}\n\n\tfunction _cancelNextTick(id) {\n\t\treturn clearTimeout(id);\n\t}\n\n\n\t/**\n\t * Returns the \"bounding client rect\" of given element\n\t * @param  {HTMLElement} el                The element whose boundingClientRect is wanted\n\t * @param  {[HTMLElement]} container       the parent the element will be placed in\n\t * @param  {[Boolean]} adjustForTransform  Whether the rect should compensate for parent's transform\n\t * (used for fixed positioning on el)\n\t * @return {Object}                        The boundingClientRect of el\n\t */\n\tfunction _getRect(el, container, adjustForTransform) {\n\t\tif (!el.getBoundingClientRect && el !== win) return;\n\n\t\tvar elRect,\n\t\t\ttop,\n\t\t\tleft,\n\t\t\tbottom,\n\t\t\tright,\n\t\t\theight,\n\t\t\twidth;\n\n\t\tif (el !== win) {\n\t\t\telRect = el.getBoundingClientRect();\n\t\t\ttop = elRect.top;\n\t\t\tleft = elRect.left;\n\t\t\tbottom = elRect.bottom;\n\t\t\tright = elRect.right;\n\t\t\theight = elRect.height;\n\t\t\twidth = elRect.width;\n\t\t} else {\n\t\t\ttop = 0;\n\t\t\tleft = 0;\n\t\t\tbottom = window.innerHeight;\n\t\t\tright = window.innerWidth;\n\t\t\theight = window.innerHeight;\n\t\t\twidth = window.innerWidth;\n\t\t}\n\n\t\tif (adjustForTransform && el !== win) {\n\t\t\t// Adjust for translate()\n\t\t\tcontainer = container || el.parentNode;\n\n\t\t\t// solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n\t\t\t// Not needed on <= IE11\n\t\t\tif (!IE11OrLess) {\n\t\t\t\tdo {\n\t\t\t\t\tif (container && container.getBoundingClientRect && _css(container, 'transform') !== 'none') {\n\t\t\t\t\t\tvar containerRect = container.getBoundingClientRect();\n\n\t\t\t\t\t\t// Set relative to edges of padding box of container\n\t\t\t\t\t\ttop -= containerRect.top + parseInt(_css(container, 'border-top-width'));\n\t\t\t\t\t\tleft -= containerRect.left + parseInt(_css(container, 'border-left-width'));\n\t\t\t\t\t\tbottom = top + elRect.height;\n\t\t\t\t\t\tright = left + elRect.width;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t} while (container = container.parentNode);\n\t\t\t}\n\n\t\t\t// Adjust for scale()\n\t\t\tvar matrix = _matrix(el),\n\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\tif (matrix) {\n\t\t\t\ttop /= scaleY;\n\t\t\t\tleft /= scaleX;\n\n\t\t\t\twidth /= scaleX;\n\t\t\t\theight /= scaleY;\n\n\t\t\t\tbottom = top + height;\n\t\t\t\tright = left + width;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tleft: left,\n\t\t\tbottom: bottom,\n\t\t\tright: right,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t}\n\n\n\t/**\n\t * Checks if a side of an element is scrolled past a side of it's parents\n\t * @param  {HTMLElement}  el       The element who's side being scrolled out of view is in question\n\t * @param  {String}       side     Side of the element in question ('top', 'left', 'right', 'bottom')\n\t * @return {Boolean}               Whether the element is overflowing the viewport on the given side of it's parent\n\t */\n\tfunction _isScrolledPast(el, side) {\n\t\tvar parent = _getParentAutoScrollElement(parent, true),\n\t\t\telSide = _getRect(el)[side];\n\n\t\t/* jshint boss:true */\n\t\twhile (parent) {\n\t\t\tvar parentSide = _getRect(parent)[side],\n\t\t\t\tvisible;\n\n\t\t\tif (side === 'top' || side === 'left') {\n\t\t\t\tvisible = elSide >= parentSide;\n\t\t\t} else {\n\t\t\t\tvisible = elSide <= parentSide;\n\t\t\t}\n\n\t\t\tif (!visible) return true;\n\n\t\t\tif (parent === win) break;\n\n\t\t\tparent = _getParentAutoScrollElement(parent, false);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t// Fixed #973:\n\t_on(document, 'touchmove', function(evt) {\n\t\tif ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n\t\t\tevt.preventDefault();\n\t\t}\n\t});\n\n\n\t// Export utils\n\tSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el, false);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tclone: _clone,\n\t\tindex: _index,\n\t\tnextTick: _nextTick,\n\t\tcancelNextTick: _cancelNextTick,\n\t\tdetectDirection: _detectDirection,\n\t\tgetChild: _getChild\n\t};\n\n\n\t/**\n\t * Create sortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tSortable.create = function (el, options) {\n\t\treturn new Sortable(el, options);\n\t};\n\n\n\t// Export\n\tSortable.version = '1.8.3';\n\treturn Sortable;\n});\n","'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar Sortable = _interopDefault(require('sortablejs'));\n\nfunction $(expr, con) {\n    return typeof expr === 'string' ?\n        (con || document).querySelector(expr) :\n        expr || null;\n}\n\n$.each = (expr, con) => {\n    return typeof expr === 'string' ?\n        Array.from((con || document).querySelectorAll(expr)) :\n        expr || null;\n};\n\n$.create = (tag, o) => {\n    let element = document.createElement(tag);\n\n    for (let i in o) {\n        let val = o[i];\n\n        if (i === 'inside') {\n            $(val).appendChild(element);\n        } else\n        if (i === 'around') {\n            let ref = $(val);\n            ref.parentNode.insertBefore(element, ref);\n            element.appendChild(ref);\n        } else\n        if (i === 'styles') {\n            if (typeof val === 'object') {\n                Object.keys(val).map(prop => {\n                    element.style[prop] = val[prop];\n                });\n            }\n        } else\n        if (i in element) {\n            element[i] = val;\n        } else {\n            element.setAttribute(i, val);\n        }\n    }\n\n    return element;\n};\n\n$.on = (element, event, selector, callback) => {\n    if (!callback) {\n        callback = selector;\n        $.bind(element, event, callback);\n    } else {\n        $.delegate(element, event, selector, callback);\n    }\n};\n\n$.off = (element, event, handler) => {\n    element.removeEventListener(event, handler);\n};\n\n$.bind = (element, event, callback) => {\n    event.split(/\\s+/).forEach(function (event) {\n        element.addEventListener(event, callback);\n    });\n};\n\n$.delegate = (element, event, selector, callback) => {\n    element.addEventListener(event, function (e) {\n        const delegatedTarget = e.target.closest(selector);\n        if (delegatedTarget) {\n            e.delegatedTarget = delegatedTarget;\n            callback.call(this, e, delegatedTarget);\n        }\n    });\n};\n\n$.unbind = (element, o) => {\n    if (element) {\n        for (let event in o) {\n            let callback = o[event];\n\n            event.split(/\\s+/).forEach(function (event) {\n                element.removeEventListener(event, callback);\n            });\n        }\n    }\n};\n\n$.fire = (target, type, properties) => {\n    let evt = document.createEvent('HTMLEvents');\n\n    evt.initEvent(type, true, true);\n\n    for (let j in properties) {\n        evt[j] = properties[j];\n    }\n\n    return target.dispatchEvent(evt);\n};\n\n$.data = (element, attrs) => { // eslint-disable-line\n    if (!attrs) {\n        return element.dataset;\n    }\n\n    for (const attr in attrs) {\n        element.dataset[attr] = attrs[attr];\n    }\n};\n\n$.style = (elements, styleMap) => { // eslint-disable-line\n\n    if (typeof styleMap === 'string') {\n        return $.getStyle(elements, styleMap);\n    }\n\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    elements.map(element => {\n        for (const prop in styleMap) {\n            element.style[prop] = styleMap[prop];\n        }\n    });\n};\n\n$.removeStyle = (elements, styleProps) => {\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    if (!Array.isArray(styleProps)) {\n        styleProps = [styleProps];\n    }\n\n    elements.map(element => {\n        for (const prop of styleProps) {\n            element.style[prop] = '';\n        }\n    });\n};\n\n$.getStyle = (element, prop) => {\n    if (!prop) {\n        return getComputedStyle(element);\n    }\n\n    let val = getComputedStyle(element)[prop];\n\n    if (['width', 'height'].includes(prop)) {\n        val = parseFloat(val);\n    }\n\n    return val;\n};\n\n$.closest = (selector, element) => {\n    if (!element) return null;\n\n    if (element.matches(selector)) {\n        return element;\n    }\n\n    return $.closest(selector, element.parentNode);\n};\n\n$.inViewport = (el, parentEl) => {\n    const {\n        top,\n        left,\n        bottom,\n        right\n    } = el.getBoundingClientRect();\n    const {\n        top: pTop,\n        left: pLeft,\n        bottom: pBottom,\n        right: pRight\n    } = parentEl.getBoundingClientRect();\n\n    return top >= pTop && left >= pLeft && bottom <= pBottom && right <= pRight;\n};\n\n$.scrollTop = function scrollTop(element, pixels) {\n    requestAnimationFrame(() => {\n        element.scrollTop = pixels;\n    });\n};\n\n$.scrollbarSize = function scrollbarSize() {\n    if (!$.scrollBarSizeValue) {\n        $.scrollBarSizeValue = getScrollBarSize();\n    }\n    return $.scrollBarSizeValue;\n};\n\nfunction getScrollBarSize() {\n    // assume scrollbar width and height would be the same\n\n    // Create the measurement node\n    const scrollDiv = document.createElement('div');\n    $.style(scrollDiv, {\n        width: '100px',\n        height: '100px',\n        overflow: 'scroll',\n        position: 'absolute',\n        top: '-9999px'\n    });\n    document.body.appendChild(scrollDiv);\n\n    // Get the scrollbar width\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n\n    // Delete the DIV\n    document.body.removeChild(scrollDiv);\n\n    return scrollbarWidth;\n}\n\n$.hasVerticalOverflow = function (element) {\n    return element.scrollHeight > element.offsetHeight + 10;\n};\n\n$.hasHorizontalOverflow = function (element) {\n    return element.scrollWidth > element.offsetWidth + 10;\n};\n\n$.measureTextWidth = function (text) {\n    const div = document.createElement('div');\n    div.style.position = 'absolute';\n    div.style.visibility = 'hidden';\n    div.style.height = 'auto';\n    div.style.width = 'auto';\n    div.style.whiteSpace = 'nowrap';\n    div.innerText = text;\n    document.body.appendChild(div);\n    return div.clientWidth + 1;\n};\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nvar isObject_1 = isObject;\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by rollup-plugin-commonjs');\n}\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\nvar _freeGlobal = freeGlobal;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = _freeGlobal || freeSelf || Function('return this')();\n\nvar _root = root;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return _root.Date.now();\n};\n\nvar now_1 = now;\n\n/** Built-in value references. */\nvar Symbol = _root.Symbol;\n\nvar _Symbol = Symbol;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nvar _getRawTag = getRawTag;\n\n/** Used for built-in method references. */\nvar objectProto$1 = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString$1 = objectProto$1.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString$1.call(value);\n}\n\nvar _objectToString = objectToString;\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag$1 && symToStringTag$1 in Object(value))\n    ? _getRawTag(value)\n    : _objectToString(value);\n}\n\nvar _baseGetTag = baseGetTag;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nvar isObjectLike_1 = isObjectLike;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike_1(value) && _baseGetTag(value) == symbolTag);\n}\n\nvar isSymbol_1 = isSymbol;\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol_1(value)) {\n    return NAN;\n  }\n  if (isObject_1(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject_1(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nvar toNumber_1 = toNumber;\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber_1(wait) || 0;\n  if (isObject_1(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber_1(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now_1();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now_1());\n  }\n\n  function debounced() {\n    var time = now_1(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nvar debounce_1 = debounce;\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT$1 = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT$1);\n  }\n  if (isObject_1(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce_1(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nvar throttle_1 = throttle;\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject_1(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = _baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nvar isFunction_1 = isFunction;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = _root['__core-js_shared__'];\n\nvar _coreJsData = coreJsData;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(_coreJsData && _coreJsData.keys && _coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nvar _isMasked = isMasked;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nvar _toSource = toSource;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto$1 = Function.prototype,\n    objectProto$2 = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString$1 = funcProto$1.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$1 = objectProto$2.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject_1(value) || _isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction_1(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(_toSource(value));\n}\n\nvar _baseIsNative = baseIsNative;\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nvar _getValue = getValue;\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = _getValue(object, key);\n  return _baseIsNative(value) ? value : undefined;\n}\n\nvar _getNative = getNative;\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = _getNative(Object, 'create');\n\nvar _nativeCreate = nativeCreate;\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = _nativeCreate ? _nativeCreate(null) : {};\n  this.size = 0;\n}\n\nvar _hashClear = hashClear;\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nvar _hashDelete = hashDelete;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto$3 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$2 = objectProto$3.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (_nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty$2.call(data, key) ? data[key] : undefined;\n}\n\nvar _hashGet = hashGet;\n\n/** Used for built-in method references. */\nvar objectProto$4 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$3 = objectProto$4.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return _nativeCreate ? (data[key] !== undefined) : hasOwnProperty$3.call(data, key);\n}\n\nvar _hashHas = hashHas;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$1 = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (_nativeCreate && value === undefined) ? HASH_UNDEFINED$1 : value;\n  return this;\n}\n\nvar _hashSet = hashSet;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = _hashClear;\nHash.prototype['delete'] = _hashDelete;\nHash.prototype.get = _hashGet;\nHash.prototype.has = _hashHas;\nHash.prototype.set = _hashSet;\n\nvar _Hash = Hash;\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nvar _listCacheClear = listCacheClear;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nvar eq_1 = eq;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq_1(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nvar _assocIndexOf = assocIndexOf;\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nvar _listCacheDelete = listCacheDelete;\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nvar _listCacheGet = listCacheGet;\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return _assocIndexOf(this.__data__, key) > -1;\n}\n\nvar _listCacheHas = listCacheHas;\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nvar _listCacheSet = listCacheSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = _listCacheClear;\nListCache.prototype['delete'] = _listCacheDelete;\nListCache.prototype.get = _listCacheGet;\nListCache.prototype.has = _listCacheHas;\nListCache.prototype.set = _listCacheSet;\n\nvar _ListCache = ListCache;\n\n/* Built-in method references that are verified to be native. */\nvar Map = _getNative(_root, 'Map');\n\nvar _Map = Map;\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new _Hash,\n    'map': new (_Map || _ListCache),\n    'string': new _Hash\n  };\n}\n\nvar _mapCacheClear = mapCacheClear;\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nvar _isKeyable = isKeyable;\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return _isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nvar _getMapData = getMapData;\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = _getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nvar _mapCacheDelete = mapCacheDelete;\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return _getMapData(this, key).get(key);\n}\n\nvar _mapCacheGet = mapCacheGet;\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return _getMapData(this, key).has(key);\n}\n\nvar _mapCacheHas = mapCacheHas;\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = _getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nvar _mapCacheSet = mapCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = _mapCacheClear;\nMapCache.prototype['delete'] = _mapCacheDelete;\nMapCache.prototype.get = _mapCacheGet;\nMapCache.prototype.has = _mapCacheHas;\nMapCache.prototype.set = _mapCacheSet;\n\nvar _MapCache = MapCache;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$2 = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED$2);\n  return this;\n}\n\nvar _setCacheAdd = setCacheAdd;\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nvar _setCacheHas = setCacheHas;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new _MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = _setCacheAdd;\nSetCache.prototype.has = _setCacheHas;\n\nvar _SetCache = SetCache;\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nvar _baseFindIndex = baseFindIndex;\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nvar _baseIsNaN = baseIsNaN;\n\n/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nvar _strictIndexOf = strictIndexOf;\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? _strictIndexOf(array, value, fromIndex)\n    : _baseFindIndex(array, _baseIsNaN, fromIndex);\n}\n\nvar _baseIndexOf = baseIndexOf;\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && _baseIndexOf(array, value, 0) > -1;\n}\n\nvar _arrayIncludes = arrayIncludes;\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nvar _arrayIncludesWith = arrayIncludesWith;\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nvar _cacheHas = cacheHas;\n\n/* Built-in method references that are verified to be native. */\nvar Set = _getNative(_root, 'Set');\n\nvar _Set = Set;\n\n/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nvar noop_1 = noop;\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nvar _setToArray = setToArray;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(_Set && (1 / _setToArray(new _Set([,-0]))[1]) == INFINITY) ? noop_1 : function(values) {\n  return new _Set(values);\n};\n\nvar _createSet = createSet;\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = _arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = _arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : _createSet(array);\n    if (set) {\n      return _setToArray(set);\n    }\n    isCommon = false;\n    includes = _cacheHas;\n    seen = new _SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nvar _baseUniq = baseUniq;\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? _baseUniq(array) : [];\n}\n\nvar uniq_1 = uniq;\n\nfunction camelCaseToDash(str) {\n    return str.replace(/([A-Z])/g, (g) => `-${g[0].toLowerCase()}`);\n}\n\nfunction makeDataAttributeString(props) {\n    const keys = Object.keys(props);\n\n    return keys\n        .map((key) => {\n            const _key = camelCaseToDash(key);\n            const val = props[key];\n\n            if (val === undefined) return '';\n            return `data-${_key}=\"${val}\" `;\n        })\n        .join('')\n        .trim();\n}\n\nfunction copyTextToClipboard(text) {\n    // https://stackoverflow.com/a/30810322/5353542\n    var textArea = document.createElement('textarea');\n\n    //\n    // *** This styling is an extra step which is likely not required. ***\n    //\n    // Why is it here? To ensure:\n    // 1. the element is able to have focus and selection.\n    // 2. if element was to flash render it has minimal visual impact.\n    // 3. less flakyness with selection and copying which **might** occur if\n    //    the textarea element is not visible.\n    //\n    // The likelihood is the element won't even render, not even a flash,\n    // so some of these are just precautions. However in IE the element\n    // is visible whilst the popup box asking the user for permission for\n    // the web page to copy to the clipboard.\n    //\n\n    // Place in top-left corner of screen regardless of scroll position.\n    textArea.style.position = 'fixed';\n    textArea.style.top = 0;\n    textArea.style.left = 0;\n\n    // Ensure it has a small width and height. Setting to 1px / 1em\n    // doesn't work as this gives a negative w/h on some browsers.\n    textArea.style.width = '2em';\n    textArea.style.height = '2em';\n\n    // We don't need padding, reducing the size if it does flash render.\n    textArea.style.padding = 0;\n\n    // Clean up any borders.\n    textArea.style.border = 'none';\n    textArea.style.outline = 'none';\n    textArea.style.boxShadow = 'none';\n\n    // Avoid flash of white box if rendered for any reason.\n    textArea.style.background = 'transparent';\n\n    textArea.value = text;\n\n    document.body.appendChild(textArea);\n\n    textArea.select();\n\n    try {\n        document.execCommand('copy');\n    } catch (err) {\n        console.log('Oops, unable to copy');\n    }\n\n    document.body.removeChild(textArea);\n}\n\nfunction isNumeric(val) {\n    return !isNaN(val);\n}\n\nlet throttle$1 = throttle_1;\n\nlet debounce$1 = debounce_1;\n\nfunction nextTick(fn, context = null) {\n    return (...args) => {\n        return new Promise(resolve => {\n            const execute = () => {\n                const out = fn.apply(context, args);\n                resolve(out);\n            };\n            setTimeout(execute);\n        });\n    };\n}\nfunction linkProperties(target, source, properties) {\n    const props = properties.reduce((acc, prop) => {\n        acc[prop] = {\n            get() {\n                return source[prop];\n            }\n        };\n        return acc;\n    }, {});\n    Object.defineProperties(target, props);\n}\nfunction isSet(val) {\n    return val !== undefined || val !== null;\n}\n\nfunction notSet(val) {\n    return !isSet(val);\n}\n\nfunction isNumber(val) {\n    return !isNaN(val);\n}\n\nfunction ensureArray(val) {\n    if (!Array.isArray(val)) {\n        return [val];\n    }\n    return val;\n}\n\nfunction uniq$1(arr) {\n    return uniq_1(arr);\n}\n\nfunction numberSortAsc(a, b) {\n    return a - b;\n}\nfunction stripHTML(html) {\n    return html.replace(/<[^>]*>/g, '');\n}\nfunction format(str, args) {\n    if (!str) return str;\n\n    Object.keys(args).forEach(arg => {\n        let regex = new RegExp(`{(${arg})}`, 'g');\n        str = str.replace(regex, args[arg]);\n    });\n\n    return str;\n}\nfunction escapeHTML(txt) {\n    if (!txt) return '';\n    let escapeHtmlMapping = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        '/': '&#x2F;',\n        '`': '&#x60;',\n        '=': '&#x3D;',\n    };\n\n    return String(txt).replace(/[&<>\"'`=/]/g, (char) => escapeHtmlMapping[char] || char);\n}\n\nclass DataManager {\n    constructor(options) {\n        this.options = options;\n        this.sortRows = nextTick(this.sortRows, this);\n        this.switchColumn = nextTick(this.switchColumn, this);\n        this.removeColumn = nextTick(this.removeColumn, this);\n        this.options.filterRows = nextTick(this.options.filterRows, this);\n    }\n\n    init(data, columns) {\n        if (!data) {\n            data = this.options.data;\n        }\n        if (columns) {\n            this.options.columns = columns;\n        }\n\n        this.data = data;\n\n        this.rowCount = 0;\n        this.columns = [];\n        this.rows = [];\n\n        this.prepareColumns();\n        this.prepareRows();\n        this.prepareTreeRows();\n        this.prepareRowView();\n        this.prepareNumericColumns();\n    }\n\n    // computed property\n    get currentSort() {\n        const col = this.columns.find(col => col.sortOrder !== 'none');\n        return col || {\n            colIndex: -1,\n            sortOrder: 'none'\n        };\n    }\n\n    prepareColumns() {\n        this.columns = [];\n        this.validateColumns();\n        this.prepareDefaultColumns();\n        this.prepareHeader();\n    }\n\n    prepareDefaultColumns() {\n        if (this.options.checkboxColumn && !this.hasColumnById('_checkbox')) {\n            const cell = {\n                id: '_checkbox',\n                content: this.getCheckboxHTML(),\n                editable: false,\n                resizable: false,\n                sortable: false,\n                focusable: false,\n                dropdown: false,\n                width: 32\n            };\n            this.columns.push(cell);\n        }\n\n        if (this.options.serialNoColumn && !this.hasColumnById('_rowIndex')) {\n            let cell = {\n                id: '_rowIndex',\n                content: '',\n                align: 'center',\n                editable: false,\n                resizable: false,\n                focusable: false,\n                dropdown: false\n            };\n\n            this.columns.push(cell);\n        }\n    }\n\n    prepareHeader() {\n        let columns = this.columns.concat(this.options.columns);\n        const baseCell = {\n            isHeader: 1,\n            editable: true,\n            sortable: true,\n            resizable: true,\n            focusable: true,\n            dropdown: true,\n            width: null,\n            format: (value) => {\n                if (value === null || value === undefined) {\n                    return '';\n                }\n                return value + '';\n            }\n        };\n\n        this.columns = columns\n            .map((cell, i) => this.prepareCell(cell, i))\n            .map(col => Object.assign({}, baseCell, col))\n            .map(col => {\n                col.content = col.content || col.name || '';\n                col.id = col.id || col.content;\n                return col;\n            });\n    }\n\n    prepareCell(content, i) {\n        const cell = {\n            content: '',\n            sortOrder: 'none',\n            colIndex: i,\n            column: this.columns[i]\n        };\n\n        if (content !== null && typeof content === 'object') {\n            // passed as column/header\n            Object.assign(cell, content);\n        } else {\n            cell.content = content;\n        }\n\n        return cell;\n    }\n\n    prepareNumericColumns() {\n        const row0 = this.getRow(0);\n        if (!row0) return;\n        this.columns = this.columns.map((column, i) => {\n\n            const cellValue = row0[i].content;\n            if (!column.align && isNumeric(cellValue)) {\n                column.align = 'right';\n            }\n\n            return column;\n        });\n    }\n\n    prepareRows() {\n        this.validateData(this.data);\n\n        this.rows = this.data.map((d, i) => {\n            const index = this._getNextRowCount();\n\n            let row = [];\n            let meta = {\n                rowIndex: index\n            };\n\n            if (Array.isArray(d)) {\n                // row is an array\n                if (this.options.checkboxColumn) {\n                    row.push(this.getCheckboxHTML());\n                }\n                if (this.options.serialNoColumn) {\n                    row.push((index + 1) + '');\n                }\n                row = row.concat(d);\n\n                while (row.length < this.columns.length) {\n                    row.push('');\n                }\n\n            } else {\n                // row is an object\n                for (let col of this.columns) {\n                    if (col.id === '_checkbox') {\n                        row.push(this.getCheckboxHTML());\n                    } else if (col.id === '_rowIndex') {\n                        row.push((index + 1) + '');\n                    } else {\n                        row.push(d[col.id]);\n                    }\n                }\n\n                meta.indent = d.indent || 0;\n            }\n\n            return this.prepareRow(row, meta);\n        });\n    }\n\n    prepareTreeRows() {\n        this.rows.forEach((row, i) => {\n            if (isNumber(row.meta.indent)) {\n                // if (i === 36) debugger;\n                const nextRow = this.getRow(i + 1);\n                row.meta.isLeaf = !nextRow ||\n                    notSet(nextRow.meta.indent) ||\n                    nextRow.meta.indent <= row.meta.indent;\n                row.meta.isTreeNodeClose = false;\n            }\n        });\n    }\n\n    prepareRowView() {\n        // This is order in which rows will be rendered in the table.\n        // When sorting happens, only this.rowViewOrder will change\n        // and not the original this.rows\n        this.rowViewOrder = this.rows.map(row => row.meta.rowIndex);\n    }\n\n    prepareRow(row, meta) {\n        const baseRowCell = {\n            rowIndex: meta.rowIndex,\n            indent: meta.indent\n        };\n\n        row = row\n            .map((cell, i) => this.prepareCell(cell, i))\n            .map(cell => Object.assign({}, baseRowCell, cell));\n\n        // monkey patched in array object\n        row.meta = meta;\n        return row;\n    }\n\n    validateColumns() {\n        const columns = this.options.columns;\n        if (!Array.isArray(columns)) {\n            throw new DataError('`columns` must be an array');\n        }\n\n        columns.forEach((column, i) => {\n            if (typeof column !== 'string' && typeof column !== 'object') {\n                throw new DataError(`column \"${i}\" must be a string or an object`);\n            }\n        });\n    }\n\n    validateData(data) {\n        if (Array.isArray(data) &&\n            (data.length === 0 || Array.isArray(data[0]) || typeof data[0] === 'object')) {\n            return true;\n        }\n        throw new DataError('`data` must be an array of arrays or objects');\n    }\n\n    appendRows(rows) {\n        this.validateData(rows);\n\n        this.rows.push(...this.prepareRows(rows));\n    }\n\n    sortRows(colIndex, sortOrder = 'none') {\n        colIndex = +colIndex;\n\n        // reset sortOrder and update for colIndex\n        this.getColumns()\n            .map(col => {\n                if (col.colIndex === colIndex) {\n                    col.sortOrder = sortOrder;\n                } else {\n                    col.sortOrder = 'none';\n                }\n            });\n\n        this._sortRows(colIndex, sortOrder);\n    }\n\n    _sortRows(colIndex, sortOrder) {\n\n        if (this.currentSort.colIndex === colIndex) {\n            // reverse the array if only sortOrder changed\n            if (\n                (this.currentSort.sortOrder === 'asc' && sortOrder === 'desc') ||\n                (this.currentSort.sortOrder === 'desc' && sortOrder === 'asc')\n            ) {\n                this.reverseArray(this.rowViewOrder);\n                this.currentSort.sortOrder = sortOrder;\n                return;\n            }\n        }\n\n        this.rowViewOrder.sort((a, b) => {\n            const aIndex = a;\n            const bIndex = b;\n\n            let aContent = this.getCell(colIndex, a).content;\n            let bContent = this.getCell(colIndex, b).content;\n            aContent = aContent == null ? '' : aContent;\n            bContent = bContent == null ? '' : bContent;\n\n            if (sortOrder === 'none') {\n                return aIndex - bIndex;\n            } else if (sortOrder === 'asc') {\n                if (aContent < bContent) return -1;\n                if (aContent > bContent) return 1;\n                if (aContent === bContent) return 0;\n            } else if (sortOrder === 'desc') {\n                if (aContent < bContent) return 1;\n                if (aContent > bContent) return -1;\n                if (aContent === bContent) return 0;\n            }\n            return 0;\n        });\n\n        if (this.hasColumnById('_rowIndex')) {\n            // update row index\n            const srNoColIndex = this.getColumnIndexById('_rowIndex');\n            this.rows.forEach((row, index) => {\n                const viewIndex = this.rowViewOrder.indexOf(index);\n                const cell = row[srNoColIndex];\n                cell.content = (viewIndex + 1) + '';\n            });\n        }\n    }\n\n    reverseArray(array) {\n        let left = null;\n        let right = null;\n        let length = array.length;\n\n        for (left = 0, right = length - 1; left < right; left += 1, right -= 1) {\n            const temporary = array[left];\n\n            array[left] = array[right];\n            array[right] = temporary;\n        }\n    }\n\n    switchColumn(index1, index2) {\n        // update columns\n        const temp = this.columns[index1];\n        this.columns[index1] = this.columns[index2];\n        this.columns[index2] = temp;\n\n        this.columns[index1].colIndex = index1;\n        this.columns[index2].colIndex = index2;\n\n        // update rows\n        this.rows.forEach(row => {\n            const newCell1 = Object.assign({}, row[index1], {\n                colIndex: index2\n            });\n            const newCell2 = Object.assign({}, row[index2], {\n                colIndex: index1\n            });\n\n            row[index2] = newCell1;\n            row[index1] = newCell2;\n        });\n    }\n\n    removeColumn(index) {\n        index = +index;\n        const filter = cell => cell.colIndex !== index;\n        const map = (cell, i) => Object.assign({}, cell, {\n            colIndex: i\n        });\n        // update columns\n        this.columns = this.columns\n            .filter(filter)\n            .map(map);\n\n        // update rows\n        this.rows.forEach(row => {\n            // remove cell\n            row.splice(index, 1);\n            // update colIndex\n            row.forEach((cell, i) => {\n                cell.colIndex = i;\n            });\n        });\n    }\n\n    updateRow(row, rowIndex) {\n        if (row.length < this.columns.length) {\n            if (this.hasColumnById('_rowIndex')) {\n                const val = (rowIndex + 1) + '';\n\n                row = [val].concat(row);\n            }\n\n            if (this.hasColumnById('_checkbox')) {\n                const val = '<input type=\"checkbox\" />';\n\n                row = [val].concat(row);\n            }\n        }\n\n        const _row = this.prepareRow(row, {rowIndex});\n        const index = this.rows.findIndex(row => row[0].rowIndex === rowIndex);\n        this.rows[index] = _row;\n\n        return _row;\n    }\n\n    updateCell(colIndex, rowIndex, options) {\n        let cell;\n        if (typeof colIndex === 'object') {\n            // cell object was passed,\n            // must have colIndex, rowIndex\n            cell = colIndex;\n            colIndex = cell.colIndex;\n            rowIndex = cell.rowIndex;\n            // the object passed must be merged with original cell\n            options = cell;\n        }\n        cell = this.getCell(colIndex, rowIndex);\n\n        // mutate object directly\n        for (let key in options) {\n            const newVal = options[key];\n            if (newVal !== undefined) {\n                cell[key] = newVal;\n            }\n        }\n\n        return cell;\n    }\n\n    updateColumn(colIndex, keyValPairs) {\n        const column = this.getColumn(colIndex);\n        for (let key in keyValPairs) {\n            const newVal = keyValPairs[key];\n            if (newVal !== undefined) {\n                column[key] = newVal;\n            }\n        }\n        return column;\n    }\n\n    filterRows(filters) {\n        return this.options.filterRows(this.rows, filters)\n            .then(result => {\n                if (!result) {\n                    result = this.getAllRowIndices();\n                }\n\n                if (!result.then) {\n                    result = Promise.resolve(result);\n                }\n\n                return result.then(rowsToShow => {\n                    this._filteredRows = rowsToShow;\n\n                    const rowsToHide = this.getAllRowIndices()\n                        .filter(index => !rowsToShow.includes(index));\n\n                    return {\n                        rowsToHide,\n                        rowsToShow\n                    };\n                });\n            });\n    }\n\n    getFilteredRowIndices() {\n        return this._filteredRows || this.getAllRowIndices();\n    }\n\n    getAllRowIndices() {\n        return this.rows.map(row => row.meta.rowIndex);\n    }\n\n    getRowCount() {\n        return this.rowCount;\n    }\n\n    _getNextRowCount() {\n        const val = this.rowCount;\n\n        this.rowCount++;\n        return val;\n    }\n\n    getRows(start, end) {\n        return this.rows.slice(start, end);\n    }\n\n    getRowsForView(start, end) {\n        const rows = this.rowViewOrder.map(i => this.rows[i]);\n        return rows.slice(start, end);\n    }\n\n    getColumns(skipStandardColumns) {\n        let columns = this.columns;\n\n        if (skipStandardColumns) {\n            columns = columns.slice(this.getStandardColumnCount());\n        }\n\n        return columns;\n    }\n\n    getStandardColumnCount() {\n        if (this.options.checkboxColumn && this.options.serialNoColumn) {\n            return 2;\n        }\n\n        if (this.options.checkboxColumn || this.options.serialNoColumn) {\n            return 1;\n        }\n\n        return 0;\n    }\n\n    getColumnCount(skipStandardColumns) {\n        let val = this.columns.length;\n\n        if (skipStandardColumns) {\n            val = val - this.getStandardColumnCount();\n        }\n\n        return val;\n    }\n\n    getColumn(colIndex) {\n        colIndex = +colIndex;\n\n        if (colIndex < 0) {\n            // negative indexes\n            colIndex = this.columns.length + colIndex;\n        }\n\n        return this.columns.find(col => col.colIndex === colIndex);\n    }\n\n    getColumnById(id) {\n        return this.columns.find(col => col.id === id);\n    }\n\n    getRow(rowIndex) {\n        rowIndex = +rowIndex;\n        return this.rows[rowIndex];\n    }\n\n    getCell(colIndex, rowIndex) {\n        rowIndex = +rowIndex;\n        colIndex = +colIndex;\n        return this.getRow(rowIndex)[colIndex];\n    }\n\n    getChildren(parentRowIndex) {\n        parentRowIndex = +parentRowIndex;\n        const parentIndent = this.getRow(parentRowIndex).meta.indent;\n        const out = [];\n\n        for (let i = parentRowIndex + 1; i < this.rowCount; i++) {\n            const row = this.getRow(i);\n            if (isNaN(row.meta.indent)) continue;\n\n            if (row.meta.indent > parentIndent) {\n                out.push(i);\n            }\n\n            if (row.meta.indent === parentIndent) {\n                break;\n            }\n        }\n\n        return out;\n    }\n\n    getImmediateChildren(parentRowIndex) {\n        parentRowIndex = +parentRowIndex;\n        const parentIndent = this.getRow(parentRowIndex).meta.indent;\n        const out = [];\n        const childIndent = parentIndent + 1;\n\n        for (let i = parentRowIndex + 1; i < this.rowCount; i++) {\n            const row = this.getRow(i);\n            if (isNaN(row.meta.indent) || row.meta.indent > childIndent) continue;\n\n            if (row.meta.indent === childIndent) {\n                out.push(i);\n            }\n\n            if (row.meta.indent === parentIndent) {\n                break;\n            }\n        }\n\n        return out;\n    }\n\n    get() {\n        return {\n            columns: this.columns,\n            rows: this.rows\n        };\n    }\n\n    /**\n     * Returns the original data which was passed\n     * based on rowIndex\n     * @param {Number} rowIndex\n     * @returns Array|Object\n     * @memberof DataManager\n     */\n    getData(rowIndex) {\n        return this.data[rowIndex];\n    }\n\n    hasColumn(name) {\n        return Boolean(this.columns.find(col => col.content === name));\n    }\n\n    hasColumnById(id) {\n        return Boolean(this.columns.find(col => col.id === id));\n    }\n\n    getColumnIndex(name) {\n        return this.columns.findIndex(col => col.content === name);\n    }\n\n    getColumnIndexById(id) {\n        return this.columns.findIndex(col => col.id === id);\n    }\n\n    getCheckboxHTML() {\n        return '<input type=\"checkbox\" />';\n    }\n}\n\n// Custom Errors\nclass DataError extends TypeError {}\n\n/* eslint-disable max-len */\n\n// Icons from https://feathericons.com/\n\nlet icons = {\n    chevronDown: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-chevron-down\"><polyline points=\"6 9 12 15 18 9\"></polyline></svg>',\n    chevronRight: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-chevron-right\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>'\n};\n\nclass CellManager {\n    constructor(instance) {\n        this.instance = instance;\n        linkProperties(this, this.instance, [\n            'wrapper',\n            'options',\n            'style',\n            'header',\n            'bodyScrollable',\n            'columnmanager',\n            'rowmanager',\n            'datamanager',\n            'keyboard'\n        ]);\n\n        this.bindEvents();\n    }\n\n    bindEvents() {\n        this.bindFocusCell();\n        this.bindEditCell();\n        this.bindKeyboardSelection();\n        this.bindCopyCellContents();\n        this.bindMouseEvents();\n        this.bindTreeEvents();\n    }\n\n    bindFocusCell() {\n        this.bindKeyboardNav();\n    }\n\n    bindEditCell() {\n        this.$editingCell = null;\n\n        $.on(this.bodyScrollable, 'dblclick', '.dt-cell', (e, cell) => {\n            this.activateEditing(cell);\n        });\n\n        this.keyboard.on('enter', () => {\n            if (this.$focusedCell && !this.$editingCell) {\n                // enter keypress on focused cell\n                this.activateEditing(this.$focusedCell);\n            } else if (this.$editingCell) {\n                // enter keypress on editing cell\n                this.deactivateEditing();\n            }\n        });\n    }\n\n    bindKeyboardNav() {\n        const focusLastCell = (direction) => {\n            if (!this.$focusedCell || this.$editingCell) {\n                return false;\n            }\n\n            let $cell = this.$focusedCell;\n            const {\n                rowIndex,\n                colIndex\n            } = $.data($cell);\n\n            if (direction === 'left') {\n                $cell = this.getLeftMostCell$(rowIndex);\n            } else if (direction === 'right') {\n                $cell = this.getRightMostCell$(rowIndex);\n            } else if (direction === 'up') {\n                $cell = this.getTopMostCell$(colIndex);\n            } else if (direction === 'down') {\n                $cell = this.getBottomMostCell$(colIndex);\n            }\n\n            this.focusCell($cell);\n            return true;\n        };\n\n        ['left', 'right', 'up', 'down', 'tab', 'shift+tab']\n            .map(direction => this.keyboard.on(direction, () => this.focusCellInDirection(direction)));\n\n        ['left', 'right', 'up', 'down']\n            .map(direction => this.keyboard.on(`ctrl+${direction}`, () => focusLastCell(direction)));\n\n        this.keyboard.on('esc', () => {\n            this.deactivateEditing(false);\n            this.columnmanager.toggleFilter(false);\n        });\n\n        if (this.options.inlineFilters) {\n            this.keyboard.on('ctrl+f', (e) => {\n                const $cell = $.closest('.dt-cell', e.target);\n                const { colIndex } = $.data($cell);\n\n                this.activateFilter(colIndex);\n                return true;\n            });\n\n            $.on(this.header, 'focusin', '.dt-filter', () => {\n                this.unfocusCell(this.$focusedCell);\n            });\n        }\n    }\n\n    bindKeyboardSelection() {\n        const getNextSelectionCursor = (direction) => {\n            let $selectionCursor = this.getSelectionCursor();\n\n            if (direction === 'left') {\n                $selectionCursor = this.getLeftCell$($selectionCursor);\n            } else if (direction === 'right') {\n                $selectionCursor = this.getRightCell$($selectionCursor);\n            } else if (direction === 'up') {\n                $selectionCursor = this.getAboveCell$($selectionCursor);\n            } else if (direction === 'down') {\n                $selectionCursor = this.getBelowCell$($selectionCursor);\n            }\n\n            return $selectionCursor;\n        };\n\n        ['left', 'right', 'up', 'down']\n            .map(direction =>\n                this.keyboard.on(`shift+${direction}`, () => this.selectArea(getNextSelectionCursor(direction))));\n    }\n\n    bindCopyCellContents() {\n        this.keyboard.on('ctrl+c', () => {\n            const noOfCellsCopied = this.copyCellContents(this.$focusedCell, this.$selectionCursor);\n            const message = this.instance.translate('{count} cells copied', {\n                count: noOfCellsCopied\n            });\n\n            if (noOfCellsCopied) {\n                this.instance.showToastMessage(message, 2);\n            }\n        });\n\n        if (this.options.pasteFromClipboard) {\n            this.keyboard.on('ctrl+v', (e) => {\n                // hack\n                // https://stackoverflow.com/a/2177059/5353542\n                this.instance.pasteTarget.focus();\n\n                setTimeout(() => {\n                    const data = this.instance.pasteTarget.value;\n                    this.instance.pasteTarget.value = '';\n                    this.pasteContentInCell(data);\n                }, 10);\n\n                return false;\n            });\n        }\n    }\n\n    bindMouseEvents() {\n        let mouseDown = null;\n\n        $.on(this.bodyScrollable, 'mousedown', '.dt-cell', (e) => {\n            mouseDown = true;\n            this.focusCell($(e.delegatedTarget));\n        });\n\n        $.on(this.bodyScrollable, 'mouseup', () => {\n            mouseDown = false;\n        });\n\n        const selectArea = (e) => {\n            if (!mouseDown) return;\n            this.selectArea($(e.delegatedTarget));\n        };\n\n        $.on(this.bodyScrollable, 'mousemove', '.dt-cell', throttle$1(selectArea, 50));\n    }\n\n    bindTreeEvents() {\n        $.on(this.bodyScrollable, 'click', '.dt-tree-node__toggle', (e, $toggle) => {\n            const $cell = $.closest('.dt-cell', $toggle);\n            const { rowIndex } = $.data($cell);\n\n            if ($cell.classList.contains('dt-cell--tree-close')) {\n                this.rowmanager.openSingleNode(rowIndex);\n            } else {\n                this.rowmanager.closeSingleNode(rowIndex);\n            }\n        });\n    }\n\n    focusCell($cell, {\n        skipClearSelection = 0,\n        skipDOMFocus = 0,\n        skipScrollToCell = 0\n    } = {}) {\n        if (!$cell) return;\n\n        // don't focus if already editing cell\n        if ($cell === this.$editingCell) return;\n\n        const {\n            colIndex,\n            isHeader\n        } = $.data($cell);\n        if (isHeader) {\n            return;\n        }\n\n        const column = this.columnmanager.getColumn(colIndex);\n        if (column.focusable === false) {\n            return;\n        }\n\n        if (!skipScrollToCell) {\n            this.scrollToCell($cell);\n        }\n\n        this.deactivateEditing();\n        if (!skipClearSelection) {\n            this.clearSelection();\n        }\n\n        if (this.$focusedCell) {\n            this.$focusedCell.classList.remove('dt-cell--focus');\n        }\n\n        this.$focusedCell = $cell;\n        $cell.classList.add('dt-cell--focus');\n\n        if (!skipDOMFocus) {\n            // so that keyboard nav works\n            $cell.focus();\n        }\n\n        this.highlightRowColumnHeader($cell);\n    }\n\n    unfocusCell($cell) {\n        if (!$cell) return;\n\n        // remove cell border\n        $cell.classList.remove('dt-cell--focus');\n        this.$focusedCell = null;\n\n        // reset header background\n        if (this.lastHeaders) {\n            this.lastHeaders.forEach(header => header && header.classList.remove('dt-cell--highlight'));\n        }\n    }\n\n    highlightRowColumnHeader($cell) {\n        const {\n            colIndex,\n            rowIndex\n        } = $.data($cell);\n\n        const srNoColIndex = this.datamanager.getColumnIndexById('_rowIndex');\n        const colHeaderSelector = `.dt-cell--header-${colIndex}`;\n        const rowHeaderSelector = `.dt-cell--${srNoColIndex}-${rowIndex}`;\n\n        if (this.lastHeaders) {\n            this.lastHeaders.forEach(header => header && header.classList.remove('dt-cell--highlight'));\n        }\n\n        const colHeader = $(colHeaderSelector, this.wrapper);\n        const rowHeader = $(rowHeaderSelector, this.wrapper);\n\n        this.lastHeaders = [colHeader, rowHeader];\n        this.lastHeaders.forEach(header => header && header.classList.add('dt-cell--highlight'));\n    }\n\n    selectAreaOnClusterChanged() {\n        if (!(this.$focusedCell && this.$selectionCursor)) return;\n        const {\n            colIndex,\n            rowIndex\n        } = $.data(this.$selectionCursor);\n        const $cell = this.getCell$(colIndex, rowIndex);\n\n        if (!$cell || $cell === this.$selectionCursor) return;\n\n        // selectArea needs $focusedCell\n        const fCell = $.data(this.$focusedCell);\n        this.$focusedCell = this.getCell$(fCell.colIndex, fCell.rowIndex);\n\n        this.selectArea($cell);\n    }\n\n    focusCellOnClusterChanged() {\n        if (!this.$focusedCell) return;\n\n        const {\n            colIndex,\n            rowIndex\n        } = $.data(this.$focusedCell);\n        const $cell = this.getCell$(colIndex, rowIndex);\n\n        if (!$cell) return;\n        // this function is called after hyperlist renders the rows after scroll,\n        // focusCell calls clearSelection which resets the area selection\n        // so a flag to skip it\n        // we also skip DOM focus and scroll to cell\n        // because it fights with the user scroll\n        this.focusCell($cell, {\n            skipClearSelection: 1,\n            skipDOMFocus: 1,\n            skipScrollToCell: 1\n        });\n    }\n\n    selectArea($selectionCursor) {\n        if (!this.$focusedCell) return;\n\n        if (this._selectArea(this.$focusedCell, $selectionCursor)) {\n            // valid selection\n            this.$selectionCursor = $selectionCursor;\n        }\n    }\n\n    _selectArea($cell1, $cell2) {\n        if ($cell1 === $cell2) return false;\n\n        const cells = this.getCellsInRange($cell1, $cell2);\n        if (!cells) return false;\n\n        this.clearSelection();\n        this._selectedCells = cells.map(index => this.getCell$(...index));\n        requestAnimationFrame(() => {\n            this._selectedCells.map($cell => $cell.classList.add('dt-cell--highlight'));\n        });\n        return true;\n    }\n\n    getCellsInRange($cell1, $cell2) {\n        let colIndex1, rowIndex1, colIndex2, rowIndex2;\n\n        if (typeof $cell1 === 'number') {\n            [colIndex1, rowIndex1, colIndex2, rowIndex2] = arguments;\n        } else\n        if (typeof $cell1 === 'object') {\n            if (!($cell1 && $cell2)) {\n                return false;\n            }\n\n            const cell1 = $.data($cell1);\n            const cell2 = $.data($cell2);\n\n            colIndex1 = +cell1.colIndex;\n            rowIndex1 = +cell1.rowIndex;\n            colIndex2 = +cell2.colIndex;\n            rowIndex2 = +cell2.rowIndex;\n        }\n\n        if (rowIndex1 > rowIndex2) {\n            [rowIndex1, rowIndex2] = [rowIndex2, rowIndex1];\n        }\n\n        if (colIndex1 > colIndex2) {\n            [colIndex1, colIndex2] = [colIndex2, colIndex1];\n        }\n\n        if (this.isStandardCell(colIndex1) || this.isStandardCell(colIndex2)) {\n            return false;\n        }\n\n        const cells = [];\n        let colIndex = colIndex1;\n        let rowIndex = rowIndex1;\n        const rowIndices = [];\n\n        while (rowIndex <= rowIndex2) {\n            rowIndices.push(rowIndex);\n            rowIndex += 1;\n        }\n\n        rowIndices.map((rowIndex) => {\n            while (colIndex <= colIndex2) {\n                cells.push([colIndex, rowIndex]);\n                colIndex++;\n            }\n            colIndex = colIndex1;\n        });\n\n        return cells;\n    }\n\n    clearSelection() {\n        (this._selectedCells || [])\n            .forEach($cell => $cell.classList.remove('dt-cell--highlight'));\n\n        this._selectedCells = [];\n        this.$selectionCursor = null;\n    }\n\n    getSelectionCursor() {\n        return this.$selectionCursor || this.$focusedCell;\n    }\n\n    activateEditing($cell) {\n        this.focusCell($cell);\n        const {\n            rowIndex,\n            colIndex\n        } = $.data($cell);\n\n        const col = this.columnmanager.getColumn(colIndex);\n        if (col && (col.editable === false || col.focusable === false)) {\n            return;\n        }\n\n        const cell = this.getCell(colIndex, rowIndex);\n        if (cell && cell.editable === false) {\n            return;\n        }\n\n        if (this.$editingCell) {\n            const {\n                _rowIndex,\n                _colIndex\n            } = $.data(this.$editingCell);\n\n            if (rowIndex === _rowIndex && colIndex === _colIndex) {\n                // editing the same cell\n                return;\n            }\n        }\n\n        this.$editingCell = $cell;\n        $cell.classList.add('dt-cell--editing');\n\n        const $editCell = $('.dt-cell__edit', $cell);\n        $editCell.innerHTML = '';\n\n        const editor = this.getEditor(colIndex, rowIndex, cell.content, $editCell);\n\n        if (editor) {\n            this.currentCellEditor = editor;\n            // initialize editing input with cell value\n            editor.initValue(cell.content, rowIndex, col);\n        }\n    }\n\n    deactivateEditing(submitValue = true) {\n        if (submitValue) {\n            this.submitEditing();\n        }\n        // keep focus on the cell so that keyboard navigation works\n        if (this.$focusedCell) this.$focusedCell.focus();\n\n        if (!this.$editingCell) return;\n        this.$editingCell.classList.remove('dt-cell--editing');\n        this.$editingCell = null;\n    }\n\n    getEditor(colIndex, rowIndex, value, parent) {\n        const column = this.datamanager.getColumn(colIndex);\n        const row = this.datamanager.getRow(rowIndex);\n        const data = this.datamanager.getData(rowIndex);\n        let editor = this.options.getEditor ?\n            this.options.getEditor(colIndex, rowIndex, value, parent, column, row, data) :\n            this.getDefaultEditor(parent);\n\n        if (editor === false) {\n            // explicitly returned false\n            return false;\n        }\n        if (editor === undefined) {\n            // didn't return editor, fallback to default\n            editor = this.getDefaultEditor(parent);\n        }\n\n        return editor;\n    }\n\n    getDefaultEditor(parent) {\n        const $input = $.create('input', {\n            class: 'dt-input',\n            type: 'text',\n            inside: parent\n        });\n\n        return {\n            initValue(value) {\n                $input.focus();\n                $input.value = value;\n            },\n            getValue() {\n                return $input.value;\n            },\n            setValue(value) {\n                $input.value = value;\n            }\n        };\n    }\n\n    submitEditing() {\n        let promise = Promise.resolve();\n        if (!this.$editingCell) return promise;\n\n        const $cell = this.$editingCell;\n        const {\n            rowIndex,\n            colIndex\n        } = $.data($cell);\n        const col = this.datamanager.getColumn(colIndex);\n\n        if ($cell) {\n            const editor = this.currentCellEditor;\n\n            if (editor) {\n                let valuePromise = editor.getValue();\n\n                // convert to stubbed Promise\n                if (!valuePromise.then) {\n                    valuePromise = Promise.resolve(valuePromise);\n                }\n\n                promise = valuePromise.then((value) => {\n                    const oldValue = this.getCell(colIndex, rowIndex).content;\n\n                    if (oldValue === value) return false;\n\n                    const done = editor.setValue(value, rowIndex, col);\n\n                    // update cell immediately\n                    this.updateCell(colIndex, rowIndex, value, true);\n                    $cell.focus();\n\n                    if (done && done.then) {\n                        // revert to oldValue if promise fails\n                        done.catch((e) => {\n                            console.log(e);\n                            this.updateCell(colIndex, rowIndex, oldValue);\n                        });\n                    }\n                    return done;\n                });\n            }\n        }\n\n        this.currentCellEditor = null;\n        return promise;\n    }\n\n    copyCellContents($cell1, $cell2) {\n        if (!$cell2 && $cell1) {\n            // copy only focusedCell\n            const {\n                colIndex,\n                rowIndex\n            } = $.data($cell1);\n            const cell = this.getCell(colIndex, rowIndex);\n            copyTextToClipboard(cell.content);\n            return 1;\n        }\n        const cells = this.getCellsInRange($cell1, $cell2);\n\n        if (!cells) return 0;\n\n        const rows = cells\n            // get cell objects\n            .map(index => this.getCell(...index))\n            // convert to array of rows\n            .reduce((acc, curr) => {\n                const rowIndex = curr.rowIndex;\n\n                acc[rowIndex] = acc[rowIndex] || [];\n                acc[rowIndex].push(curr.content);\n\n                return acc;\n            }, []);\n\n        const values = rows\n            // join values by tab\n            .map(row => row.join('\\t'))\n            // join rows by newline\n            .join('\\n');\n\n        copyTextToClipboard(values);\n\n        // return no of cells copied\n        return rows.reduce((total, row) => total + row.length, 0);\n    }\n\n    pasteContentInCell(data) {\n        if (!this.$focusedCell) return;\n\n        const matrix = data\n            .split('\\n')\n            .map(row => row.split('\\t'))\n            .filter(row => row.length && row.every(it => it));\n\n        let { colIndex, rowIndex } = $.data(this.$focusedCell);\n\n        let focusedCell = {\n            colIndex: +colIndex,\n            rowIndex: +rowIndex\n        };\n\n        matrix.forEach((row, i) => {\n            let rowIndex = i + focusedCell.rowIndex;\n            row.forEach((cell, j) => {\n                let colIndex = j + focusedCell.colIndex;\n                this.updateCell(colIndex, rowIndex, cell, true);\n            });\n        });\n    }\n\n    activateFilter(colIndex) {\n        this.columnmanager.toggleFilter();\n        this.columnmanager.focusFilter(colIndex);\n\n        if (!this.columnmanager.isFilterShown) {\n            // put focus back on cell\n            this.$focusedCell && this.$focusedCell.focus();\n        }\n    }\n\n    updateCell(colIndex, rowIndex, value, refreshHtml = false) {\n        const cell = this.datamanager.updateCell(colIndex, rowIndex, {\n            content: value\n        });\n        this.refreshCell(cell, refreshHtml);\n    }\n\n    refreshCell(cell, refreshHtml = false) {\n        const $cell = $(this.selector(cell.colIndex, cell.rowIndex), this.bodyScrollable);\n        $cell.innerHTML = this.getCellContent(cell, refreshHtml);\n    }\n\n    toggleTreeButton(rowIndex, flag) {\n        const colIndex = this.columnmanager.getFirstColumnIndex();\n        const $cell = this.getCell$(colIndex, rowIndex);\n        if ($cell) {\n            $cell.classList[flag ? 'remove' : 'add']('dt-cell--tree-close');\n        }\n    }\n\n    isStandardCell(colIndex) {\n        // Standard cells are in Sr. No and Checkbox column\n        return colIndex < this.columnmanager.getFirstColumnIndex();\n    }\n\n    focusCellInDirection(direction) {\n        if (!this.$focusedCell || (this.$editingCell && ['left', 'right', 'up', 'down'].includes(direction))) {\n            return false;\n        } else if (this.$editingCell && ['tab', 'shift+tab'].includes(direction)) {\n            this.deactivateEditing();\n        }\n\n        let $cell = this.$focusedCell;\n\n        if (direction === 'left' || direction === 'shift+tab') {\n            $cell = this.getLeftCell$($cell);\n        } else if (direction === 'right' || direction === 'tab') {\n            $cell = this.getRightCell$($cell);\n        } else if (direction === 'up') {\n            $cell = this.getAboveCell$($cell);\n        } else if (direction === 'down') {\n            $cell = this.getBelowCell$($cell);\n        }\n\n        if (!$cell) {\n            return false;\n        }\n\n        const {\n            colIndex\n        } = $.data($cell);\n        const column = this.columnmanager.getColumn(colIndex);\n\n        if (!column.focusable) {\n            let $prevFocusedCell = this.$focusedCell;\n            this.unfocusCell($prevFocusedCell);\n            this.$focusedCell = $cell;\n            let ret = this.focusCellInDirection(direction);\n            if (!ret) {\n                this.focusCell($prevFocusedCell);\n            }\n            return ret;\n        }\n\n        this.focusCell($cell);\n        return true;\n    }\n\n    getCell$(colIndex, rowIndex) {\n        return $(this.selector(colIndex, rowIndex), this.bodyScrollable);\n    }\n\n    getAboveCell$($cell) {\n        const {\n            colIndex\n        } = $.data($cell);\n\n        let $aboveRow = $cell.parentElement.previousElementSibling;\n        while ($aboveRow && $aboveRow.classList.contains('dt-row--hide')) {\n            $aboveRow = $aboveRow.previousElementSibling;\n        }\n\n        if (!$aboveRow) return $cell;\n        return $(`.dt-cell--col-${colIndex}`, $aboveRow);\n    }\n\n    getBelowCell$($cell) {\n        const {\n            colIndex\n        } = $.data($cell);\n\n        let $belowRow = $cell.parentElement.nextElementSibling;\n        while ($belowRow && $belowRow.classList.contains('dt-row--hide')) {\n            $belowRow = $belowRow.nextElementSibling;\n        }\n\n        if (!$belowRow) return $cell;\n        return $(`.dt-cell--col-${colIndex}`, $belowRow);\n    }\n\n    getLeftCell$($cell) {\n        return $cell.previousElementSibling;\n    }\n\n    getRightCell$($cell) {\n        return $cell.nextElementSibling;\n    }\n\n    getLeftMostCell$(rowIndex) {\n        return this.getCell$(this.columnmanager.getFirstColumnIndex(), rowIndex);\n    }\n\n    getRightMostCell$(rowIndex) {\n        return this.getCell$(this.columnmanager.getLastColumnIndex(), rowIndex);\n    }\n\n    getTopMostCell$(colIndex) {\n        return this.getCell$(colIndex, this.rowmanager.getFirstRowIndex());\n    }\n\n    getBottomMostCell$(colIndex) {\n        return this.getCell$(colIndex, this.rowmanager.getLastRowIndex());\n    }\n\n    getCell(colIndex, rowIndex) {\n        return this.instance.datamanager.getCell(colIndex, rowIndex);\n    }\n\n    getRowHeight() {\n        return $.style($('.dt-row', this.bodyScrollable), 'height');\n    }\n\n    scrollToCell($cell) {\n        if ($.inViewport($cell, this.bodyScrollable)) return false;\n\n        const {\n            rowIndex\n        } = $.data($cell);\n        this.rowmanager.scrollToRow(rowIndex);\n        return false;\n    }\n\n    getRowCountPerPage() {\n        return Math.ceil(this.instance.getViewportHeight() / this.getRowHeight());\n    }\n\n    getCellHTML(cell) {\n        const {\n            rowIndex,\n            colIndex,\n            isHeader,\n            isFilter,\n            isTotalRow\n        } = cell;\n        const dataAttr = makeDataAttributeString({\n            rowIndex,\n            colIndex,\n            isHeader,\n            isFilter,\n            isTotalRow\n        });\n\n        const row = this.datamanager.getRow(rowIndex);\n\n        const isBodyCell = !(isHeader || isFilter || isTotalRow);\n\n        const className = [\n            'dt-cell',\n            'dt-cell--col-' + colIndex,\n            isBodyCell ? `dt-cell--${colIndex}-${rowIndex}` : '',\n            isBodyCell ? 'dt-cell--row-' + rowIndex : '',\n            isHeader ? 'dt-cell--header' : '',\n            isHeader ? `dt-cell--header-${colIndex}` : '',\n            isFilter ? 'dt-cell--filter' : '',\n            isBodyCell && (row && row.meta.isTreeNodeClose) ? 'dt-cell--tree-close' : ''\n        ].join(' ');\n\n        return `\n            <div class=\"${className}\" ${dataAttr} tabindex=\"0\">\n                ${this.getCellContent(cell)}\n            </div>\n        `;\n    }\n\n    getCellContent(cell, refreshHtml = false) {\n        const {\n            isHeader,\n            isFilter,\n            colIndex\n        } = cell;\n\n        const editable = !isHeader && cell.editable !== false;\n        const editCellHTML = editable ? this.getEditCellHTML(colIndex) : '';\n\n        const sortable = isHeader && cell.sortable !== false;\n        const sortIndicator = sortable ?\n            `<span class=\"sort-indicator\">\n                ${this.options.sortIndicator[cell.sortOrder]}\n            </span>` :\n            '';\n\n        const resizable = isHeader && cell.resizable !== false;\n        const resizeColumn = resizable ? '<span class=\"dt-cell__resize-handle\"></span>' : '';\n\n        const hasDropdown = isHeader && cell.dropdown !== false;\n        const dropdown = hasDropdown ? this.columnmanager.getDropdownHTML() : '';\n\n        let customFormatter = CellManager.getCustomCellFormatter(cell);\n        let contentHTML;\n        if (isHeader || isFilter || !customFormatter) {\n            contentHTML = cell.content;\n        } else {\n            if (!cell.html || refreshHtml) {\n                const row = this.datamanager.getRow(cell.rowIndex);\n                const data = this.datamanager.getData(cell.rowIndex);\n                contentHTML = customFormatter(cell.content, row, cell.column, data);\n            } else {\n                contentHTML = cell.html;\n            }\n        }\n\n        cell.html = contentHTML;\n\n        if (this.options.treeView && !(isHeader || isFilter) && cell.indent !== undefined) {\n            const nextRow = this.datamanager.getRow(cell.rowIndex + 1);\n            const addToggle = nextRow && nextRow.meta.indent > cell.indent;\n            const leftPadding = 20;\n            const unit = 'px';\n\n            // Add toggle and indent in the first column\n            const firstColumnIndex = this.datamanager.getColumnIndexById('_rowIndex') + 1;\n            if (firstColumnIndex === cell.colIndex) {\n                const padding = ((cell.indent || 0)) * leftPadding;\n                const toggleHTML = addToggle ?\n                    `<span class=\"dt-tree-node__toggle\" style=\"left: ${padding - leftPadding}${unit}\">\n                        <span class=\"icon-open\">${icons.chevronDown}</span>\n                        <span class=\"icon-close\">${icons.chevronRight}</span>\n                    </span>` : '';\n                contentHTML = `<span class=\"dt-tree-node\" style=\"padding-left: ${padding}${unit}\">\n                    ${toggleHTML}\n                    <span>${contentHTML}</span>\n                </span>`;\n            }\n        }\n\n        const className = [\n            'dt-cell__content',\n            isHeader ? `dt-cell__content--header-${colIndex}` : `dt-cell__content--col-${colIndex}`\n        ].join(' ');\n\n        let cellContentHTML = `\n            <div class=\"${className}\">\n                ${contentHTML}\n                ${sortIndicator}\n                ${resizeColumn}\n                ${dropdown}\n            </div>\n            ${editCellHTML}\n        `;\n\n        let div = document.createElement('div');\n        div.innerHTML = contentHTML;\n\n        let textContent = div.textContent;\n        textContent = textContent.replace(/\\s+/g, ' ').trim();\n\n        cellContentHTML = cellContentHTML.replace('>', ` title=\"${escapeHTML(textContent)}\">`);\n\n        return cellContentHTML;\n    }\n\n    getEditCellHTML(colIndex) {\n        return `<div class=\"dt-cell__edit dt-cell__edit--col-${colIndex}\"></div>`;\n    }\n\n    selector(colIndex, rowIndex) {\n        return `.dt-cell--${colIndex}-${rowIndex}`;\n    }\n\n    static getCustomCellFormatter(cell) {\n        return cell.format || (cell.column && cell.column.format) || null;\n    }\n}\n\nclass ColumnManager {\n    constructor(instance) {\n        this.instance = instance;\n\n        linkProperties(this, this.instance, [\n            'options',\n            'fireEvent',\n            'header',\n            'datamanager',\n            'cellmanager',\n            'style',\n            'wrapper',\n            'rowmanager',\n            'bodyScrollable',\n            'bodyRenderer'\n        ]);\n\n        this.bindEvents();\n    }\n\n    renderHeader() {\n        this.header.innerHTML = '<div></div>';\n        this.refreshHeader();\n    }\n\n    refreshHeader() {\n        const columns = this.datamanager.getColumns();\n\n        // refresh html\n        $('div', this.header).innerHTML = this.getHeaderHTML(columns);\n\n        this.$filterRow = $('.dt-row-filter', this.header);\n        if (this.$filterRow) {\n            $.style(this.$filterRow, { display: 'none' });\n        }\n        // reset columnMap\n        this.$columnMap = [];\n        this.bindMoveColumn();\n    }\n\n    getHeaderHTML(columns) {\n        let html = this.rowmanager.getRowHTML(columns, {\n            isHeader: 1\n        });\n        if (this.options.inlineFilters) {\n            html += this.rowmanager.getRowHTML(columns, {\n                isFilter: 1\n            });\n        }\n        return html;\n    }\n\n    bindEvents() {\n        this.bindDropdown();\n        this.bindResizeColumn();\n        this.bindPerfectColumnWidth();\n        this.bindFilter();\n    }\n\n    bindDropdown() {\n        let toggleClass = '.dt-dropdown__toggle';\n        let dropdownClass = '.dt-dropdown__list';\n\n        // attach the dropdown list to container\n        this.instance.dropdownContainer.innerHTML = this.getDropdownListHTML();\n        this.$dropdownList = this.instance.dropdownContainer.firstElementChild;\n\n        $.on(this.header, 'click', toggleClass, e => {\n            this.openDropdown(e);\n        });\n\n        const deactivateDropdownOnBodyClick = (e) => {\n            const selector = [\n                toggleClass, toggleClass + ' *',\n                dropdownClass, dropdownClass + ' *'\n            ].join(',');\n            if (e.target.matches(selector)) return;\n            deactivateDropdown();\n        };\n        $.on(document.body, 'click', deactivateDropdownOnBodyClick);\n        document.addEventListener('scroll', deactivateDropdown, true);\n\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'click', deactivateDropdownOnBodyClick);\n            $.off(document, 'scroll', deactivateDropdown);\n        });\n\n        $.on(this.$dropdownList, 'click', '.dt-dropdown__list-item', (e, $item) => {\n            if (!this._dropdownActiveColIndex) return;\n            const dropdownItems = this.options.headerDropdown;\n            const { index } = $.data($item);\n            const colIndex = this._dropdownActiveColIndex;\n            let callback = dropdownItems[index].action;\n\n            callback && callback.call(this.instance, this.getColumn(colIndex));\n            this.hideDropdown();\n        });\n\n        const _this = this;\n        function deactivateDropdown(e) {\n            _this.hideDropdown();\n        }\n\n        this.hideDropdown();\n    }\n\n    openDropdown(e) {\n        if (!this._dropdownWidth) {\n            $.style(this.$dropdownList, { display: '' });\n            this._dropdownWidth = $.style(this.$dropdownList, 'width');\n        }\n        $.style(this.$dropdownList, {\n            display: '',\n            left: (e.clientX - this._dropdownWidth + 4) + 'px',\n            top: (e.clientY + 4) + 'px'\n        });\n        const $cell = $.closest('.dt-cell', e.target);\n        const { colIndex } = $.data($cell);\n        this._dropdownActiveColIndex = colIndex;\n    }\n\n    hideDropdown() {\n        $.style(this.$dropdownList, {\n            display: 'none'\n        });\n        this._dropdownActiveColIndex = null;\n    }\n\n    bindResizeColumn() {\n        let isDragging = false;\n        let $resizingCell, startWidth, startX;\n\n        $.on(this.header, 'mousedown', '.dt-cell .dt-cell__resize-handle', (e, $handle) => {\n            document.body.classList.add('dt-resize');\n            const $cell = $handle.parentNode.parentNode;\n            $resizingCell = $cell;\n            const {\n                colIndex\n            } = $.data($resizingCell);\n            const col = this.getColumn(colIndex);\n\n            if (col && col.resizable === false) {\n                return;\n            }\n\n            isDragging = true;\n            startWidth = $.style($('.dt-cell__content', $resizingCell), 'width');\n            startX = e.pageX;\n        });\n\n        const onMouseup = (e) => {\n            document.body.classList.remove('dt-resize');\n            if (!$resizingCell) return;\n            isDragging = false;\n\n            const {\n                colIndex\n            } = $.data($resizingCell);\n            this.setColumnWidth(colIndex);\n            this.style.setBodyStyle();\n            $resizingCell = null;\n        };\n        $.on(document.body, 'mouseup', onMouseup);\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'mouseup', onMouseup);\n        });\n\n        const onMouseMove = (e) => {\n            if (!isDragging) return;\n            let delta = e.pageX - startX;\n            if (this.options.direction === 'rtl') {\n                delta = -1 * delta;\n            }\n            const finalWidth = startWidth + delta;\n            const {\n                colIndex\n            } = $.data($resizingCell);\n\n            let columnMinWidth = this.options.minimumColumnWidth;\n            if (columnMinWidth > finalWidth) {\n                // don't resize past 30 pixels\n                return;\n            }\n            this.datamanager.updateColumn(colIndex, {\n                width: finalWidth\n            });\n            this.setColumnHeaderWidth(colIndex);\n        };\n        $.on(document.body, 'mousemove', onMouseMove);\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'mousemove', onMouseMove);\n        });\n    }\n\n    bindPerfectColumnWidth() {\n        $.on(this.header, 'dblclick', '.dt-cell .dt-cell__resize-handle', (e, $handle) => {\n            const $cell = $handle.parentNode.parentNode;\n            const { colIndex } = $.data($cell);\n\n            let longestCell = this.bodyRenderer.visibleRows\n                .map(d => d[colIndex])\n                .reduce((acc, curr) => acc.content.length > curr.content.length ? acc : curr);\n\n            let $longestCellHTML = this.cellmanager.getCellHTML(longestCell);\n            let $div = document.createElement('div');\n            $div.innerHTML = $longestCellHTML;\n            let cellText = $div.querySelector('.dt-cell__content').textContent;\n\n            let {\n                borderLeftWidth,\n                borderRightWidth,\n                paddingLeft,\n                paddingRight\n            } = $.getStyle(this.bodyScrollable.querySelector('.dt-cell__content'));\n\n            let padding = [borderLeftWidth, borderRightWidth, paddingLeft, paddingRight]\n                .map(parseFloat)\n                .reduce((sum, val) => sum + val);\n\n            let width = $.measureTextWidth(cellText) + padding;\n            this.datamanager.updateColumn(colIndex, { width });\n            this.setColumnHeaderWidth(colIndex);\n            this.setColumnWidth(colIndex);\n        });\n    }\n\n    bindMoveColumn() {\n        if (this.options.disableReorderColumn) return;\n\n        const $parent = $('.dt-row', this.header);\n\n        this.sortable = Sortable.create($parent, {\n            onEnd: (e) => {\n                const {\n                    oldIndex,\n                    newIndex\n                } = e;\n                const $draggedCell = e.item;\n                const {\n                    colIndex\n                } = $.data($draggedCell);\n                if (+colIndex === newIndex) return;\n\n                this.switchColumn(oldIndex, newIndex);\n            },\n            preventOnFilter: false,\n            filter: '.dt-cell__resize-handle, .dt-dropdown',\n            chosenClass: 'dt-cell--dragging',\n            animation: 150\n        });\n    }\n\n    sortColumn(colIndex, nextSortOrder) {\n        this.instance.freeze();\n        this.sortRows(colIndex, nextSortOrder)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => this.instance.unfreeze())\n            .then(() => {\n                this.fireEvent('onSortColumn', this.getColumn(colIndex));\n            });\n    }\n\n    removeColumn(colIndex) {\n        const removedCol = this.getColumn(colIndex);\n        this.instance.freeze();\n        this.datamanager.removeColumn(colIndex)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => this.instance.unfreeze())\n            .then(() => {\n                this.fireEvent('onRemoveColumn', removedCol);\n            });\n    }\n\n    switchColumn(oldIndex, newIndex) {\n        this.instance.freeze();\n        this.datamanager.switchColumn(oldIndex, newIndex)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => {\n                this.setColumnWidth(oldIndex);\n                this.setColumnWidth(newIndex);\n                this.instance.unfreeze();\n            })\n            .then(() => {\n                this.fireEvent('onSwitchColumn',\n                    this.getColumn(oldIndex), this.getColumn(newIndex)\n                );\n            });\n    }\n\n    toggleFilter(flag) {\n        if (!this.options.inlineFilters) return;\n\n        let showFilter;\n        if (flag === undefined) {\n            showFilter = !this.isFilterShown;\n        } else {\n            showFilter = flag;\n        }\n\n        if (showFilter) {\n            $.style(this.$filterRow, { display: '' });\n        } else {\n            $.style(this.$filterRow, { display: 'none' });\n        }\n\n        this.isFilterShown = showFilter;\n        this.style.setBodyStyle();\n    }\n\n    focusFilter(colIndex) {\n        if (!this.isFilterShown) return;\n\n        const $filterInput = $(`.dt-cell--col-${colIndex} .dt-filter`, this.$filterRow);\n        $filterInput.focus();\n    }\n\n    bindFilter() {\n        if (!this.options.inlineFilters) return;\n        const handler = e => {\n            this.applyFilter(this.getAppliedFilters());\n        };\n        $.on(this.header, 'keydown', '.dt-filter', debounce$1(handler, 300));\n    }\n\n    applyFilter(filters) {\n        this.datamanager.filterRows(filters)\n            .then(({\n                rowsToShow\n            }) => {\n                this.rowmanager.showRows(rowsToShow);\n            });\n    }\n\n    getAppliedFilters() {\n        const filters = {};\n        $.each('.dt-filter', this.header).map((input) => {\n            const value = input.value;\n            if (value) {\n                filters[input.dataset.colIndex] = value;\n            }\n        });\n        return filters;\n    }\n\n    applyDefaultSortOrder() {\n        // sort rows if any 1 column has a default sortOrder set\n        const columnsToSort = this.getColumns().filter(col => col.sortOrder !== 'none');\n\n        if (columnsToSort.length === 1) {\n            const column = columnsToSort[0];\n            this.sortColumn(column.colIndex, column.sortOrder);\n        }\n    }\n\n    sortRows(colIndex, sortOrder) {\n        return this.datamanager.sortRows(colIndex, sortOrder);\n    }\n\n    getColumn(colIndex) {\n        return this.datamanager.getColumn(colIndex);\n    }\n\n    getColumns() {\n        return this.datamanager.getColumns();\n    }\n\n    setColumnWidth(colIndex, width) {\n        colIndex = +colIndex;\n\n        let columnWidth = width || this.getColumn(colIndex).width;\n\n        const selector = [\n            `.dt-cell__content--col-${colIndex}`,\n            `.dt-cell__edit--col-${colIndex}`\n        ].join(', ');\n\n        const styles = {\n            width: columnWidth + 'px'\n        };\n\n        this.style.setStyle(selector, styles);\n    }\n\n    setColumnHeaderWidth(colIndex) {\n        colIndex = +colIndex;\n        this.$columnMap = this.$columnMap || [];\n        const selector = `.dt-cell__content--header-${colIndex}`;\n        const {\n            width\n        } = this.getColumn(colIndex);\n\n        let $column = this.$columnMap[colIndex];\n        if (!$column) {\n            $column = this.header.querySelector(selector);\n            this.$columnMap[colIndex] = $column;\n        }\n\n        $column.style.width = width + 'px';\n    }\n\n    getColumnMinWidth(colIndex) {\n        colIndex = +colIndex;\n        return this.getColumn(colIndex).minWidth || 24;\n    }\n\n    getFirstColumnIndex() {\n        return this.datamanager.getColumnIndexById('_rowIndex') + 1;\n    }\n\n    getHeaderCell$(colIndex) {\n        return $(`.dt-cell--header-${colIndex}`, this.header);\n    }\n\n    getLastColumnIndex() {\n        return this.datamanager.getColumnCount() - 1;\n    }\n\n    getDropdownHTML() {\n        const { dropdownButton } = this.options;\n\n        return `\n            <div class=\"dt-dropdown\">\n                <div class=\"dt-dropdown__toggle\">${dropdownButton}</div>\n            </div>\n      `;\n    }\n\n    getDropdownListHTML() {\n        const { headerDropdown: dropdownItems } = this.options;\n\n        return `\n            <div class=\"dt-dropdown__list\">\n            ${dropdownItems.map((d, i) => `\n                <div class=\"dt-dropdown__list-item\" data-index=\"${i}\">${d.label}</div>\n            `).join('')}\n            </div>\n        `;\n    }\n}\n\nclass RowManager {\n    constructor(instance) {\n        this.instance = instance;\n        linkProperties(this, this.instance, [\n            'options',\n            'fireEvent',\n            'wrapper',\n            'bodyScrollable',\n            'bodyRenderer',\n            'style'\n        ]);\n\n        this.bindEvents();\n        this.refreshRows = nextTick(this.refreshRows, this);\n    }\n\n    get datamanager() {\n        return this.instance.datamanager;\n    }\n\n    get cellmanager() {\n        return this.instance.cellmanager;\n    }\n\n    bindEvents() {\n        this.bindCheckbox();\n    }\n\n    bindCheckbox() {\n        if (!this.options.checkboxColumn) return;\n\n        // map of checked rows\n        this.checkMap = [];\n\n        $.on(this.wrapper, 'click', '.dt-cell--col-0 [type=\"checkbox\"]', (e, $checkbox) => {\n            const $cell = $checkbox.closest('.dt-cell');\n            const {\n                rowIndex,\n                isHeader\n            } = $.data($cell);\n            const checked = $checkbox.checked;\n\n            if (isHeader) {\n                this.checkAll(checked);\n            } else {\n                this.checkRow(rowIndex, checked);\n            }\n        });\n    }\n\n    refreshRows() {\n        this.instance.renderBody();\n        this.instance.setDimensions();\n    }\n\n    refreshRow(row, rowIndex) {\n        const _row = this.datamanager.updateRow(row, rowIndex);\n\n        _row.forEach(cell => {\n            this.cellmanager.refreshCell(cell, true);\n        });\n    }\n\n    getCheckedRows() {\n        if (!this.checkMap) {\n            return [];\n        }\n\n        let out = [];\n        for (let rowIndex in this.checkMap) {\n            const checked = this.checkMap[rowIndex];\n            if (checked === 1) {\n                out.push(rowIndex);\n            }\n        }\n\n        return out;\n    }\n\n    highlightCheckedRows() {\n        this.getCheckedRows()\n            .map(rowIndex => this.checkRow(rowIndex, true));\n    }\n\n    checkRow(rowIndex, toggle) {\n        const value = toggle ? 1 : 0;\n        const selector = rowIndex => `.dt-cell--0-${rowIndex} [type=\"checkbox\"]`;\n        // update internal map\n        this.checkMap[rowIndex] = value;\n        // set checkbox value explicitly\n        $.each(selector(rowIndex), this.bodyScrollable)\n            .map(input => {\n                input.checked = toggle;\n            });\n        // highlight row\n        this.highlightRow(rowIndex, toggle);\n        this.showCheckStatus();\n        this.fireEvent('onCheckRow', this.datamanager.getRow(rowIndex));\n    }\n\n    checkAll(toggle) {\n        const value = toggle ? 1 : 0;\n\n        // update internal map\n        if (toggle) {\n            if (this.datamanager._filteredRows) {\n                this.datamanager._filteredRows.forEach(f => {\n                    this.checkRow(f, toggle);\n                });\n            } else {\n                this.checkMap = Array.from(Array(this.getTotalRows())).map(c => value);\n            }\n        } else {\n            this.checkMap = [];\n        }\n        // set checkbox value\n        $.each('.dt-cell--col-0 [type=\"checkbox\"]', this.bodyScrollable)\n            .map(input => {\n                input.checked = toggle;\n            });\n        // highlight all\n        this.highlightAll(toggle);\n        this.showCheckStatus();\n        this.fireEvent('onCheckRow');\n    }\n\n    showCheckStatus() {\n        if (!this.options.checkedRowStatus) return;\n        const checkedRows = this.getCheckedRows();\n        const count = checkedRows.length;\n        if (count > 0) {\n            let message = this.instance.translate('{count} rows selected', {\n                count: count\n            });\n            this.bodyRenderer.showToastMessage(message);\n        } else {\n            this.bodyRenderer.clearToastMessage();\n        }\n    }\n\n    highlightRow(rowIndex, toggle = true) {\n        const $row = this.getRow$(rowIndex);\n        if (!$row) return;\n\n        if (!toggle && this.bodyScrollable.classList.contains('dt-scrollable--highlight-all')) {\n            $row.classList.add('dt-row--unhighlight');\n            return;\n        }\n\n        if (toggle && $row.classList.contains('dt-row--unhighlight')) {\n            $row.classList.remove('dt-row--unhighlight');\n        }\n\n        this._highlightedRows = this._highlightedRows || {};\n\n        if (toggle) {\n            $row.classList.add('dt-row--highlight');\n            this._highlightedRows[rowIndex] = $row;\n        } else {\n            $row.classList.remove('dt-row--highlight');\n            delete this._highlightedRows[rowIndex];\n        }\n    }\n\n    highlightAll(toggle = true) {\n        if (toggle) {\n            this.bodyScrollable.classList.add('dt-scrollable--highlight-all');\n        } else {\n            this.bodyScrollable.classList.remove('dt-scrollable--highlight-all');\n            for (const rowIndex in this._highlightedRows) {\n                const $row = this._highlightedRows[rowIndex];\n                $row.classList.remove('dt-row--highlight');\n            }\n            this._highlightedRows = {};\n        }\n    }\n\n    showRows(rowIndices) {\n        rowIndices = ensureArray(rowIndices);\n        const rows = rowIndices.map(rowIndex => this.datamanager.getRow(rowIndex));\n        this.bodyRenderer.renderRows(rows);\n    }\n\n    showAllRows() {\n        const rowIndices = this.datamanager.getAllRowIndices();\n        this.showRows(rowIndices);\n    }\n\n    getChildrenToShowForNode(rowIndex) {\n        const row = this.datamanager.getRow(rowIndex);\n        row.meta.isTreeNodeClose = false;\n\n        return this.datamanager.getImmediateChildren(rowIndex);\n    }\n\n    openSingleNode(rowIndex) {\n        const childrenToShow = this.getChildrenToShowForNode(rowIndex);\n        const visibleRowIndices = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = uniq$1([...childrenToShow, ...visibleRowIndices]).sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    getChildrenToHideForNode(rowIndex) {\n        const row = this.datamanager.getRow(rowIndex);\n        row.meta.isTreeNodeClose = true;\n\n        const rowsToHide = this.datamanager.getChildren(rowIndex);\n        rowsToHide.forEach(rowIndex => {\n            const row = this.datamanager.getRow(rowIndex);\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = true;\n            }\n        });\n\n        return rowsToHide;\n    }\n\n    closeSingleNode(rowIndex) {\n        const rowsToHide = this.getChildrenToHideForNode(rowIndex);\n        const visibleRows = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = visibleRows\n            .filter(rowIndex => !rowsToHide.includes(rowIndex))\n            .sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    expandAllNodes() {\n        let rows = this.datamanager.getRows();\n        let rootNodes = rows.filter(row => !row.meta.isLeaf);\n\n        const childrenToShow = rootNodes.map(row => this.getChildrenToShowForNode(row.meta.rowIndex)).flat();\n        const visibleRowIndices = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = uniq$1([...childrenToShow, ...visibleRowIndices]).sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    collapseAllNodes() {\n        let rows = this.datamanager.getRows();\n        let rootNodes = rows.filter(row => row.meta.indent === 0);\n\n        const rowsToHide = rootNodes.map(row => this.getChildrenToHideForNode(row.meta.rowIndex)).flat();\n        const visibleRows = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = visibleRows\n            .filter(rowIndex => !rowsToHide.includes(rowIndex))\n            .sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    setTreeDepth(depth) {\n        let rows = this.datamanager.getRows();\n\n        const rowsToOpen = rows.filter(row => row.meta.indent < depth);\n        const rowsToClose = rows.filter(row => row.meta.indent >= depth);\n        const rowsToHide = rowsToClose.filter(row => row.meta.indent > depth);\n\n        rowsToClose.forEach(row => {\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = true;\n            }\n        });\n        rowsToOpen.forEach(row => {\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = false;\n            }\n        });\n\n        const rowsToShow = rows\n            .filter(row => !rowsToHide.includes(row))\n            .map(row => row.meta.rowIndex)\n            .sort(numberSortAsc);\n        this.showRows(rowsToShow);\n    }\n\n    getRow$(rowIndex) {\n        return $(this.selector(rowIndex), this.bodyScrollable);\n    }\n\n    getTotalRows() {\n        return this.datamanager.getRowCount();\n    }\n\n    getFirstRowIndex() {\n        return 0;\n    }\n\n    getLastRowIndex() {\n        return this.datamanager.getRowCount() - 1;\n    }\n\n    scrollToRow(rowIndex) {\n        rowIndex = +rowIndex;\n        this._lastScrollTo = this._lastScrollTo || 0;\n        const $row = this.getRow$(rowIndex);\n        if ($.inViewport($row, this.bodyScrollable)) return;\n\n        const {\n            height\n        } = $row.getBoundingClientRect();\n        const {\n            top,\n            bottom\n        } = this.bodyScrollable.getBoundingClientRect();\n        const rowsInView = Math.floor((bottom - top) / height);\n\n        let offset = 0;\n        if (rowIndex > this._lastScrollTo) {\n            offset = height * ((rowIndex + 1) - rowsInView);\n        } else {\n            offset = height * ((rowIndex + 1) - 1);\n        }\n\n        this._lastScrollTo = rowIndex;\n        $.scrollTop(this.bodyScrollable, offset);\n    }\n\n    getRowHTML(row, props) {\n        const dataAttr = makeDataAttributeString(props);\n        let rowIdentifier = props.rowIndex;\n\n        if (props.isFilter) {\n            row = row.map(cell => (Object.assign({}, cell, {\n                content: this.getFilterInput({\n                    colIndex: cell.colIndex,\n                    name: cell.name\n                }),\n                isFilter: 1,\n                isHeader: undefined,\n                editable: false\n            })));\n\n            rowIdentifier = 'filter';\n        }\n\n        if (props.isHeader) {\n            rowIdentifier = 'header';\n        }\n\n        return `\n            <div class=\"dt-row dt-row-${rowIdentifier}\" ${dataAttr}>\n                ${row.map(cell => this.cellmanager.getCellHTML(cell)).join('')}\n            </div>\n        `;\n    }\n\n    getFilterInput(props) {\n        let title = `title=\"Filter based on ${props.name || 'Index'}\"`;\n        const dataAttr = makeDataAttributeString(props);\n        return `<input class=\"dt-filter dt-input\" type=\"text\" ${dataAttr} tabindex=\"1\"\n            ${props.colIndex === 0 ? 'disabled' : title} />`;\n    }\n\n    selector(rowIndex) {\n        return `.dt-row-${rowIndex}`;\n    }\n}\n\nvar hyperlist = createCommonjsModule(function (module, exports) {\n(function(f){{module.exports=f();}})(function(){return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof commonjsRequire==\"function\"&&commonjsRequire;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r);}return n[o].exports}var i=typeof commonjsRequire==\"function\"&&commonjsRequire;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\n// Default configuration.\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultConfig = {\n  width: '100%',\n  height: '100%'\n};\n\n// Check for valid number.\nvar isNumber = function isNumber(input) {\n  return Number(input) === Number(input);\n};\n\n/**\n * Creates a HyperList instance that virtually scrolls very large amounts of\n * data effortlessly.\n */\n\nvar HyperList = function () {\n  _createClass(HyperList, null, [{\n    key: 'create',\n    value: function create(element, userProvidedConfig) {\n      return new HyperList(element, userProvidedConfig);\n    }\n\n    /**\n     * Merge given css style on an element\n     * @param {DOMElement} element\n     * @param {Object} style\n     */\n\n  }, {\n    key: 'mergeStyle',\n    value: function mergeStyle(element, style) {\n      for (var i in style) {\n        if (element.style[i] !== style[i]) {\n          element.style[i] = style[i];\n        }\n      }\n    }\n  }, {\n    key: 'getMaxBrowserHeight',\n    value: function getMaxBrowserHeight() {\n      // Create two elements, the wrapper is `1px` tall and is transparent and\n      // positioned at the top of the page. Inside that is an element that gets\n      // set to 1 billion pixels. Then reads the max height the browser can\n      // calculate.\n      var wrapper = document.createElement('div');\n      var fixture = document.createElement('div');\n\n      // As said above, these values get set to put the fixture elements into the\n      // right visual state.\n      HyperList.mergeStyle(wrapper, { position: 'absolute', height: '1px', opacity: 0 });\n      HyperList.mergeStyle(fixture, { height: '1e7px' });\n\n      // Add the fixture into the wrapper element.\n      wrapper.appendChild(fixture);\n\n      // Apply to the page, the values won't kick in unless this is attached.\n      document.body.appendChild(wrapper);\n\n      // Get the maximum element height in pixels.\n      var maxElementHeight = fixture.offsetHeight;\n\n      // Remove the element immediately after reading the value.\n      document.body.removeChild(wrapper);\n\n      return maxElementHeight;\n    }\n  }]);\n\n  function HyperList(element, userProvidedConfig) {\n    var _this = this;\n\n    _classCallCheck(this, HyperList);\n\n    this._config = {};\n    this._lastRepaint = null;\n    this._maxElementHeight = HyperList.getMaxBrowserHeight();\n\n    this.refresh(element, userProvidedConfig);\n\n    var config = this._config;\n\n    // Create internal render loop.\n    var render = function render() {\n      var scrollTop = _this._getScrollPosition();\n      var lastRepaint = _this._lastRepaint;\n\n      _this._renderAnimationFrame = window.requestAnimationFrame(render);\n\n      if (scrollTop === lastRepaint) {\n        return;\n      }\n\n      if (!lastRepaint || Math.abs(scrollTop - lastRepaint) > _this._averageHeight) {\n        var rendered = _this._renderChunk();\n\n        _this._lastRepaint = scrollTop;\n\n        if (rendered !== false && typeof config.afterRender === 'function') {\n          config.afterRender();\n        }\n      }\n    };\n\n    render();\n  }\n\n  _createClass(HyperList, [{\n    key: 'destroy',\n    value: function destroy() {\n      window.cancelAnimationFrame(this._renderAnimationFrame);\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh(element, userProvidedConfig) {\n      var _this2 = this;\n\n      Object.assign(this._config, defaultConfig, userProvidedConfig);\n\n      if (!element || element.nodeType !== 1) {\n        throw new Error('HyperList requires a valid DOM Node container');\n      }\n\n      this._element = element;\n\n      var config = this._config;\n\n      var scroller = this._scroller || config.scroller || document.createElement(config.scrollerTagName || 'tr');\n\n      // Default configuration option `useFragment` to `true`.\n      if (typeof config.useFragment !== 'boolean') {\n        this._config.useFragment = true;\n      }\n\n      if (!config.generate) {\n        throw new Error('Missing required `generate` function');\n      }\n\n      if (!isNumber(config.total)) {\n        throw new Error('Invalid required `total` value, expected number');\n      }\n\n      if (!Array.isArray(config.itemHeight) && !isNumber(config.itemHeight)) {\n        throw new Error('\\n        Invalid required `itemHeight` value, expected number or array\\n      '.trim());\n      } else if (isNumber(config.itemHeight)) {\n        this._itemHeights = Array(config.total).fill(config.itemHeight);\n      } else {\n        this._itemHeights = config.itemHeight;\n      }\n\n      // Width and height should be coerced to string representations. Either in\n      // `%` or `px`.\n      Object.keys(defaultConfig).filter(function (prop) {\n        return prop in config;\n      }).forEach(function (prop) {\n        var value = config[prop];\n        var isValueNumber = isNumber(value);\n        var isValuePercent = isValueNumber ? false : value.slice(-1) === '%';\n\n        if (value && typeof value !== 'string' && typeof value !== 'number') {\n          var msg = 'Invalid optional `' + prop + '`, expected string or number';\n          throw new Error(msg);\n        } else if (isValueNumber) {\n          config[prop] = value + 'px';\n        }\n\n        if (prop !== 'height') {\n          return;\n        }\n\n        // Compute the containerHeight as number\n        var numberValue = isValueNumber ? value : parseInt(value.replace(/px|%/, ''), 10);\n\n        if (isValuePercent) {\n          _this2._containerHeight = window.innerHeight * numberValue / 100;\n        } else {\n          _this2._containerHeight = isNumber(value) ? value : numberValue;\n        }\n      });\n\n      // Decorate the container element with styles that will match\n      // the user supplied configuration.\n      var elementStyle = {\n        width: '' + config.width,\n        height: '' + config.height,\n        overflow: 'auto',\n        position: 'relative'\n      };\n\n      HyperList.mergeStyle(element, elementStyle);\n\n      var scrollerHeight = config.itemHeight * config.total;\n      var maxElementHeight = this._maxElementHeight;\n\n      if (scrollerHeight > maxElementHeight) {\n        console.warn(['HyperList: The maximum element height', maxElementHeight + 'px has', 'been exceeded; please reduce your item height.'].join(' '));\n      }\n\n      var scrollerStyle = {\n        opacity: '0',\n        position: 'absolute',\n        width: '1px',\n        height: scrollerHeight + 'px'\n      };\n\n      HyperList.mergeStyle(scroller, scrollerStyle);\n\n      // Only append the scroller element once.\n      if (!this._scroller) {\n        element.appendChild(scroller);\n      }\n\n      // Set the scroller instance.\n      this._scroller = scroller;\n      this._scrollHeight = this._computeScrollHeight();\n\n      // Reuse the item positions if refreshed, otherwise set to empty array.\n      this._itemPositions = this._itemPositions || Array(config.total).fill(0);\n\n      // Each index in the array should represent the position in the DOM.\n      this._computePositions(0);\n\n      // Render after refreshing. Force render if we're calling refresh manually.\n      this._renderChunk(this._lastRepaint !== null);\n\n      if (typeof config.afterRender === 'function') {\n        config.afterRender();\n      }\n    }\n  }, {\n    key: '_getRow',\n    value: function _getRow(i) {\n      var config = this._config;\n      var item = config.generate(i);\n      var height = item.height;\n\n      if (height !== undefined && isNumber(height)) {\n        item = item.element;\n\n        // The height isn't the same as predicted, compute positions again\n        if (height !== this._itemHeights) {\n          this._itemHeights[i] = height;\n          this._computePositions(i);\n          this._scrollHeight = this._computeScrollHeight(i);\n        }\n      } else {\n        height = this._itemHeights[i];\n      }\n\n      if (!item || item.nodeType !== 1) {\n        throw new Error('Generator did not return a DOM Node for index: ' + i);\n      }\n\n      var oldClass = item.getAttribute('class') || '';\n      item.setAttribute('class', oldClass + ' ' + (config.rowClassName || 'vrow'));\n\n      var top = this._itemPositions[i];\n\n      HyperList.mergeStyle(item, {\n        position: 'absolute',\n        top: top + 'px'\n      });\n\n      return item;\n    }\n  }, {\n    key: '_getScrollPosition',\n    value: function _getScrollPosition() {\n      var config = this._config;\n\n      if (typeof config.overrideScrollPosition === 'function') {\n        return config.overrideScrollPosition();\n      }\n\n      return this._element.scrollTop;\n    }\n  }, {\n    key: '_renderChunk',\n    value: function _renderChunk(force) {\n      var config = this._config;\n      var element = this._element;\n      var scrollTop = this._getScrollPosition();\n      var total = config.total;\n\n      var from = config.reverse ? this._getReverseFrom(scrollTop) : this._getFrom(scrollTop) - 1;\n\n      if (from < 0 || from - this._screenItemsLen < 0) {\n        from = 0;\n      }\n\n      if (!force && this._lastFrom === from) {\n        return false;\n      }\n\n      this._lastFrom = from;\n\n      var to = from + this._cachedItemsLen;\n\n      if (to > total || to + this._cachedItemsLen > total) {\n        to = total;\n      }\n\n      // Append all the new rows in a document fragment that we will later append\n      // to the parent node\n      var fragment = config.useFragment ? document.createDocumentFragment() : []\n      // Sometimes you'll pass fake elements to this tool and Fragments require\n      // real elements.\n\n\n      // The element that forces the container to scroll.\n      ;var scroller = this._scroller;\n\n      // Keep the scroller in the list of children.\n      fragment[config.useFragment ? 'appendChild' : 'push'](scroller);\n\n      for (var i = from; i < to; i++) {\n        var row = this._getRow(i);\n\n        fragment[config.useFragment ? 'appendChild' : 'push'](row);\n      }\n\n      if (config.applyPatch) {\n        return config.applyPatch(element, fragment);\n      }\n\n      element.innerHTML = '';\n      element.appendChild(fragment);\n    }\n  }, {\n    key: '_computePositions',\n    value: function _computePositions() {\n      var from = arguments.length <= 0 || arguments[0] === undefined ? 1 : arguments[0];\n\n      var config = this._config;\n      var total = config.total;\n      var reverse = config.reverse;\n\n      if (from < 1 && !reverse) {\n        from = 1;\n      }\n\n      for (var i = from; i < total; i++) {\n        if (reverse) {\n          if (i === 0) {\n            this._itemPositions[0] = this._scrollHeight - this._itemHeights[0];\n          } else {\n            this._itemPositions[i] = this._itemPositions[i - 1] - this._itemHeights[i];\n          }\n        } else {\n          this._itemPositions[i] = this._itemHeights[i - 1] + this._itemPositions[i - 1];\n        }\n      }\n    }\n  }, {\n    key: '_computeScrollHeight',\n    value: function _computeScrollHeight() {\n      var _this3 = this;\n\n      var config = this._config;\n      var total = config.total;\n      var scrollHeight = this._itemHeights.reduce(function (a, b) {\n        return a + b;\n      }, 0);\n\n      HyperList.mergeStyle(this._scroller, {\n        opacity: 0,\n        position: 'absolute',\n        width: '1px',\n        height: scrollHeight + 'px'\n      });\n\n      // Calculate the height median\n      var sortedItemHeights = this._itemHeights.slice(0).sort(function (a, b) {\n        return a - b;\n      });\n      var middle = Math.floor(total / 2);\n      var averageHeight = total % 2 === 0 ? (sortedItemHeights[middle] + sortedItemHeights[middle - 1]) / 2 : sortedItemHeights[middle];\n\n      var containerHeight = this._element.clientHeight ? this._element.clientHeight : this._containerHeight;\n      this._screenItemsLen = Math.ceil(containerHeight / averageHeight);\n      this._containerHeight = containerHeight;\n\n      // Cache 3 times the number of items that fit in the container viewport.\n      this._cachedItemsLen = Math.max(this._cachedItemsLen || 0, this._screenItemsLen * 3);\n      this._averageHeight = averageHeight;\n\n      if (config.reverse) {\n        window.requestAnimationFrame(function () {\n          _this3._element.scrollTop = scrollHeight;\n        });\n      }\n\n      return scrollHeight;\n    }\n  }, {\n    key: '_getFrom',\n    value: function _getFrom(scrollTop) {\n      var i = 0;\n\n      while (this._itemPositions[i] < scrollTop) {\n        i++;\n      }\n\n      return i;\n    }\n  }, {\n    key: '_getReverseFrom',\n    value: function _getReverseFrom(scrollTop) {\n      var i = this._config.total - 1;\n\n      while (i > 0 && this._itemPositions[i] < scrollTop + this._containerHeight) {\n        i--;\n      }\n\n      return i;\n    }\n  }]);\n\n  return HyperList;\n}();\n\nexports.default = HyperList;\nmodule.exports = exports['default'];\n\n},{}]},{},[1])(1)\n});\n});\n\nvar HyperList = unwrapExports(hyperlist);\n\nclass BodyRenderer {\n    constructor(instance) {\n        this.instance = instance;\n        this.options = instance.options;\n        this.datamanager = instance.datamanager;\n        this.rowmanager = instance.rowmanager;\n        this.cellmanager = instance.cellmanager;\n        this.bodyScrollable = instance.bodyScrollable;\n        this.footer = this.instance.footer;\n        this.log = instance.log;\n    }\n\n    renderRows(rows) {\n        this.visibleRows = rows;\n        this.visibleRowIndices = rows.map(row => row.meta.rowIndex);\n\n        if (rows.length === 0) {\n            this.bodyScrollable.innerHTML = this.getNoDataHTML();\n            return;\n        }\n\n        const rowViewOrder = this.datamanager.rowViewOrder.map(index => {\n            if (this.visibleRowIndices.includes(index)) {\n                return index;\n            }\n            return null;\n        }).filter(index => index !== null);\n\n        const computedStyle = getComputedStyle(this.bodyScrollable);\n\n        let config = {\n            width: computedStyle.width,\n            height: computedStyle.height,\n            itemHeight: this.options.cellHeight,\n            total: rows.length,\n            generate: (index) => {\n                const el = document.createElement('div');\n                const rowIndex = rowViewOrder[index];\n                const row = this.datamanager.getRow(rowIndex);\n                const rowHTML = this.rowmanager.getRowHTML(row, row.meta);\n                el.innerHTML = rowHTML;\n                return el.children[0];\n            },\n            afterRender: () => {\n                this.restoreState();\n            }\n        };\n\n        if (!this.hyperlist) {\n            this.hyperlist = new HyperList(this.bodyScrollable, config);\n        } else {\n            this.hyperlist.refresh(this.bodyScrollable, config);\n        }\n\n        this.renderFooter();\n    }\n\n    render() {\n        const rows = this.datamanager.getRowsForView();\n        this.renderRows(rows);\n        // setDimensions requires atleast 1 row to exist in dom\n        this.instance.setDimensions();\n    }\n\n    renderFooter() {\n        if (!this.options.showTotalRow) return;\n\n        const totalRow = this.getTotalRow();\n        let html = this.rowmanager.getRowHTML(totalRow, { isTotalRow: 1, rowIndex: 'totalRow' });\n\n        this.footer.innerHTML = html;\n    }\n\n    getTotalRow() {\n        const columns = this.datamanager.getColumns();\n        const totalRowTemplate = columns.map(col => {\n            let content = null;\n            if (['_rowIndex', '_checkbox'].includes(col.id)) {\n                content = '';\n            }\n            return {\n                content,\n                isTotalRow: 1,\n                colIndex: col.colIndex,\n                column: col\n            };\n        });\n\n        const totalRow = totalRowTemplate.map((cell, i) => {\n            if (cell.content === '') return cell;\n\n            if (this.options.hooks.columnTotal) {\n                const columnValues = this.visibleRows.map(row => row[i].content);\n                const result = this.options.hooks.columnTotal.call(this.instance, columnValues, cell);\n                if (result != null) {\n                    cell.content = result;\n                    return cell;\n                }\n            }\n\n            cell.content = this.visibleRows.reduce((acc, prevRow) => {\n                const prevCell = prevRow[i];\n                if (typeof prevCell.content === 'number') {\n                    if (acc == null) acc = 0;\n                    return acc + prevCell.content;\n                }\n                return acc;\n            }, cell.content);\n\n            return cell;\n        });\n\n        return totalRow;\n    }\n\n    restoreState() {\n        this.rowmanager.highlightCheckedRows();\n        this.cellmanager.selectAreaOnClusterChanged();\n        this.cellmanager.focusCellOnClusterChanged();\n    }\n\n    showToastMessage(message, hideAfter) {\n        this.instance.toastMessage.innerHTML = this.getToastMessageHTML(message);\n\n        if (hideAfter) {\n            setTimeout(() => {\n                this.clearToastMessage();\n            }, hideAfter * 1000);\n        }\n    }\n\n    clearToastMessage() {\n        this.instance.toastMessage.innerHTML = '';\n    }\n\n    getNoDataHTML() {\n        return `<div class=\"dt-scrollable__no-data\">${this.options.noDataMessage}</div>`;\n    }\n\n    getToastMessageHTML(message) {\n        return `<span class=\"dt-toast__message\">${message}</span>`;\n    }\n}\n\nclass Style {\n    constructor(instance) {\n        this.instance = instance;\n\n        linkProperties(this, this.instance, [\n            'options', 'datamanager', 'columnmanager',\n            'header', 'footer', 'bodyScrollable', 'datatableWrapper',\n            'getColumn', 'bodyRenderer'\n        ]);\n\n        this.scopeClass = 'dt-instance-' + instance.constructor.instances;\n        instance.datatableWrapper.classList.add(this.scopeClass);\n\n        const styleEl = document.createElement('style');\n        instance.wrapper.insertBefore(styleEl, instance.datatableWrapper);\n        this.styleEl = styleEl;\n\n        this.bindResizeWindow();\n        this.bindScrollHeader();\n    }\n\n    get stylesheet() {\n        return this.styleEl.sheet;\n    }\n\n    bindResizeWindow() {\n        this.onWindowResize = this.onWindowResize.bind(this);\n        this.onWindowResize = throttle$1(this.onWindowResize, 300);\n\n        if (this.options.layout === 'fluid') {\n            $.on(window, 'resize', this.onWindowResize);\n        }\n    }\n\n    bindScrollHeader() {\n        this._settingHeaderPosition = false;\n\n        $.on(this.bodyScrollable, 'scroll', (e) => {\n            if (this._settingHeaderPosition) return;\n\n            this._settingHeaderPosition = true;\n\n            requestAnimationFrame(() => {\n                const left = -e.target.scrollLeft;\n\n                $.style(this.header, {\n                    transform: `translateX(${left}px)`\n                });\n                $.style(this.footer, {\n                    transform: `translateX(${left}px)`\n                });\n                this._settingHeaderPosition = false;\n            });\n        });\n    }\n\n    onWindowResize() {\n        this.distributeRemainingWidth();\n        this.refreshColumnWidth();\n        this.setBodyStyle();\n    }\n\n    destroy() {\n        this.styleEl.remove();\n        $.off(window, 'resize', this.onWindowResize);\n    }\n\n    setStyle(selector, styleObject) {\n        if (selector.includes(',')) {\n            selector.split(',')\n                .map(s => s.trim())\n                .forEach(selector => {\n                    this.setStyle(selector, styleObject);\n                });\n            return;\n        }\n\n        selector = selector.trim();\n        if (!selector) return;\n\n        this._styleRulesMap = this._styleRulesMap || {};\n        const prefixedSelector = this._getPrefixedSelector(selector);\n\n        if (this._styleRulesMap[prefixedSelector]) {\n            this.removeStyle(selector);\n\n            // merge with old styleobject\n            styleObject = Object.assign({}, this._styleRulesMap[prefixedSelector], styleObject);\n        }\n\n        const styleString = this._getRuleString(styleObject);\n        const ruleString = `${prefixedSelector} { ${styleString} }`;\n\n        this._styleRulesMap[prefixedSelector] = styleObject;\n        this.stylesheet.insertRule(ruleString);\n    }\n\n    removeStyle(selector) {\n        if (selector.includes(',')) {\n            selector.split(',')\n                .map(s => s.trim())\n                .forEach(selector => {\n                    this.removeStyle(selector);\n                });\n            return;\n        }\n\n        selector = selector.trim();\n        if (!selector) return;\n\n        // find and remove\n        const prefixedSelector = this._getPrefixedSelector(selector);\n        const index = Array.from(this.stylesheet.cssRules)\n            .findIndex(rule => rule.selectorText === prefixedSelector);\n\n        if (index === -1) return;\n        this.stylesheet.deleteRule(index);\n    }\n\n    _getPrefixedSelector(selector) {\n        return `.${this.scopeClass} ${selector}`;\n    }\n\n    _getRuleString(styleObject) {\n        return Object.keys(styleObject)\n            .map(prop => {\n                let dashed = prop;\n                if (!prop.includes('-')) {\n                    dashed = camelCaseToDash(prop);\n                }\n                return `${dashed}:${styleObject[prop]};`;\n            })\n            .join('');\n    }\n\n    setDimensions() {\n        this.setCellHeight();\n        this.setupMinWidth();\n        this.setupNaturalColumnWidth();\n        this.setupColumnWidth();\n        this.distributeRemainingWidth();\n        this.setColumnStyle();\n        this.setBodyStyle();\n    }\n\n    setCellHeight() {\n        this.setStyle('.dt-cell', {\n            height: this.options.cellHeight + 'px'\n        });\n    }\n\n    setupMinWidth() {\n        $.each('.dt-cell--header', this.header).map(col => {\n            const { colIndex } = $.data(col);\n            const column = this.getColumn(colIndex);\n\n            if (!column.minWidth) {\n                const width = $.style($('.dt-cell__content', col), 'width');\n                // only set this once\n                column.minWidth = width;\n            }\n        });\n    }\n\n    setupNaturalColumnWidth() {\n        if (!$('.dt-row')) return;\n\n        $.each('.dt-row-header .dt-cell', this.header).map($headerCell => {\n            const { colIndex } = $.data($headerCell);\n            const column = this.datamanager.getColumn(colIndex);\n            let width = $.style($('.dt-cell__content', $headerCell), 'width');\n            if (typeof width === 'number' && width >= this.options.minimumColumnWidth) {\n                column.naturalWidth = width;\n            } else {\n                column.naturalWidth = this.options.minimumColumnWidth;\n            }\n        });\n\n        // set initial width as naturally calculated by table's first row\n        $.each('.dt-row-0 .dt-cell', this.bodyScrollable).map($cell => {\n            const {\n                colIndex\n            } = $.data($cell);\n            const column = this.datamanager.getColumn(colIndex);\n\n            let naturalWidth = $.style($('.dt-cell__content', $cell), 'width');\n\n            if (typeof naturalWidth === 'number' && naturalWidth >= column.naturalWidth) {\n                column.naturalWidth = naturalWidth;\n            } else {\n                column.naturalWidth = column.naturalWidth;\n            }\n        });\n    }\n\n    setupColumnWidth() {\n        if (this.options.layout === 'ratio') {\n            let totalWidth = $.style(this.datatableWrapper, 'width');\n\n            if (this.options.serialNoColumn) {\n                const rowIndexColumn = this.datamanager.getColumnById('_rowIndex');\n                totalWidth = totalWidth - rowIndexColumn.width - 1;\n            }\n\n            if (this.options.checkboxColumn) {\n                const rowIndexColumn = this.datamanager.getColumnById('_checkbox');\n                totalWidth = totalWidth - rowIndexColumn.width - 1;\n            }\n\n            const totalParts = this.datamanager.getColumns()\n                .map(column => {\n                    if (column.id === '_rowIndex' || column.id === '_checkbox') {\n                        return 0;\n                    }\n                    if (!column.width) {\n                        column.width = 1;\n                    }\n                    column.ratioWidth = parseInt(column.width, 10);\n                    return column.ratioWidth;\n                })\n                .reduce((a, c) => a + c);\n\n            const onePart = totalWidth / totalParts;\n\n            this.datamanager.getColumns()\n                .map(column => {\n                    if (column.id === '_rowIndex' || column.id === '_checkbox') return;\n                    column.width = Math.floor(onePart * column.ratioWidth) - 1;\n                });\n        } else {\n            this.datamanager.getColumns()\n                .map(column => {\n                    if (!column.width) {\n                        column.width = column.naturalWidth;\n                    }\n                    if (column.id === '_rowIndex') {\n                        column.width = this.getRowIndexColumnWidth();\n                    }\n                    if (column.width < this.options.minimumColumnWidth) {\n                        column.width = this.options.minimumColumnWidth;\n                    }\n                });\n        }\n    }\n\n    distributeRemainingWidth() {\n        if (this.options.layout !== 'fluid') return;\n\n        const wrapperWidth = $.style(this.instance.datatableWrapper, 'width');\n        let firstRow = $('.dt-row', this.bodyScrollable);\n        let firstRowWidth = wrapperWidth;\n        if (!firstRow) {\n            let headerRow = $('.dt-row', this.instance.header);\n            let cellWidths = Array.from(headerRow.children)\n                .map(cell => cell.offsetWidth);\n            firstRowWidth = cellWidths.reduce((sum, a) => sum + a, 0);\n        } else {\n            firstRowWidth = $.style(firstRow, 'width');\n        }\n        const resizableColumns = this.datamanager.getColumns().filter(col => col.resizable);\n        const deltaWidth = (wrapperWidth - firstRowWidth) / resizableColumns.length;\n\n        resizableColumns.map(col => {\n            const width = $.style(this.getColumnHeaderElement(col.colIndex), 'width');\n            let finalWidth = Math.floor(width + deltaWidth) - 2;\n\n            this.datamanager.updateColumn(col.colIndex, {\n                width: finalWidth\n            });\n        });\n    }\n\n    setColumnStyle() {\n        // align columns\n        this.datamanager.getColumns()\n            .map(column => {\n                // alignment\n                if (!column.align) {\n                    column.align = 'left';\n                }\n                if (!['left', 'center', 'right'].includes(column.align)) {\n                    column.align = 'left';\n                }\n                this.setStyle(`.dt-cell--col-${column.colIndex}`, {\n                    'text-align': column.align\n                });\n\n                // width\n                this.columnmanager.setColumnHeaderWidth(column.colIndex);\n                this.columnmanager.setColumnWidth(column.colIndex);\n            });\n    }\n\n    refreshColumnWidth() {\n        this.datamanager.getColumns()\n            .map(column => {\n                this.columnmanager.setColumnHeaderWidth(column.colIndex);\n                this.columnmanager.setColumnWidth(column.colIndex);\n            });\n    }\n\n    setBodyStyle() {\n        const bodyWidth = $.style(this.datatableWrapper, 'width');\n        const firstRow = $('.dt-row', this.bodyScrollable);\n        if (!firstRow) return;\n        const rowWidth = $.style(firstRow, 'width');\n\n        let width = bodyWidth > rowWidth ? rowWidth : bodyWidth;\n        $.style(this.bodyScrollable, {\n            width: width + 'px'\n        });\n\n        // remove the body height, so that it resets to it's original\n        $.removeStyle(this.bodyScrollable, 'height');\n\n        // when there are less rows than the container\n        // adapt the container height\n        let bodyHeight = $.getStyle(this.bodyScrollable, 'height');\n        const scrollHeight = (this.bodyRenderer.hyperlist || {})._scrollHeight || Infinity;\n        const hasHorizontalOverflow = $.hasHorizontalOverflow(this.bodyScrollable);\n\n        let height;\n\n        if (scrollHeight < bodyHeight) {\n            height = scrollHeight;\n\n            // account for scrollbar size when\n            // there is horizontal overflow\n            if (hasHorizontalOverflow) {\n                height += $.scrollbarSize();\n            }\n\n            $.style(this.bodyScrollable, {\n                height: height + 'px'\n            });\n        }\n\n        const verticalOverflow = this.bodyScrollable.scrollHeight - this.bodyScrollable.offsetHeight;\n        if (verticalOverflow < $.scrollbarSize()) {\n            // if verticalOverflow is less than scrollbar size\n            // then most likely scrollbar is causing the scroll\n            // which is not needed\n            $.style(this.bodyScrollable, {\n                overflowY: 'hidden'\n            });\n        }\n\n        if (this.options.layout === 'fluid') {\n            $.style(this.bodyScrollable, {\n                overflowX: 'hidden'\n            });\n        }\n    }\n\n    getColumnHeaderElement(colIndex) {\n        colIndex = +colIndex;\n        if (colIndex < 0) return null;\n        return $(`.dt-cell--col-${colIndex}`, this.header);\n    }\n\n    getRowIndexColumnWidth() {\n        const rowCount = this.datamanager.getRowCount();\n        const padding = 22;\n        return $.measureTextWidth(rowCount + '') + padding;\n    }\n}\n\nconst KEYCODES = {\n    13: 'enter',\n    91: 'meta',\n    16: 'shift',\n    17: 'ctrl',\n    18: 'alt',\n    37: 'left',\n    38: 'up',\n    39: 'right',\n    40: 'down',\n    9: 'tab',\n    27: 'esc',\n    67: 'c',\n    70: 'f',\n    86: 'v'\n};\n\nclass Keyboard {\n    constructor(element) {\n        this.listeners = {};\n        $.on(element, 'keydown', this.handler.bind(this));\n    }\n\n    handler(e) {\n        let key = KEYCODES[e.keyCode];\n\n        if (e.shiftKey && key !== 'shift') {\n            key = 'shift+' + key;\n        }\n\n        if ((e.ctrlKey && key !== 'ctrl') || (e.metaKey && key !== 'meta')) {\n            key = 'ctrl+' + key;\n        }\n\n        const listeners = this.listeners[key];\n\n        if (listeners && listeners.length > 0) {\n            for (let listener of listeners) {\n                const preventBubbling = listener(e);\n                if (preventBubbling === undefined || preventBubbling === true) {\n                    e.preventDefault();\n                }\n            }\n        }\n    }\n\n    on(key, listener) {\n        const keys = key.split(',').map(k => k.trim());\n\n        keys.map(key => {\n            this.listeners[key] = this.listeners[key] || [];\n            this.listeners[key].push(listener);\n        });\n    }\n}\n\nvar en = {\n\t\"Sort Ascending\": \"Sort Ascending\",\n\t\"Sort Descending\": \"Sort Descending\",\n\t\"Reset sorting\": \"Reset sorting\",\n\t\"Remove column\": \"Remove column\",\n\t\"No Data\": \"No Data\",\n\t\"{count} cells copied\": {\"1\":\"{count} cell copied\",\"default\":\"{count} cells copied\"},\n\t\"{count} rows selected\": {\"1\":\"{count} row selected\",\"default\":\"{count} rows selected\"}\n};\n\nvar de = {\n\t\"Sort Ascending\": \"Aufsteigend sortieren\",\n\t\"Sort Descending\": \"Absteigend sortieren\",\n\t\"Reset sorting\": \"Sortierung zurcksetzen\",\n\t\"Remove column\": \"Spalte entfernen\",\n\t\"No Data\": \"Keine Daten\",\n\t\"{count} cells copied\": {\"1\":\"{count} Zelle kopiert\",\"default\":\"{count} Zellen kopiert\"},\n\t\"{count} rows selected\": {\"1\":\"{count} Zeile ausgewhlt\",\"default\":\"{count} Zeilen ausgewhlt\"}\n};\n\nvar fr = {\n\t\"Sort Ascending\": \"Trier par ordre croissant\",\n\t\"Sort Descending\": \"Trier par ordre dcroissant\",\n\t\"Reset sorting\": \"Rinitialiser le tri\",\n\t\"Remove column\": \"Supprimer colonne\",\n\t\"No Data\": \"Pas de donnes\",\n\t\"{count} cells copied\": {\"1\":\"{count} cellule copie\",\"default\":\"{count} cellules copies\"},\n\t\"{count} rows selected\": {\"1\":\"{count} ligne slectionne\",\"default\":\"{count} lignes slectionnes\"}\n};\n\nvar it = {\n\t\"Sort Ascending\": \"Ordinamento ascendente\",\n\t\"Sort Descending\": \"Ordinamento decrescente\",\n\t\"Reset sorting\": \"Azzeramento ordinamento\",\n\t\"Remove column\": \"Rimuovi colonna\",\n\t\"No Data\": \"Nessun dato\",\n\t\"{count} cells copied\": {\"1\":\"Copiato {count} cella\",\"default\":\"{count} celle copiate\"},\n\t\"{count} rows selected\": {\"1\":\"{count} linea selezionata\",\"default\":\"{count} linee selezionate\"}\n};\n\nfunction getTranslations() {\n    return {\n        en,\n        de,\n        fr,\n        it,\n    };\n}\n\nclass TranslationManager {\n    constructor(language) {\n        this.language = language;\n        this.translations = getTranslations();\n    }\n\n    addTranslations(translations) {\n        this.translations = Object.assign(this.translations, translations);\n    }\n\n    translate(sourceText, args) {\n        let translation = (this.translations[this.language] &&\n            this.translations[this.language][sourceText]) || sourceText;\n\n        if (typeof translation === 'object') {\n            translation = args && args.count ?\n                this.getPluralizedTranslation(translation, args.count) :\n                sourceText;\n        }\n\n        return format(translation, args || {});\n    }\n\n    getPluralizedTranslation(translations, count) {\n        return translations[count] || translations['default'];\n    }\n}\n\nfunction filterRows(rows, filters) {\n    let filteredRowIndices = [];\n\n    if (Object.keys(filters).length === 0) {\n        return rows.map(row => row.meta.rowIndex);\n    }\n\n    for (let colIndex in filters) {\n        const keyword = filters[colIndex];\n\n        const filteredRows = filteredRowIndices.length ?\n            filteredRowIndices.map(i => rows[i]) :\n            rows;\n\n        const cells = filteredRows.map(row => row[colIndex]);\n\n        let filter = guessFilter(keyword);\n        let filterMethod = getFilterMethod(rows, filter);\n\n        if (filterMethod) {\n            filteredRowIndices = filterMethod(filter.text, cells);\n        } else {\n            filteredRowIndices = cells.map(cell => cell.rowIndex);\n        }\n    }\n\n    return filteredRowIndices;\n}\nfunction getFilterMethod(rows, filter) {\n    const getFormattedValue = cell => {\n        let formatter = CellManager.getCustomCellFormatter(cell);\n        if (formatter && cell.content) {\n            cell.html = formatter(cell.content, rows[cell.rowIndex], cell.column, rows[cell.rowIndex], true);\n            return stripHTML(cell.html);\n        }\n        return cell.content || '';\n    };\n\n    const stringCompareValue = cell =>\n        String(stripHTML(cell.html || '') || getFormattedValue(cell)).toLowerCase();\n\n    const numberCompareValue = cell => parseFloat(cell.content);\n\n    const getCompareValues = (cell, keyword) => {\n        if (cell.column.compareValue) {\n            const compareValues = cell.column.compareValue(cell, keyword);\n            if (compareValues && Array.isArray(compareValues)) return compareValues;\n        }\n\n        // check if it can be converted to number\n        const float = numberCompareValue(cell);\n        if (!isNaN(float)) {\n            return [float, keyword];\n        }\n\n        return [stringCompareValue(cell), keyword];\n    };\n\n    let filterMethodMap = {\n        contains(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const hay = stringCompareValue(cell);\n                    const needle = (keyword || '').toLowerCase();\n                    return !needle || hay.includes(needle);\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        greaterThan(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const [compareValue, keywordValue] = getCompareValues(cell, keyword);\n                    return compareValue > keywordValue;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        lessThan(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const [compareValue, keywordValue] = getCompareValues(cell, keyword);\n                    return compareValue < keywordValue;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        equals(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const value = parseFloat(cell.content);\n                    return value === keyword;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        notEquals(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const value = parseFloat(cell.content);\n                    return value !== keyword;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        range(rangeValues, cells) {\n            return cells\n                .filter(cell => {\n                    const values1 = getCompareValues(cell, rangeValues[0]);\n                    const values2 = getCompareValues(cell, rangeValues[1]);\n                    const value = values1[0];\n                    return value >= values1[1] && value <= values2[1];\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        containsNumber(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    let number = parseFloat(keyword, 10);\n                    let string = keyword;\n                    let hayNumber = numberCompareValue(cell);\n                    let hayString = stringCompareValue(cell);\n\n                    return number === hayNumber || hayString.includes(string);\n                })\n                .map(cell => cell.rowIndex);\n        }\n    };\n\n    return filterMethodMap[filter.type];\n}\n\nfunction guessFilter(keyword = '') {\n    if (keyword.length === 0) return {};\n\n    let compareString = keyword;\n\n    if (['>', '<', '='].includes(compareString[0])) {\n        compareString = keyword.slice(1);\n    } else if (compareString.startsWith('!=')) {\n        compareString = keyword.slice(2);\n    }\n\n    if (keyword.startsWith('>')) {\n        if (compareString) {\n            return {\n                type: 'greaterThan',\n                text: compareString.trim()\n            };\n        }\n    }\n\n    if (keyword.startsWith('<')) {\n        if (compareString) {\n            return {\n                type: 'lessThan',\n                text: compareString.trim()\n            };\n        }\n    }\n\n    if (keyword.startsWith('=')) {\n        if (isNumber(compareString)) {\n            return {\n                type: 'equals',\n                text: Number(keyword.slice(1).trim())\n            };\n        }\n    }\n\n    if (isNumber(compareString)) {\n        return {\n            type: 'containsNumber',\n            text: compareString\n        };\n    }\n\n    if (keyword.startsWith('!=')) {\n        if (isNumber(compareString)) {\n            return {\n                type: 'notEquals',\n                text: Number(keyword.slice(2).trim())\n            };\n        }\n    }\n\n    if (keyword.split(':').length === 2 && keyword.split(':').every(v => isNumber(v.trim()))) {\n        compareString = keyword.split(':');\n        return {\n            type: 'range',\n            text: compareString.map(v => v.trim())\n        };\n    }\n\n    return {\n        type: 'contains',\n        text: compareString.toLowerCase()\n    };\n}\n\nfunction getDefaultOptions(instance) {\n    return {\n        columns: [],\n        data: [],\n        dropdownButton: icons.chevronDown,\n        headerDropdown: [\n            {\n                label: instance.translate('Sort Ascending'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'asc');\n                }\n            },\n            {\n                label: instance.translate('Sort Descending'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'desc');\n                }\n            },\n            {\n                label: instance.translate('Reset sorting'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'none');\n                }\n            },\n            {\n                label: instance.translate('Remove column'),\n                action: function (column) {\n                    this.removeColumn(column.colIndex);\n                }\n            }\n        ],\n        events: {\n            onRemoveColumn(column) {},\n            onSwitchColumn(column1, column2) {},\n            onSortColumn(column) {},\n            onCheckRow(row) {},\n            onDestroy() {}\n        },\n        hooks: {\n            columnTotal: null\n        },\n        sortIndicator: {\n            asc: '',\n            desc: '',\n            none: ''\n        },\n        overrideComponents: {\n            // ColumnManager: CustomColumnManager\n        },\n        filterRows: filterRows,\n        freezeMessage: '',\n        getEditor: null,\n        serialNoColumn: true,\n        checkboxColumn: false,\n        clusterize: true,\n        logs: false,\n        layout: 'fixed', // fixed, fluid, ratio\n        noDataMessage: instance.translate('No Data'),\n        cellHeight: 40,\n        minimumColumnWidth: 30,\n        inlineFilters: false,\n        treeView: false,\n        checkedRowStatus: true,\n        dynamicRowHeight: false,\n        pasteFromClipboard: false,\n        showTotalRow: false,\n        direction: 'ltr',\n        disableReorderColumn: false\n    };\n}\n\nlet defaultComponents = {\n    DataManager,\n    CellManager,\n    ColumnManager,\n    RowManager,\n    BodyRenderer,\n    Style,\n    Keyboard\n};\n\nclass DataTable {\n    constructor(wrapper, options) {\n        DataTable.instances++;\n\n        if (typeof wrapper === 'string') {\n            // css selector\n            wrapper = document.querySelector(wrapper);\n        }\n        this.wrapper = wrapper;\n        if (!(this.wrapper instanceof HTMLElement)) {\n            throw new Error('Invalid argument given for `wrapper`');\n        }\n\n        this.initializeTranslations(options);\n        this.setDefaultOptions();\n        this.buildOptions(options);\n        this.prepare();\n        this.initializeComponents();\n\n        if (this.options.data) {\n            this.refresh();\n            this.columnmanager.applyDefaultSortOrder();\n        }\n    }\n\n    initializeTranslations(options) {\n        this.language = options.language || 'en';\n        this.translationManager = new TranslationManager(this.language);\n\n        if (options.translations) {\n            this.translationManager.addTranslations(options.translations);\n        }\n    }\n\n    setDefaultOptions() {\n        this.DEFAULT_OPTIONS = getDefaultOptions(this);\n    }\n\n    buildOptions(options) {\n        this.options = this.options || {};\n\n        this.options = Object.assign(\n            {}, this.DEFAULT_OPTIONS,\n            this.options || {}, options\n        );\n\n        options.headerDropdown = options.headerDropdown || [];\n        this.options.headerDropdown = [\n            ...this.DEFAULT_OPTIONS.headerDropdown,\n            ...options.headerDropdown\n        ];\n\n        // custom user events\n        this.events = Object.assign(\n            {}, this.DEFAULT_OPTIONS.events,\n            this.options.events || {},\n            options.events || {}\n        );\n        this.fireEvent = this.fireEvent.bind(this);\n    }\n\n    prepare() {\n        this.prepareDom();\n        this.unfreeze();\n    }\n\n    initializeComponents() {\n        let components = Object.assign({}, defaultComponents, this.options.overrideComponents);\n        let {\n            Style: Style$$1,\n            Keyboard: Keyboard$$1,\n            DataManager: DataManager$$1,\n            RowManager: RowManager$$1,\n            ColumnManager: ColumnManager$$1,\n            CellManager: CellManager$$1,\n            BodyRenderer: BodyRenderer$$1\n        } = components;\n\n        this.style = new Style$$1(this);\n        this.keyboard = new Keyboard$$1(this.wrapper);\n        this.datamanager = new DataManager$$1(this.options);\n        this.rowmanager = new RowManager$$1(this);\n        this.columnmanager = new ColumnManager$$1(this);\n        this.cellmanager = new CellManager$$1(this);\n        this.bodyRenderer = new BodyRenderer$$1(this);\n    }\n\n    prepareDom() {\n        this.wrapper.innerHTML = `\n            <div class=\"datatable\" dir=\"${this.options.direction}\">\n                <div class=\"dt-header\"></div>\n                <div class=\"dt-scrollable\"></div>\n                <div class=\"dt-footer\"></div>\n                <div class=\"dt-freeze\">\n                    <span class=\"dt-freeze__message\">\n                        ${this.options.freezeMessage}\n                    </span>\n                </div>\n                <div class=\"dt-toast\"></div>\n                <div class=\"dt-dropdown-container\"></div>\n                <textarea class=\"dt-paste-target\"></textarea>\n            </div>\n        `;\n\n        this.datatableWrapper = $('.datatable', this.wrapper);\n        this.header = $('.dt-header', this.wrapper);\n        this.footer = $('.dt-footer', this.wrapper);\n        this.bodyScrollable = $('.dt-scrollable', this.wrapper);\n        this.freezeContainer = $('.dt-freeze', this.wrapper);\n        this.toastMessage = $('.dt-toast', this.wrapper);\n        this.pasteTarget = $('.dt-paste-target', this.wrapper);\n        this.dropdownContainer = $('.dt-dropdown-container', this.wrapper);\n    }\n\n    refresh(data, columns) {\n        this.datamanager.init(data, columns);\n        this.render();\n        this.setDimensions();\n    }\n\n    destroy() {\n        this.wrapper.innerHTML = '';\n        this.style.destroy();\n        this.fireEvent('onDestroy');\n    }\n\n    appendRows(rows) {\n        this.datamanager.appendRows(rows);\n        this.rowmanager.refreshRows();\n    }\n\n    refreshRow(row, rowIndex) {\n        this.rowmanager.refreshRow(row, rowIndex);\n    }\n\n    render() {\n        this.renderHeader();\n        this.renderBody();\n    }\n\n    renderHeader() {\n        this.columnmanager.renderHeader();\n    }\n\n    renderBody() {\n        this.bodyRenderer.render();\n    }\n\n    setDimensions() {\n        this.style.setDimensions();\n    }\n\n    showToastMessage(message, hideAfter) {\n        this.bodyRenderer.showToastMessage(message, hideAfter);\n    }\n\n    clearToastMessage() {\n        this.bodyRenderer.clearToastMessage();\n    }\n\n    getColumn(colIndex) {\n        return this.datamanager.getColumn(colIndex);\n    }\n\n    getColumns() {\n        return this.datamanager.getColumns();\n    }\n\n    getRows() {\n        return this.datamanager.getRows();\n    }\n\n    getCell(colIndex, rowIndex) {\n        return this.datamanager.getCell(colIndex, rowIndex);\n    }\n\n    getColumnHeaderElement(colIndex) {\n        return this.columnmanager.getColumnHeaderElement(colIndex);\n    }\n\n    getViewportHeight() {\n        if (!this.viewportHeight) {\n            this.viewportHeight = $.style(this.bodyScrollable, 'height');\n        }\n\n        return this.viewportHeight;\n    }\n\n    sortColumn(colIndex, sortOrder) {\n        this.columnmanager.sortColumn(colIndex, sortOrder);\n    }\n\n    removeColumn(colIndex) {\n        this.columnmanager.removeColumn(colIndex);\n    }\n\n    scrollToLastColumn() {\n        this.datatableWrapper.scrollLeft = 9999;\n    }\n\n    freeze() {\n        $.style(this.freezeContainer, {\n            display: ''\n        });\n    }\n\n    unfreeze() {\n        $.style(this.freezeContainer, {\n            display: 'none'\n        });\n    }\n\n    updateOptions(options) {\n        this.buildOptions(options);\n    }\n\n    fireEvent(eventName, ...args) {\n        // fire internalEventHandlers if any\n        // and then user events\n        const handlers = [\n            ...(this._internalEventHandlers[eventName] || []),\n            this.events[eventName]\n        ].filter(Boolean);\n\n        for (let handler of handlers) {\n            handler.apply(this, args);\n        }\n    }\n\n    on(event, handler) {\n        this._internalEventHandlers = this._internalEventHandlers || {};\n        this._internalEventHandlers[event] = this._internalEventHandlers[event] || [];\n        this._internalEventHandlers[event].push(handler);\n    }\n\n    log() {\n        if (this.options.logs) {\n            console.log.apply(console, arguments);\n        }\n    }\n\n    translate(str, args) {\n        return this.translationManager.translate(str, args);\n    }\n}\n\nDataTable.instances = 0;\n\nvar name = \"frappe-datatable\";\nvar version = \"0.0.0-development\";\nvar description = \"A modern datatable library for the web\";\nvar main = \"dist/frappe-datatable.cjs.js\";\nvar unpkg = \"dist/frappe-datatable.min.js\";\nvar jsdelivr = \"dist/frappe-datatable.min.js\";\nvar scripts = {\"start\":\"yarn run dev\",\"build\":\"rollup -c && NODE_ENV=production rollup -c\",\"dev\":\"rollup -c -w\",\"cy:server\":\"http-server -p 8989\",\"cy:open\":\"cypress open\",\"cy:run\":\"cypress run\",\"test\":\"start-server-and-test cy:server http://localhost:8989 cy:run\",\"test-local\":\"start-server-and-test cy:server http://localhost:8989 cy:open\",\"travis-deploy-once\":\"travis-deploy-once\",\"semantic-release\":\"semantic-release\",\"lint\":\"eslint src\",\"lint-and-build\":\"yarn lint && yarn build\",\"commit\":\"npx git-cz\"};\nvar files = [\"dist\",\"src\"];\nvar devDependencies = {\"autoprefixer\":\"^9.0.0\",\"chai\":\"3.5.0\",\"cypress\":\"^9.2.0\",\"cz-conventional-changelog\":\"^2.1.0\",\"deepmerge\":\"^2.0.1\",\"eslint\":\"^5.0.1\",\"eslint-config-airbnb\":\"^16.1.0\",\"eslint-config-airbnb-base\":\"^12.1.0\",\"eslint-plugin-import\":\"^2.11.0\",\"http-server\":\"^0.11.1\",\"mocha\":\"3.3.0\",\"postcss-custom-properties\":\"^7.0.0\",\"postcss-nested\":\"^3.0.0\",\"rollup\":\"^0.59.4\",\"rollup-plugin-commonjs\":\"^8.3.0\",\"rollup-plugin-eslint\":\"^4.0.0\",\"rollup-plugin-json\":\"^2.3.0\",\"rollup-plugin-node-resolve\":\"^3.0.3\",\"rollup-plugin-postcss\":\"^1.2.8\",\"rollup-plugin-uglify-es\":\"^0.0.1\",\"semantic-release\":\"^17.1.1\",\"start-server-and-test\":\"^1.4.1\",\"travis-deploy-once\":\"^5.0.1\"};\nvar repository = {\"type\":\"git\",\"url\":\"https://github.com/frappe/datatable.git\"};\nvar keywords = [\"datatable\",\"data\",\"grid\",\"table\"];\nvar author = \"Faris Ansari\";\nvar license = \"MIT\";\nvar bugs = {\"url\":\"https://github.com/frappe/datatable/issues\"};\nvar homepage = \"https://frappe.io/datatable\";\nvar dependencies = {\"hyperlist\":\"^1.0.0-beta\",\"lodash\":\"^4.17.5\",\"sortablejs\":\"^1.7.0\"};\nvar config = {\"commitizen\":{\"path\":\"cz-conventional-changelog\"}};\nvar packageJson = {\n\tname: name,\n\tversion: version,\n\tdescription: description,\n\tmain: main,\n\tunpkg: unpkg,\n\tjsdelivr: jsdelivr,\n\tscripts: scripts,\n\tfiles: files,\n\tdevDependencies: devDependencies,\n\trepository: repository,\n\tkeywords: keywords,\n\tauthor: author,\n\tlicense: license,\n\tbugs: bugs,\n\thomepage: homepage,\n\tdependencies: dependencies,\n\tconfig: config\n};\n\nDataTable.__version__ = packageJson.version;\n\nmodule.exports = DataTable;\n","frappe.provide('frappe.data_import');\n\nfrappe.data_import.DataExporter = class DataExporter {\n\tconstructor(doctype, exporting_for) {\n\t\tthis.doctype = doctype;\n\t\tthis.exporting_for = exporting_for;\n\t\tfrappe.model.with_doctype(doctype, () => {\n\t\t\tthis.make_dialog();\n\t\t});\n\t}\n\n\tmake_dialog() {\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Export Data'),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\tfieldname: 'export_records',\n\t\t\t\t\tlabel: __('Export Type'),\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __('All Records'),\n\t\t\t\t\t\t\tvalue: 'all'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __('Filtered Records'),\n\t\t\t\t\t\t\tvalue: 'by_filter'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __('5 Records'),\n\t\t\t\t\t\t\tvalue: '5_records'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __('Blank Template'),\n\t\t\t\t\t\t\tvalue: 'blank_template'\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tdefault: this.exporting_for === 'Insert New Records' ? 'blank_template' : 'all',\n\t\t\t\t\tchange: () => {\n\t\t\t\t\t\tthis.update_record_count_message();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t\tfieldname: 'filter_area',\n\t\t\t\t\tdepends_on: doc => doc.export_records === 'by_filter'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\tfieldname: 'file_type',\n\t\t\t\t\tlabel: __('File Type'),\n\t\t\t\t\toptions: ['Excel', 'CSV'],\n\t\t\t\t\tdefault: 'CSV'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Section Break'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t\tfieldname: 'select_all_buttons'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __(this.doctype),\n\t\t\t\t\tfieldname: this.doctype,\n\t\t\t\t\tfieldtype: 'MultiCheck',\n\t\t\t\t\tcolumns: 2,\n\t\t\t\t\ton_change: () => this.update_primary_action(),\n\t\t\t\t\toptions: this.get_multicheck_options(this.doctype)\n\t\t\t\t},\n\t\t\t\t...frappe.meta.get_table_fields(this.doctype).map(df => {\n\t\t\t\t\tlet doctype = df.options;\n\t\t\t\t\tlet child_fieldname = df.fieldname;\n\t\t\t\t\tlet label = df.reqd\n\t\t\t\t\t\t? // prettier-ignore\n\t\t\t\t\t\t  __('{0} ({1}) (1 row mandatory)', [__(df.label || df.fieldname), __(doctype)])\n\t\t\t\t\t\t: __('{0} ({1})', [__(df.label || df.fieldname), __(doctype)]);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel,\n\t\t\t\t\t\tfieldname: child_fieldname,\n\t\t\t\t\t\tfieldtype: 'MultiCheck',\n\t\t\t\t\t\tcolumns: 2,\n\t\t\t\t\t\ton_change: () => this.update_primary_action(),\n\t\t\t\t\t\toptions: this.get_multicheck_options(doctype, child_fieldname)\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t],\n\t\t\tprimary_action_label: __('Export'),\n\t\t\tprimary_action: values => this.export_records(values),\n\t\t\ton_page_show: () => this.select_mandatory()\n\t\t});\n\n\t\tthis.make_filter_area();\n\t\tthis.make_select_all_buttons();\n\t\tthis.update_record_count_message();\n\n\t\tthis.dialog.show();\n\t}\n\n\texport_records() {\n\t\tlet method =\n\t\t\t'/api/method/frappe.core.doctype.data_import.data_import.download_template';\n\n\t\tlet multicheck_fields = this.dialog.fields\n\t\t\t.filter(df => df.fieldtype === 'MultiCheck')\n\t\t\t.map(df => df.fieldname);\n\n\t\tlet values = this.dialog.get_values();\n\n\t\tlet doctype_field_map = Object.assign({}, values);\n\t\tfor (let key in doctype_field_map) {\n\t\t\tif (!multicheck_fields.includes(key)) {\n\t\t\t\tdelete doctype_field_map[key];\n\t\t\t}\n\t\t}\n\n\t\tlet filters = null;\n\t\tif (values.export_records === 'by_filter') {\n\t\t\tfilters = this.get_filters();\n\t\t}\n\n\t\topen_url_post(method, {\n\t\t\tdoctype: this.doctype,\n\t\t\tfile_type: values.file_type,\n\t\t\texport_records: values.export_records,\n\t\t\texport_fields: doctype_field_map,\n\t\t\texport_filters: filters\n\t\t});\n\t}\n\n\tmake_filter_area() {\n\t\tthis.filter_group = new frappe.ui.FilterGroup({\n\t\t\tparent: this.dialog.get_field('filter_area').$wrapper,\n\t\t\tdoctype: this.doctype,\n\t\t\ton_change: () => {\n\t\t\t\tthis.update_record_count_message();\n\t\t\t}\n\t\t});\n\t}\n\n\tmake_select_all_buttons() {\n\t\tlet for_insert = this.exporting_for === 'Insert New Records';\n\t\tlet section_title = for_insert ? __('Select Fields To Insert') : __('Select Fields To Update');\n\t\tlet $select_all_buttons = $(`\n\t\t\t<div>\n\t\t\t\t<h6 class=\"form-section-heading uppercase\">${section_title}</h6>\n\t\t\t\t<button class=\"btn btn-default btn-xs\" data-action=\"select_all\">\n\t\t\t\t\t${__('Select All')}\n\t\t\t\t</button>\n\t\t\t\t${for_insert ? `<button class=\"btn btn-default btn-xs\" data-action=\"select_mandatory\">\n\t\t\t\t\t${__('Select Mandatory')}\n\t\t\t\t</button>`: ''}\n\t\t\t\t<button class=\"btn btn-default btn-xs\" data-action=\"unselect_all\">\n\t\t\t\t\t${__('Unselect All')}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t`);\n\t\tfrappe.utils.bind_actions_with_object($select_all_buttons, this);\n\t\tthis.dialog\n\t\t\t.get_field('select_all_buttons')\n\t\t\t.$wrapper.html($select_all_buttons);\n\t}\n\n\tselect_all() {\n\t\tthis.dialog.$wrapper\n\t\t\t.find(':checkbox')\n\t\t\t.prop('checked', true)\n\t\t\t.trigger('change');\n\t}\n\n\tselect_mandatory() {\n\t\tlet mandatory_table_fields = frappe.meta\n\t\t\t.get_table_fields(this.doctype)\n\t\t\t.filter(df => df.reqd)\n\t\t\t.map(df => df.fieldname);\n\t\tmandatory_table_fields.push(this.doctype);\n\n\t\tlet multicheck_fields = this.dialog.fields\n\t\t\t.filter(df => df.fieldtype === 'MultiCheck')\n\t\t\t.map(df => df.fieldname)\n\t\t\t.filter(doctype => mandatory_table_fields.includes(doctype));\n\n\t\tlet checkboxes = [].concat(\n\t\t\t...multicheck_fields.map(fieldname => {\n\t\t\t\tlet field = this.dialog.get_field(fieldname);\n\t\t\t\treturn field.options\n\t\t\t\t\t.filter(option => option.danger)\n\t\t\t\t\t.map(option => option.$checkbox.find('input').get(0));\n\t\t\t})\n\t\t);\n\n\t\tthis.unselect_all();\n\t\t$(checkboxes)\n\t\t\t.prop('checked', true)\n\t\t\t.trigger('change');\n\t}\n\n\tunselect_all() {\n\t\tlet update_existing_records =\n\t\t\tthis.dialog.get_value('exporting_for') == 'Update Existing Records';\n\t\tthis.dialog.$wrapper\n\t\t\t.find(\n\t\t\t\t`:checkbox${update_existing_records ? ':not([data-unit=name])' : ''}`\n\t\t\t)\n\t\t\t.prop('checked', false)\n\t\t\t.trigger('change');\n\t}\n\n\tupdate_record_count_message() {\n\t\tlet export_records = this.dialog.get_value('export_records');\n\t\tlet count_method = {\n\t\t\tall: () => frappe.db.count(this.doctype),\n\t\t\tby_filter: () =>\n\t\t\t\tfrappe.db.count(this.doctype, {\n\t\t\t\t\tfilters: this.get_filters()\n\t\t\t\t}),\n\t\t\tblank_template: () => Promise.resolve(0),\n\t\t\t'5_records': () => Promise.resolve(5)\n\t\t};\n\n\t\tcount_method[export_records]().then(value => {\n\t\t\tlet message = '';\n\t\t\tvalue = parseInt(value, 10);\n\t\t\tif (value === 0) {\n\t\t\t\tmessage = __('No records will be exported');\n\t\t\t} else if (value === 1) {\n\t\t\t\tmessage = __('1 record will be exported');\n\t\t\t} else {\n\t\t\t\tmessage = __('{0} records will be exported', [value]);\n\t\t\t}\n\t\t\tthis.dialog.set_df_property('export_records', 'description', message);\n\n\t\t\tthis.update_primary_action(value);\n\t\t});\n\t}\n\n\tupdate_primary_action(no_of_records) {\n\t\tlet $primary_action = this.dialog.get_primary_btn();\n\n\t\tif (no_of_records != null) {\n\t\t\tlet label = '';\n\t\t\tif (no_of_records === 0) {\n\t\t\t\tlabel = __('Export');\n\t\t\t} else if (no_of_records === 1) {\n\t\t\t\tlabel = __('Export 1 record');\n\t\t\t} else {\n\t\t\t\tlabel = __('Export {0} records', [no_of_records]);\n\t\t\t}\n\t\t\t$primary_action.html(label);\n\t\t} else {\n\t\t\tlet parent_fields = this.dialog.get_value(this.doctype);\n\t\t\t$primary_action.prop('disabled', parent_fields.length === 0);\n\t\t}\n\t}\n\n\tget_filters() {\n\t\treturn this.filter_group.get_filters().map(filter => {\n\t\t\treturn filter.slice(0, 4);\n\t\t});\n\t}\n\n\tget_multicheck_options(doctype, child_fieldname = null) {\n\t\tif (!this.column_map) {\n\t\t\tthis.column_map = get_columns_for_picker(this.doctype);\n\t\t}\n\n\t\tlet autoname_field = null;\n\t\tlet meta = frappe.get_meta(doctype);\n\t\tif (meta.autoname && meta.autoname.startsWith('field:')) {\n\t\t\tlet fieldname = meta.autoname.slice('field:'.length);\n\t\t\tautoname_field = frappe.meta.get_field(doctype, fieldname);\n\t\t}\n\n\t\tlet fields = child_fieldname\n\t\t\t? this.column_map[child_fieldname]\n\t\t\t: this.column_map[doctype];\n\n\t\tlet is_field_mandatory = df => {\n\t\t\tif (df.reqd && this.exporting_for == 'Insert New Records') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (autoname_field && df.fieldname == autoname_field.fieldname) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (df.fieldname === 'name') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\treturn fields\n\t\t\t.filter(df => {\n\t\t\t\tif (autoname_field && df.fieldname === 'name') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t})\n\t\t\t.map(df => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\tvalue: df.fieldname,\n\t\t\t\t\tdanger: is_field_mandatory(df),\n\t\t\t\t\tchecked: false,\n\t\t\t\t\tdescription: `${df.fieldname} ${df.reqd ? __('(Mandatory)') : ''}`\n\t\t\t\t};\n\t\t\t});\n\t}\n};\n\nexport function get_columns_for_picker(doctype) {\n\tlet out = {};\n\n\tconst exportable_fields = df => {\n\t\tlet keep = true;\n\t\tif (frappe.model.no_value_type.includes(df.fieldtype)) {\n\t\t\tkeep = false;\n\t\t}\n\t\tif (['lft', 'rgt'].includes(df.fieldname)) {\n\t\t\tkeep = false;\n\t\t}\n\t\treturn keep;\n\t};\n\n\t// parent\n\tlet doctype_fields = frappe.meta\n\t\t.get_docfields(doctype)\n\t\t.filter(exportable_fields);\n\n\tout[doctype] = [\n\t\t{\n\t\t\tlabel: __('ID'),\n\t\t\tfieldname: 'name',\n\t\t\tfieldtype: 'Data',\n\t\t\treqd: 1\n\t\t}\n\t].concat(doctype_fields);\n\n\t// children\n\tconst table_fields = frappe.meta.get_table_fields(doctype);\n\ttable_fields.forEach(df => {\n\t\tconst cdt = df.options;\n\t\tconst child_table_fields = frappe.meta\n\t\t\t.get_docfields(cdt)\n\t\t\t.filter(exportable_fields);\n\n\t\tout[df.fieldname] = [\n\t\t\t{\n\t\t\t\tlabel: __('ID'),\n\t\t\t\tfieldname: 'name',\n\t\t\t\tfieldtype: 'Data',\n\t\t\t\treqd: 1\n\t\t\t}\n\t\t].concat(child_table_fields);\n\t});\n\n\treturn out;\n}\n","import DataTable from 'frappe-datatable';\nimport { get_columns_for_picker } from './data_exporter';\n\nfrappe.provide('frappe.data_import');\n\nfrappe.data_import.ImportPreview = class ImportPreview {\n\tconstructor({\n\t\twrapper,\n\t\tdoctype,\n\t\tpreview_data,\n\t\tfrm,\n\t\timport_log,\n\t\tevents = {}\n\t}) {\n\t\tthis.wrapper = wrapper;\n\t\tthis.doctype = doctype;\n\t\tthis.preview_data = preview_data;\n\t\tthis.events = events;\n\t\tthis.import_log = import_log;\n\t\tthis.frm = frm;\n\n\t\tfrappe.model.with_doctype(doctype, () => {\n\t\t\tthis.refresh();\n\t\t});\n\t}\n\n\trefresh() {\n\t\tthis.data = this.preview_data.data;\n\t\tthis.make_wrapper();\n\t\tthis.prepare_columns();\n\t\tthis.prepare_data();\n\t\tthis.render_datatable();\n\t\tthis.setup_styles();\n\t\tthis.add_actions();\n\t}\n\n\tmake_wrapper() {\n\t\tthis.wrapper.html(`\n\t\t\t<div>\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-sm-12\">\n\t\t\t\t\t\t<div class=\"table-actions margin-bottom\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"table-preview border\"></div>\n\t\t\t\t\t\t<div class=\"table-message\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\t\tfrappe.utils.bind_actions_with_object(this.wrapper, this);\n\n\t\tthis.$table_preview = this.wrapper.find('.table-preview');\n\t}\n\n\tprepare_columns() {\n\t\tthis.columns = this.preview_data.columns.map((col, i) => {\n\t\t\tlet df = col.df;\n\t\t\tlet column_width = 120;\n\t\t\tif (col.header_title === 'Sr. No') {\n\t\t\t\treturn {\n\t\t\t\t\tid: 'srno',\n\t\t\t\t\tname: 'Sr. No',\n\t\t\t\t\tcontent: 'Sr. No',\n\t\t\t\t\teditable: false,\n\t\t\t\t\tfocusable: false,\n\t\t\t\t\talign: 'left',\n\t\t\t\t\twidth: 60\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (col.skip_import) {\n\t\t\t\tlet show_warnings_button = `<button class=\"btn btn-xs\" data-action=\"show_column_warning\" data-col=\"${i}\">\n\t\t\t\t\t<i class=\"octicon octicon-stop\"></i></button>`;\n\t\t\t\tif (!col.df) {\n\t\t\t\t\t// increase column width for unidentified columns\n\t\t\t\t\tcolumn_width += 50;\n\t\t\t\t}\n\t\t\t\tlet column_title = `<span class=\"indicator red\">\n\t\t\t\t\t${col.header_title || `<i>${__('Untitled Column')}</i>`}\n\t\t\t\t\t${!col.df ? show_warnings_button : ''}\n\t\t\t\t</span>`;\n\t\t\t\treturn {\n\t\t\t\t\tid: frappe.utils.get_random(6),\n\t\t\t\t\tname: col.header_title || (df ? df.label : 'Untitled Column'),\n\t\t\t\t\tcontent: column_title,\n\t\t\t\t\tskip_import: true,\n\t\t\t\t\teditable: false,\n\t\t\t\t\tfocusable: false,\n\t\t\t\t\talign: 'left',\n\t\t\t\t\twidth: column_width,\n\t\t\t\t\tformat: value => `<div class=\"text-muted\">${value}</div>`\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tlet date_format = col.date_format\n\t\t\t\t? col.date_format\n\t\t\t\t\t.replace('%Y', 'yyyy')\n\t\t\t\t\t.replace('%y', 'yy')\n\t\t\t\t\t.replace('%m', 'mm')\n\t\t\t\t\t.replace('%d', 'dd')\n\t\t\t\t\t.replace('%H', 'HH')\n\t\t\t\t\t.replace('%M', 'mm')\n\t\t\t\t\t.replace('%S', 'ss')\n\t\t\t\t\t.replace('%b', 'Mon')\n\t\t\t\t: null;\n\n\t\t\tlet column_title = `<span class=\"indicator green\">\n\t\t\t\t${col.header_title || df.label}\n\t\t\t\t${date_format ? `(${date_format})` : ''}\n\t\t\t</span>`;\n\n\t\t\treturn {\n\t\t\t\tid: df.fieldname,\n\t\t\t\tname: col.header_title,\n\t\t\t\tcontent: column_title,\n\t\t\t\tdf: df,\n\t\t\t\teditable: false,\n\t\t\t\talign: 'left',\n\t\t\t\twidth: column_width\n\t\t\t};\n\t\t});\n\t}\n\n\tprepare_data() {\n\t\tthis.data = this.data.map(row => {\n\t\t\treturn row.map(cell => {\n\t\t\t\tif (cell == null) {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t\treturn cell;\n\t\t\t});\n\t\t});\n\t}\n\n\trender_datatable() {\n\t\tif (this.datatable) {\n\t\t\tthis.datatable.destroy();\n\t\t}\n\n\t\tthis.datatable = new DataTable(this.$table_preview.get(0), {\n\t\t\tdata: this.data,\n\t\t\tcolumns: this.columns,\n\t\t\tlayout: this.columns.length < 10 ? 'fluid' : 'fixed',\n\t\t\tcellHeight: 35,\n\t\t\tlanguage: frappe.boot.lang,\n\t\t\ttranslations: frappe.utils.datatable.get_translations(),\n\t\t\tserialNoColumn: false,\n\t\t\tcheckboxColumn: false,\n\t\t\tnoDataMessage: __('No Data'),\n\t\t\tdisableReorderColumn: true\n\t\t});\n\n\t\tlet {\n\t\t\tmax_rows_exceeded,\n\t\t\tmax_rows_in_preview,\n\t\t\ttotal_number_of_rows\n\t\t} = this.preview_data;\n\t\tif (max_rows_exceeded) {\n\t\t\tlet parts = [max_rows_in_preview, total_number_of_rows];\n\t\t\tthis.wrapper.find('.table-message').html(`\n\t\t\t\t<div class=\"text-muted margin-top text-medium\">\n\t\t\t\t${__('Showing only first {0} rows out of {1}', parts)}\n\t\t\t\t</div>\n\t\t\t`);\n\t\t}\n\n\t\tif (this.data.length === 0) {\n\t\t\tthis.datatable.style.setStyle('.dt-scrollable', {\n\t\t\t\theight: 'auto'\n\t\t\t});\n\t\t}\n\n\t\tthis.datatable.style.setStyle('.dt-dropdown', {\n\t\t\tdisplay: 'none'\n\t\t});\n\t}\n\n\tsetup_styles() {\n\t\t// import success checkbox\n\t\tthis.datatable.style.setStyle(`svg.import-success`, {\n\t\t\twidth: '16px',\n\t\t\tfill: frappe.ui.color.get_color_shade('green', 'dark')\n\t\t});\n\t\t// make successfully imported rows readonly\n\t\tlet row_classes = this.datatable\n\t\t\t.getRows()\n\t\t\t.filter(row => this.is_row_imported(row))\n\t\t\t.map(row => row.meta.rowIndex)\n\t\t\t.map(i => `.dt-row-${i} .dt-cell`)\n\t\t\t.join(',');\n\t\tthis.datatable.style.setStyle(row_classes, {\n\t\t\tpointerEvents: 'none',\n\t\t\tbackgroundColor: frappe.ui.color.get_color_shade('gray', 'extra-light'),\n\t\t\tcolor: frappe.ui.color.get_color_shade('gray', 'dark')\n\t\t});\n\t}\n\n\tadd_actions() {\n\t\tlet actions = [\n\t\t\t{\n\t\t\t\tlabel: __('Map Columns'),\n\t\t\t\thandler: 'show_column_mapper',\n\t\t\t\tcondition: this.frm.doc.status !== 'Success'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Export Errored Rows'),\n\t\t\t\thandler: 'export_errored_rows',\n\t\t\t\tcondition: this.import_log.filter(log => !log.success).length > 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Show Warnings'),\n\t\t\t\thandler: 'show_warnings',\n\t\t\t\tcondition: this.preview_data.warnings.length > 0\n\t\t\t}\n\t\t];\n\n\t\tlet html = actions\n\t\t\t.filter(action => action.condition)\n\t\t\t.map(action => {\n\t\t\t\treturn `<button class=\"btn btn-sm btn-default\" data-action=\"${action.handler}\">\n\t\t\t\t\t${action.label}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t\t});\n\n\t\tthis.wrapper.find('.table-actions').html(html);\n\t}\n\n\texport_errored_rows() {\n\t\tthis.frm.trigger('export_errored_rows');\n\t}\n\n\tshow_warnings() {\n\t\tthis.frm.scroll_to_field('import_warnings');\n\t}\n\n\tshow_column_warning(_, $target) {\n\t\tlet $warning = this.frm\n\t\t\t.get_field('import_warnings')\n\t\t\t.$wrapper.find(`[data-col=${$target.data('col')}]`);\n\t\tfrappe.utils.scroll_to($warning, true, 30);\n\t}\n\n\tshow_column_mapper() {\n\t\tlet column_picker_fields = get_columns_for_picker(this.doctype);\n\t\tlet changed = [];\n\t\tlet fields = this.preview_data.columns.map((col, i) => {\n\t\t\tlet df = col.df;\n\t\t\tif (col.header_title === 'Sr. No') return [];\n\n\t\t\tlet fieldname;\n\t\t\tif (!df) {\n\t\t\t\tfieldname = null;\n\t\t\t} else if (col.map_to_field) {\n\t\t\t\tfieldname = col.map_to_field;\n\t\t\t} else if (col.is_child_table_field) {\n\t\t\t\tfieldname = `${col.child_table_df.fieldname}.${df.fieldname}`;\n\t\t\t} else {\n\t\t\t\tfieldname = df.fieldname;\n\t\t\t}\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: '',\n\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t\tdefault: col.header_title,\n\t\t\t\t\tfieldname: `Column ${i}`,\n\t\t\t\t\tread_only: 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Column Break'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Autocomplete',\n\t\t\t\t\tfieldname: i,\n\t\t\t\t\tlabel: '',\n\t\t\t\t\tmax_items: Infinity,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __(\"Don't Import\"),\n\t\t\t\t\t\t\tvalue: \"Don't Import\"\n\t\t\t\t\t\t}\n\t\t\t\t\t].concat(get_fields_as_options(this.doctype, column_picker_fields)),\n\t\t\t\t\tdefault: fieldname || \"Don't Import\",\n\t\t\t\t\tchange() {\n\t\t\t\t\t\tchanged.push(i);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: 'Section Break'\n\t\t\t\t}\n\t\t\t];\n\t\t});\n\t\t// flatten the array\n\t\tfields = fields.reduce((acc, curr) => [...acc, ...curr]);\n\t\tlet file_name = (this.frm.doc.import_file || '').split('/').pop();\n\t\tlet parts = [file_name.bold(), this.doctype.bold()];\n\t\tfields = [\n\t\t\t{\n\t\t\t\tfieldtype: 'HTML',\n\t\t\t\tfieldname: 'heading',\n\t\t\t\toptions: `\n\t\t\t\t\t<div class=\"margin-top text-muted\">\n\t\t\t\t\t${__('Map columns from {0} to fields in {1}', parts)}\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: 'Section Break'\n\t\t\t}\n\t\t].concat(fields);\n\n\t\tlet dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Map Columns'),\n\t\t\tfields,\n\t\t\tprimary_action: values => {\n\t\t\t\tlet changed_map = {};\n\t\t\t\tchanged.map(i => {\n\t\t\t\t\tlet header_row_index = i - 1;\n\t\t\t\t\tchanged_map[header_row_index] = values[i];\n\t\t\t\t});\n\t\t\t\tif (changed.length > 0) {\n\t\t\t\t\tthis.events.remap_column(changed_map);\n\t\t\t\t}\n\t\t\t\tdialog.hide();\n\t\t\t}\n\t\t});\n\t\tdialog.$body.addClass('map-columns');\n\t\tdialog.show();\n\t}\n\n\tis_row_imported(row) {\n\t\tlet serial_no = row[0].content;\n\t\treturn this.import_log.find(log => {\n\t\t\treturn log.success && log.row_indexes.includes(serial_no);\n\t\t});\n\t}\n};\n\nfunction get_fields_as_options(doctype, column_map) {\n\tlet keys = [doctype];\n\tfrappe.meta.get_table_fields(doctype).forEach(df => {\n\t\tkeys.push(df.fieldname);\n\t});\n\t// flatten array\n\treturn [].concat(\n\t\t...keys.map(key => {\n\t\t\treturn column_map[key].map(df => {\n\t\t\t\tlet label = __(df.label);\n\t\t\t\tlet value = df.fieldname;\n\t\t\t\tif (doctype !== key) {\n\t\t\t\t\tlet table_field = frappe.meta.get_docfield(doctype, key);\n\t\t\t\t\tlabel = `${__(df.label)} (${__(table_field.label)})`;\n\t\t\t\t\tvalue = `${table_field.fieldname}.${df.fieldname}`;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tlabel,\n\t\t\t\t\tvalue,\n\t\t\t\t\tdescription: value\n\t\t\t\t};\n\t\t\t});\n\t\t})\n\t);\n}\n"],"names":["factory","window","document","Error","dragEl","parentEl","ghostEl","cloneEl","rootEl","nextEl","lastDownEl","scrollEl","scrollParentEl","scrollCustomFn","oldIndex","newIndex","activeGroup","putSortable","pointerElemChangedInterval","lastPointerElemX","lastPointerElemY","tapEvt","touchEvt","moved","lastTarget","lastDirection","lastMode","targetMoveDistance","realDragElRect","autoScrolls","scrolling","awaitingDragStarted","ignoreNextClick","sortables","pastFirstInvertThresh","isCircumstantialInvert","R_SPACE","expando","Date","getTime","win","parseInt","setTimeout","$","jQuery","Zepto","Polymer","captureMode","capture","passive","IE11OrLess","navigator","userAgent","match","Edge","CSSFloatProperty","supportDraggable","createElement","supportCssPointerEvents","el","style","cssText","pointerEvents","_silent","_alignedSilent","abs","Math","min","savedInputChecked","_detectDirection","options","elCSS","_css","elWidth","width","child1","_getChild","child2","firstChildCSS","secondChildCSS","firstChildWidth","marginLeft","marginRight","_getRect","secondChildWidth","display","flexDirection","float","touchingSideChild2","clear","_getParentAutoScrollElement","includeSelf","getBoundingClientRect","elem","gotSelf","clientWidth","scrollWidth","clientHeight","scrollHeight","elemCSS","overflowX","overflowY","body","parentNode","_autoScroll","_throttle","evt","isFallback","scroll","_this","sens","scrollSensitivity","speed","scrollSpeed","x","clientX","y","clientY","scrollThisInstance","innerWidth","innerHeight","_clearAutoScrolls","scrollFn","layersOut","currentParent","css","vx","vy","canScrollX","canScrollY","scrollPosX","scrollPosY","rect","top","bottom","left","right","height","scrollLeft","scrollTop","documentElement","i","clearInterval","pid","setInterval","this","layer","Sortable","active","_emulateDragOver","scrollOffsetY","scrollOffsetX","call","scrollTo","pageXOffset","pageYOffset","bind","bubbleScroll","forEach","autoScroll","_prepareGroup","toFn","value","pull","to","from","sameGroup","group","name","otherGroup","join","indexOf","originalGroup","checkPull","checkPut","put","revertClone","_checkAlignment","_computeIsAligned","_isTrueParentSortable","target","trueParent","_artificalBubble","sortable","originalEvt","method","nextParent","_extend","artificialBubble","_hideGhostForTarget","_unhideGhostForTarget","addEventListener","preventDefault","stopPropagation","stopImmediatePropagation","_throttleTimeout","nearestEmptyInsertDetectEvent","touches","nearest","length","children","threshold","emptyInsertThreshold","insideHorizontally","insideVertically","_detectNearestEmptySortable","_onDragOver","nodeType","toString","defaults","sort","disabled","store","handle","draggable","test","nodeName","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","ghostClass","chosenClass","dragClass","ignore","filter","preventOnFilter","animation","easing","setData","dataTransfer","textContent","dropBubble","dragoverBubble","dataIdAttr","delay","touchStartThreshold","devicePixelRatio","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","fn","charAt","nativeDraggable","_on","_onTapStart","push","get","_closest","selector","ctx","includeCTX","_matches","substring","_getParentOrHost","host","event","_off","removeEventListener","_toggleClass","state","classList","className","replace","prop","val","defaultView","getComputedStyle","currentStyle","_matrix","appliedTransforms","transform","DOMMatrix","WebKitCSSMatrix","CSSMatrix","_find","tagName","iterator","list","getElementsByTagName","n","_dispatchEvent","targetEl","toEl","fromEl","startIndex","onName","toUpperCase","substr","CustomEvent","createEvent","initEvent","bubbles","cancelable","item","clone","originalEvent","dispatchEvent","_onMove","dragRect","targetRect","willInsertAfter","retVal","onMoveFn","onMove","dragged","draggedRect","related","relatedRect","_disableDraggable","_unsilent","childNum","currentChild","_lastChild","last","lastElementChild","previousElementSibling","_generateId","str","src","href","sum","charCodeAt","_index","index","matches","msMatchesSelector","webkitMatchesSelector","_","callback","ms","args","arguments","apply","dst","key","hasOwnProperty","_clone","dom","cloneNode","_nextTick","_cancelNextTick","id","clearTimeout","container","adjustForTransform","elRect","containerRect","matrix","scaleX","a","scaleY","d","prototype","constructor","elementFromPoint","axis","targetS1Opp","targetS2Opp","mouseOnOppAxis","sortableMouseAligned","_getDirection","type","touch","originalTarget","shadowRoot","path","composedPath","root","inputs","idx","checked","_saveInputCheckedState","button","isContentEditable","split","some","criteria","trim","_prepareDragStart","_handleAutoScroll","fallback","ogElemScroller","newElem","dragStartFn","ownerDocument","nextSibling","_lastX","_lastY","transition","_disableDelayedDrag","_triggerDragStart","_onDrop","_delayedDragTouchMoveHandler","_dragStartTimer","e","pointerType","_onTouchMove","_onDragStart","selection","empty","getSelection","removeAllRanges","err","_dragStarted","_appendGhost","_nulling","bypassLastTouchCheck","parent","dx","dy","translate3d","appendChild","_hideClone","_cloneId","insertBefore","_loopId","effectAllowed","_dragStartId","revert","activeSortable","isOwner","canSort","animated","completed","contains","lastPutMode","mouseOnAxis","targetS2","_ghostIsLast","_showClone","changed","_animate","targetBeforeFirstSwap","aligned","differentLevel","scrolledPastTop","side","elSide","parentSide","_isScrolledPast","el1","el2","el1Rect","el2Rect","el1S1Opp","el1S2Opp","el1OppLength","el2S1Opp","el2S2Opp","el2OppLength","_isElInRowColumn","isLastTarget","targetLength","targetS1","invert","_getSwapDirection","dragElIndex","targetIndex","_getInsertDirection","nextElementSibling","after","moveVector","undefined","prevRect","currentRect","offsetWidth","_offUpEvents","removeChild","save","handleEvent","dropEffect","_globalDragOver","toArray","order","getAttribute","items","set","closest","option","destroy","Array","querySelectorAll","removeAttribute","splice","cloneHidden","utils","on","off","find","is","extend","throttle","toggleClass","nextTick","cancelNextTick","detectDirection","getChild","create","version","module","ex","require$$0","expr","con","querySelector","each","tag","o","let","element","ref","Object","keys","map","setAttribute","delegate","handler","const","delegatedTarget","unbind","fire","properties","j","data","attrs","dataset","attr","elements","styleMap","getStyle","isArray","removeStyle","styleProps","includes","parseFloat","inViewport","pTop","pLeft","pBottom","pRight","pixels","requestAnimationFrame","scrollbarSize","scrollBarSizeValue","scrollDiv","overflow","position","scrollbarWidth","getScrollBarSize","hasVerticalOverflow","offsetHeight","hasHorizontalOverflow","measureTextWidth","text","div","visibility","whiteSpace","innerText","isObject_1","commonjsGlobal","global","self","commonjsRequire","_freeGlobal","freeSelf","_root","Function","now_1","now","_Symbol","Symbol","objectProto","nativeObjectToString","symToStringTag","toStringTag","_getRawTag","isOwn","result","nativeObjectToString$1","_objectToString","nullTag","undefinedTag","symToStringTag$1","_baseGetTag","isObjectLike_1","symbolTag","isSymbol_1","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber_1","other","valueOf","isBinary","slice","FUNC_ERROR_TEXT","nativeMax","max","nativeMin","debounce_1","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","thisArg","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","cancel","flush","FUNC_ERROR_TEXT$1","throttle_1","asyncTag","funcTag","genTag","proxyTag","uid","isFunction_1","_coreJsData","maskSrcKey","exec","IE_PROTO","_isMasked","funcToString","_toSource","reIsHostCtor","funcProto$1","objectProto$2","funcToString$1","hasOwnProperty$1","reIsNative","RegExp","_baseIsNative","_getValue","object","_getNative","_nativeCreate","_hashClear","__data__","size","_hashDelete","has","HASH_UNDEFINED","hasOwnProperty$2","_hashGet","hasOwnProperty$3","_hashHas","HASH_UNDEFINED$1","_hashSet","Hash","entries","entry","_Hash","_listCacheClear","eq_1","_assocIndexOf","array","_listCacheDelete","pop","_listCacheGet","_listCacheHas","_listCacheSet","ListCache","_ListCache","_Map","_mapCacheClear","hash","string","_isKeyable","_getMapData","_mapCacheDelete","_mapCacheGet","_mapCacheHas","_mapCacheSet","MapCache","_MapCache","HASH_UNDEFINED$2","_setCacheAdd","_setCacheHas","SetCache","values","add","_SetCache","_baseFindIndex","predicate","fromIndex","fromRight","_baseIsNaN","_strictIndexOf","_baseIndexOf","_arrayIncludes","_arrayIncludesWith","comparator","_cacheHas","cache","_Set","noop_1","_setToArray","_createSet","LARGE_ARRAY_SIZE","_baseUniq","iteratee","isCommon","seen","outer","computed","seenIndex","uniq_1","camelCaseToDash","g","toLowerCase","makeDataAttributeString","props","_key","copyTextToClipboard","textArea","padding","border","outline","boxShadow","background","select","execCommand","console","log","throttle$1","debounce$1","context","Promise","resolve","out","linkProperties","source","reduce","acc","defineProperties","isNumber","isNaN","uniq$1","arr","numberSortAsc","b","stripHTML","html","DataError","icons","chevronDown","chevronRight","CellManager","[object Object]","instance","bindEvents","bindFocusCell","bindEditCell","bindKeyboardSelection","bindCopyCellContents","bindMouseEvents","bindTreeEvents","bindKeyboardNav","$editingCell","bodyScrollable","cell","activateEditing","keyboard","$focusedCell","deactivateEditing","focusCellInDirection","$cell","getLeftMostCell$","rowIndex","getRightMostCell$","getTopMostCell$","colIndex","getBottomMostCell$","focusCell","focusLastCell","columnmanager","toggleFilter","inlineFilters","activateFilter","header","unfocusCell","selectArea","$selectionCursor","getSelectionCursor","getLeftCell$","getRightCell$","getAboveCell$","getBelowCell$","getNextSelectionCursor","noOfCellsCopied","copyCellContents","message","translate","count","showToastMessage","pasteFromClipboard","pasteTarget","focus","pasteContentInCell","mouseDown","$toggle","rowmanager","openSingleNode","closeSingleNode","getColumn","focusable","skipScrollToCell","scrollToCell","skipClearSelection","clearSelection","remove","skipDOMFocus","highlightRowColumnHeader","lastHeaders","colHeaderSelector","rowHeaderSelector","datamanager","getColumnIndexById","colHeader","wrapper","rowHeader","getCell$","fCell","_selectArea","$cell1","$cell2","cells","getCellsInRange","_selectedCells","colIndex1","rowIndex1","colIndex2","rowIndex2","cell1","cell2","isStandardCell","rowIndices","col","editable","getCell","_rowIndex","_colIndex","$editCell","innerHTML","editor","getEditor","content","currentCellEditor","initValue","submitValue","submitEditing","column","row","getRow","getData","getDefaultEditor","$input","class","inside","getValue","setValue","promise","valuePromise","then","oldValue","done","updateCell","catch","rows","curr","total","every","it","focusedCell","focusFilter","isFilterShown","refreshHtml","refreshCell","getCellContent","flag","getFirstColumnIndex","$prevFocusedCell","ret","$aboveRow","parentElement","$belowRow","getLastColumnIndex","getFirstRowIndex","getLastRowIndex","scrollToRow","ceil","getViewportHeight","getRowHeight","dataAttr","isHeader","isFilter","isTotalRow","isBodyCell","meta","isTreeNodeClose","contentHTML","editCellHTML","getEditCellHTML","sortIndicator","sortOrder","resizeColumn","resizable","dropdown","getDropdownHTML","customFormatter","getCustomCellFormatter","treeView","indent","nextRow","addToggle","cellContentHTML","txt","escapeHtmlMapping","&","<",">","\"","'","/","`","=","String","char","format","hyperlist","exports","createCommonjsModule","t","r","s","u","f","code","l","1","_dereq_","defineProperty","_createClass","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","defaultConfig","input","Number","HyperList","userProvidedConfig","_classCallCheck","_config","_lastRepaint","_maxElementHeight","getMaxBrowserHeight","refresh","config","render","_getScrollPosition","lastRepaint","_renderAnimationFrame","_averageHeight","rendered","_renderChunk","afterRender","fixture","mergeStyle","opacity","maxElementHeight","cancelAnimationFrame","_this2","assign","_element","scroller","_scroller","scrollerTagName","useFragment","generate","itemHeight","_itemHeights","fill","isValueNumber","isValuePercent","msg","numberValue","_containerHeight","elementStyle","scrollerHeight","warn","scrollerStyle","_scrollHeight","_computeScrollHeight","_itemPositions","_computePositions","oldClass","rowClassName","overrideScrollPosition","force","reverse","_getReverseFrom","_getFrom","_screenItemsLen","_lastFrom","_cachedItemsLen","fragment","createDocumentFragment","_getRow","applyPatch","_this3","sortedItemHeights","middle","floor","averageHeight","containerHeight","default","__esModule","KEYCODES","13","91","16","17","18","37","38","39","40","9","27","67","70","86","en","Sort Ascending","Sort Descending","Reset sorting","Remove column","No Data","{count} cells copied","{count} rows selected","de","fr","TranslationManager","language","translations","sourceText","translation","getPluralizedTranslation","arg","regex","filterRows","filters","filteredRowIndices","keyword","compareString","startsWith","v","guessFilter","filterMethod","stringCompareValue","formatter","getFormattedValue","numberCompareValue","getCompareValues","compareValue","compareValues","hay","needle","greaterThan","keywordValue","lessThan","equals","notEquals","range","rangeValues","values1","values2","containsNumber","number","hayNumber","hayString","getFilterMethod","defaultComponents","sortRows","switchColumn","removeColumn","columns","rowCount","prepareColumns","prepareRows","prepareTreeRows","prepareRowView","prepareNumericColumns","currentSort","validateColumns","prepareDefaultColumns","prepareHeader","checkboxColumn","hasColumnById","getCheckboxHTML","serialNoColumn","align","concat","baseCell","prepareCell","row0","cellValue","validateData","_getNextRowCount","prepareRow","isLeaf","isSet","rowViewOrder","baseRowCell","getColumns","_sortRows","reverseArray","aIndex","bIndex","aContent","bContent","srNoColIndex","viewIndex","temporary","index1","index2","temp","newCell1","newCell2","_row","findIndex","newVal","keyValPairs","getAllRowIndices","rowsToShow","_filteredRows","start","end","skipStandardColumns","getStandardColumnCount","parentRowIndex","parentIndent","childIndent","Boolean","refreshHeader","getHeaderHTML","$filterRow","$columnMap","bindMoveColumn","getRowHTML","bindDropdown","bindResizeColumn","bindPerfectColumnWidth","bindFilter","dropdownClass","dropdownContainer","getDropdownListHTML","$dropdownList","firstElementChild","openDropdown","deactivateDropdownOnBodyClick","deactivateDropdown","$item","_dropdownActiveColIndex","dropdownItems","headerDropdown","action","hideDropdown","_dropdownWidth","$resizingCell","startWidth","startX","isDragging","$handle","pageX","onMouseup","setColumnWidth","setBodyStyle","onMouseMove","delta","finalWidth","minimumColumnWidth","updateColumn","setColumnHeaderWidth","longestCell","bodyRenderer","visibleRows","$longestCellHTML","cellmanager","getCellHTML","$div","cellText","disableReorderColumn","$parent","onEnd","$draggedCell","nextSortOrder","freeze","refreshRows","unfreeze","fireEvent","removedCol","showFilter","applyFilter","getAppliedFilters","showRows","columnsToSort","sortColumn","columnWidth","styles","setStyle","$column","minWidth","getColumnCount","bindCheckbox","checkMap","$checkbox","checkAll","checkRow","renderBody","setDimensions","updateRow","getCheckedRows","toggle","highlightRow","showCheckStatus","getTotalRows","c","highlightAll","checkedRowStatus","clearToastMessage","$row","getRow$","_highlightedRows","renderRows","getImmediateChildren","childrenToShow","getChildrenToShowForNode","visibleRowIndices","rowsToHide","getChildren","getChildrenToHideForNode","getRows","flat","depth","rowsToOpen","rowsToClose","getRowCount","_lastScrollTo","rowsInView","offset","rowIdentifier","getFilterInput","title","footer","computedStyle","cellHeight","rowHTML","restoreState","renderFooter","getNoDataHTML","getRowsForView","showTotalRow","totalRow","getTotalRow","hooks","columnTotal","columnValues","prevRow","prevCell","highlightCheckedRows","selectAreaOnClusterChanged","focusCellOnClusterChanged","hideAfter","toastMessage","getToastMessageHTML","scopeClass","instances","datatableWrapper","styleEl","bindResizeWindow","bindScrollHeader","stylesheet","sheet","onWindowResize","layout","_settingHeaderPosition","distributeRemainingWidth","refreshColumnWidth","styleObject","_styleRulesMap","prefixedSelector","_getPrefixedSelector","ruleString","_getRuleString","insertRule","cssRules","rule","selectorText","deleteRule","dashed","setCellHeight","setupMinWidth","setupNaturalColumnWidth","setupColumnWidth","setColumnStyle","$headerCell","naturalWidth","totalWidth","getColumnById","onePart","ratioWidth","getRowIndexColumnWidth","wrapperWidth","firstRow","firstRowWidth","headerRow","resizableColumns","deltaWidth","getColumnHeaderElement","text-align","bodyWidth","rowWidth","bodyHeight","Infinity","listeners","keyCode","shiftKey","ctrlKey","metaKey","preventBubbling","listener","k","DataTable","HTMLElement","initializeTranslations","setDefaultOptions","buildOptions","prepare","initializeComponents","applyDefaultSortOrder","translationManager","addTranslations","DEFAULT_OPTIONS","dropdownButton","label","events","onRemoveColumn","onSwitchColumn","column1","column2","onSortColumn","onCheckRow","onDestroy","asc","desc","none","overrideComponents","freezeMessage","clusterize","logs","noDataMessage","dynamicRowHeight","prepareDom","components","Style$$1","Keyboard$$1","DataManager$$1","RowManager$$1","ColumnManager$$1","CellManager$$1","BodyRenderer$$1","freezeContainer","init","appendRows","refreshRow","renderHeader","viewportHeight","eventName","_internalEventHandlers","packageJson","__version__","get_columns_for_picker","doctype","exportable_fields","df","keep","frappe","model","no_value_type","fieldtype","fieldname","doctype_fields","get_docfields","__","reqd","get_table_fields","cdt","child_table_fields","get_fields_as_options","column_map","table_field","get_docfield","description","provide","data_import","DataExporter","exporting_for","with_doctype","make_dialog","dialog","ui","Dialog","fields","change","update_record_count_message","depends_on","doc","export_records","on_change","update_primary_action","get_multicheck_options","child_fieldname","primary_action_label","primary_action","on_page_show","select_mandatory","make_filter_area","make_select_all_buttons","show","multicheck_fields","get_values","doctype_field_map","get_filters","open_url_post","file_type","export_fields","export_filters","filter_group","FilterGroup","get_field","$wrapper","for_insert","section_title","$select_all_buttons","bind_actions_with_object","trigger","mandatory_table_fields","checkboxes","danger","unselect_all","update_existing_records","get_value","all","db","by_filter","blank_template","5_records","set_df_property","no_of_records","$primary_action","get_primary_btn","parent_fields","autoname_field","get_meta","autoname","is_field_mandatory","ImportPreview","preview_data","import_log","frm","make_wrapper","prepare_columns","prepare_data","render_datatable","setup_styles","add_actions","$table_preview","column_width","header_title","skip_import","show_warnings_button","column_title","get_random","date_format","datatable","boot","lang","get_translations","max_rows_exceeded","parts","max_rows_in_preview","total_number_of_rows","color","get_color_shade","row_classes","is_row_imported","backgroundColor","condition","status","success","warnings","scroll_to_field","$target","$warning","scroll_to","column_picker_fields","map_to_field","is_child_table_field","child_table_df","read_only","max_items","import_file","bold","changed_map","remap_column","hide","$body","addClass","serial_no","row_indexes"],"mappings":"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"}