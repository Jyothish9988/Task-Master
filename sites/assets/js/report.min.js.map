{"version":3,"file":"report.min.js","sources":["../../../apps/frappe/frappe/public/js/lib/clusterize.min.js","../../../apps/frappe/frappe/public/js/frappe/views/reports/report_factory.js","../../../apps/frappe/node_modules/sortablejs/Sortable.js","../../../apps/frappe/node_modules/frappe-datatable/dist/frappe-datatable.cjs.js","../../../apps/frappe/frappe/public/js/frappe/views/reports/report_view.js","../../../apps/frappe/frappe/public/js/frappe/views/reports/query_report.js","../../../apps/frappe/frappe/public/js/frappe/ui/group_by/group_by.js","../../../apps/frappe/frappe/public/js/frappe/views/reports/report_utils.js"],"sourcesContent":["/*! Clusterize.js - v0.17.6 - 2017-03-05\n* http://NeXTs.github.com/Clusterize.js/\n* Copyright (c) 2015 Denis Lukov; Licensed GPLv3 */\n\n;(function(q,n){\"undefined\"!=typeof module?module.exports=n():\"function\"==typeof define&&\"object\"==typeof define.amd?define(n):this[q]=n()})(\"Clusterize\",function(){function q(b,a,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent(\"on\"+b,c)}function n(b,a,c){return a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent(\"on\"+b,c)}function r(b){return\"[object Array]\"===Object.prototype.toString.call(b)}function m(b,a){return window.getComputedStyle?window.getComputedStyle(a)[b]:\n\ta.currentStyle[b]}var l=function(){for(var b=3,a=document.createElement(\"b\"),c=a.all||[];a.innerHTML=\"\\x3c!--[if gt IE \"+ ++b+\"]><i><![endif]--\\x3e\",c[0];);return 4<b?b:document.documentMode}(),x=navigator.platform.toLowerCase().indexOf(\"mac\")+1,p=function(b){if(!(this instanceof p))return new p(b);var a=this,c={rows_in_block:50,blocks_in_cluster:4,tag:null,show_no_data_row:!0,no_data_class:\"clusterize-no-data\",no_data_text:\"No data\",keep_parity:!0,callbacks:{}};a.options={};for(var d=\"rows_in_block blocks_in_cluster show_no_data_row no_data_class no_data_text keep_parity tag callbacks\".split(\" \"),\n\tf=0,h;h=d[f];f++)a.options[h]=\"undefined\"!=typeof b[h]&&null!=b[h]?b[h]:c[h];c=[\"scroll\",\"content\"];for(f=0;d=c[f];f++)if(a[d+\"_elem\"]=b[d+\"Id\"]?document.getElementById(b[d+\"Id\"]):b[d+\"Elem\"],!a[d+\"_elem\"])throw Error(\"Error! Could not find \"+d+\" element\");a.content_elem.hasAttribute(\"tabindex\")||a.content_elem.setAttribute(\"tabindex\",0);var e=r(b.rows)?b.rows:a.fetchMarkup(),g={};b=a.scroll_elem.scrollTop;a.insertToDOM(e,g);a.scroll_elem.scrollTop=b;var k=!1,m=0,l=!1,t=function(){x&&(l||(a.content_elem.style.pointerEvents=\n\t\"none\"),l=!0,clearTimeout(m),m=setTimeout(function(){a.content_elem.style.pointerEvents=\"auto\";l=!1},50));k!=(k=a.getClusterNum())&&a.insertToDOM(e,g);a.options.callbacks.scrollingProgress&&a.options.callbacks.scrollingProgress(a.getScrollProgress())},u=0,v=function(){clearTimeout(u);u=setTimeout(a.refresh,100)};q(\"scroll\",a.scroll_elem,t);q(\"resize\",window,v);a.destroy=function(b){n(\"scroll\",a.scroll_elem,t);n(\"resize\",window,v);a.html((b?a.generateEmptyRow():e).join(\"\"))};a.refresh=function(b){(a.getRowsHeight(e)||\n\tb)&&a.update(e)};a.update=function(b){e=r(b)?b:[];b=a.scroll_elem.scrollTop;e.length*a.options.item_height<b&&(k=a.scroll_elem.scrollTop=0);a.insertToDOM(e,g);a.scroll_elem.scrollTop=b};a.clear=function(){a.update([])};a.getRowsAmount=function(){return e.length};a.getScrollProgress=function(){return this.options.scroll_top/(e.length*this.options.item_height)*100||0};var w=function(b,c){var d=r(c)?c:[];d.length&&(e=\"append\"==b?e.concat(d):d.concat(e),a.insertToDOM(e,g))};a.append=function(a){w(\"append\",\n\ta)};a.prepend=function(a){w(\"prepend\",a)}};p.prototype={constructor:p,fetchMarkup:function(){for(var b=[],a=this.getChildNodes(this.content_elem);a.length;)b.push(a.shift().outerHTML);return b},exploreEnvironment:function(b,a){var c=this.options;c.content_tag=this.content_elem.tagName.toLowerCase();b.length&&(l&&9>=l&&!c.tag&&(c.tag=b[0].match(/<([^>\\s/]*)/)[1].toLowerCase()),1>=this.content_elem.children.length&&(a.data=this.html(b[0]+b[0]+b[0])),c.tag||(c.tag=this.content_elem.children[0].tagName.toLowerCase()),\n\tthis.getRowsHeight(b))},getRowsHeight:function(b){var a=this.options,c=a.item_height;a.cluster_height=0;if(b.length){b=this.content_elem.children;var d=b[Math.floor(b.length/2)];a.item_height=d.offsetHeight;\"tr\"==a.tag&&\"collapse\"!=m(\"borderCollapse\",this.content_elem)&&(a.item_height+=parseInt(m(\"borderSpacing\",this.content_elem),10)||0);\"tr\"!=a.tag&&(b=parseInt(m(\"marginTop\",d),10)||0,d=parseInt(m(\"marginBottom\",d),10)||0,a.item_height+=Math.max(b,d));a.block_height=a.item_height*a.rows_in_block;\n\ta.rows_in_cluster=a.blocks_in_cluster*a.rows_in_block;a.cluster_height=a.blocks_in_cluster*a.block_height;return c!=a.item_height}},getClusterNum:function(){this.options.scroll_top=this.scroll_elem.scrollTop;return Math.floor(this.options.scroll_top/(this.options.cluster_height-this.options.block_height))||0},generateEmptyRow:function(){var b=this.options;if(!b.tag||!b.show_no_data_row)return[];var a=document.createElement(b.tag),c=document.createTextNode(b.no_data_text),d;a.className=b.no_data_class;\n\t\"tr\"==b.tag&&(d=document.createElement(\"td\"),d.colSpan=100,d.appendChild(c));a.appendChild(d||c);return[a.outerHTML]},generate:function(b,a){var c=this.options,d=b.length;if(d<c.rows_in_block)return{top_offset:0,bottom_offset:0,rows_above:0,rows:d?b:this.generateEmptyRow()};var f=Math.max((c.rows_in_cluster-c.rows_in_block)*a,0),h=f+c.rows_in_cluster,e=Math.max(f*c.item_height,0),c=Math.max((d-h)*c.item_height,0),d=[],g=f;for(1>e&&g++;f<h;f++)b[f]&&d.push(b[f]);return{top_offset:e,bottom_offset:c,\n\trows_above:g,rows:d}},renderExtraTag:function(b,a){var c=document.createElement(this.options.tag);c.className=[\"clusterize-extra-row\",\"clusterize-\"+b].join(\" \");a&&(c.style.height=a+\"px\");return c.outerHTML},insertToDOM:function(b,a){this.options.cluster_height||this.exploreEnvironment(b,a);var c=this.generate(b,this.getClusterNum()),d=c.rows.join(\"\"),f=this.checkChanges(\"data\",d,a),h=this.checkChanges(\"top\",c.top_offset,a),e=this.checkChanges(\"bottom\",c.bottom_offset,a),g=this.options.callbacks,\n\tk=[];f||h?(c.top_offset&&(this.options.keep_parity&&k.push(this.renderExtraTag(\"keep-parity\")),k.push(this.renderExtraTag(\"top-space\",c.top_offset))),k.push(d),c.bottom_offset&&k.push(this.renderExtraTag(\"bottom-space\",c.bottom_offset)),g.clusterWillChange&&g.clusterWillChange(),this.html(k.join(\"\")),\"ol\"==this.options.content_tag&&this.content_elem.setAttribute(\"start\",c.rows_above),g.clusterChanged&&g.clusterChanged()):e&&(this.content_elem.lastChild.style.height=c.bottom_offset+\"px\")},html:function(b){var a=\n\tthis.content_elem;if(l&&9>=l&&\"tr\"==this.options.tag){var c=document.createElement(\"div\");for(c.innerHTML=\"<table><tbody>\"+b+\"</tbody></table>\";b=a.lastChild;)a.removeChild(b);for(c=this.getChildNodes(c.firstChild.firstChild);c.length;)a.appendChild(c.shift())}else a.innerHTML=b},getChildNodes:function(b){b=b.children;for(var a=[],c=0,d=b.length;c<d;c++)a.push(b[c]);return a},checkChanges:function(b,a,c){var d=a!=c[b];c[b]=a;return d}};return p});","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.views.ReportFactory = class ReportFactory extends frappe.views.Factory {\n\tmake(route) {\n\t\tconst _route = ['List', route[1], 'Report'];\n\n\t\tif (route[2]) {\n\t\t\t// custom report\n\t\t\t_route.push(route[2]);\n\t\t}\n\n\t\tfrappe.set_route(_route);\n\t}\n}\n","/**!\n * Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\n\n(function sortableModule(factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"Sortable\"] = factory();\n\t}\n})(function sortableFactory() {\n\t\"use strict\";\n\n\tif (typeof window === \"undefined\" || !window.document) {\n\t\treturn function sortableError() {\n\t\t\tthrow new Error(\"Sortable.js requires a window with a document\");\n\t\t};\n\t}\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\t\tlastDownEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\t\tscrollCustomFn,\n\n\t\toldIndex,\n\t\tnewIndex,\n\n\t\tactiveGroup,\n\t\tputSortable,\n\n\t\tautoScrolls = [],\n\t\tscrolling = false,\n\n\t\tawaitingDragStarted = false,\n\t\tignoreNextClick = false,\n\t\tsortables = [],\n\n\t\tpointerElemChangedInterval,\n\t\tlastPointerElemX,\n\t\tlastPointerElemY,\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\n\t\tlastTarget,\n\t\tlastDirection,\n\t\tpastFirstInvertThresh = false,\n\t\tisCircumstantialInvert = false,\n\t\tlastMode, // 'swap' or 'insert'\n\n\t\ttargetMoveDistance,\n\n\n\t\tforRepaintDummy,\n\t\trealDragElRect, // dragEl rect after current animation\n\n\t\t/** @const */\n\t\tR_SPACE = /\\s+/g,\n\n\t\texpando = 'Sortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\t\tsetTimeout = win.setTimeout,\n\n\t\t$ = win.jQuery || win.Zepto,\n\t\tPolymer = win.Polymer,\n\n\t\tcaptureMode = {\n\t\t\tcapture: false,\n\t\t\tpassive: false\n\t\t},\n\n\t\tIE11OrLess = !!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\\.|msie|iemobile)/i),\n\t\tEdge = !!navigator.userAgent.match(/Edge/i),\n\t\t// FireFox = !!navigator.userAgent.match(/firefox/i),\n\n\t\tCSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n\n\t\t// This will not pass for IE9, because IE9 DnD only works on anchors\n\t\tsupportDraggable = ('draggable' in document.createElement('div')),\n\n\t\tsupportCssPointerEvents = (function() {\n\t\t\t// false when <= IE11\n\t\t\tif (IE11OrLess) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar el = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\t\t_alignedSilent = false,\n\n\t\tabs = Math.abs,\n\t\tmin = Math.min,\n\n\t\tsavedInputChecked = [],\n\n\t\t_detectDirection = function(el, options) {\n\t\t\tvar elCSS = _css(el),\n\t\t\t\telWidth = parseInt(elCSS.width),\n\t\t\t\tchild1 = _getChild(el, 0, options),\n\t\t\t\tchild2 = _getChild(el, 1, options),\n\t\t\t\tfirstChildCSS = child1 && _css(child1),\n\t\t\t\tsecondChildCSS = child2 && _css(child2),\n\t\t\t\tfirstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + _getRect(child1).width,\n\t\t\t\tsecondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + _getRect(child2).width;\n\t\t\tif (elCSS.display === 'flex') {\n\t\t\t\treturn elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse'\n\t\t\t\t? 'vertical' : 'horizontal';\n\t\t\t}\n\t\t\tif (child1 && firstChildCSS.float !== 'none') {\n\t\t\t\tvar touchingSideChild2 = firstChildCSS.float === 'left' ? 'left' : 'right';\n\n\t\t\t\treturn child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ?\n\t\t\t\t\t'vertical' : 'horizontal';\n\t\t\t}\n\t\t\treturn (child1 &&\n\t\t\t\t(\n\t\t\t\t\tfirstChildCSS.display === 'block' ||\n\t\t\t\t\tfirstChildCSS.display === 'flex' ||\n\t\t\t\t\tfirstChildCSS.display === 'table' ||\n\t\t\t\t\tfirstChildCSS.display === 'grid' ||\n\t\t\t\t\tfirstChildWidth >= elWidth &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' ||\n\t\t\t\t\tchild2 &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' &&\n\t\t\t\t\tfirstChildWidth + secondChildWidth > elWidth\n\t\t\t\t) ?\n\t\t\t\t'vertical' : 'horizontal'\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\n\t\t * @param  {Number} x      X position\n\t\t * @param  {Number} y      Y position\n\t\t * @return {HTMLElement}   Element of the first found nearest Sortable\n\t\t */\n\t\t_detectNearestEmptySortable = function(x, y) {\n\t\t\tfor (var i = 0; i < sortables.length; i++) {\n\t\t\t\tif (sortables[i].children.length) continue;\n\n\t\t\t\tvar rect = _getRect(sortables[i]),\n\t\t\t\t\tthreshold = sortables[i][expando].options.emptyInsertThreshold,\n\t\t\t\t\tinsideHorizontally = x >= (rect.left - threshold) && x <= (rect.right + threshold),\n\t\t\t\t\tinsideVertically = y >= (rect.top - threshold) && y <= (rect.bottom + threshold);\n\n\t\t\t\tif (insideHorizontally && insideVertically) {\n\t\t\t\t\treturn sortables[i];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_isClientInRowColumn = function(x, y, el, axis, options) {\n\t\t\tvar targetRect = _getRect(el),\n\t\t\t\ttargetS1Opp = axis === 'vertical' ? targetRect.left : targetRect.top,\n\t\t\t\ttargetS2Opp = axis === 'vertical' ? targetRect.right : targetRect.bottom,\n\t\t\t\tmouseOnOppAxis = axis === 'vertical' ? x : y;\n\n\t\t\treturn targetS1Opp < mouseOnOppAxis && mouseOnOppAxis < targetS2Opp;\n\t\t},\n\n\t\t_isElInRowColumn = function(el1, el2, axis) {\n\t\t\tvar el1Rect = el1 === dragEl && realDragElRect || _getRect(el1),\n\t\t\t\tel2Rect = el2 === dragEl && realDragElRect || _getRect(el2),\n\t\t\t\tel1S1Opp = axis === 'vertical' ? el1Rect.left : el1Rect.top,\n\t\t\t\tel1S2Opp = axis === 'vertical' ? el1Rect.right : el1Rect.bottom,\n\t\t\t\tel1OppLength = axis === 'vertical' ? el1Rect.width : el1Rect.height,\n\t\t\t\tel2S1Opp = axis === 'vertical' ? el2Rect.left : el2Rect.top,\n\t\t\t\tel2S2Opp = axis === 'vertical' ? el2Rect.right : el2Rect.bottom,\n\t\t\t\tel2OppLength = axis === 'vertical' ? el2Rect.width : el2Rect.height;\n\n\t\t\treturn (\n\t\t\t\tel1S1Opp === el2S1Opp ||\n\t\t\t\tel1S2Opp === el2S2Opp ||\n\t\t\t\t(el1S1Opp + el1OppLength / 2) === (el2S1Opp + el2OppLength / 2)\n\t\t\t);\n\t\t},\n\n\t\t_getParentAutoScrollElement = function(el, includeSelf) {\n\t\t\t// skip to window\n\t\t\tif (!el || !el.getBoundingClientRect) return win;\n\n\t\t\tvar elem = el;\n\t\t\tvar gotSelf = false;\n\t\t\tdo {\n\t\t\t\t// we don't need to get elem css if it isn't even overflowing in the first place (performance)\n\t\t\t\tif (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n\t\t\t\t\tvar elemCSS = _css(elem);\n\t\t\t\t\tif (\n\t\t\t\t\t\telem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') ||\n\t\t\t\t\t\telem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (!elem || !elem.getBoundingClientRect || elem === document.body) return win;\n\n\t\t\t\t\t\tif (gotSelf || includeSelf) return elem;\n\t\t\t\t\t\tgotSelf = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t\t} while (elem = elem.parentNode);\n\n\t\t\treturn win;\n\t\t},\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl, /**Boolean*/isFallback) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (options.scroll) {\n\t\t\t\tvar _this = rootEl ? rootEl[expando] : window,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinWidth = window.innerWidth,\n\t\t\t\t\twinHeight = window.innerHeight,\n\n\t\t\t\t\tscrollThisInstance = false;\n\n\t\t\t\t// Detect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\t_clearAutoScrolls();\n\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollCustomFn = options.scrollFn;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = _getParentAutoScrollElement(rootEl, true);\n\t\t\t\t\t\tscrollParentEl = scrollEl;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tvar layersOut = 0;\n\t\t\t\tvar currentParent = scrollEl;\n\t\t\t\tdo {\n\t\t\t\t\tvar\tel = currentParent,\n\t\t\t\t\t\trect = _getRect(el),\n\n\t\t\t\t\t\ttop = rect.top,\n\t\t\t\t\t\tbottom = rect.bottom,\n\t\t\t\t\t\tleft = rect.left,\n\t\t\t\t\t\tright = rect.right,\n\n\t\t\t\t\t\twidth = rect.width,\n\t\t\t\t\t\theight = rect.height,\n\n\t\t\t\t\t\tscrollWidth,\n\t\t\t\t\t\tscrollHeight,\n\n\t\t\t\t\t\tcss,\n\n\t\t\t\t\t\tvx,\n\t\t\t\t\t\tvy,\n\n\t\t\t\t\t\tcanScrollX,\n\t\t\t\t\t\tcanScrollY,\n\n\t\t\t\t\t\tscrollPosX,\n\t\t\t\t\t\tscrollPosY;\n\n\n\t\t\t\t\tif (el !== win) {\n\t\t\t\t\t\tscrollWidth = el.scrollWidth;\n\t\t\t\t\t\tscrollHeight = el.scrollHeight;\n\n\t\t\t\t\t\tcss = _css(el);\n\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll');\n\n\t\t\t\t\t\tscrollPosX = el.scrollLeft;\n\t\t\t\t\t\tscrollPosY = el.scrollTop;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscrollWidth = document.documentElement.scrollWidth;\n\t\t\t\t\t\tscrollHeight = document.documentElement.scrollHeight;\n\n\t\t\t\t\t\tcss = _css(document.documentElement);\n\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll' || css.overflowX === 'visible');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll' || css.overflowY === 'visible');\n\n\t\t\t\t\t\tscrollPosX = document.documentElement.scrollLeft;\n\t\t\t\t\t\tscrollPosY = document.documentElement.scrollTop;\n\t\t\t\t\t}\n\n\t\t\t\t\tvx = canScrollX && (abs(right - x) <= sens && (scrollPosX + width) < scrollWidth) - (abs(left - x) <= sens && !!scrollPosX);\n\n\t\t\t\t\tvy = canScrollY && (abs(bottom - y) <= sens && (scrollPosY + height) < scrollHeight) - (abs(top - y) <= sens && !!scrollPosY);\n\n\n\t\t\t\t\tif (!autoScrolls[layersOut]) {\n\t\t\t\t\t\tfor (var i = 0; i <= layersOut; i++) {\n\t\t\t\t\t\t\tif (!autoScrolls[i]) {\n\t\t\t\t\t\t\t\tautoScrolls[i] = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n\t\t\t\t\t\tautoScrolls[layersOut].el = el;\n\t\t\t\t\t\tautoScrolls[layersOut].vx = vx;\n\t\t\t\t\t\tautoScrolls[layersOut].vy = vy;\n\n\t\t\t\t\t\tclearInterval(autoScrolls[layersOut].pid);\n\n\t\t\t\t\t\tif (el && (vx != 0 || vy != 0)) {\n\t\t\t\t\t\t\tscrollThisInstance = true;\n\t\t\t\t\t\t\t/* jshint loopfunc:true */\n\t\t\t\t\t\t\tautoScrolls[layersOut].pid = setInterval((function () {\n\t\t\t\t\t\t\t\t// emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n\t\t\t\t\t\t\t\tif (isFallback && this.layer === 0) {\n\t\t\t\t\t\t\t\t\tSortable.active._emulateDragOver(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n\t\t\t\t\t\t\t\tvar scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n\t\t\t\t\t\t\t\tif ('function' === typeof(scrollCustomFn)) {\n\t\t\t\t\t\t\t\t\tif (scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt, touchEvt, autoScrolls[this.layer].el) !== 'continue') {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (autoScrolls[this.layer].el === win) {\n\t\t\t\t\t\t\t\t\twin.scrollTo(win.pageXOffset + scrollOffsetX, win.pageYOffset + scrollOffsetY);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tautoScrolls[this.layer].el.scrollTop += scrollOffsetY;\n\t\t\t\t\t\t\t\t\tautoScrolls[this.layer].el.scrollLeft += scrollOffsetX;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).bind({layer: layersOut}), 24);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlayersOut++;\n\t\t\t\t} while (options.bubbleScroll && currentParent !== win && (currentParent = _getParentAutoScrollElement(currentParent, false)));\n\t\t\t\tscrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n\t\t\t}\n\t\t}, 30),\n\n\t\t_clearAutoScrolls = function () {\n\t\t\tautoScrolls.forEach(function(autoScroll) {\n\t\t\t\tclearInterval(autoScroll.pid);\n\t\t\t});\n\t\t\tautoScrolls = [];\n\t\t},\n\n\t\t_prepareGroup = function (options) {\n\t\t\tfunction toFn(value, pull) {\n\t\t\t\treturn function(to, from, dragEl, evt) {\n\t\t\t\t\tvar sameGroup = to.options.group.name &&\n\t\t\t\t\t\t\t\t\tfrom.options.group.name &&\n\t\t\t\t\t\t\t\t\tto.options.group.name === from.options.group.name;\n\n\t\t\t\t\tif (value == null && (pull || sameGroup)) {\n\t\t\t\t\t\t// Default pull value\n\t\t\t\t\t\t// Default pull and put value if same group\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (value == null || value === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (pull && value === 'clone') {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t} else if (typeof value === 'function') {\n\t\t\t\t\t\treturn toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar otherGroup = (pull ? to : from).options.group.name;\n\n\t\t\t\t\t\treturn (value === true ||\n\t\t\t\t\t\t(typeof value === 'string' && value === otherGroup) ||\n\t\t\t\t\t\t(value.join && value.indexOf(otherGroup) > -1));\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar group = {};\n\t\t\tvar originalGroup = options.group;\n\n\t\t\tif (!originalGroup || typeof originalGroup != 'object') {\n\t\t\t\toriginalGroup = {name: originalGroup};\n\t\t\t}\n\n\t\t\tgroup.name = originalGroup.name;\n\t\t\tgroup.checkPull = toFn(originalGroup.pull, true);\n\t\t\tgroup.checkPut = toFn(originalGroup.put);\n\t\t\tgroup.revertClone = originalGroup.revertClone;\n\n\t\t\toptions.group = group;\n\t\t},\n\n\t\t_checkAlignment = function(evt) {\n\t\t\tif (!dragEl || !dragEl.parentNode) return;\n\t\t\tdragEl.parentNode[expando] && dragEl.parentNode[expando]._computeIsAligned(evt);\n\t\t},\n\n\t\t_isTrueParentSortable = function(el, target) {\n\t\t\tvar trueParent = target;\n\t\t\twhile (!trueParent[expando]) {\n\t\t\t\ttrueParent = trueParent.parentNode;\n\t\t\t}\n\n\t\t\treturn el === trueParent;\n\t\t},\n\n\t\t_artificalBubble = function(sortable, originalEvt, method) {\n\t\t\t// Artificial IE bubbling\n\t\t\tvar nextParent = sortable.parentNode;\n\t\t\twhile (nextParent && !nextParent[expando]) {\n\t\t\t\tnextParent = nextParent.parentNode;\n\t\t\t}\n\n\t\t\tif (nextParent) {\n\t\t\t\tnextParent[expando][method](_extend(originalEvt, {\n\t\t\t\t\tartificialBubble: true\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\n\t\t_hideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t}\n\t\t},\n\n\t\t_unhideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t}\n\t\t};\n\n\n\t// #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\tdocument.addEventListener('click', function(evt) {\n\t\tif (ignoreNextClick) {\n\t\t\tevt.preventDefault();\n\t\t\tevt.stopPropagation && evt.stopPropagation();\n\t\t\tevt.stopImmediatePropagation && evt.stopImmediatePropagation();\n\t\t\tignoreNextClick = false;\n\t\t\treturn false;\n\t\t}\n\t}, true);\n\n\tvar nearestEmptyInsertDetectEvent = function(evt) {\n\t\tevt = evt.touches ? evt.touches[0] : evt;\n\t\tif (dragEl) {\n\t\t\tvar nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n\t\t\tif (nearest) {\n\t\t\t\tnearest[expando]._onDragOver({\n\t\t\t\t\tclientX: evt.clientX,\n\t\t\t\t\tclientY: evt.clientY,\n\t\t\t\t\ttarget: nearest,\n\t\t\t\t\trootEl: nearest\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\t// We do not want this to be triggered if completed (bubbling canceled), so only define it here\n\t_on(document, 'dragover', nearestEmptyInsertDetectEvent);\n\t_on(document, 'mousemove', nearestEmptyInsertDetectEvent);\n\t_on(document, 'touchmove', nearestEmptyInsertDetectEvent);\n\n\t/**\n\t * @class  Sortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction Sortable(el, options) {\n\t\tif (!(el && el.nodeType && el.nodeType === 1)) {\n\t\t\tthrow 'Sortable: `el` must be HTMLElement, not ' + {}.toString.call(el);\n\t\t}\n\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: null,\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tbubbleScroll: true,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? '>li' : '>*',\n\t\t\tswapThreshold: 1, // percentage; 0 <= x <= 1\n\t\t\tinvertSwap: false, // invert always\n\t\t\tinvertedSwapThreshold: null, // will be set to same as swapThreshold if default\n\t\t\tremoveCloneOnHide: true,\n\t\t\tdirection: function() {\n\t\t\t\treturn _detectDirection(el, this.options);\n\t\t\t},\n\t\t\tghostClass: 'sortable-ghost',\n\t\t\tchosenClass: 'sortable-chosen',\n\t\t\tdragClass: 'sortable-drag',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tpreventOnFilter: true,\n\t\t\tanimation: 0,\n\t\t\teasing: null,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\ttouchStartThreshold: parseInt(window.devicePixelRatio, 10) || 1,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'sortable-fallback',\n\t\t\tfallbackOnBody: false,\n\t\t\tfallbackTolerance: 0,\n\t\t\tfallbackOffset: {x: 0, y: 0},\n\t\t\tsupportPointer: Sortable.supportPointer !== false && (\n\t\t\t\t('PointerEvent' in window) ||\n\t\t\t\twindow.navigator && ('msPointerEnabled' in window.navigator) // microsoft\n\t\t\t),\n\t\t\temptyInsertThreshold: 5\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\t// Bind events\n\t\tif (options.supportPointer) {\n\t\t\t_on(el, 'pointerdown', this._onTapStart);\n\t\t} else {\n\t\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t\t_on(el, 'touchstart', this._onTapStart);\n\t\t}\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\tsortables.push(this.el);\n\n\t\t// Restore sorting\n\t\toptions.store && options.store.get && this.sort(options.store.get(this) || []);\n\t}\n\n\tSortable.prototype = /** @lends Sortable.prototype */ {\n\t\tconstructor: Sortable,\n\n\t\t_computeIsAligned: function(evt) {\n\t\t\tvar target;\n\n\t\t\tif (ghostEl && !supportCssPointerEvents) {\n\t\t\t\t_hideGhostForTarget();\n\t\t\t\ttarget = document.elementFromPoint(evt.clientX, evt.clientY);\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t} else {\n\t\t\t\ttarget = evt.target;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, this.options.draggable, this.el, false);\n\t\t\tif (_alignedSilent) return;\n\t\t\tif (!dragEl || dragEl.parentNode !== this.el) return;\n\n\t\t\tvar children = this.el.children;\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t// Don't change for target in case it is changed to aligned before onDragOver is fired\n\t\t\t\tif (_closest(children[i], this.options.draggable, this.el, false) && children[i] !== target) {\n\t\t\t\t\tchildren[i].sortableMouseAligned = _isClientInRowColumn(evt.clientX, evt.clientY, children[i], this._getDirection(evt, null), this.options);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Used for nulling last target when not in element, nothing to do with checking if aligned\n\t\t\tif (!_closest(target, this.options.draggable, this.el, true)) {\n\t\t\t\tlastTarget = null;\n\t\t\t}\n\n\t\t\t_alignedSilent = true;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_alignedSilent = false;\n\t\t\t}, 30);\n\n\t\t},\n\n\t\t_getDirection: function(evt, target) {\n\t\t\treturn (typeof this.options.direction === 'function') ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n\t\t},\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tif (!evt.cancelable) return;\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\tpreventOnFilter = options.preventOnFilter,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = evt.target.shadowRoot && ((evt.path && evt.path[0]) || (evt.composedPath && evt.composedPath()[0])) || target,\n\t\t\t\tfilter = options.filter,\n\t\t\t\tstartIndex;\n\n\t\t\t_saveInputCheckedState(el);\n\n\n\t\t\t// IE: Calls events in capture mode if event element is nested. This ensures only correct element's _onTapStart goes through.\n\t\t\t// This process is also done in _onDragOver\n\t\t\tif (IE11OrLess && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\t\t\tif (dragEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button and enabled\n\t\t\t}\n\n\t\t\t// cancel dnd if original target is content editable\n\t\t\tif (originalTarget.isContentEditable) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, options.draggable, el, false);\n\n\t\t\tif (!target) {\n\t\t\t\tif (IE11OrLess) {\n\t\t\t\t\t_artificalBubble(el, evt, '_onTapStart');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (lastDownEl === target) {\n\t\t\t\t// Ignoring duplicate `down`\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get the index of the dragged element within its parent\n\t\t\tstartIndex = _index(target, options.draggable);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, el, startIndex);\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el, false);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, el, startIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el, false)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target, startIndex);\n\t\t},\n\n\n\t\t_handleAutoScroll: function(evt, fallback) {\n\t\t\tif (!dragEl || !this.options.scroll) return;\n\t\t\tvar x = evt.clientX,\n\t\t\t\ty = evt.clientY,\n\n\t\t\t\telem = document.elementFromPoint(x, y),\n\t\t\t\t_this = this;\n\n\t\t\t// IE does not seem to have native autoscroll,\n\t\t\t// Edge's autoscroll seems too conditional,\n\t\t\t// Firefox and Chrome are good\n\t\t\tif (fallback || Edge || IE11OrLess) {\n\t\t\t\t_autoScroll(evt, _this.options, elem, fallback);\n\n\t\t\t\t// Listener for pointer element change\n\t\t\t\tvar ogElemScroller = _getParentAutoScrollElement(elem, true);\n\t\t\t\tif (\n\t\t\t\t\tscrolling &&\n\t\t\t\t\t(\n\t\t\t\t\t\t!pointerElemChangedInterval ||\n\t\t\t\t\t\tx !== lastPointerElemX ||\n\t\t\t\t\t\ty !== lastPointerElemY\n\t\t\t\t\t)\n\t\t\t\t) {\n\n\t\t\t\t\tpointerElemChangedInterval && clearInterval(pointerElemChangedInterval);\n\t\t\t\t\t// Detect for pointer elem change, emulating native DnD behaviour\n\t\t\t\t\tpointerElemChangedInterval = setInterval(function() {\n\t\t\t\t\t\tif (!dragEl) return;\n\t\t\t\t\t\t// could also check if scroll direction on newElem changes due to parent autoscrolling\n\t\t\t\t\t\tvar newElem = _getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\t\t\t\t\t\tif (newElem !== ogElemScroller) {\n\t\t\t\t\t\t\togElemScroller = newElem;\n\t\t\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\t\t\t_autoScroll(evt, _this.options, ogElemScroller, fallback);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 10);\n\t\t\t\t\tlastPointerElemX = x;\n\t\t\t\t\tlastPointerElemY = y;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n\t\t\t\tif (!_this.options.bubbleScroll || _getParentAutoScrollElement(elem, true) === window) {\n\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_autoScroll(evt, _this.options, _getParentAutoScrollElement(elem, false), false);\n\t\t\t}\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target, /** Number */startIndex) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tlastDownEl = target;\n\t\t\t\tactiveGroup = options.group;\n\t\t\t\toldIndex = startIndex;\n\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: (touch || evt).clientX,\n\t\t\t\t\tclientY: (touch || evt).clientY\n\t\t\t\t};\n\n\t\t\t\tthis._lastX = (touch || evt).clientX;\n\t\t\t\tthis._lastY = (touch || evt).clientY;\n\n\t\t\t\tdragEl.style['will-change'] = 'all';\n\t\t\t\t// undo animation if needed\n\t\t\t\tdragEl.style.transition = '';\n\t\t\t\tdragEl.style.transform = '';\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDrag();\n\n\t\t\t\t\t// Make the element draggable\n\t\t\t\t\tdragEl.draggable = _this.nativeDraggable;\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(evt, touch);\n\n\t\t\t\t\t// Drag start event\n\t\t\t\t\t_dispatchEvent(_this, rootEl, 'choose', dragEl, rootEl, rootEl, oldIndex);\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, options.chosenClass, true);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\tif (options.supportPointer) {\n\t\t\t\t\t_on(ownerDocument, 'pointerup', _this._onDrop);\n\t\t\t\t} else {\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\t\t\t\t}\n\n\t\t\t\tif (options.delay) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\toptions.supportPointer && _on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_delayedDragTouchMoveHandler: function (/** TouchEvent|PointerEvent **/e) {\n\t\t\tvar touch = e.touches ? e.touches[0] : e;\n\t\t\tif (min(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY))\n\t\t\t\t\t>= this.options.touchStartThreshold\n\t\t\t) {\n\t\t\t\tthis._disableDelayedDrag();\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Event */evt, /** Touch */touch) {\n\t\t\ttouch = touch || (evt.pointerType == 'touch' ? evt : null);\n\n\t\t\tif (!this.nativeDraggable || touch) {\n\t\t\t\tif (this.options.supportPointer) {\n\t\t\t\t\t_on(document, 'pointermove', this._onTouchMove);\n\t\t\t\t} else if (touch) {\n\t\t\t\t\t_on(document, 'touchmove', this._onTouchMove);\n\t\t\t\t} else {\n\t\t\t\t\t_on(document, 'mousemove', this._onTouchMove);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\t// Timeout neccessary for IE9\n\t\t\t\t\t_nextTick(function () {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function (fallback) {\n\t\t\tawaitingDragStarted = false;\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t_on(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t\t_on(document, 'dragover', _checkAlignment);\n\t\t\t\t}\n\t\t\t\tvar options = this.options;\n\n\t\t\t\t// Apply effect\n\t\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, false);\n\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\n\t\t\t\t// In case dragging an animated element\n\t\t\t\t_css(dragEl, 'transform', '');\n\n\t\t\t\tSortable.active = this;\n\n\t\t\t\tfallback && this._appendGhost();\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, rootEl, oldIndex);\n\t\t\t} else {\n\t\t\t\tthis._nulling();\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function (bypassLastTouchCheck) {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY && !bypassLastTouchCheck) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\t_hideGhostForTarget();\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\tvar parent = target;\n\n\t\t\t\twhile (target && target.shadowRoot) {\n\t\t\t\t\ttarget = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\t\tparent = target;\n\t\t\t\t}\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando]) {\n\t\t\t\t\t\t\tvar inserted;\n\n\t\t\t\t\t\t\tinserted = parent[expando]._onDragOver({\n\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (inserted && !this.options.dragoverBubble) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(touchEvt);\n\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt) {\n\t\t\tif (tapEvt) {\n\t\t\t\tvar\toptions = this.options,\n\t\t\t\t\tfallbackTolerance = options.fallbackTolerance,\n\t\t\t\t\tfallbackOffset = options.fallbackOffset,\n\t\t\t\t\ttouch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tmatrix = ghostEl && _matrix(ghostEl),\n\t\t\t\t\tscaleX = ghostEl && matrix && matrix.a,\n\t\t\t\t\tscaleY = ghostEl && matrix && matrix.d,\n\t\t\t\t\tdx = ((touch.clientX - tapEvt.clientX) + fallbackOffset.x) / (scaleX ? scaleX : 1),\n\t\t\t\t\tdy = ((touch.clientY - tapEvt.clientY) + fallbackOffset.y) / (scaleY ? scaleY : 1),\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!Sortable.active && !awaitingDragStarted) {\n\t\t\t\t\tif (fallbackTolerance &&\n\t\t\t\t\t\tmin(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._onDragStart(evt, true);\n\t\t\t\t}\n\n\t\t\t\tthis._handleAutoScroll(touch, true);\n\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar rect = _getRect(dragEl, this.options.fallbackOnBody ? document.body : rootEl, true),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\toptions = this.options;\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, options.fallbackClass, true);\n\t\t\t\t_toggleClass(ghostEl, options.dragClass, true);\n\n\t\t\t\t_css(ghostEl, 'box-sizing', 'border-box');\n\t\t\t\t_css(ghostEl, 'margin', 0);\n\t\t\t\t_css(ghostEl, 'top', rect.top);\n\t\t\t\t_css(ghostEl, 'left', rect.left);\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', 'fixed');\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\toptions.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/fallback) {\n\t\t\tvar _this = this;\n\t\t\tvar dataTransfer = evt.dataTransfer;\n\t\t\tvar options = _this.options;\n\n\t\t\t// Setup clone\n\t\t\tcloneEl = _clone(dragEl);\n\n\t\t\tcloneEl.draggable = false;\n\t\t\tcloneEl.style['will-change'] = '';\n\n\t\t\tthis._hideClone();\n\n\t\t\t_toggleClass(cloneEl, _this.options.chosenClass, false);\n\n\n\t\t\t// #1143: IFrame support workaround\n\t\t\t_this._cloneId = _nextTick(function () {\n\t\t\t\tif (!_this.options.removeCloneOnHide) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t}\n\t\t\t\t_dispatchEvent(_this, rootEl, 'clone', dragEl);\n\t\t\t});\n\n\n\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, true);\n\n\t\t\t// Set proper drop events\n\t\t\tif (fallback) {\n\t\t\t\tignoreNextClick = true;\n\t\t\t\t_this._loopId = setInterval(_this._emulateDragOver, 50);\n\t\t\t} else {\n\t\t\t\t// Undo what was set in _prepareDragStart before drag started\n\t\t\t\t_off(document, 'mouseup', _this._onDrop);\n\t\t\t\t_off(document, 'touchend', _this._onDrop);\n\t\t\t\t_off(document, 'touchcancel', _this._onDrop);\n\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(_this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', _this);\n\n\t\t\t\t// #1276 fix:\n\t\t\t\t_css(dragEl, 'transform', 'translateZ(0)');\n\t\t\t}\n\n\t\t\tawaitingDragStarted = true;\n\n\t\t\t_this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback));\n\t\t\t_on(document, 'selectstart', _this);\n\t\t},\n\n\t\t// Returns true - if no further action is needed (either inserted or another condition)\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget = evt.target,\n\t\t\t\tdragRect,\n\t\t\t\ttargetRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tactiveSortable = Sortable.active,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tcanSort = options.sort,\n\t\t\t\t_this = this;\n\n\t\t\tif (_silent) return;\n\n\t\t\t// IE event order fix\n\t\t\tif (IE11OrLess && !evt.rootEl && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Return invocation when no further action is needed in another sortable\n\t\t\tfunction completed() {\n\t\t\t\tif (activeSortable) {\n\t\t\t\t\t// Set ghost class to new sortable's ghost class\n\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\t\t\t\t}\n\n\t\t\t\tif (putSortable !== _this && _this !== Sortable.active) {\n\t\t\t\t\tputSortable = _this;\n\t\t\t\t} else if (_this === Sortable.active) {\n\t\t\t\t\tputSortable = null;\n\t\t\t\t}\n\n\n\t\t\t\t// Null lastTarget if it is not inside a previously swapped element\n\t\t\t\tif ((target === dragEl && !dragEl.animated) || (target === el && !target.animated)) {\n\t\t\t\t\tlastTarget = null;\n\t\t\t\t}\n\t\t\t\t// no bubbling and not fallback\n\t\t\t\tif (!options.dragoverBubble && !evt.rootEl && target !== document) {\n\t\t\t\t\t_this._handleAutoScroll(evt);\n\t\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(evt);\n\t\t\t\t}\n\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Call when dragEl has been inserted\n\t\t\tfunction changed() {\n\t\t\t\t_dispatchEvent(_this, rootEl, 'change', target, el, rootEl, oldIndex, _index(dragEl, options.draggable), evt);\n\t\t\t}\n\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\n\n\t\t\tmoved = true;\n\n\t\t\ttarget = _closest(target, options.draggable, el, true);\n\n\t\t\t// target is dragEl or target is animated\n\t\t\tif (!!_closest(evt.target, null, dragEl, true) || target.animated) {\n\t\t\t\treturn completed();\n\t\t\t}\n\n\t\t\tif (target !== dragEl) {\n\t\t\t\tignoreNextClick = false;\n\t\t\t}\n\n\t\t\tif (activeSortable && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t: (\n\t\t\t\t\t\tputSortable === this ||\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t(this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) &&\n\t\t\t\t\t\t\tgroup.checkPut(this, activeSortable, dragEl, evt)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tvar axis = this._getDirection(evt, target);\n\n\t\t\t\tdragRect = _getRect(dragEl);\n\n\t\t\t\tif (revert) {\n\t\t\t\t\tthis._hideClone();\n\t\t\t\t\tparentEl = rootEl; // actualization\n\n\t\t\t\t\tif (nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, nextEl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn completed();\n\t\t\t\t}\n\n\t\t\t\tif ((el.children.length === 0) || (el.children[0] === ghostEl) ||\n\t\t\t\t\t_ghostIsLast(evt, axis, el) && !dragEl.animated\n\t\t\t\t) {\n\t\t\t\t\t//assign target only if condition is true\n\t\t\t\t\tif (el.children.length !== 0 && el.children[0] !== ghostEl && el === evt.target) {\n\t\t\t\t\t\ttarget = _lastChild(el);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\ttargetRect = _getRect(target);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\trealDragElRect = null;\n\n\t\t\t\t\t\tchanged();\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\ttarget && this._animate(targetRect, target);\n\t\t\t\t\t\treturn completed();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && target !== dragEl && target.parentNode === el) {\n\t\t\t\t\tvar direction = 0,\n\t\t\t\t\t\ttargetBeforeFirstSwap,\n\t\t\t\t\t\taligned = target.sortableMouseAligned,\n\t\t\t\t\t\tdifferentLevel = dragEl.parentNode !== el,\n\t\t\t\t\t\tscrolledPastTop = _isScrolledPast(target, axis === 'vertical' ? 'top' : 'left');\n\n\t\t\t\t\tif (lastTarget !== target) {\n\t\t\t\t\t\tlastMode = null;\n\t\t\t\t\t\ttargetBeforeFirstSwap = _getRect(target)[axis === 'vertical' ? 'top' : 'left'];\n\t\t\t\t\t\tpastFirstInvertThresh = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Reference: https://www.lucidchart.com/documents/view/10fa0e93-e362-4126-aca2-b709ee56bd8b/0\n\t\t\t\t\tif (\n\t\t\t\t\t\t_isElInRowColumn(dragEl, target, axis) && aligned ||\n\t\t\t\t\t\tdifferentLevel ||\n\t\t\t\t\t\tscrolledPastTop ||\n\t\t\t\t\t\toptions.invertSwap ||\n\t\t\t\t\t\tlastMode === 'insert' ||\n\t\t\t\t\t\t// Needed, in the case that we are inside target and inserted because not aligned... aligned will stay false while inside\n\t\t\t\t\t\t// and lastMode will change to 'insert', but we must swap\n\t\t\t\t\t\tlastMode === 'swap'\n\t\t\t\t\t) {\n\t\t\t\t\t\t// New target that we will be inside\n\t\t\t\t\t\tif (lastMode !== 'swap') {\n\t\t\t\t\t\t\tisCircumstantialInvert = options.invertSwap || differentLevel || scrolling || scrolledPastTop;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdirection = _getSwapDirection(evt, target, axis,\n\t\t\t\t\t\t\toptions.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold,\n\t\t\t\t\t\t\tisCircumstantialInvert,\n\t\t\t\t\t\t\tlastTarget === target);\n\t\t\t\t\t\tlastMode = 'swap';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Insert at position\n\t\t\t\t\t\tdirection = _getInsertDirection(target, options);\n\t\t\t\t\t\tlastMode = 'insert';\n\t\t\t\t\t}\n\t\t\t\t\tif (direction === 0) return completed();\n\n\t\t\t\t\trealDragElRect = null;\n\t\t\t\t\tlastTarget = target;\n\n\t\t\t\t\tlastDirection = direction;\n\n\t\t\t\t\ttargetRect = _getRect(target);\n\n\t\t\t\t\tvar nextSibling = target.nextElementSibling,\n\t\t\t\t\t\tafter = false;\n\n\t\t\t\t\tafter = direction === 1;\n\n\t\t\t\t\tvar moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\t// must be done before animation\n\t\t\t\t\t\tif (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n\t\t\t\t\t\t\ttargetMoveDistance = abs(targetBeforeFirstSwap - _getRect(target)[axis === 'vertical' ? 'top' : 'left']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchanged();\n\t\t\t\t\t\t!differentLevel && this._animate(targetRect, target);\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\n\t\t\t\t\t\treturn completed();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (el.contains(dragEl)) {\n\t\t\t\t\treturn completed();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (IE11OrLess && !evt.rootEl) {\n\t\t\t\t_artificalBubble(el, evt, '_onDragOver');\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = _getRect(target);\n\n\t\t\t\tif (target === dragEl) {\n\t\t\t\t\trealDragElRect = currentRect;\n\t\t\t\t}\n\n\t\t\t\tif (prevRect.nodeType === 1) {\n\t\t\t\t\tprevRect = _getRect(prevRect);\n\t\t\t\t}\n\n\t\t\t\t// Check if actually moving position\n\t\t\t\tif ((prevRect.left + prevRect.width / 2) !== (currentRect.left + currentRect.width / 2)\n\t\t\t\t\t|| (prevRect.top + prevRect.height / 2) !== (currentRect.top + currentRect.height / 2)\n\t\t\t\t) {\n\t\t\t\t\tvar matrix = _matrix(this.el),\n\t\t\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t\t+ (prevRect.left - currentRect.left) / (scaleX ? scaleX : 1) + 'px,'\n\t\t\t\t\t\t+ (prevRect.top - currentRect.top) / (scaleY ? scaleY : 1) + 'px,0)'\n\t\t\t\t\t);\n\n\t\t\t\t\tforRepaintDummy = target.offsetWidth; // repaint\n\t\t\t\t\t_css(target, 'transition', 'transform ' + ms + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n\t\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\t\t\t\t}\n\n\t\t\t\t(typeof target.animated === 'number') && clearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(document, 'pointermove', this._onTouchMove);\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointerup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t\t_off(document, 'selectstart', this);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\t\t\tawaitingDragStarted = false;\n\t\t\tscrolling = false;\n\t\t\tisCircumstantialInvert = false;\n\t\t\tpastFirstInvertThresh = false;\n\n\t\t\tclearInterval(this._loopId);\n\n\t\t\tclearInterval(pointerElemChangedInterval);\n\t\t\t_clearAutoScrolls();\n\t\t\t_cancelThrottle();\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t_cancelNextTick(this._cloneId);\n\t\t\t_cancelNextTick(this._dragStartId);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t\t_off(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t_off(document, 'dragover', _checkAlignment);\n\t\t\t}\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (rootEl === parentEl || (putSortable && putSortable.lastPutMode !== 'clone')) {\n\t\t\t\t\t// Remove clone\n\t\t\t\t\tcloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\t\t\t\t\tdragEl.style['will-change'] = '';\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\t// Drag stop event\n\t\t\t\t\t_dispatchEvent(this, rootEl, 'unchoose', dragEl, parentEl, rootEl, oldIndex, null, evt);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tputSortable && putSortable.save();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Sortable.active) {\n\t\t\t\t\t\t/* jshint eqnull:true */\n\t\t\t\t\t\tif (newIndex == null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tthis._nulling();\n\t\t},\n\n\t\t_nulling: function() {\n\t\t\trootEl =\n\t\t\tdragEl =\n\t\t\tparentEl =\n\t\t\tghostEl =\n\t\t\tnextEl =\n\t\t\tcloneEl =\n\t\t\tlastDownEl =\n\n\t\t\tscrollEl =\n\t\t\tscrollParentEl =\n\t\t\tautoScrolls.length =\n\n\t\t\tpointerElemChangedInterval =\n\t\t\tlastPointerElemX =\n\t\t\tlastPointerElemY =\n\n\t\t\ttapEvt =\n\t\t\ttouchEvt =\n\n\t\t\tmoved =\n\t\t\tnewIndex =\n\t\t\toldIndex =\n\n\t\t\tlastTarget =\n\t\t\tlastDirection =\n\n\t\t\tforRepaintDummy =\n\t\t\trealDragElRect =\n\n\t\t\tputSortable =\n\t\t\tactiveGroup =\n\t\t\tSortable.active = null;\n\n\t\t\tsavedInputChecked.forEach(function (el) {\n\t\t\t\tel.checked = true;\n\t\t\t});\n\n\t\t\tsavedInputChecked.length = 0;\n\t\t},\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tswitch (evt.type) {\n\t\t\t\tcase 'drop':\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis._onDrop(evt);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'dragenter':\n\t\t\t\tcase 'dragover':\n\t\t\t\t\tif (dragEl) {\n\t\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'selectstart':\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el, false)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl, false)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el, false);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\t\t\t_off(el, 'pointerdown', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\tthis._onDrop();\n\n\t\t\tsortables.splice(sortables.indexOf(this.el), 1);\n\n\t\t\tthis.el = el = null;\n\t\t},\n\n\t\t_hideClone: function() {\n\t\t\tif (!cloneEl.cloneHidden) {\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\tcloneEl.cloneHidden = true;\n\t\t\t\tif (cloneEl.parentNode && this.options.removeCloneOnHide) {\n\t\t\t\t\tcloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_showClone: function(putSortable) {\n\t\t\tif (putSortable.lastPutMode !== 'clone') {\n\t\t\t\tthis._hideClone();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (cloneEl.cloneHidden) {\n\t\t\t\t// show clone at dragEl or original position\n\t\t\t\tif (rootEl.contains(dragEl) && !this.options.group.revertClone) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t} else if (nextEl) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, nextEl);\n\t\t\t\t} else {\n\t\t\t\t\trootEl.appendChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (this.options.group.revertClone) {\n\t\t\t\t\tthis._animate(dragEl, cloneEl);\n\t\t\t\t}\n\t\t\t\t_css(cloneEl, 'display', '');\n\t\t\t\tcloneEl.cloneHidden = false;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\n\t\t\tdo {\n\t\t\t\tif (\n\t\t\t\t\tselector != null &&\n\t\t\t\t\t(\n\t\t\t\t\t\tselector[0] === '>' && el.parentNode === ctx && _matches(el, selector.substring(1)) ||\n\t\t\t\t\t\t_matches(el, selector)\n\t\t\t\t\t) ||\n\t\t\t\t\tincludeCTX && el === ctx\n\t\t\t\t) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\n\t\t\t\tif (el === ctx) break;\n\t\t\t\t/* jshint boss:true */\n\t\t\t} while (el = _getParentOrHost(el));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _getParentOrHost(el) {\n\t\treturn (el.host && el !== document && el.host.nodeType)\n\t\t\t? el.host\n\t\t\t: el.parentNode;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.cancelable && evt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el && name) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style) && prop.indexOf('webkit') === -1) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _matrix(el) {\n\t\tvar appliedTransforms = '';\n\t\tdo {\n\t\t\tvar transform = _css(el, 'transform');\n\n\t\t\tif (transform && transform !== 'none') {\n\t\t\t\tappliedTransforms = transform + ' ' + appliedTransforms;\n\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t} while (el = el.parentNode);\n\n\t\tif (window.DOMMatrix) {\n\t\t\treturn new DOMMatrix(appliedTransforms);\n\t\t} else if (window.WebKitCSSMatrix) {\n\t\t\treturn new WebKitCSSMatrix(appliedTransforms);\n\t\t} else if (window.CSSMatrix) {\n\t\t\treturn new CSSMatrix(appliedTransforms);\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(sortable, rootEl, name, targetEl, toEl, fromEl, startIndex, newIndex, originalEvt) {\n\t\tsortable = (sortable || rootEl[expando]);\n\t\tvar evt,\n\t\t\toptions = sortable.options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent(name, {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, true);\n\t\t}\n\n\t\tevt.to = toEl || rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\tevt.originalEvent = originalEvt;\n\n\t\tif (rootEl) {\n\t\t\trootEl.dispatchEvent(evt);\n\t        }\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(sortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvt, willInsertAfter) {\n\t\tvar evt,\n\t\t\tsortable = fromEl[expando],\n\t\t\tonMoveFn = sortable.options.onMove,\n\t\t\tretVal;\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent('move', {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent('move', true, true);\n\t\t}\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || _getRect(toEl);\n\t\tevt.willInsertAfter = willInsertAfter;\n\n\t\tevt.originalEvent = originalEvt;\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(sortable, evt, originalEvt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\t/**\n\t * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n\t * and non-draggable elements\n\t * @param  {HTMLElement} el       The parent element\n\t * @param  {Number} childNum      The index of the child\n\t * @param  {Object} options       Parent Sortable's options\n\t * @return {HTMLElement}          The child at index childNum, or null if not found\n\t */\n\tfunction _getChild(el, childNum, options) {\n\t\tvar currentChild = 0,\n\t\t\ti = 0,\n\t\t\tchildren = el.children;\n\n\t\twhile (i < children.length) {\n\t\t\tif (\n\t\t\t\tchildren[i].style.display !== 'none' &&\n\t\t\t\tchildren[i] !== ghostEl &&\n\t\t\t\tchildren[i] !== dragEl &&\n\t\t\t\t_closest(children[i], options.draggable, el, false)\n\t\t\t) {\n\t\t\t\tif (currentChild === childNum) {\n\t\t\t\t\treturn children[i];\n\t\t\t\t}\n\t\t\t\tcurrentChild++;\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n\t * @param  {HTMLElement} el       Parent element\n\t * @return {HTMLElement}          The last child, ignoring ghostEl\n\t */\n\tfunction _lastChild(el) {\n\t\tvar last = el.lastElementChild;\n\n\t\twhile (last === ghostEl || last.style.display === 'none') {\n\t\t\tlast = last.previousElementSibling;\n\n\t\t\tif (!last) break;\n\t\t}\n\n\t\treturn last || null;\n\t}\n\n\tfunction _ghostIsLast(evt, axis, el) {\n\t\tvar elRect = _getRect(_lastChild(el)),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\tmouseOnOppAxis = axis === 'vertical' ? evt.clientX : evt.clientY,\n\t\t\ttargetS2 = axis === 'vertical' ? elRect.bottom : elRect.right,\n\t\t\ttargetS1Opp = axis === 'vertical' ? elRect.left : elRect.top,\n\t\t\ttargetS2Opp = axis === 'vertical' ? elRect.right : elRect.bottom,\n\t\t\tspacer = 10;\n\n\t\treturn (\n\t\t\taxis === 'vertical' ?\n\t\t\t\t(mouseOnOppAxis > targetS2Opp + spacer || mouseOnOppAxis <= targetS2Opp && mouseOnAxis > targetS2 && mouseOnOppAxis >= targetS1Opp) :\n\t\t\t\t(mouseOnAxis > targetS2 && mouseOnOppAxis > targetS1Opp || mouseOnAxis <= targetS2 && mouseOnOppAxis > targetS2Opp + spacer)\n\t\t);\n\t}\n\n\tfunction _getSwapDirection(evt, target, axis, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n\t\tvar targetRect = _getRect(target),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\ttargetLength = axis === 'vertical' ? targetRect.height : targetRect.width,\n\t\t\ttargetS1 = axis === 'vertical' ? targetRect.top : targetRect.left,\n\t\t\ttargetS2 = axis === 'vertical' ? targetRect.bottom : targetRect.right,\n\t\t\tdragRect = _getRect(dragEl),\n\t\t\tinvert = false;\n\n\n\t\tif (!invertSwap) {\n\t\t\t// Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n\t\t\tif (isLastTarget && targetMoveDistance < targetLength * swapThreshold) { // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n\t\t\t\t// check if past first invert threshold on side opposite of lastDirection\n\t\t\t\tif (!pastFirstInvertThresh &&\n\t\t\t\t\t(lastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\t// past first invert threshold, do not restrict inverted threshold to dragEl shadow\n\t\t\t\t\tpastFirstInvertThresh = true;\n\t\t\t\t}\n\n\t\t\t\tif (!pastFirstInvertThresh) {\n\t\t\t\t\tvar dragS1 = axis === 'vertical' ? dragRect.top : dragRect.left,\n\t\t\t\t\t\tdragS2 = axis === 'vertical' ? dragRect.bottom : dragRect.right;\n\t\t\t\t\t// dragEl shadow (target move distance shadow)\n\t\t\t\t\tif (\n\t\t\t\t\t\tlastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS2 - targetMoveDistance\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn lastDirection * -1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tinvert = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Regular\n\t\t\t\tif (\n\t\t\t\t\tmouseOnAxis > targetS1 + (targetLength * (1 - swapThreshold) / 2) &&\n\t\t\t\t\tmouseOnAxis < targetS2 - (targetLength * (1 - swapThreshold) / 2)\n\t\t\t\t) {\n\t\t\t\t\treturn ((mouseOnAxis > targetS1 + targetLength / 2) ? -1 : 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinvert = invert || invertSwap;\n\n\t\tif (invert) {\n\t\t\t// Invert of regular\n\t\t\tif (\n\t\t\t\tmouseOnAxis < targetS1 + (targetLength * invertedSwapThreshold / 2) ||\n\t\t\t\tmouseOnAxis > targetS2 - (targetLength * invertedSwapThreshold / 2)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn ((mouseOnAxis > targetS1 + targetLength / 2) ? 1 : -1);\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Gets the direction dragEl must be swapped relative to target in order to make it\n\t * seem that dragEl has been \"inserted\" into that element's position\n\t * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\n\t * @param  {Object} options           options of the parent sortable\n\t * @return {Number}                   Direction dragEl must be swapped\n\t */\n\tfunction _getInsertDirection(target, options) {\n\t\tvar dragElIndex = _index(dragEl, options.draggable),\n\t\t\ttargetIndex = _index(target, options.draggable);\n\n\t\tif (dragElIndex < targetIndex) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent for a selected set of\n\t * elements\n\t * @param  {HTMLElement} el\n\t * @param  {selector} selector\n\t * @return {number}\n\t */\n\tfunction _index(el, selector) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && el !== cloneEl) {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _matches(/**HTMLElement*/el, /**String*/selector) {\n\t\tif (el) {\n\t\t\ttry {\n\t\t\t\tif (el.matches) {\n\t\t\t\t\treturn el.matches(selector);\n\t\t\t\t} else if (el.msMatchesSelector) {\n\t\t\t\t\treturn el.msMatchesSelector(selector);\n\t\t\t\t} else if (el.webkitMatchesSelector) {\n\t\t\t\t\treturn el.webkitMatchesSelector(selector);\n\t\t\t\t}\n\t\t\t} catch(_) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tvar _throttleTimeout;\n\tfunction _throttle(callback, ms) {\n\t\treturn function () {\n\t\t\tif (!_throttleTimeout) {\n\t\t\t\tvar args = arguments,\n\t\t\t\t\t_this = this;\n\n\t\t\t\t_throttleTimeout = setTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\t_throttleTimeout = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _cancelThrottle() {\n\t\tclearTimeout(_throttleTimeout);\n\t\t_throttleTimeout = void 0;\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\tfunction _clone(el) {\n\t\tif (Polymer && Polymer.dom) {\n\t\t\treturn Polymer.dom(el).cloneNode(true);\n\t\t}\n\t\telse if ($) {\n\t\t\treturn $(el).clone(true)[0];\n\t\t}\n\t\telse {\n\t\t\treturn el.cloneNode(true);\n\t\t}\n\t}\n\n\tfunction _saveInputCheckedState(root) {\n\t\tsavedInputChecked.length = 0;\n\n\t\tvar inputs = root.getElementsByTagName('input');\n\t\tvar idx = inputs.length;\n\n\t\twhile (idx--) {\n\t\t\tvar el = inputs[idx];\n\t\t\tel.checked && savedInputChecked.push(el);\n\t\t}\n\t}\n\n\tfunction _nextTick(fn) {\n\t\treturn setTimeout(fn, 0);\n\t}\n\n\tfunction _cancelNextTick(id) {\n\t\treturn clearTimeout(id);\n\t}\n\n\n\t/**\n\t * Returns the \"bounding client rect\" of given element\n\t * @param  {HTMLElement} el                The element whose boundingClientRect is wanted\n\t * @param  {[HTMLElement]} container       the parent the element will be placed in\n\t * @param  {[Boolean]} adjustForTransform  Whether the rect should compensate for parent's transform\n\t * (used for fixed positioning on el)\n\t * @return {Object}                        The boundingClientRect of el\n\t */\n\tfunction _getRect(el, container, adjustForTransform) {\n\t\tif (!el.getBoundingClientRect && el !== win) return;\n\n\t\tvar elRect,\n\t\t\ttop,\n\t\t\tleft,\n\t\t\tbottom,\n\t\t\tright,\n\t\t\theight,\n\t\t\twidth;\n\n\t\tif (el !== win) {\n\t\t\telRect = el.getBoundingClientRect();\n\t\t\ttop = elRect.top;\n\t\t\tleft = elRect.left;\n\t\t\tbottom = elRect.bottom;\n\t\t\tright = elRect.right;\n\t\t\theight = elRect.height;\n\t\t\twidth = elRect.width;\n\t\t} else {\n\t\t\ttop = 0;\n\t\t\tleft = 0;\n\t\t\tbottom = window.innerHeight;\n\t\t\tright = window.innerWidth;\n\t\t\theight = window.innerHeight;\n\t\t\twidth = window.innerWidth;\n\t\t}\n\n\t\tif (adjustForTransform && el !== win) {\n\t\t\t// Adjust for translate()\n\t\t\tcontainer = container || el.parentNode;\n\n\t\t\t// solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n\t\t\t// Not needed on <= IE11\n\t\t\tif (!IE11OrLess) {\n\t\t\t\tdo {\n\t\t\t\t\tif (container && container.getBoundingClientRect && _css(container, 'transform') !== 'none') {\n\t\t\t\t\t\tvar containerRect = container.getBoundingClientRect();\n\n\t\t\t\t\t\t// Set relative to edges of padding box of container\n\t\t\t\t\t\ttop -= containerRect.top + parseInt(_css(container, 'border-top-width'));\n\t\t\t\t\t\tleft -= containerRect.left + parseInt(_css(container, 'border-left-width'));\n\t\t\t\t\t\tbottom = top + elRect.height;\n\t\t\t\t\t\tright = left + elRect.width;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t} while (container = container.parentNode);\n\t\t\t}\n\n\t\t\t// Adjust for scale()\n\t\t\tvar matrix = _matrix(el),\n\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\tif (matrix) {\n\t\t\t\ttop /= scaleY;\n\t\t\t\tleft /= scaleX;\n\n\t\t\t\twidth /= scaleX;\n\t\t\t\theight /= scaleY;\n\n\t\t\t\tbottom = top + height;\n\t\t\t\tright = left + width;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tleft: left,\n\t\t\tbottom: bottom,\n\t\t\tright: right,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t}\n\n\n\t/**\n\t * Checks if a side of an element is scrolled past a side of it's parents\n\t * @param  {HTMLElement}  el       The element who's side being scrolled out of view is in question\n\t * @param  {String}       side     Side of the element in question ('top', 'left', 'right', 'bottom')\n\t * @return {Boolean}               Whether the element is overflowing the viewport on the given side of it's parent\n\t */\n\tfunction _isScrolledPast(el, side) {\n\t\tvar parent = _getParentAutoScrollElement(parent, true),\n\t\t\telSide = _getRect(el)[side];\n\n\t\t/* jshint boss:true */\n\t\twhile (parent) {\n\t\t\tvar parentSide = _getRect(parent)[side],\n\t\t\t\tvisible;\n\n\t\t\tif (side === 'top' || side === 'left') {\n\t\t\t\tvisible = elSide >= parentSide;\n\t\t\t} else {\n\t\t\t\tvisible = elSide <= parentSide;\n\t\t\t}\n\n\t\t\tif (!visible) return true;\n\n\t\t\tif (parent === win) break;\n\n\t\t\tparent = _getParentAutoScrollElement(parent, false);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t// Fixed #973:\n\t_on(document, 'touchmove', function(evt) {\n\t\tif ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n\t\t\tevt.preventDefault();\n\t\t}\n\t});\n\n\n\t// Export utils\n\tSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el, false);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tclone: _clone,\n\t\tindex: _index,\n\t\tnextTick: _nextTick,\n\t\tcancelNextTick: _cancelNextTick,\n\t\tdetectDirection: _detectDirection,\n\t\tgetChild: _getChild\n\t};\n\n\n\t/**\n\t * Create sortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tSortable.create = function (el, options) {\n\t\treturn new Sortable(el, options);\n\t};\n\n\n\t// Export\n\tSortable.version = '1.8.3';\n\treturn Sortable;\n});\n","'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar Sortable = _interopDefault(require('sortablejs'));\n\nfunction $(expr, con) {\n    return typeof expr === 'string' ?\n        (con || document).querySelector(expr) :\n        expr || null;\n}\n\n$.each = (expr, con) => {\n    return typeof expr === 'string' ?\n        Array.from((con || document).querySelectorAll(expr)) :\n        expr || null;\n};\n\n$.create = (tag, o) => {\n    let element = document.createElement(tag);\n\n    for (let i in o) {\n        let val = o[i];\n\n        if (i === 'inside') {\n            $(val).appendChild(element);\n        } else\n        if (i === 'around') {\n            let ref = $(val);\n            ref.parentNode.insertBefore(element, ref);\n            element.appendChild(ref);\n        } else\n        if (i === 'styles') {\n            if (typeof val === 'object') {\n                Object.keys(val).map(prop => {\n                    element.style[prop] = val[prop];\n                });\n            }\n        } else\n        if (i in element) {\n            element[i] = val;\n        } else {\n            element.setAttribute(i, val);\n        }\n    }\n\n    return element;\n};\n\n$.on = (element, event, selector, callback) => {\n    if (!callback) {\n        callback = selector;\n        $.bind(element, event, callback);\n    } else {\n        $.delegate(element, event, selector, callback);\n    }\n};\n\n$.off = (element, event, handler) => {\n    element.removeEventListener(event, handler);\n};\n\n$.bind = (element, event, callback) => {\n    event.split(/\\s+/).forEach(function (event) {\n        element.addEventListener(event, callback);\n    });\n};\n\n$.delegate = (element, event, selector, callback) => {\n    element.addEventListener(event, function (e) {\n        const delegatedTarget = e.target.closest(selector);\n        if (delegatedTarget) {\n            e.delegatedTarget = delegatedTarget;\n            callback.call(this, e, delegatedTarget);\n        }\n    });\n};\n\n$.unbind = (element, o) => {\n    if (element) {\n        for (let event in o) {\n            let callback = o[event];\n\n            event.split(/\\s+/).forEach(function (event) {\n                element.removeEventListener(event, callback);\n            });\n        }\n    }\n};\n\n$.fire = (target, type, properties) => {\n    let evt = document.createEvent('HTMLEvents');\n\n    evt.initEvent(type, true, true);\n\n    for (let j in properties) {\n        evt[j] = properties[j];\n    }\n\n    return target.dispatchEvent(evt);\n};\n\n$.data = (element, attrs) => { // eslint-disable-line\n    if (!attrs) {\n        return element.dataset;\n    }\n\n    for (const attr in attrs) {\n        element.dataset[attr] = attrs[attr];\n    }\n};\n\n$.style = (elements, styleMap) => { // eslint-disable-line\n\n    if (typeof styleMap === 'string') {\n        return $.getStyle(elements, styleMap);\n    }\n\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    elements.map(element => {\n        for (const prop in styleMap) {\n            element.style[prop] = styleMap[prop];\n        }\n    });\n};\n\n$.removeStyle = (elements, styleProps) => {\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    if (!Array.isArray(styleProps)) {\n        styleProps = [styleProps];\n    }\n\n    elements.map(element => {\n        for (const prop of styleProps) {\n            element.style[prop] = '';\n        }\n    });\n};\n\n$.getStyle = (element, prop) => {\n    if (!prop) {\n        return getComputedStyle(element);\n    }\n\n    let val = getComputedStyle(element)[prop];\n\n    if (['width', 'height'].includes(prop)) {\n        val = parseFloat(val);\n    }\n\n    return val;\n};\n\n$.closest = (selector, element) => {\n    if (!element) return null;\n\n    if (element.matches(selector)) {\n        return element;\n    }\n\n    return $.closest(selector, element.parentNode);\n};\n\n$.inViewport = (el, parentEl) => {\n    const {\n        top,\n        left,\n        bottom,\n        right\n    } = el.getBoundingClientRect();\n    const {\n        top: pTop,\n        left: pLeft,\n        bottom: pBottom,\n        right: pRight\n    } = parentEl.getBoundingClientRect();\n\n    return top >= pTop && left >= pLeft && bottom <= pBottom && right <= pRight;\n};\n\n$.scrollTop = function scrollTop(element, pixels) {\n    requestAnimationFrame(() => {\n        element.scrollTop = pixels;\n    });\n};\n\n$.scrollbarSize = function scrollbarSize() {\n    if (!$.scrollBarSizeValue) {\n        $.scrollBarSizeValue = getScrollBarSize();\n    }\n    return $.scrollBarSizeValue;\n};\n\nfunction getScrollBarSize() {\n    // assume scrollbar width and height would be the same\n\n    // Create the measurement node\n    const scrollDiv = document.createElement('div');\n    $.style(scrollDiv, {\n        width: '100px',\n        height: '100px',\n        overflow: 'scroll',\n        position: 'absolute',\n        top: '-9999px'\n    });\n    document.body.appendChild(scrollDiv);\n\n    // Get the scrollbar width\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n\n    // Delete the DIV\n    document.body.removeChild(scrollDiv);\n\n    return scrollbarWidth;\n}\n\n$.hasVerticalOverflow = function (element) {\n    return element.scrollHeight > element.offsetHeight + 10;\n};\n\n$.hasHorizontalOverflow = function (element) {\n    return element.scrollWidth > element.offsetWidth + 10;\n};\n\n$.measureTextWidth = function (text) {\n    const div = document.createElement('div');\n    div.style.position = 'absolute';\n    div.style.visibility = 'hidden';\n    div.style.height = 'auto';\n    div.style.width = 'auto';\n    div.style.whiteSpace = 'nowrap';\n    div.innerText = text;\n    document.body.appendChild(div);\n    return div.clientWidth + 1;\n};\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nvar isObject_1 = isObject;\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by rollup-plugin-commonjs');\n}\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\nvar _freeGlobal = freeGlobal;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = _freeGlobal || freeSelf || Function('return this')();\n\nvar _root = root;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return _root.Date.now();\n};\n\nvar now_1 = now;\n\n/** Built-in value references. */\nvar Symbol = _root.Symbol;\n\nvar _Symbol = Symbol;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nvar _getRawTag = getRawTag;\n\n/** Used for built-in method references. */\nvar objectProto$1 = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString$1 = objectProto$1.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString$1.call(value);\n}\n\nvar _objectToString = objectToString;\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag$1 && symToStringTag$1 in Object(value))\n    ? _getRawTag(value)\n    : _objectToString(value);\n}\n\nvar _baseGetTag = baseGetTag;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nvar isObjectLike_1 = isObjectLike;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike_1(value) && _baseGetTag(value) == symbolTag);\n}\n\nvar isSymbol_1 = isSymbol;\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol_1(value)) {\n    return NAN;\n  }\n  if (isObject_1(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject_1(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nvar toNumber_1 = toNumber;\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber_1(wait) || 0;\n  if (isObject_1(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber_1(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now_1();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now_1());\n  }\n\n  function debounced() {\n    var time = now_1(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nvar debounce_1 = debounce;\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT$1 = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT$1);\n  }\n  if (isObject_1(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce_1(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nvar throttle_1 = throttle;\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject_1(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = _baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nvar isFunction_1 = isFunction;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = _root['__core-js_shared__'];\n\nvar _coreJsData = coreJsData;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(_coreJsData && _coreJsData.keys && _coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nvar _isMasked = isMasked;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nvar _toSource = toSource;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto$1 = Function.prototype,\n    objectProto$2 = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString$1 = funcProto$1.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$1 = objectProto$2.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject_1(value) || _isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction_1(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(_toSource(value));\n}\n\nvar _baseIsNative = baseIsNative;\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nvar _getValue = getValue;\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = _getValue(object, key);\n  return _baseIsNative(value) ? value : undefined;\n}\n\nvar _getNative = getNative;\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = _getNative(Object, 'create');\n\nvar _nativeCreate = nativeCreate;\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = _nativeCreate ? _nativeCreate(null) : {};\n  this.size = 0;\n}\n\nvar _hashClear = hashClear;\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nvar _hashDelete = hashDelete;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto$3 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$2 = objectProto$3.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (_nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty$2.call(data, key) ? data[key] : undefined;\n}\n\nvar _hashGet = hashGet;\n\n/** Used for built-in method references. */\nvar objectProto$4 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$3 = objectProto$4.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return _nativeCreate ? (data[key] !== undefined) : hasOwnProperty$3.call(data, key);\n}\n\nvar _hashHas = hashHas;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$1 = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (_nativeCreate && value === undefined) ? HASH_UNDEFINED$1 : value;\n  return this;\n}\n\nvar _hashSet = hashSet;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = _hashClear;\nHash.prototype['delete'] = _hashDelete;\nHash.prototype.get = _hashGet;\nHash.prototype.has = _hashHas;\nHash.prototype.set = _hashSet;\n\nvar _Hash = Hash;\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nvar _listCacheClear = listCacheClear;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nvar eq_1 = eq;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq_1(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nvar _assocIndexOf = assocIndexOf;\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nvar _listCacheDelete = listCacheDelete;\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nvar _listCacheGet = listCacheGet;\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return _assocIndexOf(this.__data__, key) > -1;\n}\n\nvar _listCacheHas = listCacheHas;\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nvar _listCacheSet = listCacheSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = _listCacheClear;\nListCache.prototype['delete'] = _listCacheDelete;\nListCache.prototype.get = _listCacheGet;\nListCache.prototype.has = _listCacheHas;\nListCache.prototype.set = _listCacheSet;\n\nvar _ListCache = ListCache;\n\n/* Built-in method references that are verified to be native. */\nvar Map = _getNative(_root, 'Map');\n\nvar _Map = Map;\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new _Hash,\n    'map': new (_Map || _ListCache),\n    'string': new _Hash\n  };\n}\n\nvar _mapCacheClear = mapCacheClear;\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nvar _isKeyable = isKeyable;\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return _isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nvar _getMapData = getMapData;\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = _getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nvar _mapCacheDelete = mapCacheDelete;\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return _getMapData(this, key).get(key);\n}\n\nvar _mapCacheGet = mapCacheGet;\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return _getMapData(this, key).has(key);\n}\n\nvar _mapCacheHas = mapCacheHas;\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = _getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nvar _mapCacheSet = mapCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = _mapCacheClear;\nMapCache.prototype['delete'] = _mapCacheDelete;\nMapCache.prototype.get = _mapCacheGet;\nMapCache.prototype.has = _mapCacheHas;\nMapCache.prototype.set = _mapCacheSet;\n\nvar _MapCache = MapCache;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$2 = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED$2);\n  return this;\n}\n\nvar _setCacheAdd = setCacheAdd;\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nvar _setCacheHas = setCacheHas;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new _MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = _setCacheAdd;\nSetCache.prototype.has = _setCacheHas;\n\nvar _SetCache = SetCache;\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nvar _baseFindIndex = baseFindIndex;\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nvar _baseIsNaN = baseIsNaN;\n\n/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nvar _strictIndexOf = strictIndexOf;\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? _strictIndexOf(array, value, fromIndex)\n    : _baseFindIndex(array, _baseIsNaN, fromIndex);\n}\n\nvar _baseIndexOf = baseIndexOf;\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && _baseIndexOf(array, value, 0) > -1;\n}\n\nvar _arrayIncludes = arrayIncludes;\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nvar _arrayIncludesWith = arrayIncludesWith;\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nvar _cacheHas = cacheHas;\n\n/* Built-in method references that are verified to be native. */\nvar Set = _getNative(_root, 'Set');\n\nvar _Set = Set;\n\n/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nvar noop_1 = noop;\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nvar _setToArray = setToArray;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(_Set && (1 / _setToArray(new _Set([,-0]))[1]) == INFINITY) ? noop_1 : function(values) {\n  return new _Set(values);\n};\n\nvar _createSet = createSet;\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = _arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = _arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : _createSet(array);\n    if (set) {\n      return _setToArray(set);\n    }\n    isCommon = false;\n    includes = _cacheHas;\n    seen = new _SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nvar _baseUniq = baseUniq;\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? _baseUniq(array) : [];\n}\n\nvar uniq_1 = uniq;\n\nfunction camelCaseToDash(str) {\n    return str.replace(/([A-Z])/g, (g) => `-${g[0].toLowerCase()}`);\n}\n\nfunction makeDataAttributeString(props) {\n    const keys = Object.keys(props);\n\n    return keys\n        .map((key) => {\n            const _key = camelCaseToDash(key);\n            const val = props[key];\n\n            if (val === undefined) return '';\n            return `data-${_key}=\"${val}\" `;\n        })\n        .join('')\n        .trim();\n}\n\nfunction copyTextToClipboard(text) {\n    // https://stackoverflow.com/a/30810322/5353542\n    var textArea = document.createElement('textarea');\n\n    //\n    // *** This styling is an extra step which is likely not required. ***\n    //\n    // Why is it here? To ensure:\n    // 1. the element is able to have focus and selection.\n    // 2. if element was to flash render it has minimal visual impact.\n    // 3. less flakyness with selection and copying which **might** occur if\n    //    the textarea element is not visible.\n    //\n    // The likelihood is the element won't even render, not even a flash,\n    // so some of these are just precautions. However in IE the element\n    // is visible whilst the popup box asking the user for permission for\n    // the web page to copy to the clipboard.\n    //\n\n    // Place in top-left corner of screen regardless of scroll position.\n    textArea.style.position = 'fixed';\n    textArea.style.top = 0;\n    textArea.style.left = 0;\n\n    // Ensure it has a small width and height. Setting to 1px / 1em\n    // doesn't work as this gives a negative w/h on some browsers.\n    textArea.style.width = '2em';\n    textArea.style.height = '2em';\n\n    // We don't need padding, reducing the size if it does flash render.\n    textArea.style.padding = 0;\n\n    // Clean up any borders.\n    textArea.style.border = 'none';\n    textArea.style.outline = 'none';\n    textArea.style.boxShadow = 'none';\n\n    // Avoid flash of white box if rendered for any reason.\n    textArea.style.background = 'transparent';\n\n    textArea.value = text;\n\n    document.body.appendChild(textArea);\n\n    textArea.select();\n\n    try {\n        document.execCommand('copy');\n    } catch (err) {\n        console.log('Oops, unable to copy');\n    }\n\n    document.body.removeChild(textArea);\n}\n\nfunction isNumeric(val) {\n    return !isNaN(val);\n}\n\nlet throttle$1 = throttle_1;\n\nlet debounce$1 = debounce_1;\n\nfunction nextTick(fn, context = null) {\n    return (...args) => {\n        return new Promise(resolve => {\n            const execute = () => {\n                const out = fn.apply(context, args);\n                resolve(out);\n            };\n            setTimeout(execute);\n        });\n    };\n}\nfunction linkProperties(target, source, properties) {\n    const props = properties.reduce((acc, prop) => {\n        acc[prop] = {\n            get() {\n                return source[prop];\n            }\n        };\n        return acc;\n    }, {});\n    Object.defineProperties(target, props);\n}\nfunction isSet(val) {\n    return val !== undefined || val !== null;\n}\n\nfunction notSet(val) {\n    return !isSet(val);\n}\n\nfunction isNumber(val) {\n    return !isNaN(val);\n}\n\nfunction ensureArray(val) {\n    if (!Array.isArray(val)) {\n        return [val];\n    }\n    return val;\n}\n\nfunction uniq$1(arr) {\n    return uniq_1(arr);\n}\n\nfunction numberSortAsc(a, b) {\n    return a - b;\n}\nfunction stripHTML(html) {\n    return html.replace(/<[^>]*>/g, '');\n}\nfunction format(str, args) {\n    if (!str) return str;\n\n    Object.keys(args).forEach(arg => {\n        let regex = new RegExp(`{(${arg})}`, 'g');\n        str = str.replace(regex, args[arg]);\n    });\n\n    return str;\n}\nfunction escapeHTML(txt) {\n    if (!txt) return '';\n    let escapeHtmlMapping = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        '/': '&#x2F;',\n        '`': '&#x60;',\n        '=': '&#x3D;',\n    };\n\n    return String(txt).replace(/[&<>\"'`=/]/g, (char) => escapeHtmlMapping[char] || char);\n}\n\nclass DataManager {\n    constructor(options) {\n        this.options = options;\n        this.sortRows = nextTick(this.sortRows, this);\n        this.switchColumn = nextTick(this.switchColumn, this);\n        this.removeColumn = nextTick(this.removeColumn, this);\n        this.options.filterRows = nextTick(this.options.filterRows, this);\n    }\n\n    init(data, columns) {\n        if (!data) {\n            data = this.options.data;\n        }\n        if (columns) {\n            this.options.columns = columns;\n        }\n\n        this.data = data;\n\n        this.rowCount = 0;\n        this.columns = [];\n        this.rows = [];\n\n        this.prepareColumns();\n        this.prepareRows();\n        this.prepareTreeRows();\n        this.prepareRowView();\n        this.prepareNumericColumns();\n    }\n\n    // computed property\n    get currentSort() {\n        const col = this.columns.find(col => col.sortOrder !== 'none');\n        return col || {\n            colIndex: -1,\n            sortOrder: 'none'\n        };\n    }\n\n    prepareColumns() {\n        this.columns = [];\n        this.validateColumns();\n        this.prepareDefaultColumns();\n        this.prepareHeader();\n    }\n\n    prepareDefaultColumns() {\n        if (this.options.checkboxColumn && !this.hasColumnById('_checkbox')) {\n            const cell = {\n                id: '_checkbox',\n                content: this.getCheckboxHTML(),\n                editable: false,\n                resizable: false,\n                sortable: false,\n                focusable: false,\n                dropdown: false,\n                width: 32\n            };\n            this.columns.push(cell);\n        }\n\n        if (this.options.serialNoColumn && !this.hasColumnById('_rowIndex')) {\n            let cell = {\n                id: '_rowIndex',\n                content: '',\n                align: 'center',\n                editable: false,\n                resizable: false,\n                focusable: false,\n                dropdown: false\n            };\n\n            this.columns.push(cell);\n        }\n    }\n\n    prepareHeader() {\n        let columns = this.columns.concat(this.options.columns);\n        const baseCell = {\n            isHeader: 1,\n            editable: true,\n            sortable: true,\n            resizable: true,\n            focusable: true,\n            dropdown: true,\n            width: null,\n            format: (value) => {\n                if (value === null || value === undefined) {\n                    return '';\n                }\n                return value + '';\n            }\n        };\n\n        this.columns = columns\n            .map((cell, i) => this.prepareCell(cell, i))\n            .map(col => Object.assign({}, baseCell, col))\n            .map(col => {\n                col.content = col.content || col.name || '';\n                col.id = col.id || col.content;\n                return col;\n            });\n    }\n\n    prepareCell(content, i) {\n        const cell = {\n            content: '',\n            sortOrder: 'none',\n            colIndex: i,\n            column: this.columns[i]\n        };\n\n        if (content !== null && typeof content === 'object') {\n            // passed as column/header\n            Object.assign(cell, content);\n        } else {\n            cell.content = content;\n        }\n\n        return cell;\n    }\n\n    prepareNumericColumns() {\n        const row0 = this.getRow(0);\n        if (!row0) return;\n        this.columns = this.columns.map((column, i) => {\n\n            const cellValue = row0[i].content;\n            if (!column.align && isNumeric(cellValue)) {\n                column.align = 'right';\n            }\n\n            return column;\n        });\n    }\n\n    prepareRows() {\n        this.validateData(this.data);\n\n        this.rows = this.data.map((d, i) => {\n            const index = this._getNextRowCount();\n\n            let row = [];\n            let meta = {\n                rowIndex: index\n            };\n\n            if (Array.isArray(d)) {\n                // row is an array\n                if (this.options.checkboxColumn) {\n                    row.push(this.getCheckboxHTML());\n                }\n                if (this.options.serialNoColumn) {\n                    row.push((index + 1) + '');\n                }\n                row = row.concat(d);\n\n                while (row.length < this.columns.length) {\n                    row.push('');\n                }\n\n            } else {\n                // row is an object\n                for (let col of this.columns) {\n                    if (col.id === '_checkbox') {\n                        row.push(this.getCheckboxHTML());\n                    } else if (col.id === '_rowIndex') {\n                        row.push((index + 1) + '');\n                    } else {\n                        row.push(d[col.id]);\n                    }\n                }\n\n                meta.indent = d.indent || 0;\n            }\n\n            return this.prepareRow(row, meta);\n        });\n    }\n\n    prepareTreeRows() {\n        this.rows.forEach((row, i) => {\n            if (isNumber(row.meta.indent)) {\n                // if (i === 36) debugger;\n                const nextRow = this.getRow(i + 1);\n                row.meta.isLeaf = !nextRow ||\n                    notSet(nextRow.meta.indent) ||\n                    nextRow.meta.indent <= row.meta.indent;\n                row.meta.isTreeNodeClose = false;\n            }\n        });\n    }\n\n    prepareRowView() {\n        // This is order in which rows will be rendered in the table.\n        // When sorting happens, only this.rowViewOrder will change\n        // and not the original this.rows\n        this.rowViewOrder = this.rows.map(row => row.meta.rowIndex);\n    }\n\n    prepareRow(row, meta) {\n        const baseRowCell = {\n            rowIndex: meta.rowIndex,\n            indent: meta.indent\n        };\n\n        row = row\n            .map((cell, i) => this.prepareCell(cell, i))\n            .map(cell => Object.assign({}, baseRowCell, cell));\n\n        // monkey patched in array object\n        row.meta = meta;\n        return row;\n    }\n\n    validateColumns() {\n        const columns = this.options.columns;\n        if (!Array.isArray(columns)) {\n            throw new DataError('`columns` must be an array');\n        }\n\n        columns.forEach((column, i) => {\n            if (typeof column !== 'string' && typeof column !== 'object') {\n                throw new DataError(`column \"${i}\" must be a string or an object`);\n            }\n        });\n    }\n\n    validateData(data) {\n        if (Array.isArray(data) &&\n            (data.length === 0 || Array.isArray(data[0]) || typeof data[0] === 'object')) {\n            return true;\n        }\n        throw new DataError('`data` must be an array of arrays or objects');\n    }\n\n    appendRows(rows) {\n        this.validateData(rows);\n\n        this.rows.push(...this.prepareRows(rows));\n    }\n\n    sortRows(colIndex, sortOrder = 'none') {\n        colIndex = +colIndex;\n\n        // reset sortOrder and update for colIndex\n        this.getColumns()\n            .map(col => {\n                if (col.colIndex === colIndex) {\n                    col.sortOrder = sortOrder;\n                } else {\n                    col.sortOrder = 'none';\n                }\n            });\n\n        this._sortRows(colIndex, sortOrder);\n    }\n\n    _sortRows(colIndex, sortOrder) {\n\n        if (this.currentSort.colIndex === colIndex) {\n            // reverse the array if only sortOrder changed\n            if (\n                (this.currentSort.sortOrder === 'asc' && sortOrder === 'desc') ||\n                (this.currentSort.sortOrder === 'desc' && sortOrder === 'asc')\n            ) {\n                this.reverseArray(this.rowViewOrder);\n                this.currentSort.sortOrder = sortOrder;\n                return;\n            }\n        }\n\n        this.rowViewOrder.sort((a, b) => {\n            const aIndex = a;\n            const bIndex = b;\n\n            let aContent = this.getCell(colIndex, a).content;\n            let bContent = this.getCell(colIndex, b).content;\n            aContent = aContent == null ? '' : aContent;\n            bContent = bContent == null ? '' : bContent;\n\n            if (sortOrder === 'none') {\n                return aIndex - bIndex;\n            } else if (sortOrder === 'asc') {\n                if (aContent < bContent) return -1;\n                if (aContent > bContent) return 1;\n                if (aContent === bContent) return 0;\n            } else if (sortOrder === 'desc') {\n                if (aContent < bContent) return 1;\n                if (aContent > bContent) return -1;\n                if (aContent === bContent) return 0;\n            }\n            return 0;\n        });\n\n        if (this.hasColumnById('_rowIndex')) {\n            // update row index\n            const srNoColIndex = this.getColumnIndexById('_rowIndex');\n            this.rows.forEach((row, index) => {\n                const viewIndex = this.rowViewOrder.indexOf(index);\n                const cell = row[srNoColIndex];\n                cell.content = (viewIndex + 1) + '';\n            });\n        }\n    }\n\n    reverseArray(array) {\n        let left = null;\n        let right = null;\n        let length = array.length;\n\n        for (left = 0, right = length - 1; left < right; left += 1, right -= 1) {\n            const temporary = array[left];\n\n            array[left] = array[right];\n            array[right] = temporary;\n        }\n    }\n\n    switchColumn(index1, index2) {\n        // update columns\n        const temp = this.columns[index1];\n        this.columns[index1] = this.columns[index2];\n        this.columns[index2] = temp;\n\n        this.columns[index1].colIndex = index1;\n        this.columns[index2].colIndex = index2;\n\n        // update rows\n        this.rows.forEach(row => {\n            const newCell1 = Object.assign({}, row[index1], {\n                colIndex: index2\n            });\n            const newCell2 = Object.assign({}, row[index2], {\n                colIndex: index1\n            });\n\n            row[index2] = newCell1;\n            row[index1] = newCell2;\n        });\n    }\n\n    removeColumn(index) {\n        index = +index;\n        const filter = cell => cell.colIndex !== index;\n        const map = (cell, i) => Object.assign({}, cell, {\n            colIndex: i\n        });\n        // update columns\n        this.columns = this.columns\n            .filter(filter)\n            .map(map);\n\n        // update rows\n        this.rows.forEach(row => {\n            // remove cell\n            row.splice(index, 1);\n            // update colIndex\n            row.forEach((cell, i) => {\n                cell.colIndex = i;\n            });\n        });\n    }\n\n    updateRow(row, rowIndex) {\n        if (row.length < this.columns.length) {\n            if (this.hasColumnById('_rowIndex')) {\n                const val = (rowIndex + 1) + '';\n\n                row = [val].concat(row);\n            }\n\n            if (this.hasColumnById('_checkbox')) {\n                const val = '<input type=\"checkbox\" />';\n\n                row = [val].concat(row);\n            }\n        }\n\n        const _row = this.prepareRow(row, {rowIndex});\n        const index = this.rows.findIndex(row => row[0].rowIndex === rowIndex);\n        this.rows[index] = _row;\n\n        return _row;\n    }\n\n    updateCell(colIndex, rowIndex, options) {\n        let cell;\n        if (typeof colIndex === 'object') {\n            // cell object was passed,\n            // must have colIndex, rowIndex\n            cell = colIndex;\n            colIndex = cell.colIndex;\n            rowIndex = cell.rowIndex;\n            // the object passed must be merged with original cell\n            options = cell;\n        }\n        cell = this.getCell(colIndex, rowIndex);\n\n        // mutate object directly\n        for (let key in options) {\n            const newVal = options[key];\n            if (newVal !== undefined) {\n                cell[key] = newVal;\n            }\n        }\n\n        return cell;\n    }\n\n    updateColumn(colIndex, keyValPairs) {\n        const column = this.getColumn(colIndex);\n        for (let key in keyValPairs) {\n            const newVal = keyValPairs[key];\n            if (newVal !== undefined) {\n                column[key] = newVal;\n            }\n        }\n        return column;\n    }\n\n    filterRows(filters) {\n        return this.options.filterRows(this.rows, filters)\n            .then(result => {\n                if (!result) {\n                    result = this.getAllRowIndices();\n                }\n\n                if (!result.then) {\n                    result = Promise.resolve(result);\n                }\n\n                return result.then(rowsToShow => {\n                    this._filteredRows = rowsToShow;\n\n                    const rowsToHide = this.getAllRowIndices()\n                        .filter(index => !rowsToShow.includes(index));\n\n                    return {\n                        rowsToHide,\n                        rowsToShow\n                    };\n                });\n            });\n    }\n\n    getFilteredRowIndices() {\n        return this._filteredRows || this.getAllRowIndices();\n    }\n\n    getAllRowIndices() {\n        return this.rows.map(row => row.meta.rowIndex);\n    }\n\n    getRowCount() {\n        return this.rowCount;\n    }\n\n    _getNextRowCount() {\n        const val = this.rowCount;\n\n        this.rowCount++;\n        return val;\n    }\n\n    getRows(start, end) {\n        return this.rows.slice(start, end);\n    }\n\n    getRowsForView(start, end) {\n        const rows = this.rowViewOrder.map(i => this.rows[i]);\n        return rows.slice(start, end);\n    }\n\n    getColumns(skipStandardColumns) {\n        let columns = this.columns;\n\n        if (skipStandardColumns) {\n            columns = columns.slice(this.getStandardColumnCount());\n        }\n\n        return columns;\n    }\n\n    getStandardColumnCount() {\n        if (this.options.checkboxColumn && this.options.serialNoColumn) {\n            return 2;\n        }\n\n        if (this.options.checkboxColumn || this.options.serialNoColumn) {\n            return 1;\n        }\n\n        return 0;\n    }\n\n    getColumnCount(skipStandardColumns) {\n        let val = this.columns.length;\n\n        if (skipStandardColumns) {\n            val = val - this.getStandardColumnCount();\n        }\n\n        return val;\n    }\n\n    getColumn(colIndex) {\n        colIndex = +colIndex;\n\n        if (colIndex < 0) {\n            // negative indexes\n            colIndex = this.columns.length + colIndex;\n        }\n\n        return this.columns.find(col => col.colIndex === colIndex);\n    }\n\n    getColumnById(id) {\n        return this.columns.find(col => col.id === id);\n    }\n\n    getRow(rowIndex) {\n        rowIndex = +rowIndex;\n        return this.rows[rowIndex];\n    }\n\n    getCell(colIndex, rowIndex) {\n        rowIndex = +rowIndex;\n        colIndex = +colIndex;\n        return this.getRow(rowIndex)[colIndex];\n    }\n\n    getChildren(parentRowIndex) {\n        parentRowIndex = +parentRowIndex;\n        const parentIndent = this.getRow(parentRowIndex).meta.indent;\n        const out = [];\n\n        for (let i = parentRowIndex + 1; i < this.rowCount; i++) {\n            const row = this.getRow(i);\n            if (isNaN(row.meta.indent)) continue;\n\n            if (row.meta.indent > parentIndent) {\n                out.push(i);\n            }\n\n            if (row.meta.indent === parentIndent) {\n                break;\n            }\n        }\n\n        return out;\n    }\n\n    getImmediateChildren(parentRowIndex) {\n        parentRowIndex = +parentRowIndex;\n        const parentIndent = this.getRow(parentRowIndex).meta.indent;\n        const out = [];\n        const childIndent = parentIndent + 1;\n\n        for (let i = parentRowIndex + 1; i < this.rowCount; i++) {\n            const row = this.getRow(i);\n            if (isNaN(row.meta.indent) || row.meta.indent > childIndent) continue;\n\n            if (row.meta.indent === childIndent) {\n                out.push(i);\n            }\n\n            if (row.meta.indent === parentIndent) {\n                break;\n            }\n        }\n\n        return out;\n    }\n\n    get() {\n        return {\n            columns: this.columns,\n            rows: this.rows\n        };\n    }\n\n    /**\n     * Returns the original data which was passed\n     * based on rowIndex\n     * @param {Number} rowIndex\n     * @returns Array|Object\n     * @memberof DataManager\n     */\n    getData(rowIndex) {\n        return this.data[rowIndex];\n    }\n\n    hasColumn(name) {\n        return Boolean(this.columns.find(col => col.content === name));\n    }\n\n    hasColumnById(id) {\n        return Boolean(this.columns.find(col => col.id === id));\n    }\n\n    getColumnIndex(name) {\n        return this.columns.findIndex(col => col.content === name);\n    }\n\n    getColumnIndexById(id) {\n        return this.columns.findIndex(col => col.id === id);\n    }\n\n    getCheckboxHTML() {\n        return '<input type=\"checkbox\" />';\n    }\n}\n\n// Custom Errors\nclass DataError extends TypeError {}\n\n/* eslint-disable max-len */\n\n// Icons from https://feathericons.com/\n\nlet icons = {\n    chevronDown: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-chevron-down\"><polyline points=\"6 9 12 15 18 9\"></polyline></svg>',\n    chevronRight: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-chevron-right\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>'\n};\n\nclass CellManager {\n    constructor(instance) {\n        this.instance = instance;\n        linkProperties(this, this.instance, [\n            'wrapper',\n            'options',\n            'style',\n            'header',\n            'bodyScrollable',\n            'columnmanager',\n            'rowmanager',\n            'datamanager',\n            'keyboard'\n        ]);\n\n        this.bindEvents();\n    }\n\n    bindEvents() {\n        this.bindFocusCell();\n        this.bindEditCell();\n        this.bindKeyboardSelection();\n        this.bindCopyCellContents();\n        this.bindMouseEvents();\n        this.bindTreeEvents();\n    }\n\n    bindFocusCell() {\n        this.bindKeyboardNav();\n    }\n\n    bindEditCell() {\n        this.$editingCell = null;\n\n        $.on(this.bodyScrollable, 'dblclick', '.dt-cell', (e, cell) => {\n            this.activateEditing(cell);\n        });\n\n        this.keyboard.on('enter', () => {\n            if (this.$focusedCell && !this.$editingCell) {\n                // enter keypress on focused cell\n                this.activateEditing(this.$focusedCell);\n            } else if (this.$editingCell) {\n                // enter keypress on editing cell\n                this.deactivateEditing();\n            }\n        });\n    }\n\n    bindKeyboardNav() {\n        const focusLastCell = (direction) => {\n            if (!this.$focusedCell || this.$editingCell) {\n                return false;\n            }\n\n            let $cell = this.$focusedCell;\n            const {\n                rowIndex,\n                colIndex\n            } = $.data($cell);\n\n            if (direction === 'left') {\n                $cell = this.getLeftMostCell$(rowIndex);\n            } else if (direction === 'right') {\n                $cell = this.getRightMostCell$(rowIndex);\n            } else if (direction === 'up') {\n                $cell = this.getTopMostCell$(colIndex);\n            } else if (direction === 'down') {\n                $cell = this.getBottomMostCell$(colIndex);\n            }\n\n            this.focusCell($cell);\n            return true;\n        };\n\n        ['left', 'right', 'up', 'down', 'tab', 'shift+tab']\n            .map(direction => this.keyboard.on(direction, () => this.focusCellInDirection(direction)));\n\n        ['left', 'right', 'up', 'down']\n            .map(direction => this.keyboard.on(`ctrl+${direction}`, () => focusLastCell(direction)));\n\n        this.keyboard.on('esc', () => {\n            this.deactivateEditing(false);\n            this.columnmanager.toggleFilter(false);\n        });\n\n        if (this.options.inlineFilters) {\n            this.keyboard.on('ctrl+f', (e) => {\n                const $cell = $.closest('.dt-cell', e.target);\n                const { colIndex } = $.data($cell);\n\n                this.activateFilter(colIndex);\n                return true;\n            });\n\n            $.on(this.header, 'focusin', '.dt-filter', () => {\n                this.unfocusCell(this.$focusedCell);\n            });\n        }\n    }\n\n    bindKeyboardSelection() {\n        const getNextSelectionCursor = (direction) => {\n            let $selectionCursor = this.getSelectionCursor();\n\n            if (direction === 'left') {\n                $selectionCursor = this.getLeftCell$($selectionCursor);\n            } else if (direction === 'right') {\n                $selectionCursor = this.getRightCell$($selectionCursor);\n            } else if (direction === 'up') {\n                $selectionCursor = this.getAboveCell$($selectionCursor);\n            } else if (direction === 'down') {\n                $selectionCursor = this.getBelowCell$($selectionCursor);\n            }\n\n            return $selectionCursor;\n        };\n\n        ['left', 'right', 'up', 'down']\n            .map(direction =>\n                this.keyboard.on(`shift+${direction}`, () => this.selectArea(getNextSelectionCursor(direction))));\n    }\n\n    bindCopyCellContents() {\n        this.keyboard.on('ctrl+c', () => {\n            const noOfCellsCopied = this.copyCellContents(this.$focusedCell, this.$selectionCursor);\n            const message = this.instance.translate('{count} cells copied', {\n                count: noOfCellsCopied\n            });\n\n            if (noOfCellsCopied) {\n                this.instance.showToastMessage(message, 2);\n            }\n        });\n\n        if (this.options.pasteFromClipboard) {\n            this.keyboard.on('ctrl+v', (e) => {\n                // hack\n                // https://stackoverflow.com/a/2177059/5353542\n                this.instance.pasteTarget.focus();\n\n                setTimeout(() => {\n                    const data = this.instance.pasteTarget.value;\n                    this.instance.pasteTarget.value = '';\n                    this.pasteContentInCell(data);\n                }, 10);\n\n                return false;\n            });\n        }\n    }\n\n    bindMouseEvents() {\n        let mouseDown = null;\n\n        $.on(this.bodyScrollable, 'mousedown', '.dt-cell', (e) => {\n            mouseDown = true;\n            this.focusCell($(e.delegatedTarget));\n        });\n\n        $.on(this.bodyScrollable, 'mouseup', () => {\n            mouseDown = false;\n        });\n\n        const selectArea = (e) => {\n            if (!mouseDown) return;\n            this.selectArea($(e.delegatedTarget));\n        };\n\n        $.on(this.bodyScrollable, 'mousemove', '.dt-cell', throttle$1(selectArea, 50));\n    }\n\n    bindTreeEvents() {\n        $.on(this.bodyScrollable, 'click', '.dt-tree-node__toggle', (e, $toggle) => {\n            const $cell = $.closest('.dt-cell', $toggle);\n            const { rowIndex } = $.data($cell);\n\n            if ($cell.classList.contains('dt-cell--tree-close')) {\n                this.rowmanager.openSingleNode(rowIndex);\n            } else {\n                this.rowmanager.closeSingleNode(rowIndex);\n            }\n        });\n    }\n\n    focusCell($cell, {\n        skipClearSelection = 0,\n        skipDOMFocus = 0,\n        skipScrollToCell = 0\n    } = {}) {\n        if (!$cell) return;\n\n        // don't focus if already editing cell\n        if ($cell === this.$editingCell) return;\n\n        const {\n            colIndex,\n            isHeader\n        } = $.data($cell);\n        if (isHeader) {\n            return;\n        }\n\n        const column = this.columnmanager.getColumn(colIndex);\n        if (column.focusable === false) {\n            return;\n        }\n\n        if (!skipScrollToCell) {\n            this.scrollToCell($cell);\n        }\n\n        this.deactivateEditing();\n        if (!skipClearSelection) {\n            this.clearSelection();\n        }\n\n        if (this.$focusedCell) {\n            this.$focusedCell.classList.remove('dt-cell--focus');\n        }\n\n        this.$focusedCell = $cell;\n        $cell.classList.add('dt-cell--focus');\n\n        if (!skipDOMFocus) {\n            // so that keyboard nav works\n            $cell.focus();\n        }\n\n        this.highlightRowColumnHeader($cell);\n    }\n\n    unfocusCell($cell) {\n        if (!$cell) return;\n\n        // remove cell border\n        $cell.classList.remove('dt-cell--focus');\n        this.$focusedCell = null;\n\n        // reset header background\n        if (this.lastHeaders) {\n            this.lastHeaders.forEach(header => header && header.classList.remove('dt-cell--highlight'));\n        }\n    }\n\n    highlightRowColumnHeader($cell) {\n        const {\n            colIndex,\n            rowIndex\n        } = $.data($cell);\n\n        const srNoColIndex = this.datamanager.getColumnIndexById('_rowIndex');\n        const colHeaderSelector = `.dt-cell--header-${colIndex}`;\n        const rowHeaderSelector = `.dt-cell--${srNoColIndex}-${rowIndex}`;\n\n        if (this.lastHeaders) {\n            this.lastHeaders.forEach(header => header && header.classList.remove('dt-cell--highlight'));\n        }\n\n        const colHeader = $(colHeaderSelector, this.wrapper);\n        const rowHeader = $(rowHeaderSelector, this.wrapper);\n\n        this.lastHeaders = [colHeader, rowHeader];\n        this.lastHeaders.forEach(header => header && header.classList.add('dt-cell--highlight'));\n    }\n\n    selectAreaOnClusterChanged() {\n        if (!(this.$focusedCell && this.$selectionCursor)) return;\n        const {\n            colIndex,\n            rowIndex\n        } = $.data(this.$selectionCursor);\n        const $cell = this.getCell$(colIndex, rowIndex);\n\n        if (!$cell || $cell === this.$selectionCursor) return;\n\n        // selectArea needs $focusedCell\n        const fCell = $.data(this.$focusedCell);\n        this.$focusedCell = this.getCell$(fCell.colIndex, fCell.rowIndex);\n\n        this.selectArea($cell);\n    }\n\n    focusCellOnClusterChanged() {\n        if (!this.$focusedCell) return;\n\n        const {\n            colIndex,\n            rowIndex\n        } = $.data(this.$focusedCell);\n        const $cell = this.getCell$(colIndex, rowIndex);\n\n        if (!$cell) return;\n        // this function is called after hyperlist renders the rows after scroll,\n        // focusCell calls clearSelection which resets the area selection\n        // so a flag to skip it\n        // we also skip DOM focus and scroll to cell\n        // because it fights with the user scroll\n        this.focusCell($cell, {\n            skipClearSelection: 1,\n            skipDOMFocus: 1,\n            skipScrollToCell: 1\n        });\n    }\n\n    selectArea($selectionCursor) {\n        if (!this.$focusedCell) return;\n\n        if (this._selectArea(this.$focusedCell, $selectionCursor)) {\n            // valid selection\n            this.$selectionCursor = $selectionCursor;\n        }\n    }\n\n    _selectArea($cell1, $cell2) {\n        if ($cell1 === $cell2) return false;\n\n        const cells = this.getCellsInRange($cell1, $cell2);\n        if (!cells) return false;\n\n        this.clearSelection();\n        this._selectedCells = cells.map(index => this.getCell$(...index));\n        requestAnimationFrame(() => {\n            this._selectedCells.map($cell => $cell.classList.add('dt-cell--highlight'));\n        });\n        return true;\n    }\n\n    getCellsInRange($cell1, $cell2) {\n        let colIndex1, rowIndex1, colIndex2, rowIndex2;\n\n        if (typeof $cell1 === 'number') {\n            [colIndex1, rowIndex1, colIndex2, rowIndex2] = arguments;\n        } else\n        if (typeof $cell1 === 'object') {\n            if (!($cell1 && $cell2)) {\n                return false;\n            }\n\n            const cell1 = $.data($cell1);\n            const cell2 = $.data($cell2);\n\n            colIndex1 = +cell1.colIndex;\n            rowIndex1 = +cell1.rowIndex;\n            colIndex2 = +cell2.colIndex;\n            rowIndex2 = +cell2.rowIndex;\n        }\n\n        if (rowIndex1 > rowIndex2) {\n            [rowIndex1, rowIndex2] = [rowIndex2, rowIndex1];\n        }\n\n        if (colIndex1 > colIndex2) {\n            [colIndex1, colIndex2] = [colIndex2, colIndex1];\n        }\n\n        if (this.isStandardCell(colIndex1) || this.isStandardCell(colIndex2)) {\n            return false;\n        }\n\n        const cells = [];\n        let colIndex = colIndex1;\n        let rowIndex = rowIndex1;\n        const rowIndices = [];\n\n        while (rowIndex <= rowIndex2) {\n            rowIndices.push(rowIndex);\n            rowIndex += 1;\n        }\n\n        rowIndices.map((rowIndex) => {\n            while (colIndex <= colIndex2) {\n                cells.push([colIndex, rowIndex]);\n                colIndex++;\n            }\n            colIndex = colIndex1;\n        });\n\n        return cells;\n    }\n\n    clearSelection() {\n        (this._selectedCells || [])\n            .forEach($cell => $cell.classList.remove('dt-cell--highlight'));\n\n        this._selectedCells = [];\n        this.$selectionCursor = null;\n    }\n\n    getSelectionCursor() {\n        return this.$selectionCursor || this.$focusedCell;\n    }\n\n    activateEditing($cell) {\n        this.focusCell($cell);\n        const {\n            rowIndex,\n            colIndex\n        } = $.data($cell);\n\n        const col = this.columnmanager.getColumn(colIndex);\n        if (col && (col.editable === false || col.focusable === false)) {\n            return;\n        }\n\n        const cell = this.getCell(colIndex, rowIndex);\n        if (cell && cell.editable === false) {\n            return;\n        }\n\n        if (this.$editingCell) {\n            const {\n                _rowIndex,\n                _colIndex\n            } = $.data(this.$editingCell);\n\n            if (rowIndex === _rowIndex && colIndex === _colIndex) {\n                // editing the same cell\n                return;\n            }\n        }\n\n        this.$editingCell = $cell;\n        $cell.classList.add('dt-cell--editing');\n\n        const $editCell = $('.dt-cell__edit', $cell);\n        $editCell.innerHTML = '';\n\n        const editor = this.getEditor(colIndex, rowIndex, cell.content, $editCell);\n\n        if (editor) {\n            this.currentCellEditor = editor;\n            // initialize editing input with cell value\n            editor.initValue(cell.content, rowIndex, col);\n        }\n    }\n\n    deactivateEditing(submitValue = true) {\n        if (submitValue) {\n            this.submitEditing();\n        }\n        // keep focus on the cell so that keyboard navigation works\n        if (this.$focusedCell) this.$focusedCell.focus();\n\n        if (!this.$editingCell) return;\n        this.$editingCell.classList.remove('dt-cell--editing');\n        this.$editingCell = null;\n    }\n\n    getEditor(colIndex, rowIndex, value, parent) {\n        const column = this.datamanager.getColumn(colIndex);\n        const row = this.datamanager.getRow(rowIndex);\n        const data = this.datamanager.getData(rowIndex);\n        let editor = this.options.getEditor ?\n            this.options.getEditor(colIndex, rowIndex, value, parent, column, row, data) :\n            this.getDefaultEditor(parent);\n\n        if (editor === false) {\n            // explicitly returned false\n            return false;\n        }\n        if (editor === undefined) {\n            // didn't return editor, fallback to default\n            editor = this.getDefaultEditor(parent);\n        }\n\n        return editor;\n    }\n\n    getDefaultEditor(parent) {\n        const $input = $.create('input', {\n            class: 'dt-input',\n            type: 'text',\n            inside: parent\n        });\n\n        return {\n            initValue(value) {\n                $input.focus();\n                $input.value = value;\n            },\n            getValue() {\n                return $input.value;\n            },\n            setValue(value) {\n                $input.value = value;\n            }\n        };\n    }\n\n    submitEditing() {\n        let promise = Promise.resolve();\n        if (!this.$editingCell) return promise;\n\n        const $cell = this.$editingCell;\n        const {\n            rowIndex,\n            colIndex\n        } = $.data($cell);\n        const col = this.datamanager.getColumn(colIndex);\n\n        if ($cell) {\n            const editor = this.currentCellEditor;\n\n            if (editor) {\n                let valuePromise = editor.getValue();\n\n                // convert to stubbed Promise\n                if (!valuePromise.then) {\n                    valuePromise = Promise.resolve(valuePromise);\n                }\n\n                promise = valuePromise.then((value) => {\n                    const oldValue = this.getCell(colIndex, rowIndex).content;\n\n                    if (oldValue === value) return false;\n\n                    const done = editor.setValue(value, rowIndex, col);\n\n                    // update cell immediately\n                    this.updateCell(colIndex, rowIndex, value, true);\n                    $cell.focus();\n\n                    if (done && done.then) {\n                        // revert to oldValue if promise fails\n                        done.catch((e) => {\n                            console.log(e);\n                            this.updateCell(colIndex, rowIndex, oldValue);\n                        });\n                    }\n                    return done;\n                });\n            }\n        }\n\n        this.currentCellEditor = null;\n        return promise;\n    }\n\n    copyCellContents($cell1, $cell2) {\n        if (!$cell2 && $cell1) {\n            // copy only focusedCell\n            const {\n                colIndex,\n                rowIndex\n            } = $.data($cell1);\n            const cell = this.getCell(colIndex, rowIndex);\n            copyTextToClipboard(cell.content);\n            return 1;\n        }\n        const cells = this.getCellsInRange($cell1, $cell2);\n\n        if (!cells) return 0;\n\n        const rows = cells\n            // get cell objects\n            .map(index => this.getCell(...index))\n            // convert to array of rows\n            .reduce((acc, curr) => {\n                const rowIndex = curr.rowIndex;\n\n                acc[rowIndex] = acc[rowIndex] || [];\n                acc[rowIndex].push(curr.content);\n\n                return acc;\n            }, []);\n\n        const values = rows\n            // join values by tab\n            .map(row => row.join('\\t'))\n            // join rows by newline\n            .join('\\n');\n\n        copyTextToClipboard(values);\n\n        // return no of cells copied\n        return rows.reduce((total, row) => total + row.length, 0);\n    }\n\n    pasteContentInCell(data) {\n        if (!this.$focusedCell) return;\n\n        const matrix = data\n            .split('\\n')\n            .map(row => row.split('\\t'))\n            .filter(row => row.length && row.every(it => it));\n\n        let { colIndex, rowIndex } = $.data(this.$focusedCell);\n\n        let focusedCell = {\n            colIndex: +colIndex,\n            rowIndex: +rowIndex\n        };\n\n        matrix.forEach((row, i) => {\n            let rowIndex = i + focusedCell.rowIndex;\n            row.forEach((cell, j) => {\n                let colIndex = j + focusedCell.colIndex;\n                this.updateCell(colIndex, rowIndex, cell, true);\n            });\n        });\n    }\n\n    activateFilter(colIndex) {\n        this.columnmanager.toggleFilter();\n        this.columnmanager.focusFilter(colIndex);\n\n        if (!this.columnmanager.isFilterShown) {\n            // put focus back on cell\n            this.$focusedCell && this.$focusedCell.focus();\n        }\n    }\n\n    updateCell(colIndex, rowIndex, value, refreshHtml = false) {\n        const cell = this.datamanager.updateCell(colIndex, rowIndex, {\n            content: value\n        });\n        this.refreshCell(cell, refreshHtml);\n    }\n\n    refreshCell(cell, refreshHtml = false) {\n        const $cell = $(this.selector(cell.colIndex, cell.rowIndex), this.bodyScrollable);\n        $cell.innerHTML = this.getCellContent(cell, refreshHtml);\n    }\n\n    toggleTreeButton(rowIndex, flag) {\n        const colIndex = this.columnmanager.getFirstColumnIndex();\n        const $cell = this.getCell$(colIndex, rowIndex);\n        if ($cell) {\n            $cell.classList[flag ? 'remove' : 'add']('dt-cell--tree-close');\n        }\n    }\n\n    isStandardCell(colIndex) {\n        // Standard cells are in Sr. No and Checkbox column\n        return colIndex < this.columnmanager.getFirstColumnIndex();\n    }\n\n    focusCellInDirection(direction) {\n        if (!this.$focusedCell || (this.$editingCell && ['left', 'right', 'up', 'down'].includes(direction))) {\n            return false;\n        } else if (this.$editingCell && ['tab', 'shift+tab'].includes(direction)) {\n            this.deactivateEditing();\n        }\n\n        let $cell = this.$focusedCell;\n\n        if (direction === 'left' || direction === 'shift+tab') {\n            $cell = this.getLeftCell$($cell);\n        } else if (direction === 'right' || direction === 'tab') {\n            $cell = this.getRightCell$($cell);\n        } else if (direction === 'up') {\n            $cell = this.getAboveCell$($cell);\n        } else if (direction === 'down') {\n            $cell = this.getBelowCell$($cell);\n        }\n\n        if (!$cell) {\n            return false;\n        }\n\n        const {\n            colIndex\n        } = $.data($cell);\n        const column = this.columnmanager.getColumn(colIndex);\n\n        if (!column.focusable) {\n            let $prevFocusedCell = this.$focusedCell;\n            this.unfocusCell($prevFocusedCell);\n            this.$focusedCell = $cell;\n            let ret = this.focusCellInDirection(direction);\n            if (!ret) {\n                this.focusCell($prevFocusedCell);\n            }\n            return ret;\n        }\n\n        this.focusCell($cell);\n        return true;\n    }\n\n    getCell$(colIndex, rowIndex) {\n        return $(this.selector(colIndex, rowIndex), this.bodyScrollable);\n    }\n\n    getAboveCell$($cell) {\n        const {\n            colIndex\n        } = $.data($cell);\n\n        let $aboveRow = $cell.parentElement.previousElementSibling;\n        while ($aboveRow && $aboveRow.classList.contains('dt-row--hide')) {\n            $aboveRow = $aboveRow.previousElementSibling;\n        }\n\n        if (!$aboveRow) return $cell;\n        return $(`.dt-cell--col-${colIndex}`, $aboveRow);\n    }\n\n    getBelowCell$($cell) {\n        const {\n            colIndex\n        } = $.data($cell);\n\n        let $belowRow = $cell.parentElement.nextElementSibling;\n        while ($belowRow && $belowRow.classList.contains('dt-row--hide')) {\n            $belowRow = $belowRow.nextElementSibling;\n        }\n\n        if (!$belowRow) return $cell;\n        return $(`.dt-cell--col-${colIndex}`, $belowRow);\n    }\n\n    getLeftCell$($cell) {\n        return $cell.previousElementSibling;\n    }\n\n    getRightCell$($cell) {\n        return $cell.nextElementSibling;\n    }\n\n    getLeftMostCell$(rowIndex) {\n        return this.getCell$(this.columnmanager.getFirstColumnIndex(), rowIndex);\n    }\n\n    getRightMostCell$(rowIndex) {\n        return this.getCell$(this.columnmanager.getLastColumnIndex(), rowIndex);\n    }\n\n    getTopMostCell$(colIndex) {\n        return this.getCell$(colIndex, this.rowmanager.getFirstRowIndex());\n    }\n\n    getBottomMostCell$(colIndex) {\n        return this.getCell$(colIndex, this.rowmanager.getLastRowIndex());\n    }\n\n    getCell(colIndex, rowIndex) {\n        return this.instance.datamanager.getCell(colIndex, rowIndex);\n    }\n\n    getRowHeight() {\n        return $.style($('.dt-row', this.bodyScrollable), 'height');\n    }\n\n    scrollToCell($cell) {\n        if ($.inViewport($cell, this.bodyScrollable)) return false;\n\n        const {\n            rowIndex\n        } = $.data($cell);\n        this.rowmanager.scrollToRow(rowIndex);\n        return false;\n    }\n\n    getRowCountPerPage() {\n        return Math.ceil(this.instance.getViewportHeight() / this.getRowHeight());\n    }\n\n    getCellHTML(cell) {\n        const {\n            rowIndex,\n            colIndex,\n            isHeader,\n            isFilter,\n            isTotalRow\n        } = cell;\n        const dataAttr = makeDataAttributeString({\n            rowIndex,\n            colIndex,\n            isHeader,\n            isFilter,\n            isTotalRow\n        });\n\n        const row = this.datamanager.getRow(rowIndex);\n\n        const isBodyCell = !(isHeader || isFilter || isTotalRow);\n\n        const className = [\n            'dt-cell',\n            'dt-cell--col-' + colIndex,\n            isBodyCell ? `dt-cell--${colIndex}-${rowIndex}` : '',\n            isBodyCell ? 'dt-cell--row-' + rowIndex : '',\n            isHeader ? 'dt-cell--header' : '',\n            isHeader ? `dt-cell--header-${colIndex}` : '',\n            isFilter ? 'dt-cell--filter' : '',\n            isBodyCell && (row && row.meta.isTreeNodeClose) ? 'dt-cell--tree-close' : ''\n        ].join(' ');\n\n        return `\n            <div class=\"${className}\" ${dataAttr} tabindex=\"0\">\n                ${this.getCellContent(cell)}\n            </div>\n        `;\n    }\n\n    getCellContent(cell, refreshHtml = false) {\n        const {\n            isHeader,\n            isFilter,\n            colIndex\n        } = cell;\n\n        const editable = !isHeader && cell.editable !== false;\n        const editCellHTML = editable ? this.getEditCellHTML(colIndex) : '';\n\n        const sortable = isHeader && cell.sortable !== false;\n        const sortIndicator = sortable ?\n            `<span class=\"sort-indicator\">\n                ${this.options.sortIndicator[cell.sortOrder]}\n            </span>` :\n            '';\n\n        const resizable = isHeader && cell.resizable !== false;\n        const resizeColumn = resizable ? '<span class=\"dt-cell__resize-handle\"></span>' : '';\n\n        const hasDropdown = isHeader && cell.dropdown !== false;\n        const dropdown = hasDropdown ? this.columnmanager.getDropdownHTML() : '';\n\n        let customFormatter = CellManager.getCustomCellFormatter(cell);\n        let contentHTML;\n        if (isHeader || isFilter || !customFormatter) {\n            contentHTML = cell.content;\n        } else {\n            if (!cell.html || refreshHtml) {\n                const row = this.datamanager.getRow(cell.rowIndex);\n                const data = this.datamanager.getData(cell.rowIndex);\n                contentHTML = customFormatter(cell.content, row, cell.column, data);\n            } else {\n                contentHTML = cell.html;\n            }\n        }\n\n        cell.html = contentHTML;\n\n        if (this.options.treeView && !(isHeader || isFilter) && cell.indent !== undefined) {\n            const nextRow = this.datamanager.getRow(cell.rowIndex + 1);\n            const addToggle = nextRow && nextRow.meta.indent > cell.indent;\n            const leftPadding = 20;\n            const unit = 'px';\n\n            // Add toggle and indent in the first column\n            const firstColumnIndex = this.datamanager.getColumnIndexById('_rowIndex') + 1;\n            if (firstColumnIndex === cell.colIndex) {\n                const padding = ((cell.indent || 0)) * leftPadding;\n                const toggleHTML = addToggle ?\n                    `<span class=\"dt-tree-node__toggle\" style=\"left: ${padding - leftPadding}${unit}\">\n                        <span class=\"icon-open\">${icons.chevronDown}</span>\n                        <span class=\"icon-close\">${icons.chevronRight}</span>\n                    </span>` : '';\n                contentHTML = `<span class=\"dt-tree-node\" style=\"padding-left: ${padding}${unit}\">\n                    ${toggleHTML}\n                    <span>${contentHTML}</span>\n                </span>`;\n            }\n        }\n\n        const className = [\n            'dt-cell__content',\n            isHeader ? `dt-cell__content--header-${colIndex}` : `dt-cell__content--col-${colIndex}`\n        ].join(' ');\n\n        let cellContentHTML = `\n            <div class=\"${className}\">\n                ${contentHTML}\n                ${sortIndicator}\n                ${resizeColumn}\n                ${dropdown}\n            </div>\n            ${editCellHTML}\n        `;\n\n        let div = document.createElement('div');\n        div.innerHTML = contentHTML;\n\n        let textContent = div.textContent;\n        textContent = textContent.replace(/\\s+/g, ' ').trim();\n\n        cellContentHTML = cellContentHTML.replace('>', ` title=\"${escapeHTML(textContent)}\">`);\n\n        return cellContentHTML;\n    }\n\n    getEditCellHTML(colIndex) {\n        return `<div class=\"dt-cell__edit dt-cell__edit--col-${colIndex}\"></div>`;\n    }\n\n    selector(colIndex, rowIndex) {\n        return `.dt-cell--${colIndex}-${rowIndex}`;\n    }\n\n    static getCustomCellFormatter(cell) {\n        return cell.format || (cell.column && cell.column.format) || null;\n    }\n}\n\nclass ColumnManager {\n    constructor(instance) {\n        this.instance = instance;\n\n        linkProperties(this, this.instance, [\n            'options',\n            'fireEvent',\n            'header',\n            'datamanager',\n            'cellmanager',\n            'style',\n            'wrapper',\n            'rowmanager',\n            'bodyScrollable',\n            'bodyRenderer'\n        ]);\n\n        this.bindEvents();\n    }\n\n    renderHeader() {\n        this.header.innerHTML = '<div></div>';\n        this.refreshHeader();\n    }\n\n    refreshHeader() {\n        const columns = this.datamanager.getColumns();\n\n        // refresh html\n        $('div', this.header).innerHTML = this.getHeaderHTML(columns);\n\n        this.$filterRow = $('.dt-row-filter', this.header);\n        if (this.$filterRow) {\n            $.style(this.$filterRow, { display: 'none' });\n        }\n        // reset columnMap\n        this.$columnMap = [];\n        this.bindMoveColumn();\n    }\n\n    getHeaderHTML(columns) {\n        let html = this.rowmanager.getRowHTML(columns, {\n            isHeader: 1\n        });\n        if (this.options.inlineFilters) {\n            html += this.rowmanager.getRowHTML(columns, {\n                isFilter: 1\n            });\n        }\n        return html;\n    }\n\n    bindEvents() {\n        this.bindDropdown();\n        this.bindResizeColumn();\n        this.bindPerfectColumnWidth();\n        this.bindFilter();\n    }\n\n    bindDropdown() {\n        let toggleClass = '.dt-dropdown__toggle';\n        let dropdownClass = '.dt-dropdown__list';\n\n        // attach the dropdown list to container\n        this.instance.dropdownContainer.innerHTML = this.getDropdownListHTML();\n        this.$dropdownList = this.instance.dropdownContainer.firstElementChild;\n\n        $.on(this.header, 'click', toggleClass, e => {\n            this.openDropdown(e);\n        });\n\n        const deactivateDropdownOnBodyClick = (e) => {\n            const selector = [\n                toggleClass, toggleClass + ' *',\n                dropdownClass, dropdownClass + ' *'\n            ].join(',');\n            if (e.target.matches(selector)) return;\n            deactivateDropdown();\n        };\n        $.on(document.body, 'click', deactivateDropdownOnBodyClick);\n        document.addEventListener('scroll', deactivateDropdown, true);\n\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'click', deactivateDropdownOnBodyClick);\n            $.off(document, 'scroll', deactivateDropdown);\n        });\n\n        $.on(this.$dropdownList, 'click', '.dt-dropdown__list-item', (e, $item) => {\n            if (!this._dropdownActiveColIndex) return;\n            const dropdownItems = this.options.headerDropdown;\n            const { index } = $.data($item);\n            const colIndex = this._dropdownActiveColIndex;\n            let callback = dropdownItems[index].action;\n\n            callback && callback.call(this.instance, this.getColumn(colIndex));\n            this.hideDropdown();\n        });\n\n        const _this = this;\n        function deactivateDropdown(e) {\n            _this.hideDropdown();\n        }\n\n        this.hideDropdown();\n    }\n\n    openDropdown(e) {\n        if (!this._dropdownWidth) {\n            $.style(this.$dropdownList, { display: '' });\n            this._dropdownWidth = $.style(this.$dropdownList, 'width');\n        }\n        $.style(this.$dropdownList, {\n            display: '',\n            left: (e.clientX - this._dropdownWidth + 4) + 'px',\n            top: (e.clientY + 4) + 'px'\n        });\n        const $cell = $.closest('.dt-cell', e.target);\n        const { colIndex } = $.data($cell);\n        this._dropdownActiveColIndex = colIndex;\n    }\n\n    hideDropdown() {\n        $.style(this.$dropdownList, {\n            display: 'none'\n        });\n        this._dropdownActiveColIndex = null;\n    }\n\n    bindResizeColumn() {\n        let isDragging = false;\n        let $resizingCell, startWidth, startX;\n\n        $.on(this.header, 'mousedown', '.dt-cell .dt-cell__resize-handle', (e, $handle) => {\n            document.body.classList.add('dt-resize');\n            const $cell = $handle.parentNode.parentNode;\n            $resizingCell = $cell;\n            const {\n                colIndex\n            } = $.data($resizingCell);\n            const col = this.getColumn(colIndex);\n\n            if (col && col.resizable === false) {\n                return;\n            }\n\n            isDragging = true;\n            startWidth = $.style($('.dt-cell__content', $resizingCell), 'width');\n            startX = e.pageX;\n        });\n\n        const onMouseup = (e) => {\n            document.body.classList.remove('dt-resize');\n            if (!$resizingCell) return;\n            isDragging = false;\n\n            const {\n                colIndex\n            } = $.data($resizingCell);\n            this.setColumnWidth(colIndex);\n            this.style.setBodyStyle();\n            $resizingCell = null;\n        };\n        $.on(document.body, 'mouseup', onMouseup);\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'mouseup', onMouseup);\n        });\n\n        const onMouseMove = (e) => {\n            if (!isDragging) return;\n            let delta = e.pageX - startX;\n            if (this.options.direction === 'rtl') {\n                delta = -1 * delta;\n            }\n            const finalWidth = startWidth + delta;\n            const {\n                colIndex\n            } = $.data($resizingCell);\n\n            let columnMinWidth = this.options.minimumColumnWidth;\n            if (columnMinWidth > finalWidth) {\n                // don't resize past 30 pixels\n                return;\n            }\n            this.datamanager.updateColumn(colIndex, {\n                width: finalWidth\n            });\n            this.setColumnHeaderWidth(colIndex);\n        };\n        $.on(document.body, 'mousemove', onMouseMove);\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'mousemove', onMouseMove);\n        });\n    }\n\n    bindPerfectColumnWidth() {\n        $.on(this.header, 'dblclick', '.dt-cell .dt-cell__resize-handle', (e, $handle) => {\n            const $cell = $handle.parentNode.parentNode;\n            const { colIndex } = $.data($cell);\n\n            let longestCell = this.bodyRenderer.visibleRows\n                .map(d => d[colIndex])\n                .reduce((acc, curr) => acc.content.length > curr.content.length ? acc : curr);\n\n            let $longestCellHTML = this.cellmanager.getCellHTML(longestCell);\n            let $div = document.createElement('div');\n            $div.innerHTML = $longestCellHTML;\n            let cellText = $div.querySelector('.dt-cell__content').textContent;\n\n            let {\n                borderLeftWidth,\n                borderRightWidth,\n                paddingLeft,\n                paddingRight\n            } = $.getStyle(this.bodyScrollable.querySelector('.dt-cell__content'));\n\n            let padding = [borderLeftWidth, borderRightWidth, paddingLeft, paddingRight]\n                .map(parseFloat)\n                .reduce((sum, val) => sum + val);\n\n            let width = $.measureTextWidth(cellText) + padding;\n            this.datamanager.updateColumn(colIndex, { width });\n            this.setColumnHeaderWidth(colIndex);\n            this.setColumnWidth(colIndex);\n        });\n    }\n\n    bindMoveColumn() {\n        if (this.options.disableReorderColumn) return;\n\n        const $parent = $('.dt-row', this.header);\n\n        this.sortable = Sortable.create($parent, {\n            onEnd: (e) => {\n                const {\n                    oldIndex,\n                    newIndex\n                } = e;\n                const $draggedCell = e.item;\n                const {\n                    colIndex\n                } = $.data($draggedCell);\n                if (+colIndex === newIndex) return;\n\n                this.switchColumn(oldIndex, newIndex);\n            },\n            preventOnFilter: false,\n            filter: '.dt-cell__resize-handle, .dt-dropdown',\n            chosenClass: 'dt-cell--dragging',\n            animation: 150\n        });\n    }\n\n    sortColumn(colIndex, nextSortOrder) {\n        this.instance.freeze();\n        this.sortRows(colIndex, nextSortOrder)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => this.instance.unfreeze())\n            .then(() => {\n                this.fireEvent('onSortColumn', this.getColumn(colIndex));\n            });\n    }\n\n    removeColumn(colIndex) {\n        const removedCol = this.getColumn(colIndex);\n        this.instance.freeze();\n        this.datamanager.removeColumn(colIndex)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => this.instance.unfreeze())\n            .then(() => {\n                this.fireEvent('onRemoveColumn', removedCol);\n            });\n    }\n\n    switchColumn(oldIndex, newIndex) {\n        this.instance.freeze();\n        this.datamanager.switchColumn(oldIndex, newIndex)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => {\n                this.setColumnWidth(oldIndex);\n                this.setColumnWidth(newIndex);\n                this.instance.unfreeze();\n            })\n            .then(() => {\n                this.fireEvent('onSwitchColumn',\n                    this.getColumn(oldIndex), this.getColumn(newIndex)\n                );\n            });\n    }\n\n    toggleFilter(flag) {\n        if (!this.options.inlineFilters) return;\n\n        let showFilter;\n        if (flag === undefined) {\n            showFilter = !this.isFilterShown;\n        } else {\n            showFilter = flag;\n        }\n\n        if (showFilter) {\n            $.style(this.$filterRow, { display: '' });\n        } else {\n            $.style(this.$filterRow, { display: 'none' });\n        }\n\n        this.isFilterShown = showFilter;\n        this.style.setBodyStyle();\n    }\n\n    focusFilter(colIndex) {\n        if (!this.isFilterShown) return;\n\n        const $filterInput = $(`.dt-cell--col-${colIndex} .dt-filter`, this.$filterRow);\n        $filterInput.focus();\n    }\n\n    bindFilter() {\n        if (!this.options.inlineFilters) return;\n        const handler = e => {\n            this.applyFilter(this.getAppliedFilters());\n        };\n        $.on(this.header, 'keydown', '.dt-filter', debounce$1(handler, 300));\n    }\n\n    applyFilter(filters) {\n        this.datamanager.filterRows(filters)\n            .then(({\n                rowsToShow\n            }) => {\n                this.rowmanager.showRows(rowsToShow);\n            });\n    }\n\n    getAppliedFilters() {\n        const filters = {};\n        $.each('.dt-filter', this.header).map((input) => {\n            const value = input.value;\n            if (value) {\n                filters[input.dataset.colIndex] = value;\n            }\n        });\n        return filters;\n    }\n\n    applyDefaultSortOrder() {\n        // sort rows if any 1 column has a default sortOrder set\n        const columnsToSort = this.getColumns().filter(col => col.sortOrder !== 'none');\n\n        if (columnsToSort.length === 1) {\n            const column = columnsToSort[0];\n            this.sortColumn(column.colIndex, column.sortOrder);\n        }\n    }\n\n    sortRows(colIndex, sortOrder) {\n        return this.datamanager.sortRows(colIndex, sortOrder);\n    }\n\n    getColumn(colIndex) {\n        return this.datamanager.getColumn(colIndex);\n    }\n\n    getColumns() {\n        return this.datamanager.getColumns();\n    }\n\n    setColumnWidth(colIndex, width) {\n        colIndex = +colIndex;\n\n        let columnWidth = width || this.getColumn(colIndex).width;\n\n        const selector = [\n            `.dt-cell__content--col-${colIndex}`,\n            `.dt-cell__edit--col-${colIndex}`\n        ].join(', ');\n\n        const styles = {\n            width: columnWidth + 'px'\n        };\n\n        this.style.setStyle(selector, styles);\n    }\n\n    setColumnHeaderWidth(colIndex) {\n        colIndex = +colIndex;\n        this.$columnMap = this.$columnMap || [];\n        const selector = `.dt-cell__content--header-${colIndex}`;\n        const {\n            width\n        } = this.getColumn(colIndex);\n\n        let $column = this.$columnMap[colIndex];\n        if (!$column) {\n            $column = this.header.querySelector(selector);\n            this.$columnMap[colIndex] = $column;\n        }\n\n        $column.style.width = width + 'px';\n    }\n\n    getColumnMinWidth(colIndex) {\n        colIndex = +colIndex;\n        return this.getColumn(colIndex).minWidth || 24;\n    }\n\n    getFirstColumnIndex() {\n        return this.datamanager.getColumnIndexById('_rowIndex') + 1;\n    }\n\n    getHeaderCell$(colIndex) {\n        return $(`.dt-cell--header-${colIndex}`, this.header);\n    }\n\n    getLastColumnIndex() {\n        return this.datamanager.getColumnCount() - 1;\n    }\n\n    getDropdownHTML() {\n        const { dropdownButton } = this.options;\n\n        return `\n            <div class=\"dt-dropdown\">\n                <div class=\"dt-dropdown__toggle\">${dropdownButton}</div>\n            </div>\n      `;\n    }\n\n    getDropdownListHTML() {\n        const { headerDropdown: dropdownItems } = this.options;\n\n        return `\n            <div class=\"dt-dropdown__list\">\n            ${dropdownItems.map((d, i) => `\n                <div class=\"dt-dropdown__list-item\" data-index=\"${i}\">${d.label}</div>\n            `).join('')}\n            </div>\n        `;\n    }\n}\n\nclass RowManager {\n    constructor(instance) {\n        this.instance = instance;\n        linkProperties(this, this.instance, [\n            'options',\n            'fireEvent',\n            'wrapper',\n            'bodyScrollable',\n            'bodyRenderer',\n            'style'\n        ]);\n\n        this.bindEvents();\n        this.refreshRows = nextTick(this.refreshRows, this);\n    }\n\n    get datamanager() {\n        return this.instance.datamanager;\n    }\n\n    get cellmanager() {\n        return this.instance.cellmanager;\n    }\n\n    bindEvents() {\n        this.bindCheckbox();\n    }\n\n    bindCheckbox() {\n        if (!this.options.checkboxColumn) return;\n\n        // map of checked rows\n        this.checkMap = [];\n\n        $.on(this.wrapper, 'click', '.dt-cell--col-0 [type=\"checkbox\"]', (e, $checkbox) => {\n            const $cell = $checkbox.closest('.dt-cell');\n            const {\n                rowIndex,\n                isHeader\n            } = $.data($cell);\n            const checked = $checkbox.checked;\n\n            if (isHeader) {\n                this.checkAll(checked);\n            } else {\n                this.checkRow(rowIndex, checked);\n            }\n        });\n    }\n\n    refreshRows() {\n        this.instance.renderBody();\n        this.instance.setDimensions();\n    }\n\n    refreshRow(row, rowIndex) {\n        const _row = this.datamanager.updateRow(row, rowIndex);\n\n        _row.forEach(cell => {\n            this.cellmanager.refreshCell(cell, true);\n        });\n    }\n\n    getCheckedRows() {\n        if (!this.checkMap) {\n            return [];\n        }\n\n        let out = [];\n        for (let rowIndex in this.checkMap) {\n            const checked = this.checkMap[rowIndex];\n            if (checked === 1) {\n                out.push(rowIndex);\n            }\n        }\n\n        return out;\n    }\n\n    highlightCheckedRows() {\n        this.getCheckedRows()\n            .map(rowIndex => this.checkRow(rowIndex, true));\n    }\n\n    checkRow(rowIndex, toggle) {\n        const value = toggle ? 1 : 0;\n        const selector = rowIndex => `.dt-cell--0-${rowIndex} [type=\"checkbox\"]`;\n        // update internal map\n        this.checkMap[rowIndex] = value;\n        // set checkbox value explicitly\n        $.each(selector(rowIndex), this.bodyScrollable)\n            .map(input => {\n                input.checked = toggle;\n            });\n        // highlight row\n        this.highlightRow(rowIndex, toggle);\n        this.showCheckStatus();\n        this.fireEvent('onCheckRow', this.datamanager.getRow(rowIndex));\n    }\n\n    checkAll(toggle) {\n        const value = toggle ? 1 : 0;\n\n        // update internal map\n        if (toggle) {\n            if (this.datamanager._filteredRows) {\n                this.datamanager._filteredRows.forEach(f => {\n                    this.checkRow(f, toggle);\n                });\n            } else {\n                this.checkMap = Array.from(Array(this.getTotalRows())).map(c => value);\n            }\n        } else {\n            this.checkMap = [];\n        }\n        // set checkbox value\n        $.each('.dt-cell--col-0 [type=\"checkbox\"]', this.bodyScrollable)\n            .map(input => {\n                input.checked = toggle;\n            });\n        // highlight all\n        this.highlightAll(toggle);\n        this.showCheckStatus();\n        this.fireEvent('onCheckRow');\n    }\n\n    showCheckStatus() {\n        if (!this.options.checkedRowStatus) return;\n        const checkedRows = this.getCheckedRows();\n        const count = checkedRows.length;\n        if (count > 0) {\n            let message = this.instance.translate('{count} rows selected', {\n                count: count\n            });\n            this.bodyRenderer.showToastMessage(message);\n        } else {\n            this.bodyRenderer.clearToastMessage();\n        }\n    }\n\n    highlightRow(rowIndex, toggle = true) {\n        const $row = this.getRow$(rowIndex);\n        if (!$row) return;\n\n        if (!toggle && this.bodyScrollable.classList.contains('dt-scrollable--highlight-all')) {\n            $row.classList.add('dt-row--unhighlight');\n            return;\n        }\n\n        if (toggle && $row.classList.contains('dt-row--unhighlight')) {\n            $row.classList.remove('dt-row--unhighlight');\n        }\n\n        this._highlightedRows = this._highlightedRows || {};\n\n        if (toggle) {\n            $row.classList.add('dt-row--highlight');\n            this._highlightedRows[rowIndex] = $row;\n        } else {\n            $row.classList.remove('dt-row--highlight');\n            delete this._highlightedRows[rowIndex];\n        }\n    }\n\n    highlightAll(toggle = true) {\n        if (toggle) {\n            this.bodyScrollable.classList.add('dt-scrollable--highlight-all');\n        } else {\n            this.bodyScrollable.classList.remove('dt-scrollable--highlight-all');\n            for (const rowIndex in this._highlightedRows) {\n                const $row = this._highlightedRows[rowIndex];\n                $row.classList.remove('dt-row--highlight');\n            }\n            this._highlightedRows = {};\n        }\n    }\n\n    showRows(rowIndices) {\n        rowIndices = ensureArray(rowIndices);\n        const rows = rowIndices.map(rowIndex => this.datamanager.getRow(rowIndex));\n        this.bodyRenderer.renderRows(rows);\n    }\n\n    showAllRows() {\n        const rowIndices = this.datamanager.getAllRowIndices();\n        this.showRows(rowIndices);\n    }\n\n    getChildrenToShowForNode(rowIndex) {\n        const row = this.datamanager.getRow(rowIndex);\n        row.meta.isTreeNodeClose = false;\n\n        return this.datamanager.getImmediateChildren(rowIndex);\n    }\n\n    openSingleNode(rowIndex) {\n        const childrenToShow = this.getChildrenToShowForNode(rowIndex);\n        const visibleRowIndices = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = uniq$1([...childrenToShow, ...visibleRowIndices]).sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    getChildrenToHideForNode(rowIndex) {\n        const row = this.datamanager.getRow(rowIndex);\n        row.meta.isTreeNodeClose = true;\n\n        const rowsToHide = this.datamanager.getChildren(rowIndex);\n        rowsToHide.forEach(rowIndex => {\n            const row = this.datamanager.getRow(rowIndex);\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = true;\n            }\n        });\n\n        return rowsToHide;\n    }\n\n    closeSingleNode(rowIndex) {\n        const rowsToHide = this.getChildrenToHideForNode(rowIndex);\n        const visibleRows = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = visibleRows\n            .filter(rowIndex => !rowsToHide.includes(rowIndex))\n            .sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    expandAllNodes() {\n        let rows = this.datamanager.getRows();\n        let rootNodes = rows.filter(row => !row.meta.isLeaf);\n\n        const childrenToShow = rootNodes.map(row => this.getChildrenToShowForNode(row.meta.rowIndex)).flat();\n        const visibleRowIndices = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = uniq$1([...childrenToShow, ...visibleRowIndices]).sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    collapseAllNodes() {\n        let rows = this.datamanager.getRows();\n        let rootNodes = rows.filter(row => row.meta.indent === 0);\n\n        const rowsToHide = rootNodes.map(row => this.getChildrenToHideForNode(row.meta.rowIndex)).flat();\n        const visibleRows = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = visibleRows\n            .filter(rowIndex => !rowsToHide.includes(rowIndex))\n            .sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    setTreeDepth(depth) {\n        let rows = this.datamanager.getRows();\n\n        const rowsToOpen = rows.filter(row => row.meta.indent < depth);\n        const rowsToClose = rows.filter(row => row.meta.indent >= depth);\n        const rowsToHide = rowsToClose.filter(row => row.meta.indent > depth);\n\n        rowsToClose.forEach(row => {\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = true;\n            }\n        });\n        rowsToOpen.forEach(row => {\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = false;\n            }\n        });\n\n        const rowsToShow = rows\n            .filter(row => !rowsToHide.includes(row))\n            .map(row => row.meta.rowIndex)\n            .sort(numberSortAsc);\n        this.showRows(rowsToShow);\n    }\n\n    getRow$(rowIndex) {\n        return $(this.selector(rowIndex), this.bodyScrollable);\n    }\n\n    getTotalRows() {\n        return this.datamanager.getRowCount();\n    }\n\n    getFirstRowIndex() {\n        return 0;\n    }\n\n    getLastRowIndex() {\n        return this.datamanager.getRowCount() - 1;\n    }\n\n    scrollToRow(rowIndex) {\n        rowIndex = +rowIndex;\n        this._lastScrollTo = this._lastScrollTo || 0;\n        const $row = this.getRow$(rowIndex);\n        if ($.inViewport($row, this.bodyScrollable)) return;\n\n        const {\n            height\n        } = $row.getBoundingClientRect();\n        const {\n            top,\n            bottom\n        } = this.bodyScrollable.getBoundingClientRect();\n        const rowsInView = Math.floor((bottom - top) / height);\n\n        let offset = 0;\n        if (rowIndex > this._lastScrollTo) {\n            offset = height * ((rowIndex + 1) - rowsInView);\n        } else {\n            offset = height * ((rowIndex + 1) - 1);\n        }\n\n        this._lastScrollTo = rowIndex;\n        $.scrollTop(this.bodyScrollable, offset);\n    }\n\n    getRowHTML(row, props) {\n        const dataAttr = makeDataAttributeString(props);\n        let rowIdentifier = props.rowIndex;\n\n        if (props.isFilter) {\n            row = row.map(cell => (Object.assign({}, cell, {\n                content: this.getFilterInput({\n                    colIndex: cell.colIndex,\n                    name: cell.name\n                }),\n                isFilter: 1,\n                isHeader: undefined,\n                editable: false\n            })));\n\n            rowIdentifier = 'filter';\n        }\n\n        if (props.isHeader) {\n            rowIdentifier = 'header';\n        }\n\n        return `\n            <div class=\"dt-row dt-row-${rowIdentifier}\" ${dataAttr}>\n                ${row.map(cell => this.cellmanager.getCellHTML(cell)).join('')}\n            </div>\n        `;\n    }\n\n    getFilterInput(props) {\n        let title = `title=\"Filter based on ${props.name || 'Index'}\"`;\n        const dataAttr = makeDataAttributeString(props);\n        return `<input class=\"dt-filter dt-input\" type=\"text\" ${dataAttr} tabindex=\"1\"\n            ${props.colIndex === 0 ? 'disabled' : title} />`;\n    }\n\n    selector(rowIndex) {\n        return `.dt-row-${rowIndex}`;\n    }\n}\n\nvar hyperlist = createCommonjsModule(function (module, exports) {\n(function(f){{module.exports=f();}})(function(){return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof commonjsRequire==\"function\"&&commonjsRequire;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r);}return n[o].exports}var i=typeof commonjsRequire==\"function\"&&commonjsRequire;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\n// Default configuration.\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultConfig = {\n  width: '100%',\n  height: '100%'\n};\n\n// Check for valid number.\nvar isNumber = function isNumber(input) {\n  return Number(input) === Number(input);\n};\n\n/**\n * Creates a HyperList instance that virtually scrolls very large amounts of\n * data effortlessly.\n */\n\nvar HyperList = function () {\n  _createClass(HyperList, null, [{\n    key: 'create',\n    value: function create(element, userProvidedConfig) {\n      return new HyperList(element, userProvidedConfig);\n    }\n\n    /**\n     * Merge given css style on an element\n     * @param {DOMElement} element\n     * @param {Object} style\n     */\n\n  }, {\n    key: 'mergeStyle',\n    value: function mergeStyle(element, style) {\n      for (var i in style) {\n        if (element.style[i] !== style[i]) {\n          element.style[i] = style[i];\n        }\n      }\n    }\n  }, {\n    key: 'getMaxBrowserHeight',\n    value: function getMaxBrowserHeight() {\n      // Create two elements, the wrapper is `1px` tall and is transparent and\n      // positioned at the top of the page. Inside that is an element that gets\n      // set to 1 billion pixels. Then reads the max height the browser can\n      // calculate.\n      var wrapper = document.createElement('div');\n      var fixture = document.createElement('div');\n\n      // As said above, these values get set to put the fixture elements into the\n      // right visual state.\n      HyperList.mergeStyle(wrapper, { position: 'absolute', height: '1px', opacity: 0 });\n      HyperList.mergeStyle(fixture, { height: '1e7px' });\n\n      // Add the fixture into the wrapper element.\n      wrapper.appendChild(fixture);\n\n      // Apply to the page, the values won't kick in unless this is attached.\n      document.body.appendChild(wrapper);\n\n      // Get the maximum element height in pixels.\n      var maxElementHeight = fixture.offsetHeight;\n\n      // Remove the element immediately after reading the value.\n      document.body.removeChild(wrapper);\n\n      return maxElementHeight;\n    }\n  }]);\n\n  function HyperList(element, userProvidedConfig) {\n    var _this = this;\n\n    _classCallCheck(this, HyperList);\n\n    this._config = {};\n    this._lastRepaint = null;\n    this._maxElementHeight = HyperList.getMaxBrowserHeight();\n\n    this.refresh(element, userProvidedConfig);\n\n    var config = this._config;\n\n    // Create internal render loop.\n    var render = function render() {\n      var scrollTop = _this._getScrollPosition();\n      var lastRepaint = _this._lastRepaint;\n\n      _this._renderAnimationFrame = window.requestAnimationFrame(render);\n\n      if (scrollTop === lastRepaint) {\n        return;\n      }\n\n      if (!lastRepaint || Math.abs(scrollTop - lastRepaint) > _this._averageHeight) {\n        var rendered = _this._renderChunk();\n\n        _this._lastRepaint = scrollTop;\n\n        if (rendered !== false && typeof config.afterRender === 'function') {\n          config.afterRender();\n        }\n      }\n    };\n\n    render();\n  }\n\n  _createClass(HyperList, [{\n    key: 'destroy',\n    value: function destroy() {\n      window.cancelAnimationFrame(this._renderAnimationFrame);\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh(element, userProvidedConfig) {\n      var _this2 = this;\n\n      Object.assign(this._config, defaultConfig, userProvidedConfig);\n\n      if (!element || element.nodeType !== 1) {\n        throw new Error('HyperList requires a valid DOM Node container');\n      }\n\n      this._element = element;\n\n      var config = this._config;\n\n      var scroller = this._scroller || config.scroller || document.createElement(config.scrollerTagName || 'tr');\n\n      // Default configuration option `useFragment` to `true`.\n      if (typeof config.useFragment !== 'boolean') {\n        this._config.useFragment = true;\n      }\n\n      if (!config.generate) {\n        throw new Error('Missing required `generate` function');\n      }\n\n      if (!isNumber(config.total)) {\n        throw new Error('Invalid required `total` value, expected number');\n      }\n\n      if (!Array.isArray(config.itemHeight) && !isNumber(config.itemHeight)) {\n        throw new Error('\\n        Invalid required `itemHeight` value, expected number or array\\n      '.trim());\n      } else if (isNumber(config.itemHeight)) {\n        this._itemHeights = Array(config.total).fill(config.itemHeight);\n      } else {\n        this._itemHeights = config.itemHeight;\n      }\n\n      // Width and height should be coerced to string representations. Either in\n      // `%` or `px`.\n      Object.keys(defaultConfig).filter(function (prop) {\n        return prop in config;\n      }).forEach(function (prop) {\n        var value = config[prop];\n        var isValueNumber = isNumber(value);\n        var isValuePercent = isValueNumber ? false : value.slice(-1) === '%';\n\n        if (value && typeof value !== 'string' && typeof value !== 'number') {\n          var msg = 'Invalid optional `' + prop + '`, expected string or number';\n          throw new Error(msg);\n        } else if (isValueNumber) {\n          config[prop] = value + 'px';\n        }\n\n        if (prop !== 'height') {\n          return;\n        }\n\n        // Compute the containerHeight as number\n        var numberValue = isValueNumber ? value : parseInt(value.replace(/px|%/, ''), 10);\n\n        if (isValuePercent) {\n          _this2._containerHeight = window.innerHeight * numberValue / 100;\n        } else {\n          _this2._containerHeight = isNumber(value) ? value : numberValue;\n        }\n      });\n\n      // Decorate the container element with styles that will match\n      // the user supplied configuration.\n      var elementStyle = {\n        width: '' + config.width,\n        height: '' + config.height,\n        overflow: 'auto',\n        position: 'relative'\n      };\n\n      HyperList.mergeStyle(element, elementStyle);\n\n      var scrollerHeight = config.itemHeight * config.total;\n      var maxElementHeight = this._maxElementHeight;\n\n      if (scrollerHeight > maxElementHeight) {\n        console.warn(['HyperList: The maximum element height', maxElementHeight + 'px has', 'been exceeded; please reduce your item height.'].join(' '));\n      }\n\n      var scrollerStyle = {\n        opacity: '0',\n        position: 'absolute',\n        width: '1px',\n        height: scrollerHeight + 'px'\n      };\n\n      HyperList.mergeStyle(scroller, scrollerStyle);\n\n      // Only append the scroller element once.\n      if (!this._scroller) {\n        element.appendChild(scroller);\n      }\n\n      // Set the scroller instance.\n      this._scroller = scroller;\n      this._scrollHeight = this._computeScrollHeight();\n\n      // Reuse the item positions if refreshed, otherwise set to empty array.\n      this._itemPositions = this._itemPositions || Array(config.total).fill(0);\n\n      // Each index in the array should represent the position in the DOM.\n      this._computePositions(0);\n\n      // Render after refreshing. Force render if we're calling refresh manually.\n      this._renderChunk(this._lastRepaint !== null);\n\n      if (typeof config.afterRender === 'function') {\n        config.afterRender();\n      }\n    }\n  }, {\n    key: '_getRow',\n    value: function _getRow(i) {\n      var config = this._config;\n      var item = config.generate(i);\n      var height = item.height;\n\n      if (height !== undefined && isNumber(height)) {\n        item = item.element;\n\n        // The height isn't the same as predicted, compute positions again\n        if (height !== this._itemHeights) {\n          this._itemHeights[i] = height;\n          this._computePositions(i);\n          this._scrollHeight = this._computeScrollHeight(i);\n        }\n      } else {\n        height = this._itemHeights[i];\n      }\n\n      if (!item || item.nodeType !== 1) {\n        throw new Error('Generator did not return a DOM Node for index: ' + i);\n      }\n\n      var oldClass = item.getAttribute('class') || '';\n      item.setAttribute('class', oldClass + ' ' + (config.rowClassName || 'vrow'));\n\n      var top = this._itemPositions[i];\n\n      HyperList.mergeStyle(item, {\n        position: 'absolute',\n        top: top + 'px'\n      });\n\n      return item;\n    }\n  }, {\n    key: '_getScrollPosition',\n    value: function _getScrollPosition() {\n      var config = this._config;\n\n      if (typeof config.overrideScrollPosition === 'function') {\n        return config.overrideScrollPosition();\n      }\n\n      return this._element.scrollTop;\n    }\n  }, {\n    key: '_renderChunk',\n    value: function _renderChunk(force) {\n      var config = this._config;\n      var element = this._element;\n      var scrollTop = this._getScrollPosition();\n      var total = config.total;\n\n      var from = config.reverse ? this._getReverseFrom(scrollTop) : this._getFrom(scrollTop) - 1;\n\n      if (from < 0 || from - this._screenItemsLen < 0) {\n        from = 0;\n      }\n\n      if (!force && this._lastFrom === from) {\n        return false;\n      }\n\n      this._lastFrom = from;\n\n      var to = from + this._cachedItemsLen;\n\n      if (to > total || to + this._cachedItemsLen > total) {\n        to = total;\n      }\n\n      // Append all the new rows in a document fragment that we will later append\n      // to the parent node\n      var fragment = config.useFragment ? document.createDocumentFragment() : []\n      // Sometimes you'll pass fake elements to this tool and Fragments require\n      // real elements.\n\n\n      // The element that forces the container to scroll.\n      ;var scroller = this._scroller;\n\n      // Keep the scroller in the list of children.\n      fragment[config.useFragment ? 'appendChild' : 'push'](scroller);\n\n      for (var i = from; i < to; i++) {\n        var row = this._getRow(i);\n\n        fragment[config.useFragment ? 'appendChild' : 'push'](row);\n      }\n\n      if (config.applyPatch) {\n        return config.applyPatch(element, fragment);\n      }\n\n      element.innerHTML = '';\n      element.appendChild(fragment);\n    }\n  }, {\n    key: '_computePositions',\n    value: function _computePositions() {\n      var from = arguments.length <= 0 || arguments[0] === undefined ? 1 : arguments[0];\n\n      var config = this._config;\n      var total = config.total;\n      var reverse = config.reverse;\n\n      if (from < 1 && !reverse) {\n        from = 1;\n      }\n\n      for (var i = from; i < total; i++) {\n        if (reverse) {\n          if (i === 0) {\n            this._itemPositions[0] = this._scrollHeight - this._itemHeights[0];\n          } else {\n            this._itemPositions[i] = this._itemPositions[i - 1] - this._itemHeights[i];\n          }\n        } else {\n          this._itemPositions[i] = this._itemHeights[i - 1] + this._itemPositions[i - 1];\n        }\n      }\n    }\n  }, {\n    key: '_computeScrollHeight',\n    value: function _computeScrollHeight() {\n      var _this3 = this;\n\n      var config = this._config;\n      var total = config.total;\n      var scrollHeight = this._itemHeights.reduce(function (a, b) {\n        return a + b;\n      }, 0);\n\n      HyperList.mergeStyle(this._scroller, {\n        opacity: 0,\n        position: 'absolute',\n        width: '1px',\n        height: scrollHeight + 'px'\n      });\n\n      // Calculate the height median\n      var sortedItemHeights = this._itemHeights.slice(0).sort(function (a, b) {\n        return a - b;\n      });\n      var middle = Math.floor(total / 2);\n      var averageHeight = total % 2 === 0 ? (sortedItemHeights[middle] + sortedItemHeights[middle - 1]) / 2 : sortedItemHeights[middle];\n\n      var containerHeight = this._element.clientHeight ? this._element.clientHeight : this._containerHeight;\n      this._screenItemsLen = Math.ceil(containerHeight / averageHeight);\n      this._containerHeight = containerHeight;\n\n      // Cache 3 times the number of items that fit in the container viewport.\n      this._cachedItemsLen = Math.max(this._cachedItemsLen || 0, this._screenItemsLen * 3);\n      this._averageHeight = averageHeight;\n\n      if (config.reverse) {\n        window.requestAnimationFrame(function () {\n          _this3._element.scrollTop = scrollHeight;\n        });\n      }\n\n      return scrollHeight;\n    }\n  }, {\n    key: '_getFrom',\n    value: function _getFrom(scrollTop) {\n      var i = 0;\n\n      while (this._itemPositions[i] < scrollTop) {\n        i++;\n      }\n\n      return i;\n    }\n  }, {\n    key: '_getReverseFrom',\n    value: function _getReverseFrom(scrollTop) {\n      var i = this._config.total - 1;\n\n      while (i > 0 && this._itemPositions[i] < scrollTop + this._containerHeight) {\n        i--;\n      }\n\n      return i;\n    }\n  }]);\n\n  return HyperList;\n}();\n\nexports.default = HyperList;\nmodule.exports = exports['default'];\n\n},{}]},{},[1])(1)\n});\n});\n\nvar HyperList = unwrapExports(hyperlist);\n\nclass BodyRenderer {\n    constructor(instance) {\n        this.instance = instance;\n        this.options = instance.options;\n        this.datamanager = instance.datamanager;\n        this.rowmanager = instance.rowmanager;\n        this.cellmanager = instance.cellmanager;\n        this.bodyScrollable = instance.bodyScrollable;\n        this.footer = this.instance.footer;\n        this.log = instance.log;\n    }\n\n    renderRows(rows) {\n        this.visibleRows = rows;\n        this.visibleRowIndices = rows.map(row => row.meta.rowIndex);\n\n        if (rows.length === 0) {\n            this.bodyScrollable.innerHTML = this.getNoDataHTML();\n            return;\n        }\n\n        const rowViewOrder = this.datamanager.rowViewOrder.map(index => {\n            if (this.visibleRowIndices.includes(index)) {\n                return index;\n            }\n            return null;\n        }).filter(index => index !== null);\n\n        const computedStyle = getComputedStyle(this.bodyScrollable);\n\n        let config = {\n            width: computedStyle.width,\n            height: computedStyle.height,\n            itemHeight: this.options.cellHeight,\n            total: rows.length,\n            generate: (index) => {\n                const el = document.createElement('div');\n                const rowIndex = rowViewOrder[index];\n                const row = this.datamanager.getRow(rowIndex);\n                const rowHTML = this.rowmanager.getRowHTML(row, row.meta);\n                el.innerHTML = rowHTML;\n                return el.children[0];\n            },\n            afterRender: () => {\n                this.restoreState();\n            }\n        };\n\n        if (!this.hyperlist) {\n            this.hyperlist = new HyperList(this.bodyScrollable, config);\n        } else {\n            this.hyperlist.refresh(this.bodyScrollable, config);\n        }\n\n        this.renderFooter();\n    }\n\n    render() {\n        const rows = this.datamanager.getRowsForView();\n        this.renderRows(rows);\n        // setDimensions requires atleast 1 row to exist in dom\n        this.instance.setDimensions();\n    }\n\n    renderFooter() {\n        if (!this.options.showTotalRow) return;\n\n        const totalRow = this.getTotalRow();\n        let html = this.rowmanager.getRowHTML(totalRow, { isTotalRow: 1, rowIndex: 'totalRow' });\n\n        this.footer.innerHTML = html;\n    }\n\n    getTotalRow() {\n        const columns = this.datamanager.getColumns();\n        const totalRowTemplate = columns.map(col => {\n            let content = null;\n            if (['_rowIndex', '_checkbox'].includes(col.id)) {\n                content = '';\n            }\n            return {\n                content,\n                isTotalRow: 1,\n                colIndex: col.colIndex,\n                column: col\n            };\n        });\n\n        const totalRow = totalRowTemplate.map((cell, i) => {\n            if (cell.content === '') return cell;\n\n            if (this.options.hooks.columnTotal) {\n                const columnValues = this.visibleRows.map(row => row[i].content);\n                const result = this.options.hooks.columnTotal.call(this.instance, columnValues, cell);\n                if (result != null) {\n                    cell.content = result;\n                    return cell;\n                }\n            }\n\n            cell.content = this.visibleRows.reduce((acc, prevRow) => {\n                const prevCell = prevRow[i];\n                if (typeof prevCell.content === 'number') {\n                    if (acc == null) acc = 0;\n                    return acc + prevCell.content;\n                }\n                return acc;\n            }, cell.content);\n\n            return cell;\n        });\n\n        return totalRow;\n    }\n\n    restoreState() {\n        this.rowmanager.highlightCheckedRows();\n        this.cellmanager.selectAreaOnClusterChanged();\n        this.cellmanager.focusCellOnClusterChanged();\n    }\n\n    showToastMessage(message, hideAfter) {\n        this.instance.toastMessage.innerHTML = this.getToastMessageHTML(message);\n\n        if (hideAfter) {\n            setTimeout(() => {\n                this.clearToastMessage();\n            }, hideAfter * 1000);\n        }\n    }\n\n    clearToastMessage() {\n        this.instance.toastMessage.innerHTML = '';\n    }\n\n    getNoDataHTML() {\n        return `<div class=\"dt-scrollable__no-data\">${this.options.noDataMessage}</div>`;\n    }\n\n    getToastMessageHTML(message) {\n        return `<span class=\"dt-toast__message\">${message}</span>`;\n    }\n}\n\nclass Style {\n    constructor(instance) {\n        this.instance = instance;\n\n        linkProperties(this, this.instance, [\n            'options', 'datamanager', 'columnmanager',\n            'header', 'footer', 'bodyScrollable', 'datatableWrapper',\n            'getColumn', 'bodyRenderer'\n        ]);\n\n        this.scopeClass = 'dt-instance-' + instance.constructor.instances;\n        instance.datatableWrapper.classList.add(this.scopeClass);\n\n        const styleEl = document.createElement('style');\n        instance.wrapper.insertBefore(styleEl, instance.datatableWrapper);\n        this.styleEl = styleEl;\n\n        this.bindResizeWindow();\n        this.bindScrollHeader();\n    }\n\n    get stylesheet() {\n        return this.styleEl.sheet;\n    }\n\n    bindResizeWindow() {\n        this.onWindowResize = this.onWindowResize.bind(this);\n        this.onWindowResize = throttle$1(this.onWindowResize, 300);\n\n        if (this.options.layout === 'fluid') {\n            $.on(window, 'resize', this.onWindowResize);\n        }\n    }\n\n    bindScrollHeader() {\n        this._settingHeaderPosition = false;\n\n        $.on(this.bodyScrollable, 'scroll', (e) => {\n            if (this._settingHeaderPosition) return;\n\n            this._settingHeaderPosition = true;\n\n            requestAnimationFrame(() => {\n                const left = -e.target.scrollLeft;\n\n                $.style(this.header, {\n                    transform: `translateX(${left}px)`\n                });\n                $.style(this.footer, {\n                    transform: `translateX(${left}px)`\n                });\n                this._settingHeaderPosition = false;\n            });\n        });\n    }\n\n    onWindowResize() {\n        this.distributeRemainingWidth();\n        this.refreshColumnWidth();\n        this.setBodyStyle();\n    }\n\n    destroy() {\n        this.styleEl.remove();\n        $.off(window, 'resize', this.onWindowResize);\n    }\n\n    setStyle(selector, styleObject) {\n        if (selector.includes(',')) {\n            selector.split(',')\n                .map(s => s.trim())\n                .forEach(selector => {\n                    this.setStyle(selector, styleObject);\n                });\n            return;\n        }\n\n        selector = selector.trim();\n        if (!selector) return;\n\n        this._styleRulesMap = this._styleRulesMap || {};\n        const prefixedSelector = this._getPrefixedSelector(selector);\n\n        if (this._styleRulesMap[prefixedSelector]) {\n            this.removeStyle(selector);\n\n            // merge with old styleobject\n            styleObject = Object.assign({}, this._styleRulesMap[prefixedSelector], styleObject);\n        }\n\n        const styleString = this._getRuleString(styleObject);\n        const ruleString = `${prefixedSelector} { ${styleString} }`;\n\n        this._styleRulesMap[prefixedSelector] = styleObject;\n        this.stylesheet.insertRule(ruleString);\n    }\n\n    removeStyle(selector) {\n        if (selector.includes(',')) {\n            selector.split(',')\n                .map(s => s.trim())\n                .forEach(selector => {\n                    this.removeStyle(selector);\n                });\n            return;\n        }\n\n        selector = selector.trim();\n        if (!selector) return;\n\n        // find and remove\n        const prefixedSelector = this._getPrefixedSelector(selector);\n        const index = Array.from(this.stylesheet.cssRules)\n            .findIndex(rule => rule.selectorText === prefixedSelector);\n\n        if (index === -1) return;\n        this.stylesheet.deleteRule(index);\n    }\n\n    _getPrefixedSelector(selector) {\n        return `.${this.scopeClass} ${selector}`;\n    }\n\n    _getRuleString(styleObject) {\n        return Object.keys(styleObject)\n            .map(prop => {\n                let dashed = prop;\n                if (!prop.includes('-')) {\n                    dashed = camelCaseToDash(prop);\n                }\n                return `${dashed}:${styleObject[prop]};`;\n            })\n            .join('');\n    }\n\n    setDimensions() {\n        this.setCellHeight();\n        this.setupMinWidth();\n        this.setupNaturalColumnWidth();\n        this.setupColumnWidth();\n        this.distributeRemainingWidth();\n        this.setColumnStyle();\n        this.setBodyStyle();\n    }\n\n    setCellHeight() {\n        this.setStyle('.dt-cell', {\n            height: this.options.cellHeight + 'px'\n        });\n    }\n\n    setupMinWidth() {\n        $.each('.dt-cell--header', this.header).map(col => {\n            const { colIndex } = $.data(col);\n            const column = this.getColumn(colIndex);\n\n            if (!column.minWidth) {\n                const width = $.style($('.dt-cell__content', col), 'width');\n                // only set this once\n                column.minWidth = width;\n            }\n        });\n    }\n\n    setupNaturalColumnWidth() {\n        if (!$('.dt-row')) return;\n\n        $.each('.dt-row-header .dt-cell', this.header).map($headerCell => {\n            const { colIndex } = $.data($headerCell);\n            const column = this.datamanager.getColumn(colIndex);\n            let width = $.style($('.dt-cell__content', $headerCell), 'width');\n            if (typeof width === 'number' && width >= this.options.minimumColumnWidth) {\n                column.naturalWidth = width;\n            } else {\n                column.naturalWidth = this.options.minimumColumnWidth;\n            }\n        });\n\n        // set initial width as naturally calculated by table's first row\n        $.each('.dt-row-0 .dt-cell', this.bodyScrollable).map($cell => {\n            const {\n                colIndex\n            } = $.data($cell);\n            const column = this.datamanager.getColumn(colIndex);\n\n            let naturalWidth = $.style($('.dt-cell__content', $cell), 'width');\n\n            if (typeof naturalWidth === 'number' && naturalWidth >= column.naturalWidth) {\n                column.naturalWidth = naturalWidth;\n            } else {\n                column.naturalWidth = column.naturalWidth;\n            }\n        });\n    }\n\n    setupColumnWidth() {\n        if (this.options.layout === 'ratio') {\n            let totalWidth = $.style(this.datatableWrapper, 'width');\n\n            if (this.options.serialNoColumn) {\n                const rowIndexColumn = this.datamanager.getColumnById('_rowIndex');\n                totalWidth = totalWidth - rowIndexColumn.width - 1;\n            }\n\n            if (this.options.checkboxColumn) {\n                const rowIndexColumn = this.datamanager.getColumnById('_checkbox');\n                totalWidth = totalWidth - rowIndexColumn.width - 1;\n            }\n\n            const totalParts = this.datamanager.getColumns()\n                .map(column => {\n                    if (column.id === '_rowIndex' || column.id === '_checkbox') {\n                        return 0;\n                    }\n                    if (!column.width) {\n                        column.width = 1;\n                    }\n                    column.ratioWidth = parseInt(column.width, 10);\n                    return column.ratioWidth;\n                })\n                .reduce((a, c) => a + c);\n\n            const onePart = totalWidth / totalParts;\n\n            this.datamanager.getColumns()\n                .map(column => {\n                    if (column.id === '_rowIndex' || column.id === '_checkbox') return;\n                    column.width = Math.floor(onePart * column.ratioWidth) - 1;\n                });\n        } else {\n            this.datamanager.getColumns()\n                .map(column => {\n                    if (!column.width) {\n                        column.width = column.naturalWidth;\n                    }\n                    if (column.id === '_rowIndex') {\n                        column.width = this.getRowIndexColumnWidth();\n                    }\n                    if (column.width < this.options.minimumColumnWidth) {\n                        column.width = this.options.minimumColumnWidth;\n                    }\n                });\n        }\n    }\n\n    distributeRemainingWidth() {\n        if (this.options.layout !== 'fluid') return;\n\n        const wrapperWidth = $.style(this.instance.datatableWrapper, 'width');\n        let firstRow = $('.dt-row', this.bodyScrollable);\n        let firstRowWidth = wrapperWidth;\n        if (!firstRow) {\n            let headerRow = $('.dt-row', this.instance.header);\n            let cellWidths = Array.from(headerRow.children)\n                .map(cell => cell.offsetWidth);\n            firstRowWidth = cellWidths.reduce((sum, a) => sum + a, 0);\n        } else {\n            firstRowWidth = $.style(firstRow, 'width');\n        }\n        const resizableColumns = this.datamanager.getColumns().filter(col => col.resizable);\n        const deltaWidth = (wrapperWidth - firstRowWidth) / resizableColumns.length;\n\n        resizableColumns.map(col => {\n            const width = $.style(this.getColumnHeaderElement(col.colIndex), 'width');\n            let finalWidth = Math.floor(width + deltaWidth) - 2;\n\n            this.datamanager.updateColumn(col.colIndex, {\n                width: finalWidth\n            });\n        });\n    }\n\n    setColumnStyle() {\n        // align columns\n        this.datamanager.getColumns()\n            .map(column => {\n                // alignment\n                if (!column.align) {\n                    column.align = 'left';\n                }\n                if (!['left', 'center', 'right'].includes(column.align)) {\n                    column.align = 'left';\n                }\n                this.setStyle(`.dt-cell--col-${column.colIndex}`, {\n                    'text-align': column.align\n                });\n\n                // width\n                this.columnmanager.setColumnHeaderWidth(column.colIndex);\n                this.columnmanager.setColumnWidth(column.colIndex);\n            });\n    }\n\n    refreshColumnWidth() {\n        this.datamanager.getColumns()\n            .map(column => {\n                this.columnmanager.setColumnHeaderWidth(column.colIndex);\n                this.columnmanager.setColumnWidth(column.colIndex);\n            });\n    }\n\n    setBodyStyle() {\n        const bodyWidth = $.style(this.datatableWrapper, 'width');\n        const firstRow = $('.dt-row', this.bodyScrollable);\n        if (!firstRow) return;\n        const rowWidth = $.style(firstRow, 'width');\n\n        let width = bodyWidth > rowWidth ? rowWidth : bodyWidth;\n        $.style(this.bodyScrollable, {\n            width: width + 'px'\n        });\n\n        // remove the body height, so that it resets to it's original\n        $.removeStyle(this.bodyScrollable, 'height');\n\n        // when there are less rows than the container\n        // adapt the container height\n        let bodyHeight = $.getStyle(this.bodyScrollable, 'height');\n        const scrollHeight = (this.bodyRenderer.hyperlist || {})._scrollHeight || Infinity;\n        const hasHorizontalOverflow = $.hasHorizontalOverflow(this.bodyScrollable);\n\n        let height;\n\n        if (scrollHeight < bodyHeight) {\n            height = scrollHeight;\n\n            // account for scrollbar size when\n            // there is horizontal overflow\n            if (hasHorizontalOverflow) {\n                height += $.scrollbarSize();\n            }\n\n            $.style(this.bodyScrollable, {\n                height: height + 'px'\n            });\n        }\n\n        const verticalOverflow = this.bodyScrollable.scrollHeight - this.bodyScrollable.offsetHeight;\n        if (verticalOverflow < $.scrollbarSize()) {\n            // if verticalOverflow is less than scrollbar size\n            // then most likely scrollbar is causing the scroll\n            // which is not needed\n            $.style(this.bodyScrollable, {\n                overflowY: 'hidden'\n            });\n        }\n\n        if (this.options.layout === 'fluid') {\n            $.style(this.bodyScrollable, {\n                overflowX: 'hidden'\n            });\n        }\n    }\n\n    getColumnHeaderElement(colIndex) {\n        colIndex = +colIndex;\n        if (colIndex < 0) return null;\n        return $(`.dt-cell--col-${colIndex}`, this.header);\n    }\n\n    getRowIndexColumnWidth() {\n        const rowCount = this.datamanager.getRowCount();\n        const padding = 22;\n        return $.measureTextWidth(rowCount + '') + padding;\n    }\n}\n\nconst KEYCODES = {\n    13: 'enter',\n    91: 'meta',\n    16: 'shift',\n    17: 'ctrl',\n    18: 'alt',\n    37: 'left',\n    38: 'up',\n    39: 'right',\n    40: 'down',\n    9: 'tab',\n    27: 'esc',\n    67: 'c',\n    70: 'f',\n    86: 'v'\n};\n\nclass Keyboard {\n    constructor(element) {\n        this.listeners = {};\n        $.on(element, 'keydown', this.handler.bind(this));\n    }\n\n    handler(e) {\n        let key = KEYCODES[e.keyCode];\n\n        if (e.shiftKey && key !== 'shift') {\n            key = 'shift+' + key;\n        }\n\n        if ((e.ctrlKey && key !== 'ctrl') || (e.metaKey && key !== 'meta')) {\n            key = 'ctrl+' + key;\n        }\n\n        const listeners = this.listeners[key];\n\n        if (listeners && listeners.length > 0) {\n            for (let listener of listeners) {\n                const preventBubbling = listener(e);\n                if (preventBubbling === undefined || preventBubbling === true) {\n                    e.preventDefault();\n                }\n            }\n        }\n    }\n\n    on(key, listener) {\n        const keys = key.split(',').map(k => k.trim());\n\n        keys.map(key => {\n            this.listeners[key] = this.listeners[key] || [];\n            this.listeners[key].push(listener);\n        });\n    }\n}\n\nvar en = {\n\t\"Sort Ascending\": \"Sort Ascending\",\n\t\"Sort Descending\": \"Sort Descending\",\n\t\"Reset sorting\": \"Reset sorting\",\n\t\"Remove column\": \"Remove column\",\n\t\"No Data\": \"No Data\",\n\t\"{count} cells copied\": {\"1\":\"{count} cell copied\",\"default\":\"{count} cells copied\"},\n\t\"{count} rows selected\": {\"1\":\"{count} row selected\",\"default\":\"{count} rows selected\"}\n};\n\nvar de = {\n\t\"Sort Ascending\": \"Aufsteigend sortieren\",\n\t\"Sort Descending\": \"Absteigend sortieren\",\n\t\"Reset sorting\": \"Sortierung zurcksetzen\",\n\t\"Remove column\": \"Spalte entfernen\",\n\t\"No Data\": \"Keine Daten\",\n\t\"{count} cells copied\": {\"1\":\"{count} Zelle kopiert\",\"default\":\"{count} Zellen kopiert\"},\n\t\"{count} rows selected\": {\"1\":\"{count} Zeile ausgewhlt\",\"default\":\"{count} Zeilen ausgewhlt\"}\n};\n\nvar fr = {\n\t\"Sort Ascending\": \"Trier par ordre croissant\",\n\t\"Sort Descending\": \"Trier par ordre dcroissant\",\n\t\"Reset sorting\": \"Rinitialiser le tri\",\n\t\"Remove column\": \"Supprimer colonne\",\n\t\"No Data\": \"Pas de donnes\",\n\t\"{count} cells copied\": {\"1\":\"{count} cellule copie\",\"default\":\"{count} cellules copies\"},\n\t\"{count} rows selected\": {\"1\":\"{count} ligne slectionne\",\"default\":\"{count} lignes slectionnes\"}\n};\n\nvar it = {\n\t\"Sort Ascending\": \"Ordinamento ascendente\",\n\t\"Sort Descending\": \"Ordinamento decrescente\",\n\t\"Reset sorting\": \"Azzeramento ordinamento\",\n\t\"Remove column\": \"Rimuovi colonna\",\n\t\"No Data\": \"Nessun dato\",\n\t\"{count} cells copied\": {\"1\":\"Copiato {count} cella\",\"default\":\"{count} celle copiate\"},\n\t\"{count} rows selected\": {\"1\":\"{count} linea selezionata\",\"default\":\"{count} linee selezionate\"}\n};\n\nfunction getTranslations() {\n    return {\n        en,\n        de,\n        fr,\n        it,\n    };\n}\n\nclass TranslationManager {\n    constructor(language) {\n        this.language = language;\n        this.translations = getTranslations();\n    }\n\n    addTranslations(translations) {\n        this.translations = Object.assign(this.translations, translations);\n    }\n\n    translate(sourceText, args) {\n        let translation = (this.translations[this.language] &&\n            this.translations[this.language][sourceText]) || sourceText;\n\n        if (typeof translation === 'object') {\n            translation = args && args.count ?\n                this.getPluralizedTranslation(translation, args.count) :\n                sourceText;\n        }\n\n        return format(translation, args || {});\n    }\n\n    getPluralizedTranslation(translations, count) {\n        return translations[count] || translations['default'];\n    }\n}\n\nfunction filterRows(rows, filters) {\n    let filteredRowIndices = [];\n\n    if (Object.keys(filters).length === 0) {\n        return rows.map(row => row.meta.rowIndex);\n    }\n\n    for (let colIndex in filters) {\n        const keyword = filters[colIndex];\n\n        const filteredRows = filteredRowIndices.length ?\n            filteredRowIndices.map(i => rows[i]) :\n            rows;\n\n        const cells = filteredRows.map(row => row[colIndex]);\n\n        let filter = guessFilter(keyword);\n        let filterMethod = getFilterMethod(rows, filter);\n\n        if (filterMethod) {\n            filteredRowIndices = filterMethod(filter.text, cells);\n        } else {\n            filteredRowIndices = cells.map(cell => cell.rowIndex);\n        }\n    }\n\n    return filteredRowIndices;\n}\nfunction getFilterMethod(rows, filter) {\n    const getFormattedValue = cell => {\n        let formatter = CellManager.getCustomCellFormatter(cell);\n        if (formatter && cell.content) {\n            cell.html = formatter(cell.content, rows[cell.rowIndex], cell.column, rows[cell.rowIndex], true);\n            return stripHTML(cell.html);\n        }\n        return cell.content || '';\n    };\n\n    const stringCompareValue = cell =>\n        String(stripHTML(cell.html || '') || getFormattedValue(cell)).toLowerCase();\n\n    const numberCompareValue = cell => parseFloat(cell.content);\n\n    const getCompareValues = (cell, keyword) => {\n        if (cell.column.compareValue) {\n            const compareValues = cell.column.compareValue(cell, keyword);\n            if (compareValues && Array.isArray(compareValues)) return compareValues;\n        }\n\n        // check if it can be converted to number\n        const float = numberCompareValue(cell);\n        if (!isNaN(float)) {\n            return [float, keyword];\n        }\n\n        return [stringCompareValue(cell), keyword];\n    };\n\n    let filterMethodMap = {\n        contains(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const hay = stringCompareValue(cell);\n                    const needle = (keyword || '').toLowerCase();\n                    return !needle || hay.includes(needle);\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        greaterThan(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const [compareValue, keywordValue] = getCompareValues(cell, keyword);\n                    return compareValue > keywordValue;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        lessThan(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const [compareValue, keywordValue] = getCompareValues(cell, keyword);\n                    return compareValue < keywordValue;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        equals(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const value = parseFloat(cell.content);\n                    return value === keyword;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        notEquals(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const value = parseFloat(cell.content);\n                    return value !== keyword;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        range(rangeValues, cells) {\n            return cells\n                .filter(cell => {\n                    const values1 = getCompareValues(cell, rangeValues[0]);\n                    const values2 = getCompareValues(cell, rangeValues[1]);\n                    const value = values1[0];\n                    return value >= values1[1] && value <= values2[1];\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        containsNumber(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    let number = parseFloat(keyword, 10);\n                    let string = keyword;\n                    let hayNumber = numberCompareValue(cell);\n                    let hayString = stringCompareValue(cell);\n\n                    return number === hayNumber || hayString.includes(string);\n                })\n                .map(cell => cell.rowIndex);\n        }\n    };\n\n    return filterMethodMap[filter.type];\n}\n\nfunction guessFilter(keyword = '') {\n    if (keyword.length === 0) return {};\n\n    let compareString = keyword;\n\n    if (['>', '<', '='].includes(compareString[0])) {\n        compareString = keyword.slice(1);\n    } else if (compareString.startsWith('!=')) {\n        compareString = keyword.slice(2);\n    }\n\n    if (keyword.startsWith('>')) {\n        if (compareString) {\n            return {\n                type: 'greaterThan',\n                text: compareString.trim()\n            };\n        }\n    }\n\n    if (keyword.startsWith('<')) {\n        if (compareString) {\n            return {\n                type: 'lessThan',\n                text: compareString.trim()\n            };\n        }\n    }\n\n    if (keyword.startsWith('=')) {\n        if (isNumber(compareString)) {\n            return {\n                type: 'equals',\n                text: Number(keyword.slice(1).trim())\n            };\n        }\n    }\n\n    if (isNumber(compareString)) {\n        return {\n            type: 'containsNumber',\n            text: compareString\n        };\n    }\n\n    if (keyword.startsWith('!=')) {\n        if (isNumber(compareString)) {\n            return {\n                type: 'notEquals',\n                text: Number(keyword.slice(2).trim())\n            };\n        }\n    }\n\n    if (keyword.split(':').length === 2 && keyword.split(':').every(v => isNumber(v.trim()))) {\n        compareString = keyword.split(':');\n        return {\n            type: 'range',\n            text: compareString.map(v => v.trim())\n        };\n    }\n\n    return {\n        type: 'contains',\n        text: compareString.toLowerCase()\n    };\n}\n\nfunction getDefaultOptions(instance) {\n    return {\n        columns: [],\n        data: [],\n        dropdownButton: icons.chevronDown,\n        headerDropdown: [\n            {\n                label: instance.translate('Sort Ascending'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'asc');\n                }\n            },\n            {\n                label: instance.translate('Sort Descending'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'desc');\n                }\n            },\n            {\n                label: instance.translate('Reset sorting'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'none');\n                }\n            },\n            {\n                label: instance.translate('Remove column'),\n                action: function (column) {\n                    this.removeColumn(column.colIndex);\n                }\n            }\n        ],\n        events: {\n            onRemoveColumn(column) {},\n            onSwitchColumn(column1, column2) {},\n            onSortColumn(column) {},\n            onCheckRow(row) {},\n            onDestroy() {}\n        },\n        hooks: {\n            columnTotal: null\n        },\n        sortIndicator: {\n            asc: '',\n            desc: '',\n            none: ''\n        },\n        overrideComponents: {\n            // ColumnManager: CustomColumnManager\n        },\n        filterRows: filterRows,\n        freezeMessage: '',\n        getEditor: null,\n        serialNoColumn: true,\n        checkboxColumn: false,\n        clusterize: true,\n        logs: false,\n        layout: 'fixed', // fixed, fluid, ratio\n        noDataMessage: instance.translate('No Data'),\n        cellHeight: 40,\n        minimumColumnWidth: 30,\n        inlineFilters: false,\n        treeView: false,\n        checkedRowStatus: true,\n        dynamicRowHeight: false,\n        pasteFromClipboard: false,\n        showTotalRow: false,\n        direction: 'ltr',\n        disableReorderColumn: false\n    };\n}\n\nlet defaultComponents = {\n    DataManager,\n    CellManager,\n    ColumnManager,\n    RowManager,\n    BodyRenderer,\n    Style,\n    Keyboard\n};\n\nclass DataTable {\n    constructor(wrapper, options) {\n        DataTable.instances++;\n\n        if (typeof wrapper === 'string') {\n            // css selector\n            wrapper = document.querySelector(wrapper);\n        }\n        this.wrapper = wrapper;\n        if (!(this.wrapper instanceof HTMLElement)) {\n            throw new Error('Invalid argument given for `wrapper`');\n        }\n\n        this.initializeTranslations(options);\n        this.setDefaultOptions();\n        this.buildOptions(options);\n        this.prepare();\n        this.initializeComponents();\n\n        if (this.options.data) {\n            this.refresh();\n            this.columnmanager.applyDefaultSortOrder();\n        }\n    }\n\n    initializeTranslations(options) {\n        this.language = options.language || 'en';\n        this.translationManager = new TranslationManager(this.language);\n\n        if (options.translations) {\n            this.translationManager.addTranslations(options.translations);\n        }\n    }\n\n    setDefaultOptions() {\n        this.DEFAULT_OPTIONS = getDefaultOptions(this);\n    }\n\n    buildOptions(options) {\n        this.options = this.options || {};\n\n        this.options = Object.assign(\n            {}, this.DEFAULT_OPTIONS,\n            this.options || {}, options\n        );\n\n        options.headerDropdown = options.headerDropdown || [];\n        this.options.headerDropdown = [\n            ...this.DEFAULT_OPTIONS.headerDropdown,\n            ...options.headerDropdown\n        ];\n\n        // custom user events\n        this.events = Object.assign(\n            {}, this.DEFAULT_OPTIONS.events,\n            this.options.events || {},\n            options.events || {}\n        );\n        this.fireEvent = this.fireEvent.bind(this);\n    }\n\n    prepare() {\n        this.prepareDom();\n        this.unfreeze();\n    }\n\n    initializeComponents() {\n        let components = Object.assign({}, defaultComponents, this.options.overrideComponents);\n        let {\n            Style: Style$$1,\n            Keyboard: Keyboard$$1,\n            DataManager: DataManager$$1,\n            RowManager: RowManager$$1,\n            ColumnManager: ColumnManager$$1,\n            CellManager: CellManager$$1,\n            BodyRenderer: BodyRenderer$$1\n        } = components;\n\n        this.style = new Style$$1(this);\n        this.keyboard = new Keyboard$$1(this.wrapper);\n        this.datamanager = new DataManager$$1(this.options);\n        this.rowmanager = new RowManager$$1(this);\n        this.columnmanager = new ColumnManager$$1(this);\n        this.cellmanager = new CellManager$$1(this);\n        this.bodyRenderer = new BodyRenderer$$1(this);\n    }\n\n    prepareDom() {\n        this.wrapper.innerHTML = `\n            <div class=\"datatable\" dir=\"${this.options.direction}\">\n                <div class=\"dt-header\"></div>\n                <div class=\"dt-scrollable\"></div>\n                <div class=\"dt-footer\"></div>\n                <div class=\"dt-freeze\">\n                    <span class=\"dt-freeze__message\">\n                        ${this.options.freezeMessage}\n                    </span>\n                </div>\n                <div class=\"dt-toast\"></div>\n                <div class=\"dt-dropdown-container\"></div>\n                <textarea class=\"dt-paste-target\"></textarea>\n            </div>\n        `;\n\n        this.datatableWrapper = $('.datatable', this.wrapper);\n        this.header = $('.dt-header', this.wrapper);\n        this.footer = $('.dt-footer', this.wrapper);\n        this.bodyScrollable = $('.dt-scrollable', this.wrapper);\n        this.freezeContainer = $('.dt-freeze', this.wrapper);\n        this.toastMessage = $('.dt-toast', this.wrapper);\n        this.pasteTarget = $('.dt-paste-target', this.wrapper);\n        this.dropdownContainer = $('.dt-dropdown-container', this.wrapper);\n    }\n\n    refresh(data, columns) {\n        this.datamanager.init(data, columns);\n        this.render();\n        this.setDimensions();\n    }\n\n    destroy() {\n        this.wrapper.innerHTML = '';\n        this.style.destroy();\n        this.fireEvent('onDestroy');\n    }\n\n    appendRows(rows) {\n        this.datamanager.appendRows(rows);\n        this.rowmanager.refreshRows();\n    }\n\n    refreshRow(row, rowIndex) {\n        this.rowmanager.refreshRow(row, rowIndex);\n    }\n\n    render() {\n        this.renderHeader();\n        this.renderBody();\n    }\n\n    renderHeader() {\n        this.columnmanager.renderHeader();\n    }\n\n    renderBody() {\n        this.bodyRenderer.render();\n    }\n\n    setDimensions() {\n        this.style.setDimensions();\n    }\n\n    showToastMessage(message, hideAfter) {\n        this.bodyRenderer.showToastMessage(message, hideAfter);\n    }\n\n    clearToastMessage() {\n        this.bodyRenderer.clearToastMessage();\n    }\n\n    getColumn(colIndex) {\n        return this.datamanager.getColumn(colIndex);\n    }\n\n    getColumns() {\n        return this.datamanager.getColumns();\n    }\n\n    getRows() {\n        return this.datamanager.getRows();\n    }\n\n    getCell(colIndex, rowIndex) {\n        return this.datamanager.getCell(colIndex, rowIndex);\n    }\n\n    getColumnHeaderElement(colIndex) {\n        return this.columnmanager.getColumnHeaderElement(colIndex);\n    }\n\n    getViewportHeight() {\n        if (!this.viewportHeight) {\n            this.viewportHeight = $.style(this.bodyScrollable, 'height');\n        }\n\n        return this.viewportHeight;\n    }\n\n    sortColumn(colIndex, sortOrder) {\n        this.columnmanager.sortColumn(colIndex, sortOrder);\n    }\n\n    removeColumn(colIndex) {\n        this.columnmanager.removeColumn(colIndex);\n    }\n\n    scrollToLastColumn() {\n        this.datatableWrapper.scrollLeft = 9999;\n    }\n\n    freeze() {\n        $.style(this.freezeContainer, {\n            display: ''\n        });\n    }\n\n    unfreeze() {\n        $.style(this.freezeContainer, {\n            display: 'none'\n        });\n    }\n\n    updateOptions(options) {\n        this.buildOptions(options);\n    }\n\n    fireEvent(eventName, ...args) {\n        // fire internalEventHandlers if any\n        // and then user events\n        const handlers = [\n            ...(this._internalEventHandlers[eventName] || []),\n            this.events[eventName]\n        ].filter(Boolean);\n\n        for (let handler of handlers) {\n            handler.apply(this, args);\n        }\n    }\n\n    on(event, handler) {\n        this._internalEventHandlers = this._internalEventHandlers || {};\n        this._internalEventHandlers[event] = this._internalEventHandlers[event] || [];\n        this._internalEventHandlers[event].push(handler);\n    }\n\n    log() {\n        if (this.options.logs) {\n            console.log.apply(console, arguments);\n        }\n    }\n\n    translate(str, args) {\n        return this.translationManager.translate(str, args);\n    }\n}\n\nDataTable.instances = 0;\n\nvar name = \"frappe-datatable\";\nvar version = \"0.0.0-development\";\nvar description = \"A modern datatable library for the web\";\nvar main = \"dist/frappe-datatable.cjs.js\";\nvar unpkg = \"dist/frappe-datatable.min.js\";\nvar jsdelivr = \"dist/frappe-datatable.min.js\";\nvar scripts = {\"start\":\"yarn run dev\",\"build\":\"rollup -c && NODE_ENV=production rollup -c\",\"dev\":\"rollup -c -w\",\"cy:server\":\"http-server -p 8989\",\"cy:open\":\"cypress open\",\"cy:run\":\"cypress run\",\"test\":\"start-server-and-test cy:server http://localhost:8989 cy:run\",\"test-local\":\"start-server-and-test cy:server http://localhost:8989 cy:open\",\"travis-deploy-once\":\"travis-deploy-once\",\"semantic-release\":\"semantic-release\",\"lint\":\"eslint src\",\"lint-and-build\":\"yarn lint && yarn build\",\"commit\":\"npx git-cz\"};\nvar files = [\"dist\",\"src\"];\nvar devDependencies = {\"autoprefixer\":\"^9.0.0\",\"chai\":\"3.5.0\",\"cypress\":\"^9.2.0\",\"cz-conventional-changelog\":\"^2.1.0\",\"deepmerge\":\"^2.0.1\",\"eslint\":\"^5.0.1\",\"eslint-config-airbnb\":\"^16.1.0\",\"eslint-config-airbnb-base\":\"^12.1.0\",\"eslint-plugin-import\":\"^2.11.0\",\"http-server\":\"^0.11.1\",\"mocha\":\"3.3.0\",\"postcss-custom-properties\":\"^7.0.0\",\"postcss-nested\":\"^3.0.0\",\"rollup\":\"^0.59.4\",\"rollup-plugin-commonjs\":\"^8.3.0\",\"rollup-plugin-eslint\":\"^4.0.0\",\"rollup-plugin-json\":\"^2.3.0\",\"rollup-plugin-node-resolve\":\"^3.0.3\",\"rollup-plugin-postcss\":\"^1.2.8\",\"rollup-plugin-uglify-es\":\"^0.0.1\",\"semantic-release\":\"^17.1.1\",\"start-server-and-test\":\"^1.4.1\",\"travis-deploy-once\":\"^5.0.1\"};\nvar repository = {\"type\":\"git\",\"url\":\"https://github.com/frappe/datatable.git\"};\nvar keywords = [\"datatable\",\"data\",\"grid\",\"table\"];\nvar author = \"Faris Ansari\";\nvar license = \"MIT\";\nvar bugs = {\"url\":\"https://github.com/frappe/datatable/issues\"};\nvar homepage = \"https://frappe.io/datatable\";\nvar dependencies = {\"hyperlist\":\"^1.0.0-beta\",\"lodash\":\"^4.17.5\",\"sortablejs\":\"^1.7.0\"};\nvar config = {\"commitizen\":{\"path\":\"cz-conventional-changelog\"}};\nvar packageJson = {\n\tname: name,\n\tversion: version,\n\tdescription: description,\n\tmain: main,\n\tunpkg: unpkg,\n\tjsdelivr: jsdelivr,\n\tscripts: scripts,\n\tfiles: files,\n\tdevDependencies: devDependencies,\n\trepository: repository,\n\tkeywords: keywords,\n\tauthor: author,\n\tlicense: license,\n\tbugs: bugs,\n\thomepage: homepage,\n\tdependencies: dependencies,\n\tconfig: config\n};\n\nDataTable.__version__ = packageJson.version;\n\nmodule.exports = DataTable;\n","/**\n * frappe.views.ReportView\n */\nimport DataTable from 'frappe-datatable';\n\nfrappe.provide('frappe.views');\n\nfrappe.views.ReportView = class ReportView extends frappe.views.ListView {\n\tget view_name() {\n\t\treturn 'Report';\n\t}\n\n\trender_header() {\n\t\t// Override List View Header\n\t}\n\n\tsetup_defaults() {\n\t\tsuper.setup_defaults();\n\t\tthis.page_title = __('Report:') + ' ' + this.page_title;\n\t\tthis.view = 'Report';\n\n\t\tconst route = frappe.get_route();\n\t\tif (route.length === 4) {\n\t\t\tthis.report_name = route[3];\n\t\t}\n\n\t\tif (this.report_name) {\n\t\t\treturn this.get_report_doc()\n\t\t\t\t.then(doc => {\n\t\t\t\t\tthis.report_doc = doc;\n\t\t\t\t\tthis.report_doc.json = JSON.parse(this.report_doc.json);\n\n\t\t\t\t\tthis.filters = this.report_doc.json.filters;\n\t\t\t\t\tthis.order_by = this.report_doc.json.order_by;\n\t\t\t\t\tthis.add_totals_row = this.report_doc.json.add_totals_row;\n\t\t\t\t\tthis.page_title = __(this.report_name);\n\t\t\t\t\tthis.page_length = this.report_doc.json.page_length || 20;\n\t\t\t\t\tthis.order_by = this.report_doc.json.order_by || 'modified desc';\n\t\t\t\t\tthis.chart_args = this.report_doc.json.chart_args;\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.add_totals_row = this.view_user_settings.add_totals_row || 0;\n\t\t\tthis.chart_args = this.view_user_settings.chart_args;\n\t\t}\n\t\treturn this.get_list_view_settings();\n\t}\n\n\tsetup_view() {\n\t\tthis.setup_columns();\n\t\tsuper.setup_new_doc_event();\n\t\tthis.setup_events();\n\t\tthis.page.main.addClass(\"report-view\");\n\t}\n\n\tsetup_events() {\n\t\tif (this.list_view_settings && this.list_view_settings.disable_auto_refresh) {\n\t\t\treturn;\n\t\t}\n\t\tfrappe.socketio.doctype_subscribe(this.doctype);\n\t\tfrappe.realtime.on(\"list_update\", (data) => this.on_update(data));\n\t}\n\n\tsetup_page() {\n\t\tthis.menu_items = this.report_menu_items();\n\t\tsuper.setup_page();\n\t}\n\n\ttoggle_side_bar() {\n\t\tsuper.toggle_side_bar();\n\t\t// refresh datatable when sidebar is toggled to accomodate extra space\n\t\tthis.render(true);\n\t}\n\n\tsetup_result_area() {\n\t\tsuper.setup_result_area();\n\t\tthis.setup_charts_area();\n\t\tthis.$datatable_wrapper = $('<div class=\"datatable-wrapper\">');\n\t\tthis.$result.append(this.$datatable_wrapper);\n\t}\n\n\tsetup_charts_area() {\n\t\tthis.$charts_wrapper = $(`<div class=\"charts-wrapper hidden\">\n\t\t\t<div class=\"text-right\"><button class=\"btn btn-default btn-xs btn-chart-configure\"\n\t\t\t\tstyle=\"margin-right: 15px; margin-top: 15px\">Configure</button></div>\n\t\t\t<div class=\"charts-inner-wrapper\"></div>\n\t\t</div>`);\n\t\tthis.$result.append(this.$charts_wrapper);\n\t\tthis.$charts_wrapper.find('.btn-chart-configure').on('click', () => {\n\t\t\tthis.setup_charts();\n\t\t});\n\t}\n\n\tsetup_paging_area() {\n\t\tsuper.setup_paging_area();\n\t\tconst message = __('For comparison, use >5, <10 or =324. For ranges, use 5:10 (for values between 5 & 10).');\n\t\tthis.$paging_area.find('.level-left').append(\n\t\t\t`<span class=\"comparison-message text-muted\">${message}</span>`\n\t\t)\n\t}\n\n\tsetup_sort_selector() {\n\t\tthis.sort_selector = new frappe.ui.SortSelector({\n\t\t\tparent: this.filter_area.$filter_list_wrapper,\n\t\t\tdoctype: this.doctype,\n\t\t\targs: this.order_by,\n\t\t\tonchange: this.on_sort_change.bind(this)\n\t\t});\n\n\t\t//Setup groupby for reports\n\t\tthis.group_by_control = new frappe.ui.GroupBy(this);\n\t\tif (this.report_doc && this.report_doc.json.group_by) {\n\t\t\tthis.group_by_control.apply_settings(this.report_doc.json.group_by);\n\t\t}\n\t\tif (this.view_user_settings && this.view_user_settings.group_by) {\n\t\t\tthis.group_by_control.apply_settings(this.view_user_settings.group_by);\n\t\t}\n\n\t}\n\n\tget_args() {\n\t\tconst args = super.get_args();\n\t\tdelete args.group_by;\n\t\tthis.group_by_control.set_args(args);\n\t\treturn args;\n\t}\n\n\tbefore_refresh() {\n\t\tif (this.report_doc) {\n\t\t\t// don't parse frappe.route_options if this is a Custom Report\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\treturn super.before_refresh();\n\t}\n\n\tafter_render() {\n\t\tif (this.report_doc) {\n\t\t\tthis.set_dirty_state_for_custom_report();\n\t\t} else {\n\t\t\tthis.save_report_settings();\n\t\t}\n\t\tif (!this.group_by) {\n\t\t\tthis.init_chart();\n\t\t}\n\t}\n\n\tset_dirty_state_for_custom_report() {\n\t\tlet current_settings = {\n\t\t\tfilters: this.filter_area.get(),\n\t\t\tfields: this.fields,\n\t\t\torder_by: this.sort_selector.get_sql_string(),\n\t\t\tadd_totals_row: this.add_totals_row,\n\t\t\tpage_length: this.page_length,\n\t\t\tcolumn_widths: this.get_column_widths(),\n\t\t\tgroup_by: this.group_by_control.get_settings(),\n\t\t\tchart_args: this.get_chart_settings()\n\t\t};\n\n\t\tlet report_settings = {\n\t\t\tfilters: this.report_doc.json.filters,\n\t\t\tfields: this.report_doc.json.fields,\n\t\t\torder_by: this.report_doc.json.order_by,\n\t\t\tadd_totals_row: this.report_doc.json.add_totals_row,\n\t\t\tpage_length: this.report_doc.json.page_length,\n\t\t\tcolumn_widths: this.report_doc.json.column_widths,\n\t\t\tgroup_by: this.report_doc.json.group_by,\n\t\t\tchart_args: this.report_doc.json.chart_args\n\t\t};\n\n\t\tif (!frappe.utils.deep_equal(current_settings, report_settings)) {\n\t\t\tthis.page.set_indicator(__('Not Saved'), 'orange');\n\t\t} else {\n\t\t\tthis.page.clear_indicator();\n\t\t}\n\t}\n\n\tsave_report_settings() {\n\t\tfrappe.model.user_settings.save(this.doctype, 'last_view', this.view_name);\n\n\t\tif (!this.report_name) {\n\t\t\tthis.save_view_user_settings({\n\t\t\t\tfields: this.fields,\n\t\t\t\tfilters: this.filter_area.get(),\n\t\t\t\torder_by: this.sort_selector.get_sql_string(),\n\t\t\t\tgroup_by: this.group_by_control.get_settings(),\n\t\t\t\tchart_args: this.get_chart_settings(),\n\t\t\t\tadd_totals_row: this.add_totals_row\n\t\t\t});\n\t\t}\n\t}\n\n\tprepare_data(r) {\n\t\tlet data = r.message || {};\n\t\tdata = frappe.utils.dict(data.keys, data.values);\n\n\t\tif (this.start === 0) {\n\t\t\tthis.data = data;\n\t\t} else {\n\t\t\tthis.data = this.data.concat(data);\n\t\t}\n\t}\n\n\trender(force) {\n\t\tif (this.data.length === 0) return;\n\t\tthis.render_count();\n\t\tthis.setup_columns();\n\n\t\tif (this.group_by) {\n\t\t\tthis.$charts_wrapper.addClass('hidden');\n\t\t} else if (this.chart) {\n\t\t\tthis.refresh_charts();\n\t\t}\n\n\t\tif (this.datatable && !force) {\n\t\t\tthis.datatable.refresh(this.get_data(this.data), this.columns);\n\t\t\treturn;\n\t\t}\n\t\tthis.setup_datatable(this.data);\n\t}\n\n\trender_count() {\n\t\tif (this.list_view_settings && this.list_view_settings.disable_count) {\n\t\t\treturn;\n\t\t}\n\t\tlet $list_count = this.$paging_area.find('.list-count');\n\t\tif (!$list_count.length) {\n\t\t\t$list_count = $('<span>')\n\t\t\t\t.addClass('text-muted list-count')\n\t\t\t\t.prependTo(this.$paging_area.find('.level-right'));\n\t\t}\n\t\tthis.get_count_str()\n\t\t\t.then(str => {\n\t\t\t\t$list_count.text(str);\n\t\t\t});\n\t}\n\n\ton_update(data) {\n\t\tif (this.doctype === data.doctype && data.name) {\n\t\t\t// flash row when doc is updated by some other user\n\t\t\tconst flash_row = data.user !== frappe.session.user;\n\t\t\tif (this.data.find(d => d.name === data.name)) {\n\t\t\t\t// update existing\n\t\t\t\tfrappe.db.get_doc(data.doctype, data.name)\n\t\t\t\t\t.then(doc => this.update_row(doc, flash_row));\n\t\t\t} else {\n\t\t\t\t// refresh\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate_row(doc, flash_row) {\n\t\tconst to_refresh = [];\n\n\t\tthis.data = this.data.map((d, i) => {\n\t\t\tif (d.name === doc.name) {\n\t\t\t\tfor (let fieldname in d) {\n\t\t\t\t\tif (fieldname.includes(':')) {\n\t\t\t\t\t\t// child table field\n\t\t\t\t\t\tconst [cdt, _field] = fieldname.split(':');\n\t\t\t\t\t\tconst cdt_row = Object.keys(doc)\n\t\t\t\t\t\t\t.filter(key =>\n\t\t\t\t\t\t\t\tArray.isArray(doc[key])\n\t\t\t\t\t\t\t\t&& doc[key].length\n\t\t\t\t\t\t\t\t&& doc[key][0].doctype === cdt\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map(key => doc[key])\n\t\t\t\t\t\t\t.map(a => a[0])\n\t\t\t\t\t\t\t.filter(cdoc => cdoc.name === d[cdt + ':name'])[0];\n\t\t\t\t\t\tif (cdt_row) {\n\t\t\t\t\t\t\td[fieldname] = cdt_row[_field];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\td[fieldname] = doc[fieldname];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tto_refresh.push([d, i]);\n\t\t\t}\n\t\t\treturn d;\n\t\t});\n\n\t\t// indicate row update\n\t\tconst _flash_row = (rowIndex) => {\n\t\t\tif (!flash_row) return;\n\t\t\tconst $row = this.$result.find(`.dt-row[data-row-index=\"${rowIndex}\"]`);\n\t\t\t$row.addClass('row-update');\n\t\t\tsetTimeout(() => $row.removeClass('row-update'), 500);\n\t\t};\n\n\t\tto_refresh.forEach(([data, rowIndex]) => {\n\t\t\tconst new_row = this.build_row(data);\n\t\t\tthis.datatable.refreshRow(new_row, rowIndex);\n\t\t\t_flash_row(rowIndex);\n\t\t});\n\t}\n\n\tsetup_datatable(values) {\n\t\tthis.$datatable_wrapper.empty();\n\t\tthis.datatable = new DataTable(this.$datatable_wrapper[0], {\n\t\t\tcolumns: this.columns,\n\t\t\tdata: this.get_data(values),\n\t\t\tgetEditor: this.get_editing_object.bind(this),\n\t\t\tlanguage: frappe.boot.lang,\n\t\t\ttranslations: frappe.utils.datatable.get_translations(),\n\t\t\tcheckboxColumn: true,\n\t\t\tinlineFilters: true,\n\t\t\tcellHeight: 35,\n\t\t\tdirection: frappe.utils.is_rtl() ? 'rtl' : 'ltr',\n\t\t\tevents: {\n\t\t\t\tonRemoveColumn: (column) => {\n\t\t\t\t\tthis.remove_column_from_datatable(column);\n\t\t\t\t},\n\t\t\t\tonSwitchColumn: (column1, column2) => {\n\t\t\t\t\tthis.switch_column(column1, column2);\n\t\t\t\t},\n\t\t\t\tonCheckRow: () => {\n\t\t\t\t\tconst checked_items = this.get_checked_items();\n\t\t\t\t\tthis.toggle_actions_menu_button(checked_items.length > 0);\n\t\t\t\t}\n\t\t\t},\n\t\t\thooks: {\n\t\t\t\tcolumnTotal: frappe.utils.report_column_total\n\t\t\t},\n\t\t\theaderDropdown: [{\n\t\t\t\tlabel: __('Add Column'),\n\t\t\t\taction: (datatabe_col) => {\n\t\t\t\t\tlet columns_in_picker = [];\n\t\t\t\t\tconst columns = this.get_columns_for_picker();\n\n\t\t\t\t\tcolumns_in_picker = columns[this.doctype]\n\t\t\t\t\t\t.filter(df => !this.is_column_added(df))\n\t\t\t\t\t\t.map(df => ({\n\t\t\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\t\t\tvalue: df.fieldname\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tdelete columns[this.doctype];\n\n\t\t\t\t\tfor (let cdt in columns) {\n\t\t\t\t\t\tcolumns[cdt]\n\t\t\t\t\t\t\t.filter(df => !this.is_column_added(df))\n\t\t\t\t\t\t\t.map(df => ({\n\t\t\t\t\t\t\t\tlabel: __(df.label) + ` (${cdt})`,\n\t\t\t\t\t\t\t\tvalue: df.fieldname + ',' + cdt\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t.forEach(df => columns_in_picker.push(df));\n\t\t\t\t\t}\n\n\t\t\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __('Add Column'),\n\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: __('Select Column'),\n\t\t\t\t\t\t\t\tfieldname: 'column',\n\t\t\t\t\t\t\t\tfieldtype: 'Autocomplete',\n\t\t\t\t\t\t\t\toptions: columns_in_picker\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: __('Insert Column Before {0}', [__(datatabe_col.docfield.label).bold()]),\n\t\t\t\t\t\t\t\tfieldname: 'insert_before',\n\t\t\t\t\t\t\t\tfieldtype: 'Check'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tprimary_action: ({ column, insert_before }) => {\n\t\t\t\t\t\t\tif (!columns_in_picker.map(col => col.value).includes(column)) {\n\t\t\t\t\t\t\t\tfrappe.show_alert({message: __('Invalid column'), indicator: 'orange'});\n\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet doctype = this.doctype;\n\t\t\t\t\t\t\tif (column.includes(',')) {\n\t\t\t\t\t\t\t\t[column, doctype] = column.split(',');\n\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\tlet index = datatabe_col.colIndex;\n\t\t\t\t\t\t\tif (insert_before) {\n\t\t\t\t\t\t\t\tindex = index - 1;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.add_column_to_datatable(column, doctype, index);\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\td.show();\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t}\n\n\ttoggle_charts() {\n\t\t// add\n\t\tif (!this.chart) {\n\t\t\tthis.setup_charts();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.$charts_wrapper.hasClass('hidden')) {\n\t\t\t// reload chart\n\t\t\tthis.$charts_wrapper.removeClass('hidden');\n\t\t\tthis.refresh_charts();\n\t\t} else {\n\t\t\t// remove chart\n\t\t\tthis.$charts_wrapper.addClass('hidden');\n\t\t\tthis.save_view_user_settings(\n\t\t\t\t{ chart_args: null });\n\t\t\tthis.chart_args = null;\n\t\t}\n\t}\n\n\tinit_chart() {\n\t\t// show chart if saved via report or user settings\n\t\tif (!this.chart) {\n\t\t\tif (this.chart_args) {\n\t\t\t\tthis.build_chart_args(this.chart_args.x_axis,\n\t\t\t\t\tthis.chart_args.y_axes,\n\t\t\t\t\tthis.chart_args.chart_type);\n\n\t\t\t\tthis.make_chart();\n\t\t\t}\n\t\t}\n\t}\n\n\tsetup_charts() {\n\t\t// get fields from columns\n\t\tlet x_fields = [], y_fields = [];\n\t\tfor (let col of this.columns) {\n\t\t\t// all options in x\n\t\t\tx_fields.push({\n\t\t\t\tlabel: col.content,\n\t\t\t\tfieldname: col.id,\n\t\t\t\tvalue: col.id,\n\t\t\t});\n\n\t\t\t// numeric values in y\n\t\t\tif (col.docfield && frappe.model.numeric_fieldtypes.includes(col.docfield.fieldtype)) {\n\t\t\t\ty_fields.push({\n\t\t\t\t\tlabel: col.content,\n\t\t\t\t\tfieldname: col.id,\n\t\t\t\t\tvalue: col.id\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst defaults = this.chart_args || {};\n\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Configure Chart'),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tlabel: __('X Axis Field'),\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\tfieldname: 'x_axis',\n\t\t\t\t\toptions: x_fields,\n\t\t\t\t\tdefault: defaults.x_axis\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Y Axis Fields'),\n\t\t\t\t\tfieldtype: 'MultiSelect',\n\t\t\t\t\tfieldname: 'y_axes',\n\t\t\t\t\toptions: y_fields,\n\t\t\t\t\tdescription: __('Showing only Numeric fields from Report'),\n\t\t\t\t\tdefault: defaults.y_axes ? defaults.y_axes.join(', ') : null\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Chart Type'),\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\toptions: ['Bar', 'Line', 'Pie', 'Percentage', 'Donut'],\n\t\t\t\t\tfieldname: 'chart_type',\n\t\t\t\t\tdefault: defaults.chart_type ?\n\t\t\t\t\t\tfrappe.utils.to_title_case(defaults.chart_type) :\n\t\t\t\t\t\t'Bar'\n\t\t\t\t}\n\t\t\t],\n\t\t\tprimary_action: (data) => {\n\t\t\t\tdata.y_axes = data.y_axes.split(',').map(d => d.trim()).filter(Boolean);\n\n\t\t\t\tthis.build_chart_args(data.x_axis, data.y_axes, data.chart_type);\n\t\t\t\tthis.make_chart();\n\t\t\t\tdialog.hide();\n\t\t\t}\n\t\t});\n\n\t\tdialog.show();\n\t}\n\n\tbuild_chart_args(x_axis, y_axes, chart_type) {\n\t\tlet datasets = y_axes.map(y_axis => ({\n\t\t\tname: this.columns_map[y_axis].content,\n\t\t\tvalues: this.data.map(d => d[y_axis])\n\t\t}));\n\n\t\tthis.chart_args = {\n\t\t\tchart_type: chart_type.toLowerCase(),\n\t\t\tx_axis: x_axis,\n\t\t\ty_axes: y_axes,\n\t\t\tlabels: this.data.map(d => d[x_axis]),\n\t\t\tdatasets: datasets\n\t\t};\n\n\t\tthis.save_view_user_settings(\n\t\t\t{ chart_args: this.get_chart_settings() });\n\t}\n\n\tget_chart_settings() {\n\t\tif (this.chart_args) {\n\t\t\treturn {\n\t\t\t\tchart_type: this.chart_args.chart_type,\n\t\t\t\tx_axis: this.chart_args.x_axis,\n\t\t\t\ty_axes: this.chart_args.y_axes,\n\t\t\t};\n\t\t}\n\t}\n\n\tmake_chart() {\n\t\tconst args = this.chart_args;\n\t\tlet data = {\n\t\t\tlabels: args.labels,\n\t\t\tdatasets: args.datasets\n\t\t};\n\n\t\tthis.last_chart_type = args.chart_type;\n\n\t\tconst get_df = (field) => this.columns_map[field].docfield;\n\t\tconst get_doc = (value, field) => this.data.find(d => d[field] === value);\n\n\t\tthis.$charts_wrapper.removeClass('hidden');\n\n\t\tthis.chart = new frappe.Chart(this.$charts_wrapper.find('.charts-inner-wrapper')[0], {\n\t\t\ttitle: __(\"{0} Chart\", [this.doctype]),\n\t\t\tdata: data,\n\t\t\ttype: args.chart_type,\n\t\t\ttruncateLegends: 1,\n\t\t\tcolors: ['#70E078', 'light-blue', 'orange', 'red'],\n\t\t\taxisOptions: {\n\t\t\t\tshortenYAxisNumbers: 1\n\t\t\t},\n\t\t\ttooltipOptions: {\n\t\t\t\tformatTooltipY: value => frappe.format(value, get_df(this.chart_args.y_axes[0]), { always_show_decimals: true, inline: true }, get_doc(value.doc))\n\t\t\t}\n\t\t});\n\t}\n\n\trefresh_charts() {\n\t\tif (!this.chart || !this.chart_args) return;\n\t\tthis.$charts_wrapper.removeClass('hidden');\n\t\tconst { x_axis, y_axes, chart_type } = this.chart_args;\n\t\tthis.build_chart_args(x_axis, y_axes, chart_type);\n\t\tthis.chart.update(this.chart_args);\n\t}\n\n\tget_editing_object(colIndex, rowIndex, value, parent) {\n\t\tconst control = this.render_editing_input(colIndex, value, parent);\n\t\tif (!control) return false;\n\n\t\tcontrol.df.change = () => control.set_focus();\n\n\t\treturn {\n\t\t\tinitValue: (value) => {\n\t\t\t\treturn control.set_value(value);\n\t\t\t},\n\t\t\tsetValue: (value) => {\n\t\t\t\tconst cell = this.datatable.getCell(colIndex, rowIndex);\n\t\t\t\tlet fieldname = this.datatable.getColumn(colIndex).docfield.fieldname;\n\t\t\t\tlet docname = cell.name;\n\t\t\t\tlet doctype = cell.doctype;\n\n\t\t\t\tcontrol.set_value(value);\n\t\t\t\treturn this.set_control_value(doctype, docname, fieldname, value)\n\t\t\t\t\t.then((updated_doc) => {\n\t\t\t\t\t\tconst _data = this.data\n\t\t\t\t\t\t\t.filter(b => b.name === updated_doc.name)\n\t\t\t\t\t\t\t.find(a =>\n\t\t\t\t\t\t\t\t// child table cell\n\t\t\t\t\t\t\t\t(doctype != updated_doc.doctype && a[doctype + \":name\"] == docname)\n\t\t\t\t\t\t\t\t|| doctype == updated_doc.doctype\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\tfor (let field in _data) {\n\t\t\t\t\t\t\tif (field.includes(':')) {\n\t\t\t\t\t\t\t\t// child table field\n\t\t\t\t\t\t\t\tconst [cdt, _field] = field.split(':');\n\t\t\t\t\t\t\t\tconst cdt_row = Object.keys(updated_doc)\n\t\t\t\t\t\t\t\t\t.filter(key =>\n\t\t\t\t\t\t\t\t\t\tArray.isArray(updated_doc[key])\n\t\t\t\t\t\t\t\t\t\t&& updated_doc[key].length\n\t\t\t\t\t\t\t\t\t\t&& updated_doc[key][0].doctype === cdt\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.map(key => updated_doc[key])[0]\n\t\t\t\t\t\t\t\t\t.filter(cdoc => cdoc.name === _data[cdt + ':name'])[0];\n\t\t\t\t\t\t\t\tif (cdt_row) {\n\t\t\t\t\t\t\t\t\t_data[field] = cdt_row[_field];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_data[field] = updated_doc[field];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => this.refresh_charts());\n\t\t\t},\n\t\t\tgetValue: () => {\n\t\t\t\treturn control.get_value();\n\t\t\t}\n\t\t};\n\t}\n\n\tset_control_value(doctype, docname, fieldname, value) {\n\t\tthis.last_updated_doc = docname;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tfrappe.db.set_value(doctype, docname, {[fieldname]: value})\n\t\t\t\t.then(r => {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\tresolve(r.message);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(reject);\n\t\t});\n\t}\n\n\trender_editing_input(colIndex, value, parent) {\n\t\tconst col = this.datatable.getColumn(colIndex);\n\t\tlet control = null;\n\n\t\tif (col.docfield.fieldtype === 'Text Editor') {\n\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Edit {0}', [col.docfield.label]),\n\t\t\t\tfields: [col.docfield],\n\t\t\t\tprimary_action: () => {\n\t\t\t\t\tthis.datatable.cellmanager.deactivateEditing();\n\t\t\t\t\td.hide();\n\t\t\t\t},\n\t\t\t\ton_hide: () => {\n\t\t\t\t\tthis.datatable.cellmanager.deactivateEditing(false);\n\t\t\t\t}\n\t\t\t});\n\t\t\td.show();\n\t\t\tcontrol = d.fields_dict[col.docfield.fieldname];\n\t\t} else {\n\t\t\t// make control\n\t\t\tcontrol = frappe.ui.form.make_control({\n\t\t\t\tdf: col.docfield,\n\t\t\t\tparent: parent,\n\t\t\t\trender_input: true\n\t\t\t});\n\t\t\tcontrol.set_value(value);\n\t\t\tcontrol.toggle_label(false);\n\t\t\tcontrol.toggle_description(false);\n\t\t}\n\n\t\treturn control;\n\t}\n\n\tis_editable(df, data) {\n\t\tif (df\n\t\t\t&& frappe.model.can_write(this.doctype)\n\t\t\t// not a submitted doc or field is allowed to edit after submit\n\t\t\t&& (data.docstatus !== 1 || df.allow_on_submit)\n\t\t\t// not a cancelled doc\n\t\t\t&& data.docstatus !== 2\n\t\t\t&& !df.read_only\n\t\t\t&& !df.hidden\n\t\t\t// not a standard field i.e., owner, modified_by, etc.\n\t\t\t&& !frappe.model.std_fields_list.includes(df.fieldname))\n\t\t\treturn true;\n\t\treturn false;\n\t}\n\n\tget_data(values) {\n\t\treturn this.build_rows(values);\n\t}\n\n\tset_fields() {\n\t\t// default fields\n\t\t['name', 'docstatus'].map((f) => this._add_field(f));\n\n\t\tif (this.report_name && this.report_doc.json.fields) {\n\t\t\tlet fields = this.report_doc.json.fields.slice();\n\t\t\tfields.forEach(f => this._add_field(f[0], f[1]));\n\t\t\treturn;\n\t\t} else if (this.view_user_settings.fields) {\n\t\t\t// get from user_settings\n\t\t\tlet fields = this.view_user_settings.fields;\n\t\t\tfields.forEach(f => this._add_field(f[0], f[1]));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.set_default_fields();\n\t}\n\n\tset_default_fields() {\n\t\t// get fields from meta\n\t\tthis.fields = this.fields || [];\n\t\tconst add_field = f => this._add_field(f);\n\n\t\t// default fields\n\t\t[\n\t\t\tthis.meta.title_field,\n\t\t\tthis.meta.image_field\n\t\t].map(add_field);\n\n\t\t// fields in_list_view or in_standard_filter\n\t\tconst fields = this.meta.fields.filter(df => {\n\t\t\treturn (df.in_list_view || df.in_standard_filter)\n\t\t\t\t&& frappe.perm.has_perm(this.doctype, df.permlevel, 'read')\n\t\t\t\t&& frappe.model.is_value_type(df.fieldtype)\n\t\t\t\t&& !df.report_hide;\n\t\t});\n\n\t\tfields.map(add_field);\n\n\t\t// currency fields\n\t\tfields.filter(\n\t\t\tdf => df.fieldtype === 'Currency' && df.options\n\t\t).map(df => {\n\t\t\tif (df.options.includes(':')) {\n\t\t\t\tadd_field(df.options.split(':')[1]);\n\t\t\t} else {\n\t\t\t\tadd_field(df.options);\n\t\t\t}\n\t\t});\n\n\t\t// fields in listview_settings\n\t\t(this.settings.add_fields || []).map(add_field);\n\t}\n\n\tbuild_fields() {\n\t\tsuper.build_fields();\n\t}\n\n\treorder_fields() {\n\t\t// generate table fields in the required format [\"name\", \"DocType\"]\n\t\t// these are fields in the column before adding new fields\n\t\tlet table_fields = this.columns.map(df => [df.field, df.docfield.parent]);\n\n\t\t// filter fields that are already in table\n\t\t// iterate over table_fields to preserve the existing order of fields\n\t\t// The filter will ensure the unchecked fields are removed\n\t\tlet fields_already_in_table = table_fields.filter(df => {\n\t\t\treturn this.fields.find((field) => {\n\t\t\t\treturn df[0] == field[0] && df[1] == field[1]\n\t\t\t})\n\t\t})\n\n\t\t// find new fields that didn't already exists\n\t\t// This will be appended to the end of the table\n\t\tlet fields_to_add = this.fields.filter(df => {\n\t\t\treturn !table_fields.find((field) => {\n\t\t\t\treturn df[0] == field[0] && df[1] == field[1];\n\t\t\t});\n\t\t});\n\n\t\t// rebuild fields\n\t\tthis.fields = [...fields_already_in_table, ...fields_to_add];\n\t}\n\n\tget_fields() {\n\t\tlet fields = this.fields.map(f => {\n\t\t\tlet column_name = frappe.model.get_full_column_name(f[0], f[1]);\n\t\t\tif (f[1] !== this.doctype) {\n\t\t\t\t// child table field\n\t\t\t\tcolumn_name = column_name + ' as ' + `'${f[1]}:${f[0]}'`;\n\t\t\t}\n\t\t\treturn column_name;\n\t\t});\n\t\tconst cdt_name_fields =\n\t\t\tthis.get_unique_cdt_in_view()\n\t\t\t\t.map(cdt => frappe.model.get_full_column_name('name', cdt) + ' as ' + `'${cdt}:name'`);\n\t\tfields = fields.concat(cdt_name_fields);\n\n\t\treturn fields;\n\t}\n\n\tget_unique_cdt_in_view() {\n\t\treturn this.fields\n\t\t\t.filter(f => f[1] !== this.doctype)\n\t\t\t.map(f => f[1])\n\t\t\t.uniqBy(d => d);\n\t}\n\n\tadd_column_to_datatable(fieldname, doctype, col_index) {\n\t\tconst field = [fieldname, doctype];\n\t\tthis.fields.splice(col_index, 0, field);\n\n\t\tthis.add_currency_column(fieldname, doctype, col_index);\n\n\t\tthis.build_fields();\n\t\tthis.setup_columns();\n\n\t\tif (this.datatable) this.datatable.destroy();\n\t\tthis.datatable = null;\n\t\tthis.refresh();\n\t}\n\n\tadd_currency_column(fieldname, doctype, col_index) {\n\t\t// Adds dependent currency field if required\n\t\tconst df = frappe.meta.get_docfield(doctype, fieldname);\n\t\tif (df && df.fieldtype === 'Currency' && df.options &&\n\t\t\t!df.options.includes(':') && frappe.meta.has_field(doctype, df.options)\n\t\t) {\n\t\t\tconst field = [df.options, doctype];\n\t\t\tif (col_index === undefined) {\n\t\t\t\tthis.fields.push(field);\n\t\t\t} else {\n\t\t\t\tthis.fields.splice(col_index, 0, field);\n\t\t\t}\n\t\t\tconst field_label = frappe.meta.get_label(doctype, field[0]);\n\t\t\tfrappe.show_alert(\n\t\t\t\t__('Also adding the dependent currency field {0}', [__(field_label).bold()])\n\t\t\t);\n\t\t}\n\t}\n\n\tadd_status_dependency_column(col, doctype) {\n\t\t// Adds dependent column from which status is derived if required\n\t\tif (col && !this.fields.find(f => f[0] === col)) {\n\t\t\tconst field = [col, doctype];\n\t\t\tthis.fields.push(field);\n\t\t\tthis.refresh();\n\t\t\tconst field_label = frappe.meta.get_label(doctype, field[0]);\n\t\t\tfrappe.show_alert(\n\t\t\t\t__('Also adding the status dependency field {0}', [__(field_label).bold()])\n\t\t\t);\n\t\t}\n\t}\n\n\tremove_column_from_datatable(column) {\n\t\tconst index = this.fields.findIndex(f => column.field === f[0]);\n\t\tif (index === -1) return;\n\t\tconst field = this.fields[index];\n\n\t\tif (field[0] === 'name') {\n\t\t\tthis.refresh();\n\t\t\tfrappe.throw(__('Cannot remove ID field'));\n\t\t}\n\n\t\tthis.fields.splice(index, 1);\n\t\tthis.build_fields();\n\t\tthis.setup_columns();\n\t\tthis.refresh();\n\t}\n\n\tswitch_column(col1, col2) {\n\t\tconst index1 = this.fields.findIndex(f => col1.field === f[0]);\n\t\tconst index2 = this.fields.findIndex(f => col2.field === f[0]);\n\t\tconst _fields = this.fields.slice();\n\n\t\tlet temp = _fields[index1];\n\t\t_fields[index1] = _fields[index2];\n\t\t_fields[index2] = temp;\n\n\t\tthis.fields = _fields;\n\t\tthis.build_fields();\n\t\tthis.setup_columns();\n\t\tthis.refresh();\n\t}\n\n\tget_columns_for_picker() {\n\t\tlet out = {};\n\n\t\tconst standard_fields_filter = df => !in_list(frappe.model.no_value_type, df.fieldtype);\n\n\t\tlet doctype_fields = frappe.meta.get_docfields(this.doctype).filter(standard_fields_filter);\n\n\t\t// filter out docstatus field from picker\n\t\tlet std_fields = frappe.model.std_fields.filter( df => df.fieldname !== 'docstatus');\n\n\t\t// add status field derived from docstatus, if status is not a standard field\n\t\tlet has_status_values = false;\n\n\t\tif (this.data) {\n\t\t\thas_status_values = frappe.get_indicator(this.data[0], this.doctype);\n\t\t}\n\n\t\tif (!frappe.meta.has_field(this.doctype, 'status') && has_status_values) {\n\t\t\tdoctype_fields = [{\n\t\t\t\tlabel: __('Status'),\n\t\t\t\tfieldname: 'docstatus',\n\t\t\t\tfieldtype: 'Data'\n\t\t\t}].concat(doctype_fields);\n\t\t}\n\n\t\tdoctype_fields = [{\n\t\t\tlabel: __('ID'),\n\t\t\tfieldname: 'name',\n\t\t\tfieldtype: 'Data',\n\t\t\treqd: 1\n\t\t}].concat(doctype_fields, std_fields);\n\n\t\tout[this.doctype] = doctype_fields;\n\n\t\tconst table_fields = frappe.meta.get_table_fields(this.doctype);\n\n\t\ttable_fields.forEach(df => {\n\t\t\tconst cdt = df.options;\n\t\t\tconst child_table_fields = frappe.meta.get_docfields(cdt).filter(standard_fields_filter);\n\n\t\t\tout[cdt] = child_table_fields;\n\n\t\t\t// add index column for child tables\n\t\t\tout[cdt].push({\n\t\t\t\tlabel: __('Index'),\n\t\t\t\tfieldname: 'idx',\n\t\t\t\tfieldtype: 'Int',\n\t\t\t\tparent: cdt\n\t\t\t});\n\t\t});\n\t\treturn out;\n\t}\n\n\tget_dialog_fields() {\n\t\tconst dialog_fields = [];\n\t\tconst columns = this.get_columns_for_picker();\n\n\t\tdialog_fields.push({\n\t\t\tlabel: __(this.doctype),\n\t\t\tfieldname: this.doctype,\n\t\t\tfieldtype: 'MultiCheck',\n\t\t\tcolumns: 2,\n\t\t\toptions: columns[this.doctype]\n\t\t\t\t.filter(df => {\n\t\t\t\t\treturn !df.hidden && df.fieldname !== 'name';\n\t\t\t\t})\n\t\t\t\t.map(df => ({\n\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\tvalue: df.fieldname,\n\t\t\t\t\tchecked: this.fields.find(f => f[0] === df.fieldname && f[1] === this.doctype)\n\t\t\t\t}))\n\t\t});\n\n\t\tdelete columns[this.doctype];\n\n\t\tconst table_fields = frappe.meta.get_table_fields(this.doctype)\n\t\t\t.filter(df => !df.hidden);\n\n\t\ttable_fields.forEach(df => {\n\t\t\tconst cdt = df.options;\n\n\t\t\tdialog_fields.push({\n\t\t\t\tlabel: __(df.label) + ` (${__(cdt)})`,\n\t\t\t\tfieldname: df.options,\n\t\t\t\tfieldtype: 'MultiCheck',\n\t\t\t\tcolumns: 2,\n\t\t\t\toptions: columns[cdt]\n\t\t\t\t\t.filter(df => {\n\t\t\t\t\t\treturn !df.hidden;\n\t\t\t\t\t})\n\t\t\t\t\t.map(df => ({\n\t\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\t\tvalue: df.fieldname,\n\t\t\t\t\t\tchecked: this.fields.find(f => f[0] === df.fieldname && f[1] === cdt)\n\t\t\t\t\t}))\n\t\t\t});\n\t\t});\n\n\t\treturn dialog_fields;\n\t}\n\n\tis_column_added(df) {\n\t\treturn Boolean(\n\t\t\tthis.fields.find(f => f[0] === df.fieldname && df.parent === f[1])\n\t\t);\n\t}\n\n\tsetup_columns() {\n\t\t// apply previous column width\n\t\tlet column_widths = null;\n\t\tif (this.columns) {\n\t\t\tcolumn_widths = this.get_column_widths();\n\t\t}\n\n\t\tthis.columns = [];\n\t\tthis.columns_map = {};\n\n\t\tfor (let f of this.fields) {\n\t\t\tlet column;\n\t\t\tif (f[0]!=='docstatus') {\n\t\t\t\tcolumn = this.build_column(f);\n\t\t\t} else {\n\t\t\t\t// if status is not in fields append status column derived from docstatus\n\t\t\t\tif (!this.fields.includes(['status', this.doctype]) && !frappe.meta.has_field(this.doctype, 'status')) {\n\t\t\t\t\tcolumn = this.build_column(['docstatus', this.doctype]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (column) {\n\t\t\t\tif (column_widths) {\n\t\t\t\t\tcolumn.width = column_widths[column.id] || column.width || 120;\n\t\t\t\t}\n\t\t\t\tthis.columns.push(column);\n\t\t\t\tthis.columns_map[column.id] = column;\n\t\t\t}\n\t\t}\n\t}\n\n\tbuild_column(c) {\n\n\t\tlet [fieldname, doctype] = c;\n\t\tlet docfield = frappe.meta.docfield_map[doctype || this.doctype][fieldname];\n\n\t\t// group by column\n\t\tif (fieldname === '_aggregate_column') {\n\t\t\tdocfield = this.group_by_control.get_group_by_docfield();\n\t\t}\n\n\t\t// child table index column\n\t\tif (fieldname === 'idx' && doctype !== this.doctype) {\n\t\t\tdocfield = {\n\t\t\t\tlabel: \"Index\",\n\t\t\t\tfieldtype: \"Int\",\n\t\t\t\tparent: doctype,\n\t\t\t};\n\t\t}\n\n\t\tif (!docfield) {\n\t\t\tdocfield = frappe.model.get_std_field(fieldname, true);\n\n\t\t\tif (docfield) {\n\t\t\t\tif(!docfield.label) {\n\t\t\t\t\tdocfield.label = toTitle(fieldname);\n\t\t\t\t\tif(docfield.label.includes('_')) {\n\t\t\t\t\t\tdocfield.label = docfield.label.replace('_',' ');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdocfield.parent = this.doctype;\n\t\t\t\tif (fieldname == 'name') {\n\t\t\t\t\tdocfield.options = this.doctype;\n\t\t\t\t}\n\t\t\t\tif (fieldname == 'docstatus' && !frappe.meta.has_field(this.doctype, 'status')) {\n\t\t\t\t\tdocfield.label = 'Status';\n\t\t\t\t\tdocfield.fieldtype = 'Data';\n\t\t\t\t\tdocfield.name = 'status';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!docfield || docfield.report_hide) return;\n\n\t\tlet title = __(docfield ? docfield.label : toTitle(fieldname));\n\t\tif (doctype !== this.doctype) {\n\t\t\ttitle += ` (${__(doctype)})`;\n\t\t}\n\n\t\tconst editable = frappe.model.is_non_std_field(fieldname) && !docfield.read_only;\n\n\t\tconst align = (() => {\n\t\t\tconst is_numeric = frappe.model.is_numeric_field(docfield);\n\t\t\tif (is_numeric) {\n\t\t\t\treturn 'right';\n\t\t\t}\n\t\t\treturn docfield.fieldtype === 'Date' ? 'right' : 'left';\n\t\t})();\n\n\t\tlet id = fieldname;\n\n\t\t// child table column\n\t\tif (doctype !== this.doctype && fieldname !== '_aggregate_column') {\n\t\t\tid = `${doctype}:${fieldname}`;\n\t\t}\n\n\t\tlet width = (docfield ? cint(docfield.width) : null) || null;\n\t\tif (this.report_doc) {\n\t\t\t// load the user saved column width\n\t\t\tlet saved_column_widths = this.report_doc.json.column_widths || {};\n\t\t\twidth = saved_column_widths[id] || width;\n\t\t}\n\n\t\tlet compareFn = null;\n\t\tif (docfield.fieldtype === 'Date') {\n\t\t\tcompareFn = (cell, keyword) => {\n\t\t\t\tif (!cell.content) return null;\n\t\t\t\tif (keyword.length !== 'YYYY-MM-DD'.length) return null;\n\n\t\t\t\tconst keywordValue = frappe.datetime.user_to_obj(keyword);\n\t\t\t\tconst cellValue = frappe.datetime.str_to_obj(cell.content);\n\t\t\t\treturn [+cellValue, +keywordValue];\n\t\t\t}\n\t\t}\n\n\n\t\treturn {\n\t\t\tid: id,\n\t\t\tfield: fieldname,\n\t\t\tname: title,\n\t\t\tcontent: title,\n\t\t\tdocfield,\n\t\t\twidth,\n\t\t\teditable,\n\t\t\talign,\n\t\t\tcompareValue: compareFn,\n\t\t\tformat: (value, row, column, data) => {\n\t\t\t\tlet doc = null;\n\t\t\t\tif (Array.isArray(row)) {\n\t\t\t\t\tdoc = row.reduce((acc, curr) => {\n\t\t\t\t\t\tif (!curr.column.docfield) return acc;\n\t\t\t\t\t\tacc[curr.column.docfield.fieldname] = curr.content;\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}, {});\n\t\t\t\t} else {\n\t\t\t\t\tdoc = row;\n\t\t\t\t}\n\n\t\t\t\treturn frappe.format(value, column.docfield, { always_show_decimals: true }, doc);\n\t\t\t}\n\t\t};\n\t}\n\n\tbuild_rows(data) {\n\t\tconst out = data.map(d => this.build_row(d));\n\n\t\tif (this.add_totals_row) {\n\t\t\tconst totals = this.get_columns_totals(data);\n\t\t\tconst totals_row = this.columns.map((col, i) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: __('Totals Row'),\n\t\t\t\t\tcontent: totals[col.id],\n\t\t\t\t\tformat: value => {\n\t\t\t\t\t\tlet formatted_value = frappe.format(value, col.docfield, {\n\t\t\t\t\t\t\talways_show_decimals: true\n\t\t\t\t\t\t}, data[0]);\n\t\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\t\treturn this.format_total_cell(formatted_value, col);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn formatted_value;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tout.push(totals_row);\n\t\t}\n\t\treturn out;\n\t}\n\n\tformat_total_cell(formatted_value, df) {\n\t\tlet cell_value = __('Totals').bold();\n\t\tif (frappe.model.is_numeric_field(df.docfield)) {\n\t\t\tcell_value = `<span class=\"flex justify-between\">\n\t\t\t\t${cell_value} ${$(formatted_value).text()}\n\t\t\t</span>`;\n\t\t}\n\t\treturn cell_value;\n\t}\n\n\tbuild_row(d) {\n\t\treturn this.columns.map(col => {\n\t\t\tif (col.docfield.parent !== this.doctype) {\n\t\t\t\t// child table field\n\t\t\t\tconst cdt_field = f => `${col.docfield.parent}:${f}`;\n\t\t\t\tconst name = d[cdt_field('name')];\n\n\t\t\t\treturn {\n\t\t\t\t\tname: name,\n\t\t\t\t\tdoctype: col.docfield.parent,\n\t\t\t\t\tcontent: d[cdt_field(col.field)] || d[col.field],\n\t\t\t\t\teditable: Boolean(name && this.is_editable(col.docfield, d)),\n\t\t\t\t\tformat: value => {\n\t\t\t\t\t\treturn frappe.format(value, col.docfield, { always_show_decimals: true }, d);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (col.field === 'docstatus' && !frappe.meta.has_field(this.doctype, 'status')) {\n\t\t\t\t// get status from docstatus\n\t\t\t\tlet status = frappe.get_indicator(d, this.doctype);\n\t\t\t\tif (status) {\n\t\t\t\t\t// get_indicator returns the dependent field's condition as the 3rd parameter\n\t\t\t\t\tlet dependent_col = status[2] && status[2].split(',')[0];\n\t\t\t\t\t// add status dependency column\n\t\t\t\t\tthis.add_status_dependency_column(dependent_col, this.doctype);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: d.name,\n\t\t\t\t\t\tdoctype: col.docfield.parent,\n\t\t\t\t\t\tcontent: status[0],\n\t\t\t\t\t\teditable: false\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t// no status values found\n\t\t\t\t\tthis.remove_column_from_datatable(col);\n\t\t\t\t}\n\t\t\t} else if (col.field in d) {\n\t\t\t\tconst value = d[col.field];\n\t\t\t\treturn {\n\t\t\t\t\tname: d.name,\n\t\t\t\t\tdoctype: col.docfield.parent,\n\t\t\t\t\tcontent: value,\n\t\t\t\t\teditable: this.is_editable(col.docfield, d)\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tcontent: ''\n\t\t\t};\n\t\t});\n\t}\n\n\tget_checked_items(only_docnames) {\n\t\tconst indexes = this.datatable.rowmanager.getCheckedRows();\n\t\tconst items = indexes.map(i => this.data[i]).filter(i => i != undefined);\n\n\t\tif (only_docnames) {\n\t\t\treturn items.map(d => d.name);\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tsave_report(save_type) {\n\t\tconst _save_report = (name) => {\n\t\t\t// callback\n\t\t\tconst report_settings = {\n\t\t\t\tfilters: this.filter_area.get(),\n\t\t\t\tfields: this.fields,\n\t\t\t\torder_by: this.sort_selector.get_sql_string(),\n\t\t\t\tadd_totals_row: this.add_totals_row,\n\t\t\t\tpage_length: this.page_length,\n\t\t\t\tcolumn_widths: this.get_column_widths(),\n\t\t\t\tgroup_by: this.group_by_control.get_settings(),\n\t\t\t\tchart_args: this.get_chart_settings()\n\t\t\t};\n\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: 'frappe.desk.reportview.save_report',\n\t\t\t\targs: {\n\t\t\t\t\tname: name,\n\t\t\t\t\tdoctype: this.doctype,\n\t\t\t\t\treport_settings: JSON.stringify(report_settings)\n\t\t\t\t},\n\t\t\t\tcallback:(r) => {\n\t\t\t\t\tif(r.exc) {\n\t\t\t\t\t\tfrappe.msgprint(__(\"Report was not saved (there were errors)\"));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(r.message != this.report_name) {\n\t\t\t\t\t\t// Rerender the reports dropdown,\n\t\t\t\t\t\t// so that this report is included in the dropdown as well.\n\t\t\t\t\t\tfrappe.boot.user.all_reports[r.message] = {\n\t\t\t\t\t\t\tref_doctype: this.doctype,\n\t\t\t\t\t\t\treport_type: \"Report Builder\",\n\t\t\t\t\t\t\ttitle: r.message,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tfrappe.set_route('List', this.doctype, 'Report', r.message);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// update state\n\t\t\t\t\tthis.report_doc.json = report_settings;\n\t\t\t\t\tthis.set_dirty_state_for_custom_report();\n\t\t\t\t}\n\t\t\t});\n\n\t\t};\n\n\t\tif(this.report_name && save_type == \"save\") {\n\t\t\t_save_report(this.report_name);\n\t\t} else {\n\t\t\tfrappe.prompt({fieldname: 'name', label: __('New Report name'), reqd: 1, fieldtype: 'Data'}, (data) => {\n\t\t\t\t_save_report(data.name);\n\t\t\t}, __('Save As'));\n\t\t}\n\t}\n\n\tdelete_report() {\n\t\treturn frappe.call({\n\t\t\tmethod: 'frappe.desk.reportview.delete_report',\n\t\t\targs: { name: this.report_name },\n\t\t\tcallback(response) {\n\t\t\t\tif (response.exc) return;\n\t\t\t\twindow.history.back();\n\t\t\t}\n\t\t});\n\t}\n\n\tget_column_widths() {\n\t\tif (this.datatable) {\n\t\t\treturn this.datatable\n\t\t\t\t.datamanager\n\t\t\t\t.getColumns(true)\n\t\t\t\t.reduce((acc, curr) => {\n\t\t\t\t\tacc[curr.id] = parseInt(curr.width);\n\t\t\t\t\treturn acc;\n\t\t\t\t}, {});\n\t\t}\n\n\t\treturn {};\n\t}\n\n\tget_report_doc() {\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.model.with_doc('Report', this.report_name, () => {\n\t\t\t\tresolve(frappe.get_doc('Report', this.report_name));\n\t\t\t});\n\t\t});\n\t}\n\n\tget_filters_html_for_print() {\n\t\tconst filters = this.filter_area.get();\n\n\t\treturn filters\n\t\t\t.map((f) => {\n\t\t\t\tconst [doctype, fieldname, condition, value] = f;\n\t\t\t\tif (condition !== \"=\") return \"\";\n\t\t\t\tconst label = frappe.meta.get_label(doctype, fieldname);\n\t\t\t\tconst docfield = frappe.meta.get_docfield(doctype, fieldname);\n\t\t\t\treturn `<h6>${__(label)}: ${frappe.format(value, docfield)}</h6>`;\n\t\t\t})\n\t\t\t.join(\"\");\n\t}\n\n\tget_columns_totals(data) {\n\t\tif (!this.add_totals_row) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst row_totals = {};\n\n\t\tthis.columns.forEach((col, i) => {\n\t\t\tconst totals = data.reduce((totals, d) => {\n\t\t\t\tif (col.id in d && frappe.model.is_numeric_field(col.docfield)) {\n\t\t\t\t\ttotals += flt(d[col.id]);\n\t\t\t\t\treturn totals;\n\t\t\t\t}\n\t\t\t}, 0);\n\n\t\t\trow_totals[col.id] = totals;\n\t\t});\n\n\t\treturn row_totals;\n\t}\n\n\treport_menu_items() {\n\t\tlet items = [\n\t\t\t{\n\t\t\t\tlabel: __('Show Totals'),\n\t\t\t\taction: () => {\n\t\t\t\t\tthis.add_totals_row = !this.add_totals_row;\n\t\t\t\t\tthis.save_view_user_settings({\n\t\t\t\t\t\tadd_totals_row: this.add_totals_row\n\t\t\t\t\t});\n\t\t\t\t\tthis.datatable.refresh(this.get_data(this.data));\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Print'),\n\t\t\t\taction: () => {\n\t\t\t\t\t// prepare rows in their current state, sorted and filtered\n\t\t\t\t\tconst rows_in_order = this.datatable.datamanager.rowViewOrder.map(index => {\n\t\t\t\t\t\tif (this.datatable.bodyRenderer.visibleRowIndices.includes(index)) {\n\t\t\t\t\t\t\treturn this.data[index];\n\t\t\t\t\t\t}\n\t\t\t\t\t}).filter(Boolean);\n\n\t\t\t\t\tif (this.add_totals_row) {\n\t\t\t\t\t\tconst total_data = this.get_columns_totals(this.data);\n\n\t\t\t\t\t\ttotal_data['name'] = __('Totals').bold();\n\t\t\t\t\t\trows_in_order.push(total_data);\n\t\t\t\t\t}\n\n\t\t\t\t\tfrappe.ui.get_print_settings(false, (print_settings) => {\n\t\t\t\t\t\tvar title =  this.report_name || __(this.doctype);\n\t\t\t\t\t\tfrappe.render_grid({\n\t\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\t\tsubtitle: this.get_filters_html_for_print(),\n\t\t\t\t\t\t\tprint_settings: print_settings,\n\t\t\t\t\t\t\tcolumns: this.columns,\n\t\t\t\t\t\t\tdata: rows_in_order,\n\t\t\t\t\t\t\tcan_use_smaller_font: 1,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Toggle Chart'),\n\t\t\t\taction: () => this.toggle_charts()\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Toggle Sidebar'),\n\t\t\t\taction: () => this.toggle_side_bar(),\n\t\t\t\tshortcut: 'Ctrl+K',\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Pick Columns'),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __('Pick Columns'),\n\t\t\t\t\t\tfields: this.get_dialog_fields(),\n\t\t\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\t\t\t// doctype fields\n\t\t\t\t\t\t\tlet fields = values[this.doctype].map(f => [f, this.doctype]);\n\t\t\t\t\t\t\tdelete values[this.doctype];\n\n\t\t\t\t\t\t\t// child table fields\n\t\t\t\t\t\t\tfor (let cdt in values) {\n\t\t\t\t\t\t\t\tfields = fields.concat(values[cdt].map(f => [f, cdt]));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// always keep name (ID) column\n\t\t\t\t\t\t\tthis.fields = [[\"name\", this.doctype], ...fields];\n\n\t\t\t\t\t\t\tthis.fields.map(f => this.add_currency_column(f[0], f[1]));\n\n\t\t\t\t\t\t\tthis.reorder_fields();\n\t\t\t\t\t\t\tthis.build_fields();\n\t\t\t\t\t\t\tthis.setup_columns();\n\n\t\t\t\t\t\t\tthis.datatable.destroy();\n\t\t\t\t\t\t\tthis.datatable = null;\n\t\t\t\t\t\t\tthis.refresh();\n\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\td.$body.prepend(`\n\t\t\t\t\t\t<div class=\"columns-search\">\n\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"${__('Search')}\" data-element=\"search\" class=\"form-control input-xs\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`);\n\n\t\t\t\t\tfrappe.utils.setup_search(d.$body, '.unit-checkbox', '.label-area');\n\t\t\t\t\td.show();\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\tif (frappe.model.can_export(this.doctype)) {\n\t\t\titems.push({\n\t\t\t\tlabel: __('Export'),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst args = this.get_args();\n\t\t\t\t\tconst selected_items = this.get_checked_items(true);\n\t\t\t\t\tlet fields = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\t\t\tlabel: __('Select File Type'),\n\t\t\t\t\t\t\tfieldname:'file_format_type',\n\t\t\t\t\t\t\toptions: ['Excel', 'CSV'],\n\t\t\t\t\t\t\tdefault: 'Excel'\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\n\t\t\t\t\tif (this.total_count > this.count_without_children || args.page_length) {\n\t\t\t\t\t\tfields.push({\n\t\t\t\t\t\t\tfieldtype: 'Check',\n\t\t\t\t\t\t\tfieldname: 'export_all_rows',\n\t\t\t\t\t\t\tlabel: __('Export All {0} rows?', [(this.total_count + \"\").bold()])\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __(\"Export Report: {0}\",[__(this.doctype)]),\n\t\t\t\t\t\tfields: fields,\n\t\t\t\t\t\tprimary_action_label: __('Download'),\n\t\t\t\t\t\tprimary_action: (data) => {\n\t\t\t\t\t\t\targs.cmd = 'frappe.desk.reportview.export_query';\n\t\t\t\t\t\t\targs.file_format_type = data.file_format_type;\n\t\t\t\t\t\t\targs.title = this.report_name || this.doctype;\n\n\t\t\t\t\t\t\tif(this.add_totals_row) {\n\t\t\t\t\t\t\t\targs.add_totals_row = 1;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(selected_items.length > 0) {\n\t\t\t\t\t\t\t\targs.selected_items = selected_items;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!data.export_all_rows) {\n\t\t\t\t\t\t\t\targs.start = 0;\n\t\t\t\t\t\t\t\targs.page_length = this.data.length;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdelete args.start;\n\t\t\t\t\t\t\t\tdelete args.page_length;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\topen_url_post(frappe.request.url, args);\n\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\td.show();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\titems.push({\n\t\t\tlabel: __(\"Setup Auto Email\"),\n\t\t\taction: () => {\n\t\t\t\tif(this.report_name) {\n\t\t\t\t\tfrappe.set_route('List', 'Auto Email Report', {'report' : this.report_name});\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.msgprint(__('Please save the report first'));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst can_edit_or_delete = (action) => {\n\t\t\tconst method = action == \"delete\" ? \"can_delete\" : \"can_write\";\n\t\t\treturn (\n\t\t\t\tthis.report_doc\n\t\t\t\t&& this.report_doc.is_standard !== \"Yes\"\n\t\t\t\t&& (\n\t\t\t\t\tfrappe.model[method](\"Report\")\n\t\t\t\t\t|| this.report_doc.owner === frappe.session.user\n\t\t\t\t)\n\t\t\t);\n\t\t};\n\n\t\t// A user with role Report Manager or Report Owner can save\n\t\tif (can_edit_or_delete()) {\n\t\t\titems.push({\n\t\t\t\tlabel: __(\"Save\"),\n\t\t\t\taction: () => this.save_report('save')\n\t\t\t});\n\t\t}\n\n\t\t// anyone can save as\n\t\titems.push({\n\t\t\tlabel: __('Save As'),\n\t\t\taction: () => this.save_report('save_as')\n\t\t});\n\n\t\t// A user with role Report Manager or Report Owner can delete\n\t\tif (can_edit_or_delete(\"delete\")) {\n\t\t\titems.push({\n\t\t\t\tlabel: __(\"Delete\"),\n\t\t\t\taction: () => frappe.confirm(\n\t\t\t\t\t\"Are you sure you want to delete this report?\",\n\t\t\t\t\t() => this.delete_report(),\n\t\t\t\t),\n\t\t\t\tshortcut: \"Shift+Ctrl+D\"\n\t\t\t});\n\t\t}\n\n\t\t// user permissions\n\t\tif(this.report_name && frappe.model.can_set_user_permissions(\"Report\")) {\n\t\t\titems.push({\n\t\t\t\tlabel: __(\"User Permissions\"),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst args = {\n\t\t\t\t\t\tdoctype: \"Report\",\n\t\t\t\t\t\tname: this.report_name\n\t\t\t\t\t};\n\t\t\t\t\tfrappe.set_route('List', 'User Permission', args);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (frappe.user.has_role(\"System Manager\")) {\n\t\t\tif (this.get_view_settings) {\n\t\t\t\titems.push(this.get_view_settings());\n\t\t\t}\n\t\t}\n\n\t\treturn items.map(i => Object.assign(i, { standard: true }));\n\t}\n\n};\n","// Copyright (c) 2018, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\nimport DataTable from 'frappe-datatable';\n\nfrappe.provide('frappe.widget.utils');\nfrappe.provide('frappe.views');\nfrappe.provide('frappe.query_reports');\n\nfrappe.standard_pages['query-report'] = function() {\n\tvar wrapper = frappe.container.add_page('query-report');\n\n\tfrappe.ui.make_app_page({\n\t\tparent: wrapper,\n\t\ttitle: __('Query Report'),\n\t\tsingle_column: true,\n\t});\n\n\tfrappe.query_report = new frappe.views.QueryReport({\n\t\tparent: wrapper,\n\t});\n\n\t$(wrapper).bind('show', function() {\n\t\tfrappe.query_report.show();\n\t});\n};\n\nfrappe.views.QueryReport = class QueryReport extends frappe.views.BaseList {\n\tshow() {\n\t\tthis.init().then(() => this.load());\n\t}\n\n\tinit() {\n\t\tif (this.init_promise) {\n\t\t\treturn this.init_promise;\n\t\t}\n\n\t\tlet tasks = [\n\t\t\tthis.setup_defaults,\n\t\t\tthis.setup_page,\n\t\t\tthis.setup_report_wrapper,\n\t\t\tthis.setup_events\n\t\t].map(fn => fn.bind(this));\n\t\tthis.init_promise = frappe.run_serially(tasks);\n\t\treturn this.init_promise;\n\t}\n\n\tsetup_defaults() {\n\t\tthis.route = frappe.get_route();\n\t\tthis.page_name = frappe.get_route_str();\n\n\t\t// Setup buttons\n\t\tthis.primary_action = null;\n\n\t\t// throttle refresh for 300ms\n\t\tthis.refresh = frappe.utils.throttle(this.refresh, 300);\n\n\t\tthis.menu_items = [];\n\t}\n\n\tset_default_secondary_action() {\n\t\tthis.refresh_button && this.refresh_button.remove();\n\t\tthis.refresh_button = this.page.add_action_icon(\"refresh\", () => {\n\t\t\tthis.setup_progress_bar();\n\t\t\tthis.refresh();\n\t\t});\n\t}\n\n\tget_no_result_message() {\n\t\treturn `<div class=\"msg-box no-border\">\n\t\t\t<div>\n\t\t\t\t<img src=\"/assets/frappe/images/ui-states/list-empty-state.svg\" alt=\"Generic Empty State\" class=\"null-state\">\n\t\t\t</div>\n\t\t\t<p>${__('Nothing to show')}</p>\n\t\t</div>`;\n\t}\n\n\tsetup_events() {\n\t\tfrappe.realtime.on(\"report_generated\", (data) => {\n\t\t\tthis.toggle_primary_button_disabled(false);\n\t\t\tif(data.report_name) {\n\t\t\t\tthis.prepared_report_action = \"Rebuild\";\n\t\t\t\t// If generated report and currently active Prepared Report has same fiters\n\t\t\t\t// then refresh the Prepared Report\n\t\t\t\t// Otherwise show alert with the link to the Prepared Report\n\t\t\t\tif(data.name == this.prepared_report_doc_name) {\n\t\t\t\t\tthis.refresh();\n\t\t\t\t} else {\n\t\t\t\t\tlet alert_message = `Report ${this.report_name} generated.\n\t\t\t\t\t\t<a href=\"#query-report/${this.report_name}/?prepared_report_name=${data.name}\">View</a>`;\n\t\t\t\t\tfrappe.show_alert({message: alert_message, indicator: 'orange'});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.page.wrapper.on('click', '[data-action]', (e) => {\n\t\t\tlet action_name = $(e.currentTarget).data('action');\n\t\t\tlet action = this[action_name];\n\t\t\tif (action.call) {\n\t\t\t\taction.call(this, e);\n\t\t\t}\n\t\t});\n\t}\n\n\tload() {\n\t\tif (frappe.get_route().length < 2) {\n\t\t\tthis.toggle_nothing_to_show(true);\n\t\t\treturn;\n\t\t}\n\n\t\tlet route_options = {};\n\t\troute_options = Object.assign(route_options, frappe.route_options);\n\n\t\tif (this.report_name !== frappe.get_route()[1]) {\n\t\t\t// different report\n\t\t\tthis.load_report(route_options);\n\t\t}\n\t\telse if (frappe.has_route_options()) {\n\t\t\t// filters passed through routes\n\t\t\t// so refresh report again\n\t\t\tthis.refresh_report(route_options);\n\t\t} else {\n\t\t\t// same report\n\t\t\t// don't do anything to preserve state\n\t\t\t// like filters and datatable column widths\n\t\t}\n\t}\n\n\tload_report(route_options) {\n\t\tthis.page.clear_inner_toolbar();\n\t\tthis.route = frappe.get_route();\n\t\tthis.page_name = frappe.get_route_str();\n\t\tthis.report_name = this.route[1];\n\t\tthis.page_title = __(this.report_name);\n\t\tthis.show_save = false;\n\t\tthis.menu_items = this.get_menu_items();\n\t\tthis.datatable = null;\n\t\tthis.prepared_report_action = \"New\";\n\n\t\tfrappe.run_serially([\n\t\t\t() => this.get_report_doc(),\n\t\t\t() => this.get_report_settings(),\n\t\t\t() => this.setup_progress_bar(),\n\t\t\t() => this.setup_page_head(),\n\t\t\t() => this.refresh_report(route_options),\n\t\t\t() => this.add_chart_buttons_to_toolbar(true),\n\t\t\t() => this.add_card_button_to_toolbar(true),\n\t\t]);\n\t}\n\n\tadd_card_button_to_toolbar() {\n\t\tthis.page.add_inner_button(__(\"Create Card\"), () => {\n\t\t\tthis.add_card_to_dashboard();\n\t\t});\n\t}\n\n\tadd_chart_buttons_to_toolbar(show) {\n\t\tif (show) {\n\t\t\tthis.create_chart_button && this.create_chart_button.remove();\n\t\t\tthis.create_chart_button = this.page.add_button(__(\"Set Chart\"), () => {\n\t\t\t\tthis.open_create_chart_dialog();\n\t\t\t});\n\n\t\t\tif (this.chart_fields || this.chart_options) {\n\t\t\t\tthis.add_to_dashboard_button && this.add_to_dashboard_button.remove();\n\t\t\t\tthis.add_to_dashboard_button = this.page.add_button(__(\"Add Chart to Dashboard\"), () => {\n\t\t\t\t\tthis.add_chart_to_dashboard();\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.create_chart_button && this.create_chart_button.remove();\n\t\t\tthis.add_to_dashboard_button && this.add_to_dashboard_button.remove();\n\t\t}\n\t}\n\n\tadd_card_to_dashboard() {\n\t\tlet field_options = frappe.report_utils.get_field_options_from_report(this.columns, this.raw_data);\n\t\tconst dashboard_field = frappe.dashboard_utils.get_dashboard_link_field();\n\t\tconst set_standard = frappe.boot.developer_mode;\n\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Create Card'),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'report_field',\n\t\t\t\t\tlabel: __('Field'),\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\toptions: field_options.numeric_fields,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'cb_1',\n\t\t\t\t\tfieldtype: 'Column Break'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'report_function',\n\t\t\t\t\tlabel: __('Function'),\n\t\t\t\t\toptions: ['Sum', 'Average', 'Minimum', 'Maximum'],\n\t\t\t\t\tfieldtype: 'Select'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'sb_1',\n\t\t\t\t\tlabel: __('Add to Dashboard'),\n\t\t\t\t\tfieldtype: 'Section Break'\n\t\t\t\t},\n\t\t\t\tdashboard_field,\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'cb_2',\n\t\t\t\t\tfieldtype: 'Column Break'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'label',\n\t\t\t\t\tlabel: __('Card Label'),\n\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t}\n\t\t\t],\n\t\t\tprimary_action_label: __('Add'),\n\t\t\tprimary_action: (values) => {\n\t\t\t\tif (!values.label) {\n\t\t\t\t\tvalues.label = `${values.report_function} of ${toTitle(values.report_field)}`;\n\t\t\t\t}\n\t\t\t\tthis.create_number_card(values, values.dashboard, values.label, set_standard);\n\t\t\t\tdialog.hide();\n\t\t\t}\n\t\t});\n\n\t\tdialog.show();\n\n\t}\n\n\tadd_chart_to_dashboard() {\n\t\tif (this.chart_fields || this.chart_options) {\n\t\t\tconst dashboard_field = frappe.dashboard_utils.get_dashboard_link_field();\n\t\t\tconst set_standard = frappe.boot.developer_mode;\n\n\t\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Create Chart'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: 'dashboard_chart_name',\n\t\t\t\t\t\tlabel: 'Chart Name',\n\t\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t\t},\n\t\t\t\t\tdashboard_field,\n\t\t\t\t],\n\t\t\t\tprimary_action_label: __('Add'),\n\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\tthis.create_dashboard_chart(\n\t\t\t\t\t\tthis.chart_fields || this.chart_options,\n\t\t\t\t\t\tvalues.dashboard,\n\t\t\t\t\t\tvalues.dashboard_chart_name,\n\t\t\t\t\t\tset_standard\n\t\t\t\t\t);\n\t\t\t\t\tdialog.hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdialog.show();\n\t\t} else {\n\t\t\tfrappe.msgprint(__('Please Set Chart'));\n\t\t}\n\t}\n\n\tcreate_number_card(values, dashboard_name, card_name, set_standard) {\n\t\tlet args = {\n\t\t\t'dashboard': dashboard_name || null,\n\t\t\t'type': 'Report',\n\t\t\t'report_name': this.report_name,\n\t\t\t'filters_json': JSON.stringify(this.get_filter_values()),\n\t\t\tset_standard: set_standard,\n\t\t};\n\t\tObject.assign(args, values);\n\n\t\tthis.add_to_dashboard(\n\t\t\t'frappe.desk.doctype.number_card.number_card.create_report_number_card',\n\t\t\targs,\n\t\t\tdashboard_name,\n\t\t\tcard_name,\n\t\t\t'Number Card'\n\t\t);\n\t}\n\n\tcreate_dashboard_chart(chart_args, dashboard_name, chart_name, set_standard) {\n\t\tlet args = {\n\t\t\t'dashboard': dashboard_name || null,\n\t\t\t'chart_type': 'Report',\n\t\t\t'report_name': this.report_name,\n\t\t\t'type': chart_args.chart_type || frappe.model.unscrub(chart_args.type),\n\t\t\t'color': chart_args.color,\n\t\t\t'filters_json': JSON.stringify(this.get_filter_values()),\n\t\t\t'custom_options': {},\n\t\t\t'set_standard': set_standard,\n\t\t};\n\n\t\tfor (let key in chart_args) {\n\t\t\tif (key != \"data\") {\n\t\t\t\targs['custom_options'][key] = chart_args[key];\n\t\t\t}\n\t\t}\n\n\t\tif (this.chart_fields) {\n\t\t\tlet x_field_title = toTitle(chart_args.x_field);\n\t\t\tlet y_field_title = toTitle(chart_args.y_fields[0]);\n\t\t\tchart_name = chart_name || (`${this.report_name}: ${x_field_title} vs ${y_field_title}`);\n\n\t\t\tObject.assign(args,\n\t\t\t\t{\n\t\t\t\t\t'chart_name': chart_name,\n\t\t\t\t\t'x_field': chart_args.x_field,\n\t\t\t\t\t'y_axis': chart_args.y_axis_fields.map(f => {\n\t\t\t\t\t\treturn {'y_field': f.y_field, 'color': f.color};\n\t\t\t\t\t}),\n\t\t\t\t\t'use_report_chart': 0\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tchart_name = chart_name || this.report_name;\n\t\t\tObject.assign(args,\n\t\t\t\t{\n\t\t\t\t\t'chart_name': chart_name,\n\t\t\t\t\t'use_report_chart': 1\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tthis.add_to_dashboard(\n\t\t\t'frappe.desk.doctype.dashboard_chart.dashboard_chart.create_report_chart',\n\t\t\targs,\n\t\t\tdashboard_name,\n\t\t\tchart_name,\n\t\t\t'Dashboard Chart'\n\t\t);\n\t}\n\n\tadd_to_dashboard(method, args, dashboard_name, name, doctype) {\n\t\tfrappe.xcall(\n\t\t\tmethod,\n\t\t\t{args: args}\n\t\t).then(() => {\n\t\t\tlet message;\n\t\t\tif (dashboard_name) {\n\t\t\t\tlet dashboard_route_html = `<a href=\"#dashboard-view/${dashboard_name}\">${dashboard_name}</a>`;\n\t\t\t\tmessage = __(\"New {0} {1} added to Dashboard {2}\", [__(doctype), name, dashboard_route_html]);\n\t\t\t} else {\n\t\t\t\tmessage = __(\"New {0} {1} created\", [__(doctype), name]);\n\t\t\t}\n\n\t\t\tfrappe.msgprint(message, __(\"New {0} Created\", [__(doctype)]));\n\t\t});\n\t}\n\n\trefresh_report(route_options) {\n\t\tthis.toggle_message(true);\n\t\tthis.toggle_report(false);\n\n\t\treturn frappe.run_serially([\n\t\t\t() => this.setup_filters(),\n\t\t\t() => this.set_route_filters(route_options),\n\t\t\t() => this.page.clear_custom_actions(),\n\t\t\t() => this.report_settings.onload && this.report_settings.onload(this),\n\t\t\t() => this.refresh()\n\t\t]);\n\t}\n\n\tget_report_doc() {\n\t\treturn frappe.model.with_doc('Report', this.report_name)\n\t\t\t.then(doc => {\n\t\t\t\tthis.report_doc = doc;\n\t\t\t})\n\t\t\t.then(() => frappe.model.with_doctype(this.report_doc.ref_doctype));\n\t}\n\n\tget_report_settings() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (frappe.query_reports[this.report_name]) {\n\t\t\t\tthis.report_settings = frappe.query_reports[this.report_name];\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\tfrappe.xcall('frappe.desk.query_report.get_script', {\n\t\t\t\t\treport_name: this.report_name\n\t\t\t\t}).then(settings => {\n\t\t\t\t\tfrappe.dom.eval(settings.script || '');\n\t\t\t\t\tfrappe.after_ajax(() => {\n\t\t\t\t\t\tthis.report_settings = this.get_local_report_settings();\n\t\t\t\t\t\tthis.report_settings.html_format = settings.html_format;\n\t\t\t\t\t\tthis.report_settings.execution_time = settings.execution_time || 0;\n\t\t\t\t\t\tfrappe.query_reports[this.report_name] = this.report_settings;\n\n\t\t\t\t\t\tif (this.report_doc.filters && !this.report_settings.filters) {\n\t\t\t\t\t\t\t// add configured filters\n\t\t\t\t\t\t\tthis.report_settings.filters = this.report_doc.filters;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t}).catch(reject);\n\t\t\t}\n\t\t});\n\t}\n\n\tget_local_report_settings() {\n\t\tlet report_script_name = this.report_doc.report_type === 'Custom Report'\n\t\t\t? this.report_doc.reference_report\n\t\t\t: this.report_name;\n\t\treturn frappe.query_reports[report_script_name] || {};\n\t}\n\n\tsetup_progress_bar() {\n\t\tlet seconds_elapsed = 0;\n\t\tconst execution_time = this.report_settings.execution_time || 0;\n\n\t\tif (execution_time < 5) return;\n\n\t\tthis.interval = setInterval(function()  {\n\t\t\tseconds_elapsed += 1;\n\t\t\tfrappe.show_progress(__('Preparing Report'), seconds_elapsed, execution_time);\n\t\t}, 1000);\n\t}\n\n\trefresh_filters_dependency() {\n\t\tthis.filters.forEach(filter => {\n\t\t\tfilter.guardian_has_value = true;\n\n\t\t\tif (filter.df.depends_on) {\n\t\t\t\tfilter.guardian_has_value =\n\t\t\t\t\tthis.evaluate_depends_on_value(filter.df.depends_on, filter.df.label);\n\n\t\t\t\tif (filter.guardian_has_value) {\n\t\t\t\t\tif (filter.df.hidden_due_to_dependency) {\n\t\t\t\t\t\tfilter.df.hidden_due_to_dependency = false;\n\t\t\t\t\t\tthis.toggle_filter_display(filter.df.fieldname, false);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!filter.df.hidden_due_to_dependency) {\n\t\t\t\t\t\tfilter.df.hidden_due_to_dependency = true;\n\t\t\t\t\t\tthis.toggle_filter_display(filter.df.fieldname, true);\n\t\t\t\t\t\tfilter.set_value(filter.df.default || null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t}\n\n\tevaluate_depends_on_value(expression, filter_label) {\n\t\tlet out = null;\n\t\tlet doc = this.get_filter_values();\n\t\tif (doc) {\n\t\t\tif (typeof expression === 'boolean') {\n\t\t\t\tout = expression;\n\t\t\t} else if (expression.substr(0, 5) == 'eval:') {\n\t\t\t\ttry {\n\t\t\t\t\tout = eval(expression.substr(5));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tfrappe.throw(__('Invalid \"depends_on\" expression set in filter {0}', [filter_label]));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar value = doc[expression];\n\t\t\t\tif ($.isArray(value)) {\n\t\t\t\t\tout = !!value.length;\n\t\t\t\t} else {\n\t\t\t\t\tout = !!value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t}\n\n\tsetup_filters() {\n\t\tthis.clear_filters();\n\t\tconst { filters = [] } = this.report_settings;\n\n\t\tlet filter_area = this.page.page_form;\n\n\t\tthis.filters = filters.map(df => {\n\t\t\tif (df.fieldtype === 'Break') return;\n\n\t\t\tlet f = this.page.add_field(df, filter_area);\n\n\t\t\tif (df.default) {\n\t\t\t\tf.set_input(df.default);\n\t\t\t}\n\n\t\t\tif (df.get_query) f.get_query = df.get_query;\n\t\t\tif (df.on_change) f.on_change = df.on_change;\n\n\t\t\tdf.onchange = () => {\n\t\t\t\tthis.refresh_filters_dependency();\n\n\t\t\t\tlet current_filters = this.get_filter_values();\n\t\t\t\tif (this.previous_filters\n\t\t\t\t\t&& (JSON.stringify(this.previous_filters) === JSON.stringify(current_filters))) {\n\t\t\t\t\t// filter values have not changed\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// clear previous_filters after 10 seconds, to allow refresh for new data\n\t\t\t\tthis.previous_filters = current_filters;\n\t\t\t\tsetTimeout(() => this.previous_filters = null, 10000);\n\n\t\t\t\tif (f.on_change) {\n\t\t\t\t\tf.on_change(this);\n\t\t\t\t} else {\n\t\t\t\t\tif (this.prepared_report) {\n\t\t\t\t\t\tthis.reset_report_view();\n\t\t\t\t\t}\n\t\t\t\t\telse if (!this._no_refresh) {\n\t\t\t\t\t\tthis.refresh(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tf = Object.assign(f, df);\n\n\t\t\treturn f;\n\n\t\t}).filter(Boolean);\n\n\t\tthis.refresh_filters_dependency();\n\t\tif (this.filters.length === 0) {\n\t\t\t// hide page form if no filters\n\t\t\tthis.page.hide_form();\n\t\t} else {\n\t\t\tthis.page.show_form();\n\t\t}\n\t}\n\n\tset_filters(filters) {\n\t\tthis.filters.map(f => {\n\t\t\tf.set_input(filters[f.fieldname]);\n\t\t});\n\t}\n\n\tset_route_filters(route_options) {\n\t\tif (!route_options) route_options = frappe.route_options;\n\n\t\tif (route_options) {\n\t\t\tconst fields = Object.keys(route_options);\n\n\t\t\tconst filters_to_set = this.filters.filter(f => fields.includes(f.df.fieldname));\n\n\t\t\tconst promises = filters_to_set.map(f => {\n\t\t\t\treturn () => {\n\t\t\t\t\tconst value = route_options[f.df.fieldname];\n\t\t\t\t\tf.set_value(value);\n\t\t\t\t};\n\t\t\t});\n\t\t\tpromises.push(() => {\n\t\t\t\tfrappe.route_options = null;\n\t\t\t});\n\n\t\t\treturn frappe.run_serially(promises);\n\t\t}\n\t}\n\n\tclear_filters() {\n\t\tthis.page.clear_fields();\n\t}\n\n\trefresh(have_filters_changed) {\n\t\tthis.toggle_message(true);\n\t\tthis.toggle_report(false);\n\t\tlet filters = this.get_filter_values(true);\n\n\t\t// for custom reports,\n\t\t// are_default_filters is true if the filters haven't been modified and for all filters,\n\t\t// the filter value is the default value or there's no default value for the filter and the current value is empty.\n\t\t// are_default_filters is false otherwise.\n\n\t\tlet are_default_filters = this.filters\n\t\t\t.map((filter) => {\n\t\t\t\treturn (\n\t\t\t\t\t!have_filters_changed &&\n\t\t\t\t\t(filter.default === filter.value || (!filter.default && !filter.value))\n\t\t\t\t);\n\t\t\t})\n\t\t\t.every((res) => res === true);\n\n\t\tthis.show_loading_screen();\n\n\t\t// only one refresh at a time\n\t\tif (this.last_ajax) {\n\t\t\tthis.last_ajax.abort();\n\t\t}\n\n\t\tconst query_params = this.get_query_params();\n\n\t\tif (query_params.prepared_report_name) {\n\t\t\tfilters.prepared_report_name = query_params.prepared_report_name;\n\t\t}\n\n\t\treturn new Promise(resolve => {\n\t\t\tthis.last_ajax = frappe.call({\n\t\t\t\tmethod: 'frappe.desk.query_report.run',\n\t\t\t\ttype: 'GET',\n\t\t\t\targs: {\n\t\t\t\t\treport_name: this.report_name,\n\t\t\t\t\tfilters: filters,\n\t\t\t\t\tis_tree: this.report_settings.tree,\n\t\t\t\t\tparent_field: this.report_settings.parent_field,\n\t\t\t\t\tare_default_filters: are_default_filters,\n\t\t\t\t},\n\t\t\t\tcallback: resolve,\n\t\t\t\talways: () => this.page.btn_secondary.prop('disabled', false)\n\t\t\t});\n\t\t}).then(r => {\n\t\t\tlet data = r.message;\n\t\t\tthis.hide_status();\n\t\t\tclearInterval(this.interval);\n\n\t\t\tthis.execution_time = data.execution_time || 0.1;\n\n\t\t\tif (data.custom_filters) {\n\t\t\t\tthis.set_filters(data.custom_filters);\n\t\t\t\tthis.previous_filters = data.custom_filters;\n\t\t\t}\n\n\t\t\tif (data.prepared_report) {\n\t\t\t\tthis.prepared_report = true;\n\t\t\t\tthis.prepared_report_document = data.doc\n\t\t\t\t// If query_string contains prepared_report_name then set filters\n\t\t\t\t// to match the mentioned prepared report doc and disable editing\n\t\t\t\tif (query_params.prepared_report_name) {\n\t\t\t\t\tthis.prepared_report_action = \"Edit\";\n\t\t\t\t\tconst filters_from_report = JSON.parse(data.doc.filters);\n\t\t\t\t\tObject.values(this.filters).forEach(function(field) {\n\t\t\t\t\t\tif (filters_from_report[field.fieldname]) {\n\t\t\t\t\t\t\tfield.set_input(filters_from_report[field.fieldname]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (field.input) {\n\t\t\t\t\t\t\tfield.input.disabled = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.add_prepared_report_buttons(data.doc);\n\t\t\t}\n\n\t\t\tif (data.report_summary) {\n\t\t\t\tthis.$summary.empty();\n\t\t\t\tthis.render_summary(data.report_summary);\n\t\t\t}\n\n\t\t\tif (data.message && !data.prepared_report) this.show_status(data.message);\n\n\t\t\tthis.toggle_message(false);\n\t\t\tif (data.result && data.result.length) {\n\t\t\t\tthis.prepare_report_data(data);\n\t\t\t\tthis.chart_options = this.get_chart_options(data);\n\n\t\t\t\tthis.$chart.empty();\n\t\t\t\tif (this.chart_options) {\n\t\t\t\t\tthis.render_chart(this.chart_options);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.$chart.empty();\n\t\t\t\t\tif (this.chart_fields) {\n\t\t\t\t\t\tthis.chart_options =\n\t\t\t\t\t\t\tfrappe.report_utils.make_chart_options(\n\t\t\t\t\t\t\t\tthis.columns,\n\t\t\t\t\t\t\t\tthis.raw_data,\n\t\t\t\t\t\t\t\tthis.chart_fields\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.chart_options && this.render_chart(this.chart_options);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.render_datatable();\n\t\t\t\tthis.add_chart_buttons_to_toolbar(true);\n\t\t\t\tthis.add_card_button_to_toolbar();\n\t\t\t\tthis.$report.show();\n\t\t\t} else {\n\t\t\t\tthis.data = [];\n\t\t\t\tthis.toggle_nothing_to_show(true);\n\t\t\t\tthis.add_chart_buttons_to_toolbar(false);\n\t\t\t}\n\n\t\t\tthis.show_footer_message();\n\t\t\tfrappe.hide_progress();\n\t\t}).finally(() => {\n\t\t\tthis.hide_loading_screen();\n\t\t});\n\t}\n\n\trender_summary(data) {\n\t\tdata.forEach((summary) => {\n\t\t\tfrappe.utils.build_summary_item(summary).appendTo(this.$summary);\n\t\t})\n\n\t\tthis.$summary.show();\n\t}\n\n\tget_query_params() {\n\t\tconst query_string = frappe.utils.get_query_string(frappe.get_route_str());\n\t\tconst query_params = frappe.utils.get_query_params(query_string);\n\t\treturn query_params;\n\t}\n\n\tadd_prepared_report_buttons(doc) {\n\t\tif (doc) {\n\t\t\tthis.page.add_inner_button(__(\"Download Report\"), function (){\n\t\t\t\twindow.open(\n\t\t\t\t\tfrappe.urllib.get_full_url(\n\t\t\t\t\t\t\"/api/method/frappe.core.doctype.prepared_report.prepared_report.download_attachment?\"\n\t\t\t\t\t\t+\"dn=\"+encodeURIComponent(doc.name)));\n\t\t\t});\n\n\t\t\tconst part1 = __('This report was generated {0}.', [frappe.datetime.comment_when(doc.report_end_time)]);\n\t\t\tconst part2 = __('To get the updated report, click on {0}.', [__('Rebuild')]);\n\t\t\tconst part3 = __('See all past reports.');\n\n\t\t\tthis.show_status(`\n\t\t\t\t<div class=\"indicator orange\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t${part1}\n\t\t\t\t\t\t${part2}\n\t\t\t\t\t\t<a href=\"/app/List/Prepared%20Report?report_name=${this.report_name}\"> ${part3}</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`);\n\t\t};\n\n\t\t// Three cases\n\t\t// 1. First time with given filters, no data.\n\t\t// 2. Showing data from specific report\n\t\t// 3. Showing data from an old report without specific report name\n\t\tthis.primary_action_map = {\n\t\t\t\"New\": {\n\t\t\t\tlabel: __(\"Generate New Report\"),\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.show_warning_or_generate_report();\n\t\t\t\t},\n\t\t\t},\n\t\t\t\"Edit\": {\n\t\t\t\tlabel: __(\"Edit\"),\n\t\t\t\tclick: () => {\n\t\t\t\t\tfrappe.set_route(frappe.get_route());\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"Rebuild\": {\n\t\t\t\tlabel:\t__(\"Rebuild\"),\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.show_warning_or_generate_report();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet primary_action = this.primary_action_map[this.prepared_report_action];\n\n\t\tif (!this.primary_button || this.primary_button.text() !== primary_action.label) {\n\t\t\tthis.primary_button = this.page.set_primary_action(\n\t\t\t\tprimary_action.label,\n\t\t\t\tprimary_action.click\n\t\t\t);\n\t\t}\n\t}\n\n\ttoggle_primary_button_disabled(disable) {\n\t\tthis.primary_button.prop('disabled', disable);\n\t}\n\n\tshow_warning_or_generate_report() {\n\t\tfrappe.xcall(\n\t\t\t'frappe.core.doctype.prepared_report.prepared_report.get_reports_in_queued_state',\n\t\t\t{\n\t\t\t\tfilters: this.get_filter_values(),\n\t\t\t\treport_name: this.report_name,\n\t\t\t}\n\t\t).then(reports => {\n\t\t\tthis.queued_prepared_reports = reports;\n\n\t\t\tif (reports.length) {\n\t\t\t\tconst message = this.get_queued_prepared_reports_warning_message(reports);\n\t\t\t\tthis.prepared_report_dialog = frappe.warn(\n\t\t\t\t\t__('Reports already in Queue'),\n\t\t\t\t\tmessage,\n\t\t\t\t\t() => this.generate_background_report(),\n\t\t\t\t\t__('Proceed Anyway'),\n\t\t\t\t\ttrue\n\t\t\t\t);\n\n\t\t\t\tthis.prepared_report_dialog.footer.prepend(`\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-default pull-left\" data-action=\"delete_old_queued_reports\">\n\t\t\t\t\t\t${__('Delete and Generate New')}\n\t\t\t\t\t</button>`);\n\n\t\t\t\tfrappe.utils.bind_actions_with_object(this.prepared_report_dialog.wrapper, this);\n\t\t\t} else {\n\t\t\t\tthis.generate_background_report();\n\t\t\t}\n\t\t});\n\t}\n\n\tget_queued_prepared_reports_warning_message(reports) {\n\t\tconst route = `/app/List/Prepared Report/List?status=Queued&report_name=${this.report_name}`;\n\t\tconst report_link_html = reports.length == 1\n\t\t\t? `<a class=\"underline\" href=\"${route}\">${__('1 Report')}</a>`\n\t\t\t: `<a class=\"underline\" href=\"${route}\">${__(\"{0} Reports\", [reports.length])}</a>`;\n\n\t\tconst no_of_reports_html = reports.length == 1\n\t\t\t? `${__('There is {0} with the same filters already in the queue:', [report_link_html])}`\n\t\t\t: `${__('There are {0} with the same filters already in the queue:', [report_link_html])}`;\n\n\t\tlet warning_message = `\n\t\t\t<p>\n\t\t\t\t${__(\"Are you sure you want to generate a new report?\")}\n\t\t\t\t${no_of_reports_html}\n\t\t\t</p>`;\n\n\t\tlet get_item_html = item => `<a class=\"underline\" href=\"/app/prepared-report/${item.name}\">${item.name}</a>`;\n\n\t\twarning_message += reports.map(get_item_html).join(', ');\n\n\t\treturn warning_message;\n\t}\n\n\tdelete_old_queued_reports() {\n\t\tthis.prepared_report_dialog.hide();\n\t\tfrappe.xcall(\n\t\t\t'frappe.core.doctype.prepared_report.prepared_report.delete_prepared_reports',\n\t\t\t{\n\t\t\t\treports: this.queued_prepared_reports,\n\t\t\t}\n\t\t).then(() => this.generate_background_report());\n\t}\n\n\tgenerate_background_report() {\n\t\tthis.toggle_primary_button_disabled(true);\n\t\tlet mandatory = this.filters.filter(f => f.df.reqd);\n\t\tlet missing_mandatory = mandatory.filter(f => !f.get_value());\n\t\tif (!missing_mandatory.length) {\n\t\t\tlet filters = this.get_filter_values(true);\n\t\t\treturn new Promise(resolve => frappe.call({\n\t\t\t\tmethod: 'frappe.desk.query_report.background_enqueue_run',\n\t\t\t\ttype: 'GET',\n\t\t\t\targs: {\n\t\t\t\t\treport_name: this.report_name,\n\t\t\t\t\tfilters: filters\n\t\t\t\t},\n\t\t\t\tcallback: resolve\n\t\t\t})).then(r => {\n\t\t\t\tconst data = r.message;\n\t\t\t\t// Rememeber the name of Prepared Report doc\n\t\t\t\tthis.prepared_report_doc_name = data.name;\n\t\t\t\tlet alert_message = `<a href='/app/prepared-report/${data.name}'>` +\n\t\t\t\t\t__('Report initiated, click to view status') + `</a>`;\n\t\t\t\tfrappe.show_alert({message: alert_message, indicator: 'orange'}, 10);\n\t\t\t\tthis.toggle_nothing_to_show(true);\n\t\t\t});\n\t\t}\n\t}\n\n\tprepare_report_data(data) {\n\t\tthis.raw_data = data;\n\t\tthis.columns = this.prepare_columns(data.columns);\n\t\tthis.custom_columns = [];\n\t\tthis.data = this.prepare_data(data.result);\n\t\tthis.linked_doctypes = this.get_linked_doctypes();\n\t\tthis.tree_report = this.data.some(d => 'indent' in d);\n\t}\n\n\trender_datatable() {\n\t\tlet data = this.data;\n\t\tlet columns = this.columns.filter((col) => !col.hidden);\n\n\t\tif (this.raw_data.add_total_row && !this.report_settings.tree) {\n\t\t\tdata = data.slice();\n\t\t\tdata.splice(-1, 1);\n\t\t}\n\n\t\tthis.$report.show();\n\t\tif (this.datatable && this.datatable.options\n\t\t\t&& (this.datatable.options.showTotalRow ===this.raw_data.add_total_row)) {\n\t\t\tthis.datatable.options.treeView = this.tree_report;\n\t\t\tthis.datatable.refresh(data, columns);\n\t\t} else {\n\t\t\tlet datatable_options = {\n\t\t\t\tcolumns: columns,\n\t\t\t\tdata: data,\n\t\t\t\tinlineFilters: true,\n\t\t\t\tlanguage: frappe.boot.lang,\n\t\t\t\ttranslations: frappe.utils.datatable.get_translations(),\n\t\t\t\ttreeView: this.tree_report,\n\t\t\t\tlayout: 'fixed',\n\t\t\t\tcellHeight: 33,\n\t\t\t\tshowTotalRow: this.raw_data.add_total_row && !this.report_settings.tree,\n\t\t\t\tdirection: frappe.utils.is_rtl() ? 'rtl' : 'ltr',\n\t\t\t\thooks: {\n\t\t\t\t\tcolumnTotal: frappe.utils.report_column_total\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (this.report_settings.get_datatable_options) {\n\t\t\t\tdatatable_options = this.report_settings.get_datatable_options(datatable_options);\n\t\t\t}\n\t\t\tthis.datatable = new DataTable(this.$report[0], datatable_options);\n\t\t}\n\n\t\tif (typeof this.report_settings.initial_depth == \"number\") {\n\t\t\tthis.datatable.rowmanager.setTreeDepth(this.report_settings.initial_depth);\n\t\t}\n\t\tif (this.report_settings.after_datatable_render) {\n\t\t\tthis.report_settings.after_datatable_render(this.datatable);\n\t\t}\n\t}\n\n\tshow_loading_screen() {\n\t\tconst loading_state = `<div class=\"msg-box no-border\">\n\t\t\t<div>\n\t\t\t\t<img src=\"/assets/frappe/images/ui-states/list-empty-state.svg\" alt=\"Generic Empty State\" class=\"null-state\">\n\t\t\t</div>\n\t\t\t<p>${__('Loading')}...</p>\n\t\t</div>`;\n\n\t\tthis.$loading.find('div').html(loading_state);\n\t\tthis.$report.hide();\n\t\tthis.$loading.show();\n\t}\n\n\thide_loading_screen() {\n\t\tthis.$loading.hide();\n\t}\n\n\tget_chart_options(data) {\n\t\tlet options = this.report_settings.get_chart_data\n\t\t\t? this.report_settings.get_chart_data(data.columns, data.result)\n\t\t\t: data.chart\n\t\t\t\t? data.chart\n\t\t\t\t: undefined;\n\n\t\tif (!(options && options.data && options.data.labels && options.data.labels.length > 0)) return;\n\n\t\tif (options.fieldtype) {\n\t\t\toptions.tooltipOptions = {\n\t\t\t\tformatTooltipY: d => frappe.format(d, {\n\t\t\t\t\tfieldtype: options.fieldtype,\n\t\t\t\t\toptions: options.options\n\t\t\t\t})\n\t\t\t};\n\t\t}\n\t\toptions.axisOptions = {\n\t\t\tshortenYAxisNumbers: 1\n\t\t};\n\t\toptions.height = 280;\n\n\t\treturn options;\n\t}\n\n\trender_chart(options) {\n\t\tthis.$chart.empty();\n\t\tthis.$chart.show();\n\t\tthis.chart = new frappe.Chart(this.$chart[0], options);\n\t}\n\n\topen_create_chart_dialog() {\n\t\tconst me = this;\n\t\tlet field_options = frappe.report_utils.get_field_options_from_report(this.columns, this.raw_data);\n\n\t\tfunction set_chart_values(values) {\n\t\t\tvalues.y_fields = [];\n\t\t\tvalues.colors = [];\n\t\t\tif (values.y_axis_fields) {\n\t\t\t\tvalues.y_axis_fields.map(f => {\n\t\t\t\t\tvalues.y_fields.push(f.y_field);\n\t\t\t\t\tvalues.colors.push(f.color);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvalues.y_fields =\n\t\t\t\tvalues.y_fields\n\t\t\t\t\t.map(d => d.trim())\n\t\t\t\t\t.filter(Boolean);\n\n\t\t\treturn values;\n\t\t}\n\n\t\tfunction preview_chart() {\n\t\t\tconst wrapper = $(dialog.fields_dict[\"chart_preview\"].wrapper);\n\t\t\tlet values = dialog.get_values(true);\n\t\t\tvalues = set_chart_values(values);\n\n\t\t\tif (values.x_field && values.y_fields.length) {\n\t\t\t\tlet options = frappe.report_utils.make_chart_options(me.columns, me.raw_data, values);\n\t\t\t\tme.chart_fields = values;\n\t\t\t\twrapper.empty();\n\t\t\t\tnew frappe.Chart(wrapper[0], options);\n\t\t\t\twrapper.find('.chart-container .title, .chart-container .sub-title').hide();\n\t\t\t\twrapper.show();\n\n\t\t\t\tdialog.fields_dict['create_dashoard_chart'].df.hidden = 0;\n\t\t\t\tdialog.refresh();\n\t\t\t}\n\t\t\telse {\n\t\t\t\twrapper[0].innerHTML =\n\t\t\t\t`<div class=\"flex justify-center align-center text-muted\" style=\"height: 120px; display: flex;\">\n\t\t\t\t\t<div>${__(\"Please select X and Y fields\")}</div>\n\t\t\t\t</div>`;\n\t\t\t}\n\t\t}\n\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Create Chart'),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'x_field',\n\t\t\t\t\tlabel: 'X Field',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\tdefault: me.chart_fields? me.chart_fields.x_field: null,\n\t\t\t\t\toptions: field_options.non_numeric_fields,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'cb_1',\n\t\t\t\t\tfieldtype: 'Column Break'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'chart_type',\n\t\t\t\t\tlabel: 'Type of Chart',\n\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\toptions: ['Bar', 'Line', 'Percentage', 'Pie', 'Donut'],\n\t\t\t\t\tdefault: me.chart_fields? me.chart_fields.chart_type: 'Bar',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'sb_1',\n\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\tlabel: 'Y Axis',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'y_axis_fields', fieldtype: 'Table',\n\t\t\t\t\tfields: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\t\t\tfieldname: 'y_field',\n\t\t\t\t\t\t\tname: 'y_field',\n\t\t\t\t\t\t\tlabel: __('Y Field'),\n\t\t\t\t\t\t\toptions: field_options.numeric_fields,\n\t\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfieldtype: 'Color',\n\t\t\t\t\t\t\tfieldname: 'color',\n\t\t\t\t\t\t\tname: 'color',\n\t\t\t\t\t\t\tlabel: __('Color'),\n\t\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'preview_chart_button',\n\t\t\t\t\tfieldtype: 'Button',\n\t\t\t\t\tlabel: 'Preview Chart',\n\t\t\t\t\tclick: preview_chart\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'sb_2',\n\t\t\t\t\tfieldtype: 'Section Break',\n\t\t\t\t\tlabel: 'Chart Preview'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'chart_preview',\n\t\t\t\t\tlabel: 'Chart Preview',\n\t\t\t\t\tfieldtype: 'HTML',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: 'create_dashoard_chart',\n\t\t\t\t\tlabel: 'Add Chart to Dashboard',\n\t\t\t\t\tfieldtype: 'Button',\n\t\t\t\t\thidden: 1,\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tdialog.hide();\n\t\t\t\t\t\tthis.add_chart_to_dashboard();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t],\n\t\t\tprimary_action_label: __('Create'),\n\t\t\tprimary_action: (values) => {\n\t\t\t\tvalues = set_chart_values(values);\n\n\t\t\t\tlet options =\n\t\t\t\t\tfrappe.report_utils.make_chart_options(\n\t\t\t\t\t\tthis.columns,\n\t\t\t\t\t\tthis.raw_data,\n\t\t\t\t\t\tvalues\n\t\t\t\t\t);\n\t\t\t\tme.chart_fields = values\n\n\t\t\t\tlet x_field_label =\n\t\t\t\t\tfield_options.numeric_fields.filter(field =>\n\t\t\t\t\t\tfield.value == values.y_fields[0]\n\t\t\t\t\t)[0].label;\n\t\t\t\tlet y_field_label =\n\t\t\t\t\tfield_options.non_numeric_fields.filter(field =>\n\t\t\t\t\t\tfield.value == values.x_field\n\t\t\t\t\t)[0].label;\n\n\t\t\t\toptions.title = __(\"{0}: {1} vs {2}\", [this.report_name, x_field_label, y_field_label]);\n\n\t\t\t\tthis.render_chart(options);\n\t\t\t\tthis.add_chart_buttons_to_toolbar(true);\n\n\t\t\t\tdialog.hide();\n\t\t\t}\n\t\t});\n\n\t\tdialog.show();\n\n\t\t// load preview after dialog animation\n\t\tsetTimeout(preview_chart, 500);\n\t}\n\n\tprepare_columns(columns) {\n\t\treturn columns.map(column => {\n\t\t\tcolumn = frappe.report_utils.prepare_field_from_column(column);\n\n\t\t\tconst format_cell = (value, row, column, data) => {\n\t\t\t\tif (column.isHeader && !data && this.data) {\n\t\t\t\t\t// totalRow doesn't have a data object\n\t\t\t\t\t// proxy it using the first data object\n\t\t\t\t\t// applied to Float, Currency fields, needed only for currency formatting.\n\t\t\t\t\t// make first data column have value 'Total'\n\t\t\t\t\tlet index = 1;\n\n\t\t\t\t\tif (this.report_settings.get_datatable_options) {\n\t\t\t\t\t\tlet datatable = this.report_settings.get_datatable_options({});\n\t\t\t\t\t\tif (datatable && datatable.checkboxColumn) index = 2;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (column.colIndex === index && !value) {\n\t\t\t\t\t\tvalue = \"Total\";\n\t\t\t\t\t\tcolumn = { fieldtype: \"Data\" }; // avoid type issues for value if Date column\n\t\t\t\t\t} else if (in_list([\"Currency\", \"Float\"], column.fieldtype)) {\n\t\t\t\t\t\t// proxy for currency and float\n\t\t\t\t\t\tdata = this.data[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn frappe.format(value, column,\n\t\t\t\t\t{for_print: false, always_show_decimals: true}, data);\n\t\t\t};\n\n\t\t\tlet compareFn = null;\n\t\t\tif (column.fieldtype === 'Date') {\n\t\t\t\tcompareFn = (cell, keyword) => {\n\t\t\t\t\tif (!cell.content) return null;\n\t\t\t\t\tif (keyword.length !== 'YYYY-MM-DD'.length) return null;\n\n\t\t\t\t\tconst keywordValue = frappe.datetime.user_to_obj(keyword);\n\t\t\t\t\tconst cellValue = frappe.datetime.str_to_obj(cell.content);\n\t\t\t\t\treturn [+cellValue, +keywordValue];\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn Object.assign(column, {\n\t\t\t\tid: column.fieldname,\n\t\t\t\tname: __(column.label, null, `Column of report '${this.report_name}'`), // context has to match context in   get_messages_from_report in translate.py\n\t\t\t\twidth: parseInt(column.width) || null,\n\t\t\t\teditable: false,\n\t\t\t\tcompareValue: compareFn,\n\t\t\t\tformat: (value, row, column, data) => {\n\t\t\t\t\tif (this.report_settings.formatter) {\n\t\t\t\t\t\treturn this.report_settings.formatter(value, row, column, data, format_cell);\n\t\t\t\t\t}\n\t\t\t\t\treturn format_cell(value, row, column, data);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tprepare_data(data) {\n\t\treturn data.map(row => {\n\t\t\tlet row_obj = {};\n\t\t\tif (Array.isArray(row)) {\n\t\t\t\tthis.columns.forEach((column, i) => {\n\t\t\t\t\trow_obj[column.id] = row[i];\n\t\t\t\t});\n\n\t\t\t\treturn row_obj;\n\t\t\t}\n\t\t\treturn row;\n\t\t});\n\t}\n\n\tget_visible_columns() {\n\t\tconst visible_column_ids = this.datatable.datamanager.getColumns(true).map(col => col.id);\n\n\t\treturn visible_column_ids\n\t\t\t.map(id => this.columns.find(col => col.id === id))\n\t\t\t.filter(Boolean);\n\t}\n\n\tget_filter_values(raise) {\n\n\t\t// check for mandatory property for filters added via UI\n\t\tconst mandatory = this.filters.filter(f => (f.df.reqd || f.df.mandatory));\n\t\tconst missing_mandatory = mandatory.filter(f => !f.get_value());\n\t\tif (raise && missing_mandatory.length > 0) {\n\t\t\tlet message = __('Please set filters');\n\t\t\tthis.hide_loading_screen();\n\t\t\tthis.toggle_message(raise, message);\n\t\t\tthrow \"Filter missing\";\n\t\t}\n\n\t\traise && this.toggle_message(false);\n\n\t\tconst filters = this.filters\n\t\t\t.filter(f => f.get_value())\n\t\t\t.map(f => {\n\t\t\t\tvar v = f.get_value();\n\t\t\t\t// hidden fields dont have $input\n\t\t\t\tif (f.df.hidden) v = f.value;\n\t\t\t\tif (v === '%') v = null;\n\t\t\t\tif (f.df.wildcard_filter) {\n\t\t\t\t\tv = `%${v}%`;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t[f.df.fieldname]: v\n\t\t\t\t};\n\t\t\t})\n\t\t\t.reduce((acc, f) => {\n\t\t\t\tObject.assign(acc, f);\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\treturn filters;\n\t}\n\n\tget_filter(fieldname) {\n\t\tconst field = (this.filters || []).find(f => f.df.fieldname === fieldname);\n\t\tif (!field) {\n\t\t\tconsole.warn(`[Query Report] Invalid filter: ${fieldname}`);\n\t\t}\n\t\treturn field;\n\t}\n\n\tget_filter_value(fieldname) {\n\t\tconst field = this.get_filter(fieldname);\n\t\treturn field ? field.get_value() : null;\n\t}\n\n\tset_filter_value(fieldname, value) {\n\t\tlet field_value_map = {};\n\t\tif (typeof fieldname === 'string') {\n\t\t\tfield_value_map[fieldname] = value;\n\t\t} else {\n\t\t\tfield_value_map = fieldname;\n\t\t}\n\n\t\tthis._no_refresh = true;\n\t\tObject.keys(field_value_map)\n\t\t\t.forEach((fieldname, i, arr) => {\n\t\t\t\tconst value = field_value_map[fieldname];\n\n\t\t\t\tif (i === arr.length - 1) {\n\t\t\t\t\tthis._no_refresh = false;\n\t\t\t\t}\n\n\t\t\t\tthis.get_filter(fieldname).set_value(value);\n\t\t\t});\n\t}\n\n\tset_breadcrumbs() {\n\t\tif (!this.report_doc || !this.report_doc.ref_doctype) return;\n\t\tconst ref_doctype = frappe.get_meta(this.report_doc.ref_doctype);\n\t\tfrappe.breadcrumbs.add(ref_doctype.module);\n\t}\n\n\tmake_access_log (method, file_format) {\n\t\tfrappe.call(\"frappe.core.doctype.access_log.access_log.make_access_log\",\n\t\t\t{\n\t\t\t\tdoctype: this.doctype || '',\n\t\t\t\treport_name: this.report_name,\n\t\t\t\tfilters: this.get_filter_values(),\n\t\t\t\tfile_type: file_format,\n\t\t\t\tmethod: method\n\t\t\t});\n\t}\n\n\tprint_report(print_settings) {\n\t\tconst custom_format = this.report_settings.html_format || null;\n\t\tconst filters_html = this.get_filters_html_for_print();\n\t\tconst landscape = print_settings.orientation == 'Landscape';\n\n\t\tthis.make_access_log('Print', 'PDF');\n\t\tfrappe.render_grid({\n\t\t\ttemplate: print_settings.columns ? 'print_grid' : custom_format,\n\t\t\ttitle: __(this.report_name),\n\t\t\tsubtitle: filters_html,\n\t\t\tprint_settings: print_settings,\n\t\t\tlandscape: landscape,\n\t\t\tfilters: this.get_filter_values(),\n\t\t\tdata: this.get_data_for_print(),\n\t\t\tcolumns: this.get_columns_for_print(print_settings, custom_format),\n\t\t\toriginal_data: this.data,\n\t\t\treport: this,\n\t\t\tcan_use_smaller_font: this.report_doc.is_standard === \"Yes\" && custom_format ? 0 : 1,\n\t\t});\n\t}\n\n\tpdf_report(print_settings) {\n\t\tconst base_url = frappe.urllib.get_base_url();\n\t\tconst print_css = frappe.boot.print_css;\n\t\tconst landscape = print_settings.orientation == 'Landscape';\n\n\t\tconst custom_format = this.report_settings.html_format || null;\n\t\tconst columns = this.get_columns_for_print(print_settings, custom_format);\n\t\tconst data = this.get_data_for_print();\n\t\tconst applied_filters = this.get_filter_values();\n\n\t\tconst filters_html = this.get_filters_html_for_print();\n\t\tconst template =\n\t\t\tprint_settings.columns || !custom_format ? 'print_grid' : custom_format;\n\t\tconst content = frappe.render_template(template, {\n\t\t\ttitle: __(this.report_name),\n\t\t\tsubtitle: filters_html,\n\t\t\tfilters: applied_filters,\n\t\t\tdata: data,\n\t\t\toriginal_data: this.data,\n\t\t\tcolumns: columns,\n\t\t\treport: this\n\t\t});\n\n\t\t// Render Report in HTML\n\t\tconst html = frappe.render_template('print_template', {\n\t\t\ttitle: __(this.report_name),\n\t\t\tcontent: content,\n\t\t\tbase_url: base_url,\n\t\t\tprint_css: print_css,\n\t\t\tprint_settings: print_settings,\n\t\t\tlandscape: landscape,\n\t\t\tcolumns: columns,\n\t\t\tlang: frappe.boot.lang,\n\t\t\tlayout_direction: frappe.utils.is_rtl() ? \"rtl\" : \"ltr\",\n\t\t\tcan_use_smaller_font: this.report_doc.is_standard === \"Yes\" && custom_format ? 0 : 1,\n\t\t});\n\n\t\tlet filter_values = [],\n\t\t\tname_len = 0;\n\t\tfor (var key of Object.keys(applied_filters)) {\n\t\t\tname_len = name_len + applied_filters[key].toString().length;\n\t\t\tif (name_len > 200) break;\n\t\t\tfilter_values.push(applied_filters[key]);\n\t\t}\n\t\tprint_settings.report_name = `${__(this.report_name)}_${filter_values.join(\"_\")}.pdf`;\n\t\tfrappe.render_pdf(html, print_settings);\n\t}\n\n\tget_filters_html_for_print() {\n\t\tconst applied_filters = this.get_filter_values();\n\t\treturn Object.keys(applied_filters)\n\t\t\t.map((fieldname) => {\n\t\t\t\tconst docfield = frappe.query_report.get_filter(fieldname).df;\n\t\t\t\tconst value = applied_filters[fieldname];\n\t\t\t\treturn `<h6>${__(docfield.label)}: ${frappe.format(value, docfield)}</h6>`;\n\t\t\t})\n\t\t\t.join('');\n\t}\n\n\texport_report() {\n\t\tif (this.export_dialog) {\n\t\t\tthis.export_dialog.clear();\n\t\t\tthis.export_dialog.show();\n\t\t\treturn;\n\t\t}\n\n\t\tlet export_dialog_fields = [\n\t\t\t{\n\t\t\t\tlabel: __('Select File Format'),\n\t\t\t\tfieldname: 'file_format',\n\t\t\t\tfieldtype: 'Select',\n\t\t\t\toptions: ['Excel', 'CSV'],\n\t\t\t\tdefault: 'Excel',\n\t\t\t\treqd: 1\n\t\t\t}\n\t\t];\n\n\t\tif (this.tree_report) {\n\t\t\texport_dialog_fields.push({\n\t\t\t\tlabel: __(\"Include indentation\"),\n\t\t\t\tfieldname: \"include_indentation\",\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t});\n\t\t}\n\n\t\tthis.export_dialog = frappe.prompt(export_dialog_fields, ({ file_format, include_indentation }) => {\n\t\t\tthis.make_access_log('Export', file_format);\n\t\t\tif (file_format === 'CSV') {\n\t\t\t\tconst column_row = this.columns.reduce((acc, col) => {\n\t\t\t\t\tif (!col.hidden) {\n\t\t\t\t\t\tacc.push(col.label);\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t}, []);\n\t\t\t\tconst data = this.get_data_for_csv(include_indentation);\n\t\t\t\tconst out = [column_row].concat(data);\n\n\t\t\t\tfrappe.tools.downloadify(out, null, this.report_name);\n\t\t\t} else {\n\t\t\t\tlet filters = this.get_filter_values(true);\n\t\t\t\tif (frappe.urllib.get_dict(\"prepared_report_name\")) {\n\t\t\t\t\tfilters = Object.assign(frappe.urllib.get_dict(\"prepared_report_name\"), filters);\n\t\t\t\t}\n\n\t\t\t\tconst visible_idx = this.datatable.bodyRenderer.visibleRowIndices;\n\t\t\t\tif (visible_idx.length + 1 === this.data.length) {\n\t\t\t\t\tvisible_idx.push(visible_idx.length);\n\t\t\t\t}\n\n\t\t\t\tconst args = {\n\t\t\t\t\tcmd: 'frappe.desk.query_report.export_query',\n\t\t\t\t\treport_name: this.report_name,\n\t\t\t\t\tcustom_columns: this.custom_columns.length? this.custom_columns: [],\n\t\t\t\t\tfile_format_type: file_format,\n\t\t\t\t\tfilters: filters,\n\t\t\t\t\tvisible_idx,\n\t\t\t\t\tinclude_indentation,\n\t\t\t\t};\n\n\t\t\t\topen_url_post(frappe.request.url, args);\n\t\t\t}\n\t\t}, __('Export Report: {0}', [this.report_name]), __('Download'));\n\t}\n\n\tget_data_for_csv(include_indentation) {\n\t\tconst rows = this.datatable.bodyRenderer.visibleRows;\n\t\tif (this.raw_data.add_total_row) {\n\t\t\trows.push(this.datatable.bodyRenderer.getTotalRow());\n\t\t}\n\t\treturn rows.map(row => {\n\t\t\tconst standard_column_count = this.datatable.datamanager.getStandardColumnCount();\n\t\t\treturn row\n\t\t\t\t.slice(standard_column_count)\n\t\t\t\t.map((cell, i) => {\n\t\t\t\t\tif (cell.column.fieldtype === \"Duration\") {\n\t\t\t\t\t\tcell.content = frappe.utils.get_formatted_duration(cell.content);\n\t\t\t\t\t}\n\t\t\t\t\tif (include_indentation && i===0) {\n\t\t\t\t\t\tcell.content = '   '.repeat(row.meta.indent) + (cell.content || '');\n\t\t\t\t\t}\n\t\t\t\t\treturn cell.content || '';\n\t\t\t\t});\n\t\t});\n\t}\n\n\tget_data_for_print() {\n\t\tif (!this.data.length) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst rows = this.datatable.datamanager.rowViewOrder.map(index => {\n\t\t\tif (this.datatable.bodyRenderer.visibleRowIndices.includes(index)) {\n\t\t\t\treturn this.data[index];\n\t\t\t}\n\t\t}).filter(Boolean);\n\n\t\tif (this.raw_data.add_total_row) {\n\t\t\tlet totalRow = this.datatable.bodyRenderer.getTotalRow().reduce((row, cell) => {\n\t\t\t\trow[cell.column.id] = cell.content;\n\t\t\t\trow.is_total_row = true;\n\t\t\t\treturn row;\n\t\t\t}, {});\n\n\t\t\trows.push(totalRow);\n\t\t}\n\t\treturn rows;\n\t}\n\n\tget_columns_for_print(print_settings, custom_format) {\n\t\tlet columns = [];\n\n\t\tif (print_settings && print_settings.columns) {\n\t\t\tcolumns = this.get_visible_columns().filter(column =>\n\t\t\t\tprint_settings.columns.includes(column.fieldname)\n\t\t\t);\n\t\t} else {\n\t\t\tcolumns = custom_format ? this.columns : this.get_visible_columns();\n\t\t}\n\n\t\treturn columns;\n\t}\n\n\tget_menu_items() {\n\t\tlet items = [\n\t\t\t{\n\t\t\t\tlabel: __('Refresh'),\n\t\t\t\taction: () => this.refresh(),\n\t\t\t\tclass: 'visible-xs'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Edit'),\n\t\t\t\taction: () => frappe.set_route('Form', 'Report', this.report_name),\n\t\t\t\tcondition: () => frappe.user.is_report_manager(),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Print'),\n\t\t\t\taction: () => {\n\t\t\t\t\tlet dialog = frappe.ui.get_print_settings(\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tprint_settings => this.print_report(print_settings),\n\t\t\t\t\t\tthis.report_doc.letter_head,\n\t\t\t\t\t\tthis.get_visible_columns()\n\t\t\t\t\t);\n\t\t\t\t\tthis.add_portrait_warning(dialog);\n\t\t\t\t},\n\t\t\t\tcondition: () => frappe.model.can_print(this.report_doc.ref_doctype),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('PDF'),\n\t\t\t\taction: () => {\n\t\t\t\t\tlet dialog = frappe.ui.get_print_settings(\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tprint_settings => this.pdf_report(print_settings),\n\t\t\t\t\t\tthis.report_doc.letter_head,\n\t\t\t\t\t\tthis.get_visible_columns()\n\t\t\t\t\t);\n\n\t\t\t\t\tthis.add_portrait_warning(dialog);\n\t\t\t\t},\n\t\t\t\tcondition: () => frappe.model.can_print(this.report_doc.ref_doctype),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Export'),\n\t\t\t\taction: () => this.export_report(),\n\t\t\t\tcondition: () => frappe.model.can_export(this.report_doc.ref_doctype),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Setup Auto Email'),\n\t\t\t\taction: () => frappe.set_route('List', 'Auto Email Report', {'report' : this.report_name}),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Add Column'),\n\t\t\t\taction: () => {\n\t\t\t\t\tlet d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __('Add Column'),\n\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\t\t\t\tfieldname: 'doctype',\n\t\t\t\t\t\t\t\tlabel: __('From Document Type'),\n\t\t\t\t\t\t\t\toptions: this.linked_doctypes.map(df => ({ label: df.doctype, value: df.doctype })),\n\t\t\t\t\t\t\t\tchange: () => {\n\t\t\t\t\t\t\t\t\tlet doctype = d.get_value('doctype');\n\t\t\t\t\t\t\t\t\tfrappe.model.with_doctype(doctype, () => {\n\t\t\t\t\t\t\t\t\t\tlet options = frappe.meta.get_docfields(doctype)\n\t\t\t\t\t\t\t\t\t\t\t.filter(frappe.model.is_value_type)\n\t\t\t\t\t\t\t\t\t\t\t.map(df => ({ label: df.label, value: df.fieldname }));\n\n\t\t\t\t\t\t\t\t\t\td.set_df_property('field', 'options', options.sort(function(a, b) {\n\t\t\t\t\t\t\t\t\t\t\tif (a.label < b.label) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tif (a.label > b.label) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\t\t\t\tlabel: __('Field'),\n\t\t\t\t\t\t\t\tfieldname: 'field',\n\t\t\t\t\t\t\t\toptions: []\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\t\t\t\tlabel: __('Insert After'),\n\t\t\t\t\t\t\t\tfieldname: 'insert_after',\n\t\t\t\t\t\t\t\toptions: this.columns.map(df => df.label)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\t\t\tconst custom_columns = [];\n\t\t\t\t\t\t\tlet df = frappe.meta.get_docfield(values.doctype, values.field);\n\t\t\t\t\t\t\tconst insert_after_index = this.columns\n\t\t\t\t\t\t\t\t.findIndex(column => column.label === values.insert_after);\n\n\t\t\t\t\t\t\tlet fieldname = this.get_fieldname_for_column(df.fieldname, values.doctype);\n\n\t\t\t\t\t\t\tcustom_columns.push({\n\t\t\t\t\t\t\t\tfieldname: fieldname,\n\t\t\t\t\t\t\t\tfield: values.field,\n\t\t\t\t\t\t\t\tfieldtype: df.fieldtype,\n\t\t\t\t\t\t\t\tlabel: df.label,\n\t\t\t\t\t\t\t\tinsert_after_index: insert_after_index,\n\t\t\t\t\t\t\t\tlink_field: this.doctype_field_map[values.doctype],\n\t\t\t\t\t\t\t\tdoctype: values.doctype,\n\t\t\t\t\t\t\t\toptions: df.options,\n\t\t\t\t\t\t\t\twidth: 100\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.custom_columns = this.custom_columns.concat(custom_columns);\n\t\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\t\tmethod: 'frappe.desk.query_report.get_data_for_custom_field',\n\t\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\t\tdoctype: values.doctype,\n\t\t\t\t\t\t\t\t\tfieldname: fieldname,\n\t\t\t\t\t\t\t\t\tfield: values.field\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\t\t\t\tconst custom_data = r.message;\n\t\t\t\t\t\t\t\t\tconst link_field = this.doctype_field_map[values.doctype];\n\t\t\t\t\t\t\t\t\tthis.add_custom_column(custom_columns, custom_data, link_field, fieldname, insert_after_index);\n\t\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.set_menu_items();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t\td.show();\n\t\t\t\t},\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('User Permissions'),\n\t\t\t\taction: () => frappe.set_route('List', 'User Permission', {\n\t\t\t\t\tdoctype: 'Report',\n\t\t\t\t\tname: this.report_name\n\t\t\t\t}),\n\t\t\t\tcondition: () => frappe.model.can_set_user_permissions('Report'),\n\t\t\t\tstandard: true\n\t\t\t}\n\t\t];\n\n\t\tif (frappe.user.is_report_manager()) {\n\t\t\titems.push({\n\t\t\t\tlabel: __('Save'),\n\t\t\t\taction: () => {\n\t\t\t\t\tlet d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __('Save Report'),\n\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfieldtype: 'Data',\n\t\t\t\t\t\t\t\tfieldname: 'report_name',\n\t\t\t\t\t\t\t\tlabel: __(\"Report Name\"),\n\t\t\t\t\t\t\t\tdefault: this.report_doc.is_standard == 'No' ? this.report_name : \"\",\n\t\t\t\t\t\t\t\treqd: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\t\tmethod: \"frappe.desk.query_report.save_report\",\n\t\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\t\treference_report: this.report_name,\n\t\t\t\t\t\t\t\t\treport_name: values.report_name,\n\t\t\t\t\t\t\t\t\tcolumns: this.get_visible_columns(),\n\t\t\t\t\t\t\t\t\tfilters: this.get_filter_values(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\t\t\t\tthis.show_save = false;\n\t\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t\t\tfrappe.set_route('query-report', r.message);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\td.show();\n\t\t\t\t},\n\t\t\t\tstandard: true\n\t\t\t})\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tadd_portrait_warning(dialog) {\n\t\tif (this.columns.length > 10) {\n\t\t\tdialog.set_df_property('orientation', 'change', () => {\n\t\t\t\tlet value = dialog.get_value('orientation');\n\t\t\t\tlet description = value === 'Portrait'\n\t\t\t\t\t? __('Report with more than 10 columns looks better in Landscape mode.')\n\t\t\t\t\t: '';\n\t\t\t\tdialog.set_df_property('orientation', 'description', description);\n\t\t\t});\n\t\t}\n\t}\n\n\tget_fieldname_for_column(fieldname, doctype) {\n\t\t// check if fieldname already used for any other column\n\t\tlet existing_fieldnames = [];\n\t\tthis.columns.forEach(column => {\n\t\t\texisting_fieldnames.push(column.fieldname);\n\t\t});\n\n\t\t// Append doctype after fieldname to avoid conflict\n\t\tif (existing_fieldnames.includes(fieldname)) {\n\t\t\tfieldname = frappe.model.scrub(fieldname + \" \" + doctype);\n\t\t}\n\n\t\treturn fieldname;\n\t}\n\n\tadd_custom_column(custom_column, custom_data, link_field, column_field, insert_after_index) {\n\t\tconst column = this.prepare_columns(custom_column);\n\n\t\tthis.columns.splice(insert_after_index + 1, 0, column[0]);\n\n\t\tthis.data.forEach(row => {\n\t\t\trow[column_field] = custom_data[row[link_field]];\n\t\t});\n\n\t\tthis.render_datatable();\n\t}\n\n\tget_linked_doctypes() {\n\t\tlet doctypes = [];\n\t\tlet dynamic_links = [];\n\t\tlet dynamic_doctypes = new Set();\n\t\tthis.doctype_field_map = {};\n\n\t\tthis.columns.forEach(df => {\n\t\t\tif (df.fieldtype == \"Link\" && df.options && df.options != \"Currency\") {\n\t\t\t\tdoctypes.push({\n\t\t\t\t\tdoctype: df.options,\n\t\t\t\t\tfieldname: df.fieldname\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (df.fieldtype == \"Dynamic Link\" && df.options) {\n\t\t\t\tdynamic_links.push({\n\t\t\t\t\tlink_name: df.options,\n\t\t\t\t\tfieldname: df.fieldname\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.data.forEach(row => {\n\t\t\tdynamic_links.forEach(field => {\n\t\t\t\tif (row[field.link_name]){\n\t\t\t\t\tdynamic_doctypes.add(row[field.link_name] + \":\" + field.fieldname);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tdoctypes = doctypes.concat(Array.from(dynamic_doctypes).map(d => {\n\t\t\tconst doc_field_pair = d.split(\":\");\n\t\t\treturn {\n\t\t\t\tdoctype: doc_field_pair[0],\n\t\t\t\tfieldname: doc_field_pair[1]\n\t\t\t};\n\t\t}));\n\n\t\tdoctypes.forEach(doc => {\n\t\t\tthis.doctype_field_map[doc.doctype] = doc.fieldname;\n\t\t});\n\n\t\treturn doctypes;\n\t}\n\n\tsetup_report_wrapper() {\n\t\tif (this.$report) return;\n\n\t\t// Remove border from\n\t\t$(\".page-head-content\").removeClass('border-bottom');\n\n\t\tlet page_form = this.page.main.find('.page-form');\n\t\tthis.$status = $(`<div class=\"form-message text-muted small\"></div>`)\n\t\t\t.hide().insertAfter(page_form);\n\n\t\tthis.$summary = $(`<div class=\"report-summary\"></div>`)\n\t\t\t.hide().appendTo(this.page.main);\n\n\t\tthis.$chart = $('<div class=\"chart-wrapper\">').hide().appendTo(this.page.main);\n\n\t\tthis.$loading = $(this.message_div('')).hide().appendTo(this.page.main);\n\t\tthis.$report = $('<div class=\"report-wrapper\">').appendTo(this.page.main);\n\t\tthis.$message = $(this.message_div('')).hide().appendTo(this.page.main);\n\t}\n\n\tshow_status(status_message) {\n\t\tthis.$status.html(status_message).show();\n\t}\n\n\thide_status() {\n\t\tthis.$status.hide();\n\t}\n\n\tshow_footer_message() {\n\t\tthis.$report_footer && this.$report_footer.remove();\n\t\tthis.$report_footer = $(`<div class=\"report-footer text-muted\"></div>`).appendTo(this.page.main);\n\t\tif (this.tree_report) {\n\t\t\tthis.$tree_footer = $(`<div class=\"tree-footer col-md-6\">\n\t\t\t\t<button class=\"btn btn-xs btn-default\" data-action=\"expand_all_rows\">\n\t\t\t\t\t${__('Expand All')}</button>\n\t\t\t\t<button class=\"btn btn-xs btn-default\" data-action=\"collapse_all_rows\">\n\t\t\t\t\t${__('Collapse All')}</button>\n\t\t\t</div>`);\n\t\t\t$(this.$report_footer).append(this.$tree_footer);\n\t\t\tthis.$tree_footer.find('[data-action=collapse_all_rows]').show();\n\t\t\tthis.$tree_footer.find('[data-action=expand_all_rows]').hide();\n\t\t}\n\n\t\tconst message = __('For comparison, use >5, <10 or =324. For ranges, use 5:10 (for values between 5 & 10).');\n\t\tconst execution_time_msg = __('Execution Time: {0} sec', [this.execution_time || 0.1]);\n\n\t\tthis.$report_footer.append(`<div class=\"col-md-12\">\n\t\t\t<span\">${message}</span><span class=\"pull-right\">${execution_time_msg}</span>\n\t\t</div>`);\n\t}\n\n\texpand_all_rows() {\n\t\tthis.$tree_footer.find('[data-action=expand_all_rows]').hide();\n\t\tthis.datatable.rowmanager.expandAllNodes();\n\t\tthis.$tree_footer.find('[data-action=collapse_all_rows]').show();\n\t}\n\n\tcollapse_all_rows() {\n\t\tthis.$tree_footer.find('[data-action=collapse_all_rows]').hide();\n\t\tthis.datatable.rowmanager.collapseAllNodes();\n\t\tthis.$tree_footer.find('[data-action=expand_all_rows]').show();\n\t}\n\n\tmessage_div(message) {\n\t\treturn `<div class='flex justify-center align-center text-muted' style='height: 50vh;'>\n\t\t\t<div>${message}</div>\n\t\t</div>`;\n\t}\n\n\treset_report_view() {\n\t\tthis.hide_status();\n\t\tthis.toggle_nothing_to_show(true);\n\t\tthis.refresh();\n\t}\n\n\ttoggle_nothing_to_show(flag) {\n\t\tlet message = (this.prepared_report && !this.prepared_report_document)\n\t\t\t? __('This is a background report. Please set the appropriate filters and then generate a new one.')\n\t\t\t: this.get_no_result_message();\n\n\t\tthis.toggle_message(flag, message);\n\n\t\tif (flag && this.prepared_report) {\n\t\t\tthis.prepared_report_action = \"New\";\n\t\t\tif (!this.primary_button.is(':visible')) {\n\t\t\t\tthis.add_prepared_report_buttons();\n\t\t\t}\n\t\t}\n\t}\n\n\ttoggle_message(flag, message) {\n\t\tif (flag) {\n\t\t\tthis.$message.find('div').html(message);\n\t\t\tthis.$message.show();\n\t\t} else {\n\t\t\tthis.$message.hide();\n\t\t}\n\t}\n\n\ttoggle_filter_display(fieldname, flag) {\n\t\tthis.$page.find(`div[data-fieldname=${fieldname}]`).toggleClass('hide-control', flag);\n\t}\n\n\ttoggle_report(flag) {\n\t\tthis.$report.toggle(flag);\n\t\tthis.$chart.toggle(flag);\n\t\tthis.$summary.toggle(flag);\n\t}\n\t// backward compatibility\n\tget get_values() {\n\t\treturn this.get_filter_values;\n\t}\n};\n\nObject.defineProperty(frappe, 'query_report_filters_by_name', {\n\tget() {\n\t\tconsole.warn('[Query Report] frappe.query_report_filters_by_name is deprecated. Please use the new api: frappe.query_report.get_filter_value(fieldname) and frappe.query_report.set_filter_value(fieldname, value)');\n\t\treturn null;\n\t}\n});\n","frappe.provide('frappe.views');\n\nfrappe.ui.GroupBy = class {\n\tconstructor(report_view) {\n\t\tthis.report_view = report_view;\n\t\tthis.page = report_view.page;\n\t\tthis.doctype = report_view.doctype;\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tthis.make_group_by_button();\n\t\tthis.init_group_by_popover();\n\t\tthis.set_popover_events();\n\t}\n\n\tinit_group_by_popover() {\n\t\tconst sql_aggregate_functions = [\n\t\t\t{name: 'count', label: __('Count')},\n\t\t\t{name: 'sum', label: __('Sum')},\n\t\t\t{name: 'avg', label: __('Average')}\n\t\t];\n\n\t\tconst group_by_template = $(\n\t\t\tfrappe.render_template('group_by', {\n\t\t\t\tdoctype: this.doctype,\n\t\t\t\tgroup_by_conditions: this.get_group_by_fields(),\n\t\t\t\taggregate_function_conditions: sql_aggregate_functions,\n\t\t\t})\n\t\t);\n\n\t\tthis.group_by_button.popover({\n\t\t\tcontent: group_by_template,\n\t\t\ttemplate: `\n\t\t\t\t<div class=\"group-by-popover popover\">\n\t\t\t\t\t<div class=\"arrow\"></div>\n\t\t\t\t\t<div class=\"popover-body popover-content\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\thtml: true,\n\t\t\ttrigger: 'manual',\n\t\t\tcontainer: 'body',\n\t\t\tplacement: 'bottom',\n\t\t\toffset: '-100px, 0',\n\t\t});\n\t}\n\n\t// TODO: make common with filter popover\n\tset_popover_events() {\n\t\t$(document.body).on('click', (e) => {\n\t\t\tif (this.wrapper && this.wrapper.is(':visible')) {\n\t\t\t\tif (\n\t\t\t\t\t$(e.target).parents('.group-by-popover').length === 0 &&\n\t\t\t\t\t$(e.target).parents('.group-by-box').length === 0 &&\n\t\t\t\t\t$(e.target).parents('.group-by-button').length === 0 &&\n\t\t\t\t\t!$(e.target).is(this.group_by_button)\n\t\t\t\t) {\n\t\t\t\t\tthis.wrapper && this.group_by_button.popover('hide');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.group_by_button.on('click', () => {\n\t\t\tthis.group_by_button.popover('toggle');\n\t\t});\n\n\t\tthis.group_by_button.on('shown.bs.popover', () => {\n\t\t\tif (!this.wrapper) {\n\t\t\t\tthis.wrapper = $('.group-by-popover');\n\t\t\t\tthis.setup_group_by_area();\n\t\t\t}\n\t\t});\n\n\t\tthis.group_by_button.on('hidden.bs.popover', () => {\n\t\t\tthis.update_group_by_button();\n\t\t});\n\n\t\tfrappe.router.on('change', () => {\n\t\t\tthis.group_by_button.popover('hide');\n\t\t});\n\t}\n\n\tsetup_group_by_area() {\n\t\tthis.aggregate_on_html = ``;\n\t\tthis.group_by_select = this.wrapper.find('select.group-by');\n\t\tthis.group_by_field && this.group_by_select.val(this.group_by_field);\n\t\tthis.aggregate_function_select = this.wrapper.find(\n\t\t\t'select.aggregate-function'\n\t\t);\n\t\tthis.aggregate_on_select = this.wrapper.find('select.aggregate-on');\n\t\tthis.remove_group_by_button = this.wrapper.find('.remove-group-by');\n\n\t\tif (this.aggregate_function) {\n\t\t\tthis.aggregate_function_select.val(this.aggregate_function);\n\t\t} else {\n\t\t\t// set default to count\n\t\t\tthis.aggregate_function_select.val('count');\n\t\t\tthis.aggregate_function = 'count';\n\t\t}\n\n\t\tthis.toggle_aggregate_on_field();\n\t\tthis.aggregate_on && this.aggregate_on_select.val(this.aggregate_on_field);\n\n\t\tthis.set_group_by_events();\n\t}\n\n\tset_group_by_events() {\n\t\t// try running on change\n\t\tthis.group_by_select.on('change', () => {\n\t\t\tthis.group_by_field = this.group_by_select.val();\n\t\t\tthis.group_by_doctype = this.group_by_select\n\t\t\t\t.find(':selected')\n\t\t\t\t.attr('data-doctype');\n\t\t\tthis.apply_group_by_and_refresh();\n\t\t});\n\n\t\tthis.aggregate_function_select.on('change', () => {\n\t\t\t//Set aggregate on options as numeric fields if function is sum or average\n\t\t\tthis.toggle_aggregate_on_field();\n\t\t\tthis.aggregate_function = this.aggregate_function_select.val();\n\t\t\tthis.apply_group_by_and_refresh();\n\t\t});\n\n\t\tthis.aggregate_on_select.on('change', () => {\n\t\t\tthis.aggregate_on_field = this.aggregate_on_select.val();\n\t\t\tthis.aggregate_on_doctype = this.aggregate_on_select\n\t\t\t\t.find(':selected')\n\t\t\t\t.attr('data-doctype');\n\t\t\tthis.apply_group_by_and_refresh();\n\t\t});\n\n\t\tthis.remove_group_by_button.on('click', () => {\n\t\t\tif (this.group_by) {\n\t\t\t\tthis.remove_group_by();\n\t\t\t\tthis.toggle_aggregate_on_field_display(false);\n\t\t\t}\n\t\t});\n\t}\n\n\ttoggle_aggregate_on_field() {\n\t\tlet fn = this.aggregate_function_select.val();\n\t\tif (fn === 'sum' || fn === 'avg') {\n\t\t\tif (!this.aggregate_on_html.length) {\n\t\t\t\tthis.aggregate_on_html = `<option value=\"\" disabled selected>\n\t\t\t\t\t\t${__('Select Field...')}\n\t\t\t\t\t</option>`;\n\n\t\t\t\tfor (let doctype in this.all_fields) {\n\t\t\t\t\tconst doctype_fields = this.all_fields[doctype];\n\t\t\t\t\tdoctype_fields.forEach((field) => {\n\t\t\t\t\t\t// pick numeric fields for sum / avg\n\t\t\t\t\t\tif (frappe.model.is_numeric_field(field.fieldtype)) {\n\t\t\t\t\t\t\tlet option_text =\n\t\t\t\t\t\t\t\tdoctype == this.doctype\n\t\t\t\t\t\t\t\t\t? field.label\n\t\t\t\t\t\t\t\t\t: `${field.label} (${__(doctype)})`;\n\t\t\t\t\t\t\tthis.aggregate_on_html += `<option data-doctype=\"${doctype}\"\n\t\t\t\t\t\t\t\tvalue=\"${field.fieldname}\">${__(option_text)}</option>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.aggregate_on_select.html(this.aggregate_on_html);\n\t\t\tthis.toggle_aggregate_on_field_display(true);\n\t\t} else {\n\t\t\t// count, so no aggregate function\n\t\t\tthis.toggle_aggregate_on_field_display(false);\n\t\t}\n\t}\n\n\t//TODO: Fix this\n\ttoggle_aggregate_on_field_display(show) {\n\t\tthis.group_by_select.parent().toggleClass('col-sm-5', show);\n\t\tthis.group_by_select.parent().toggleClass('col-sm-8', !show);\n\t\tthis.aggregate_function_select.parent().toggleClass('col-sm-2', show);\n\t\tthis.aggregate_function_select.parent().toggleClass('col-sm-3', !show);\n\t\tthis.aggregate_on_select.parent().toggle(show);\n\t}\n\n\tget_settings() {\n\t\tif (this.group_by) {\n\t\t\treturn {\n\t\t\t\tgroup_by: this.group_by,\n\t\t\t\taggregate_function: this.aggregate_function,\n\t\t\t\taggregate_on: this.aggregate_on,\n\t\t\t};\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tapply_settings(settings) {\n\t\tlet get_fieldname = (name) => name.split('.')[1].replace(/`/g, '');\n\t\tlet get_doctype = (name) =>\n\t\t\tname\n\t\t\t\t.split('.')[0]\n\t\t\t\t.replace(/`/g, '')\n\t\t\t\t.replace('tab', '');\n\n\t\tif (!settings.group_by.startsWith('`tab')) {\n\t\t\tsettings.group_by =\n\t\t\t\t'`tab' + this.doctype + '`.`' + settings.group_by + '`';\n\t\t}\n\n\t\tif (settings.aggregate_on && !settings.aggregate_on.startsWith('`tab')) {\n\t\t\tconst aggregate_on_doctype = this.get_aggregate_on_doctype(settings);\n\t\t\tsettings.aggregate_on =\n\t\t\t\t'`tab' + aggregate_on_doctype + '`.`' + settings.aggregate_on + '`';\n\t\t}\n\n\t\t// Extract fieldname from `tabdoctype`.`fieldname`\n\t\tthis.group_by_field = get_fieldname(settings.group_by);\n\t\tthis.group_by_doctype = get_doctype(settings.group_by);\n\n\t\tthis.aggregate_function = settings.aggregate_function;\n\n\t\tif (settings.aggregate_on) {\n\t\t\tthis.aggregate_on_field = get_fieldname(settings.aggregate_on);\n\t\t\tthis.aggregate_on_doctype = get_doctype(settings.aggregate_on);\n\t\t}\n\n\t\tthis.apply_group_by();\n\t\tthis.update_group_by_button();\n\t}\n\n\tget_aggregate_on_doctype(settings) {\n\t\tfor (let doctype of Object.keys(this.all_fields)) {\n\t\t\tconst dt_fields = this.all_fields[doctype];\n\t\t\tif (dt_fields.find((field) => field.fieldname == settings.aggregate_on)) {\n\t\t\t\treturn doctype;\n\t\t\t}\n\t\t}\n\t}\n\n\tmake_group_by_button() {\n\t\tthis.page.wrapper.find('.sort-selector').before(\n\t\t\t$(`<div class=\"group-by-selector\">\n\t\t\t\t<button class=\"btn btn-default btn-sm group-by-button ellipsis\">\n\t\t\t\t\t<span class=\"group-by-icon\">\n\t\t\t\t\t\t${frappe.utils.icon('group-by')}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"button-label hidden-xs\">\n\t\t\t\t\t\t${__('Add Group')}\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t</div>`)\n\t\t);\n\n\t\tthis.group_by_button = this.page.wrapper.find('.group-by-button');\n\t}\n\n\tapply_group_by() {\n\t\tthis.group_by =\n\t\t\t'`tab' + this.group_by_doctype + '`.`' + this.group_by_field + '`';\n\n\t\tif (this.aggregate_function === 'count') {\n\t\t\tthis.aggregate_on_field = null;\n\t\t\tthis.aggregate_on_doctype = null;\n\t\t} else {\n\t\t\tthis.aggregate_on =\n\t\t\t\t'`tab' +\n\t\t\t\tthis.aggregate_on_doctype +\n\t\t\t\t'`.`' +\n\t\t\t\tthis.aggregate_on_field +\n\t\t\t\t'`';\n\t\t}\n\n\t\t//All necessary fields must be set before applying group by\n\t\tif (\n\t\t\t!this.group_by ||\n\t\t\t!this.aggregate_function ||\n\t\t\t(!this.aggregate_on_field && this.aggregate_function !== 'count')\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tapply_group_by_and_refresh() {\n\t\tif (this.apply_group_by()) {\n\t\t\tthis.report_view.refresh();\n\t\t}\n\t}\n\n\tset_args(args) {\n\t\tif (this.aggregate_function && this.group_by) {\n\t\t\tthis.report_view.group_by = this.group_by;\n\t\t\tthis.report_view.sort_by = '_aggregate_column';\n\t\t\tthis.report_view.sort_order = 'desc';\n\n\t\t\t// save original fields\n\t\t\tif (\n\t\t\t\t!this.report_view.fields.map((f) => f[0]).includes('_aggregate_column')\n\t\t\t) {\n\t\t\t\tthis.original_fields = this.report_view.fields.map((f) => f);\n\t\t\t}\n\n\t\t\tthis.report_view.fields = [[this.group_by_field, this.group_by_doctype]];\n\n\t\t\t// rebuild fields for group by\n\t\t\targs.fields = this.report_view.get_fields();\n\n\t\t\t// add aggregate column in both query args and report views\n\t\t\tthis.report_view.fields.push([\n\t\t\t\t'_aggregate_column',\n\t\t\t\tthis.aggregate_on_doctype || this.doctype,\n\t\t\t]);\n\n\t\t\t// setup columns in datatable\n\t\t\tthis.report_view.setup_columns();\n\n\t\t\tObject.assign(args, {\n\t\t\t\twith_comment_count: false,\n\t\t\t\taggregate_on_field: this.aggregate_on_field || 'name',\n\t\t\t\taggregate_on_doctype: this.aggregate_on_doctype || this.doctype,\n\t\t\t\taggregate_function: this.aggregate_function || 'count',\n\t\t\t\tgroup_by: this.report_view.group_by || null,\n\t\t\t\torder_by: '_aggregate_column desc',\n\t\t\t});\n\t\t}\n\t}\n\n\tget_group_by_docfield() {\n\t\t// called from build_column\n\t\tlet docfield = {};\n\t\tif (this.aggregate_function === 'count') {\n\t\t\tdocfield = {\n\t\t\t\tfieldtype: 'Int',\n\t\t\t\tlabel: __('Count'),\n\t\t\t\tparent: this.doctype,\n\t\t\t\twidth: 200,\n\t\t\t};\n\t\t} else {\n\t\t\t// get properties of \"aggregate_on\", for example Net Total\n\t\t\tdocfield = Object.assign(\n\t\t\t\t{},\n\t\t\t\tfrappe.meta.docfield_map[this.aggregate_on_doctype][\n\t\t\t\t\tthis.aggregate_on_field\n\t\t\t\t]\n\t\t\t);\n\n\t\t\tif (this.aggregate_function === 'sum') {\n\t\t\t\tdocfield.label = __('Sum of {0}', [__(docfield.label)]);\n\t\t\t} else {\n\t\t\t\tdocfield.label = __('Average of {0}', [__(docfield.label)]);\n\t\t\t}\n\t\t}\n\n\t\tdocfield.fieldname = '_aggregate_column';\n\t\treturn docfield;\n\t}\n\n\tremove_group_by() {\n\t\tthis.order_by = '';\n\t\tthis.group_by = null;\n\t\tthis.group_by_field = null;\n\t\tthis.report_view.group_by = null;\n\t\tthis.aggregate_function = 'count';\n\t\tthis.aggregate_on = null;\n\t\tthis.aggregate_on_field = null;\n\t\tthis.group_by_select.val('');\n\t\tthis.aggregate_function_select.val('count');\n\t\tthis.aggregate_on_select.empty().val('');\n\t\tthis.aggregate_on_select.parent().hide();\n\n\t\t// restore original fields\n\t\tif (this.original_fields) {\n\t\t\tthis.report_view.fields = this.original_fields;\n\t\t} else {\n\t\t\tthis.report_view.set_default_fields();\n\t\t}\n\n\t\tthis.report_view.setup_columns();\n\t\tthis.original_fields = null;\n\t\tthis.report_view.refresh();\n\t}\n\n\tget_group_by_fields() {\n\t\tthis.group_by_fields = {};\n\t\tthis.all_fields = {};\n\n\t\tconst fields = this.report_view.meta.fields.filter((f) =>\n\t\t\t['Select', 'Link', 'Data', 'Int', 'Check'].includes(f.fieldtype)\n\t\t);\n\t\tconst tag_field = { fieldname: '_user_tags', fieldtype: 'Data', label: __('Tags') };\n\t\tthis.group_by_fields[this.doctype] = fields\n\t\t\t.concat(tag_field)\n\t\t\t.sort((a, b) => __(a.label).localeCompare(__(b.label)));\n\t\tthis.all_fields[this.doctype] = this.report_view.meta.fields;\n\n\t\tconst standard_fields_filter = (df) =>\n\t\t\t!in_list(frappe.model.no_value_type, df.fieldtype) && !df.report_hide;\n\n\t\tconst table_fields = frappe.meta\n\t\t\t.get_table_fields(this.doctype)\n\t\t\t.filter((df) => !df.hidden);\n\n\t\ttable_fields.forEach((df) => {\n\t\t\tconst cdt = df.options;\n\t\t\tconst child_table_fields = frappe.meta\n\t\t\t\t.get_docfields(cdt)\n\t\t\t\t.filter(standard_fields_filter)\n\t\t\t\t.sort((a, b) => __(a.label).localeCompare(__(b.label)));\n\t\t\tthis.group_by_fields[cdt] = child_table_fields;\n\t\t\tthis.all_fields[cdt] = child_table_fields;\n\t\t});\n\n\t\treturn this.group_by_fields;\n\t}\n\n\tupdate_group_by_button() {\n\t\tconst group_by_applied = Boolean(this.group_by_field);\n\t\tconst button_label = group_by_applied\n\t\t\t? __(\"Group By {0}\", [this.get_group_by_field_label()])\n\t\t\t: __('Add Group');\n\n\t\tthis.group_by_button\n\t\t\t.toggleClass('btn-default', !group_by_applied)\n\t\t\t.toggleClass('btn-primary-light', group_by_applied);\n\n\t\tthis.group_by_button.find('.group-by-icon')\n\t\t\t.toggleClass('active', group_by_applied);\n\n\t\tthis.group_by_button.find('.button-label').html(button_label);\n\t\tthis.group_by_button.attr('title', button_label);\n\t}\n\n\tget_group_by_field_label() {\n\t\treturn this.group_by_fields[this.group_by_doctype].find(\n\t\t\tfield => field.fieldname == this.group_by_field\n\t\t).label;\n\t}\n};\n","frappe.provide('frappe.report_utils');\n\nfrappe.report_utils = {\n\tmake_chart_options: function(columns, raw_data, { y_fields, x_field, chart_type, colors, height }) {\n\t\tconst type = chart_type.toLowerCase();\n\n\t\tlet rows =  raw_data.result.filter(value => Object.keys(value).length);\n\n\t\tlet labels = get_column_values(x_field);\n\t\tlet datasets = y_fields.map(y_field => ({\n\t\t\tname: frappe.model.unscrub(y_field),\n\t\t\tvalues: get_column_values(y_field).map(d => Number(d))\n\t\t}));\n\n\t\tif (raw_data.add_total_row) {\n\t\t\tlabels = labels.slice(0, -1);\n\t\t\tdatasets.forEach(dataset => {\n\t\t\t\tdataset.values = dataset.values.slice(0, -1);\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\tlabels: labels.length? labels: null,\n\t\t\t\tdatasets: datasets\n\t\t\t},\n\t\t\ttruncateLegends: 1,\n\t\t\ttype: type,\n\t\t\theight: height ? height : 280,\n\t\t\tcolors: colors,\n\t\t\taxisOptions: {\n\t\t\t\tshortenYAxisNumbers: 1,\n\t\t\t\txAxisMode: 'tick'\n\t\t\t}\n\t\t};\n\n\t\tfunction get_column_values(column_name) {\n\t\t\tif (Array.isArray(rows[0])) {\n\t\t\t\tlet column_index = columns.findIndex(column => column.fieldname == column_name);\n\t\t\t\treturn rows.map(row => row[column_index]);\n\t\t\t} else {\n\t\t\t\treturn rows.map(row => row[column_name]);\n\t\t\t}\n\t\t}\n\t},\n\n\tget_field_options_from_report: function(columns, data) {\n\t\tconst rows =  data.result.filter(value => Object.keys(value).length);\n\t\tconst first_row = Array.isArray(rows[0]) ? rows[0] : columns.map(col => rows[0][col.fieldname]);\n\n\t\tconst indices = first_row.reduce((accumulator, current_value, current_index) => {\n\t\t\tif (Number.isFinite(current_value)) {\n\t\t\t\taccumulator.push(current_index);\n\t\t\t}\n\t\t\treturn accumulator;\n\t\t}, []);\n\n\t\tfunction get_options(fields) {\n\t\t\treturn fields.map((field) => {\n\t\t\t\tif (field.fieldname) {\n\t\t\t\t\treturn {label: field.label, value: field.fieldname};\n\t\t\t\t} else {\n\t\t\t\t\tfield = frappe.report_utils.prepare_field_from_column(field);\n\t\t\t\t\treturn {label: field.label, value: field.fieldname};\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst numeric_fields = columns.filter((col, i) => indices.includes(i));\n\t\tconst non_numeric_fields = columns.filter((col, i) => !indices.includes(i));\n\n\t\tlet numeric_field_options = get_options(numeric_fields);\n\t\tlet non_numeric_field_options = get_options(non_numeric_fields);\n\n\t\treturn {\n\t\t\t'numeric_fields': numeric_field_options,\n\t\t\t'non_numeric_fields': non_numeric_field_options\n\t\t};\n\t},\n\n\tprepare_field_from_column: function(column) {\n\t\tif (typeof column === 'string') {\n\t\t\tif (column.includes(':')) {\n\t\t\t\tlet [label, fieldtype, width] = column.split(':');\n\t\t\t\tlet options;\n\n\t\t\t\tif (fieldtype.includes('/')) {\n\t\t\t\t\t[fieldtype, options] = fieldtype.split('/');\n\t\t\t\t}\n\n\t\t\t\tcolumn = {\n\t\t\t\t\tlabel,\n\t\t\t\t\tfieldname: label,\n\t\t\t\t\tfieldtype,\n\t\t\t\t\twidth,\n\t\t\t\t\toptions\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tcolumn = {\n\t\t\t\t\tlabel: column,\n\t\t\t\t\tfieldname: column,\n\t\t\t\t\tfieldtype: 'Data'\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn column;\n\t},\n\n\tget_report_filters: function(report_name) {\n\n\t\tif (frappe.query_reports[report_name]) {\n\t\t\tlet filters = frappe.query_reports[report_name].filters;\n\t\t\treturn Promise.resolve(filters);\n\t\t}\n\n\t\treturn frappe.xcall(\n\t\t\t'frappe.desk.query_report.get_script',\n\t\t\t{\n\t\t\t\treport_name: report_name\n\t\t\t}\n\t\t).then(r => {\n\t\t\tfrappe.dom.eval(r.script || '');\n\t\t\treturn frappe.after_ajax(() => {\n\t\t\t\treturn frappe.query_reports[report_name] && frappe.query_reports[report_name].filters;\n\t\t\t})\n\t\t});\n\t},\n\n\tget_filter_values(filters) {\n\t\tlet filter_values = filters\n\t\t\t.map(f => {\n\t\t\t\tvar v = f.default;\n\t\t\t\treturn {\n\t\t\t\t\t[f.fieldname]: v\n\t\t\t\t};\n\t\t\t})\n\t\t\t.reduce((acc, f) => {\n\t\t\t\tObject.assign(acc, f);\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\treturn filter_values;\n\t},\n\n\tget_result_of_fn(fn, values) {\n\t\tconst get_result = {\n\t\t\t'Minimum': values => values.reduce((min, val) => Math.min(min, val), values[0]),\n\t\t\t'Maximum': values => values.reduce((min, val) => Math.max(min, val), values[0]),\n\t\t\t'Average': values => values.reduce((a, b) => a + b, 0) / values.length,\n\t\t\t'Sum': values => values.reduce((a, b) => a + b, 0)\n\t\t};\n\t\treturn get_result[fn](values);\n\t},\n\n};\n"],"names":["module","q","b","a","c","addEventListener","attachEvent","n","removeEventListener","detachEvent","r","Object","prototype","toString","call","m","window","getComputedStyle","currentStyle","l","document","createElement","all","innerHTML","documentMode","x","navigator","platform","toLowerCase","indexOf","p","this","rows_in_block","blocks_in_cluster","tag","show_no_data_row","no_data_class","no_data_text","keep_parity","callbacks","options","h","d","split","f","getElementById","Error","content_elem","hasAttribute","setAttribute","e","rows","fetchMarkup","g","scroll_elem","scrollTop","insertToDOM","k","t","style","pointerEvents","clearTimeout","setTimeout","getClusterNum","scrollingProgress","getScrollProgress","u","v","refresh","destroy","html","generateEmptyRow","join","getRowsHeight","update","length","item_height","clear","getRowsAmount","scroll_top","w","concat","append","prepend","constructor","getChildNodes","push","shift","outerHTML","exploreEnvironment","content_tag","tagName","match","children","data","cluster_height","Math","floor","offsetHeight","parseInt","max","block_height","rows_in_cluster","createTextNode","className","colSpan","appendChild","generate","top_offset","bottom_offset","rows_above","renderExtraTag","height","checkChanges","clusterWillChange","clusterChanged","lastChild","removeChild","firstChild","frappe","views","ReportFactory","Factory","[object Object]","route","const","_route","set_route","factory","dragEl","parentEl","ghostEl","cloneEl","rootEl","nextEl","lastDownEl","scrollEl","scrollParentEl","scrollCustomFn","oldIndex","newIndex","activeGroup","putSortable","pointerElemChangedInterval","lastPointerElemX","lastPointerElemY","tapEvt","touchEvt","moved","lastTarget","lastDirection","lastMode","targetMoveDistance","realDragElRect","autoScrolls","scrolling","awaitingDragStarted","ignoreNextClick","sortables","pastFirstInvertThresh","isCircumstantialInvert","R_SPACE","expando","Date","getTime","win","$","jQuery","Zepto","Polymer","captureMode","capture","passive","IE11OrLess","userAgent","Edge","CSSFloatProperty","supportDraggable","supportCssPointerEvents","el","cssText","_silent","_alignedSilent","abs","min","savedInputChecked","_detectDirection","elCSS","_css","elWidth","width","child1","_getChild","child2","firstChildCSS","secondChildCSS","firstChildWidth","marginLeft","marginRight","_getRect","secondChildWidth","display","flexDirection","float","touchingSideChild2","_getParentAutoScrollElement","includeSelf","getBoundingClientRect","elem","gotSelf","clientWidth","scrollWidth","clientHeight","scrollHeight","elemCSS","overflowX","overflowY","body","parentNode","_autoScroll","_throttle","evt","isFallback","scroll","_this","sens","scrollSensitivity","speed","scrollSpeed","clientX","y","clientY","scrollThisInstance","innerWidth","innerHeight","_clearAutoScrolls","scrollFn","layersOut","currentParent","css","vx","vy","canScrollX","canScrollY","scrollPosX","scrollPosY","rect","top","bottom","left","right","scrollLeft","documentElement","i","clearInterval","pid","setInterval","layer","Sortable","active","_emulateDragOver","scrollOffsetY","scrollOffsetX","scrollTo","pageXOffset","pageYOffset","bind","bubbleScroll","forEach","autoScroll","_prepareGroup","toFn","value","pull","to","from","sameGroup","group","name","otherGroup","originalGroup","checkPull","checkPut","put","revertClone","_checkAlignment","_computeIsAligned","_isTrueParentSortable","target","trueParent","_artificalBubble","sortable","originalEvt","method","nextParent","_extend","artificialBubble","_hideGhostForTarget","_unhideGhostForTarget","preventDefault","stopPropagation","stopImmediatePropagation","_throttleTimeout","nearestEmptyInsertDetectEvent","touches","nearest","threshold","emptyInsertThreshold","insideHorizontally","insideVertically","_detectNearestEmptySortable","_onDragOver","nodeType","defaults","sort","disabled","store","handle","draggable","test","nodeName","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","ghostClass","chosenClass","dragClass","ignore","filter","preventOnFilter","animation","easing","setData","dataTransfer","textContent","dropBubble","dragoverBubble","dataIdAttr","delay","touchStartThreshold","devicePixelRatio","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","fn","charAt","nativeDraggable","_on","_onTapStart","get","_closest","selector","ctx","includeCTX","_matches","substring","_getParentOrHost","host","event","_off","_toggleClass","state","classList","replace","prop","val","defaultView","_matrix","appliedTransforms","transform","DOMMatrix","WebKitCSSMatrix","CSSMatrix","_find","iterator","list","getElementsByTagName","_dispatchEvent","targetEl","toEl","fromEl","startIndex","onName","toUpperCase","substr","CustomEvent","createEvent","initEvent","bubbles","cancelable","item","clone","originalEvent","dispatchEvent","_onMove","dragRect","targetRect","willInsertAfter","retVal","onMoveFn","onMove","dragged","draggedRect","related","relatedRect","_disableDraggable","_unsilent","childNum","currentChild","_lastChild","last","lastElementChild","previousElementSibling","_generateId","str","src","href","sum","charCodeAt","_index","index","matches","msMatchesSelector","webkitMatchesSelector","_","callback","ms","args","arguments","apply","dst","key","hasOwnProperty","_clone","dom","cloneNode","_nextTick","_cancelNextTick","id","container","adjustForTransform","elRect","containerRect","matrix","scaleX","scaleY","elementFromPoint","axis","targetS1Opp","targetS2Opp","mouseOnOppAxis","sortableMouseAligned","_getDirection","type","touch","originalTarget","shadowRoot","path","composedPath","root","inputs","idx","checked","_saveInputCheckedState","button","isContentEditable","some","criteria","trim","_prepareDragStart","_handleAutoScroll","fallback","ogElemScroller","newElem","dragStartFn","ownerDocument","nextSibling","_lastX","_lastY","transition","_disableDelayedDrag","_triggerDragStart","_onDrop","_delayedDragTouchMoveHandler","_dragStartTimer","pointerType","_onTouchMove","_onDragStart","selection","empty","getSelection","removeAllRanges","err","_dragStarted","_appendGhost","_nulling","bypassLastTouchCheck","parent","dx","dy","translate3d","_hideClone","_cloneId","insertBefore","_loopId","effectAllowed","_dragStartId","revert","activeSortable","isOwner","canSort","animated","completed","contains","lastPutMode","mouseOnAxis","targetS2","_ghostIsLast","_showClone","changed","_animate","targetBeforeFirstSwap","aligned","differentLevel","scrolledPastTop","side","elSide","parentSide","_isScrolledPast","el1","el2","el1Rect","el2Rect","el1S1Opp","el1S2Opp","el1OppLength","el2S1Opp","el2S2Opp","el2OppLength","_isElInRowColumn","isLastTarget","targetLength","targetS1","invert","_getSwapDirection","dragElIndex","targetIndex","_getInsertDirection","nextElementSibling","after","moveVector","undefined","prevRect","currentRect","offsetWidth","_offUpEvents","save","handleEvent","dropEffect","_globalDragOver","toArray","order","getAttribute","items","set","closest","option","Array","querySelectorAll","removeAttribute","splice","cloneHidden","utils","on","off","find","is","extend","throttle","toggleClass","nextTick","cancelNextTick","detectDirection","getChild","create","version","ex","require$$0","expr","con","querySelector","each","o","let","element","ref","keys","map","delegate","handler","delegatedTarget","unbind","fire","properties","j","attrs","dataset","attr","elements","styleMap","getStyle","isArray","removeStyle","styleProps","includes","parseFloat","inViewport","pTop","pLeft","pBottom","pRight","pixels","requestAnimationFrame","scrollbarSize","scrollBarSizeValue","scrollDiv","overflow","position","scrollbarWidth","getScrollBarSize","hasVerticalOverflow","hasHorizontalOverflow","measureTextWidth","text","div","visibility","whiteSpace","innerText","isObject_1","commonjsGlobal","global","self","commonjsRequire","_freeGlobal","freeSelf","_root","Function","now_1","now","_Symbol","Symbol","objectProto","nativeObjectToString","symToStringTag","toStringTag","_getRawTag","isOwn","result","nativeObjectToString$1","_objectToString","nullTag","undefinedTag","symToStringTag$1","_baseGetTag","isObjectLike_1","symbolTag","isSymbol_1","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber_1","other","valueOf","isBinary","slice","FUNC_ERROR_TEXT","nativeMax","nativeMin","debounce_1","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","thisArg","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","cancel","flush","FUNC_ERROR_TEXT$1","throttle_1","asyncTag","funcTag","genTag","proxyTag","uid","isFunction_1","_coreJsData","maskSrcKey","exec","IE_PROTO","_isMasked","funcToString","_toSource","reIsHostCtor","funcProto$1","objectProto$2","funcToString$1","hasOwnProperty$1","reIsNative","RegExp","_baseIsNative","_getValue","object","_getNative","_nativeCreate","_hashClear","__data__","size","_hashDelete","has","HASH_UNDEFINED","hasOwnProperty$2","_hashGet","hasOwnProperty$3","_hashHas","HASH_UNDEFINED$1","_hashSet","Hash","entries","entry","_Hash","_listCacheClear","eq_1","_assocIndexOf","array","_listCacheDelete","pop","_listCacheGet","_listCacheHas","_listCacheSet","ListCache","_ListCache","_Map","_mapCacheClear","hash","string","_isKeyable","_getMapData","_mapCacheDelete","_mapCacheGet","_mapCacheHas","_mapCacheSet","MapCache","_MapCache","HASH_UNDEFINED$2","_setCacheAdd","_setCacheHas","SetCache","values","add","_SetCache","_baseFindIndex","predicate","fromIndex","fromRight","_baseIsNaN","_strictIndexOf","_baseIndexOf","_arrayIncludes","_arrayIncludesWith","comparator","_cacheHas","cache","_Set","noop_1","_setToArray","_createSet","LARGE_ARRAY_SIZE","_baseUniq","iteratee","isCommon","seen","outer","computed","seenIndex","uniq_1","camelCaseToDash","makeDataAttributeString","props","_key","copyTextToClipboard","textArea","padding","border","outline","boxShadow","background","select","execCommand","console","log","throttle$1","debounce$1","context","Promise","resolve","out","linkProperties","source","reduce","acc","defineProperties","isNumber","isNaN","uniq$1","arr","numberSortAsc","stripHTML","DataError","icons","chevronDown","chevronRight","CellManager","instance","bindEvents","bindFocusCell","bindEditCell","bindKeyboardSelection","bindCopyCellContents","bindMouseEvents","bindTreeEvents","bindKeyboardNav","$editingCell","bodyScrollable","cell","activateEditing","keyboard","$focusedCell","deactivateEditing","focusCellInDirection","$cell","getLeftMostCell$","rowIndex","getRightMostCell$","getTopMostCell$","colIndex","getBottomMostCell$","focusCell","focusLastCell","columnmanager","toggleFilter","inlineFilters","activateFilter","header","unfocusCell","selectArea","$selectionCursor","getSelectionCursor","getLeftCell$","getRightCell$","getAboveCell$","getBelowCell$","getNextSelectionCursor","noOfCellsCopied","copyCellContents","message","translate","count","showToastMessage","pasteFromClipboard","pasteTarget","focus","pasteContentInCell","mouseDown","$toggle","rowmanager","openSingleNode","closeSingleNode","getColumn","focusable","skipScrollToCell","scrollToCell","skipClearSelection","clearSelection","remove","skipDOMFocus","highlightRowColumnHeader","lastHeaders","colHeaderSelector","rowHeaderSelector","datamanager","getColumnIndexById","colHeader","wrapper","rowHeader","getCell$","fCell","_selectArea","$cell1","$cell2","cells","getCellsInRange","_selectedCells","colIndex1","rowIndex1","colIndex2","rowIndex2","cell1","cell2","isStandardCell","rowIndices","col","editable","getCell","_rowIndex","_colIndex","$editCell","editor","getEditor","content","currentCellEditor","initValue","submitValue","submitEditing","column","row","getRow","getData","getDefaultEditor","$input","class","inside","getValue","setValue","promise","valuePromise","then","oldValue","done","updateCell","catch","curr","total","every","it","focusedCell","focusFilter","isFilterShown","refreshHtml","refreshCell","getCellContent","flag","getFirstColumnIndex","$prevFocusedCell","ret","$aboveRow","parentElement","$belowRow","getLastColumnIndex","getFirstRowIndex","getLastRowIndex","scrollToRow","ceil","getViewportHeight","getRowHeight","dataAttr","isHeader","isFilter","isTotalRow","isBodyCell","meta","isTreeNodeClose","contentHTML","editCellHTML","getEditCellHTML","sortIndicator","sortOrder","resizeColumn","resizable","dropdown","getDropdownHTML","customFormatter","getCustomCellFormatter","treeView","indent","nextRow","addToggle","cellContentHTML","txt","escapeHtmlMapping","&","<",">","\"","'","/","`","=","String","char","format","hyperlist","exports","createCommonjsModule","s","code","1","_dereq_","defineProperty","_createClass","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","defaultConfig","input","Number","HyperList","userProvidedConfig","_classCallCheck","_config","_lastRepaint","_maxElementHeight","getMaxBrowserHeight","config","render","_getScrollPosition","lastRepaint","_renderAnimationFrame","_averageHeight","rendered","_renderChunk","afterRender","fixture","mergeStyle","opacity","maxElementHeight","cancelAnimationFrame","_this2","assign","_element","scroller","_scroller","scrollerTagName","useFragment","itemHeight","_itemHeights","fill","isValueNumber","isValuePercent","msg","numberValue","_containerHeight","elementStyle","scrollerHeight","warn","scrollerStyle","_scrollHeight","_computeScrollHeight","_itemPositions","_computePositions","oldClass","rowClassName","overrideScrollPosition","force","reverse","_getReverseFrom","_getFrom","_screenItemsLen","_lastFrom","_cachedItemsLen","fragment","createDocumentFragment","_getRow","applyPatch","_this3","sortedItemHeights","middle","averageHeight","containerHeight","default","__esModule","KEYCODES","13","91","16","17","18","37","38","39","40","9","27","67","70","86","en","Sort Ascending","Sort Descending","Reset sorting","Remove column","No Data","{count} cells copied","{count} rows selected","de","fr","TranslationManager","language","translations","sourceText","translation","getPluralizedTranslation","arg","regex","filterRows","filters","filteredRowIndices","keyword","compareString","startsWith","guessFilter","filterMethod","stringCompareValue","formatter","getFormattedValue","numberCompareValue","getCompareValues","compareValue","compareValues","hay","needle","greaterThan","keywordValue","lessThan","equals","notEquals","range","rangeValues","values1","values2","containsNumber","number","hayNumber","hayString","getFilterMethod","defaultComponents","sortRows","switchColumn","removeColumn","columns","rowCount","prepareColumns","prepareRows","prepareTreeRows","prepareRowView","prepareNumericColumns","currentSort","validateColumns","prepareDefaultColumns","prepareHeader","checkboxColumn","hasColumnById","getCheckboxHTML","serialNoColumn","align","baseCell","prepareCell","row0","cellValue","validateData","_getNextRowCount","prepareRow","isLeaf","isSet","rowViewOrder","baseRowCell","getColumns","_sortRows","reverseArray","aIndex","bIndex","aContent","bContent","srNoColIndex","viewIndex","temporary","index1","index2","temp","newCell1","newCell2","_row","findIndex","newVal","keyValPairs","getAllRowIndices","rowsToShow","_filteredRows","start","end","skipStandardColumns","getStandardColumnCount","parentRowIndex","parentIndent","childIndent","Boolean","refreshHeader","getHeaderHTML","$filterRow","$columnMap","bindMoveColumn","getRowHTML","bindDropdown","bindResizeColumn","bindPerfectColumnWidth","bindFilter","dropdownClass","dropdownContainer","getDropdownListHTML","$dropdownList","firstElementChild","openDropdown","deactivateDropdownOnBodyClick","deactivateDropdown","$item","_dropdownActiveColIndex","dropdownItems","headerDropdown","action","hideDropdown","_dropdownWidth","$resizingCell","startWidth","startX","isDragging","$handle","pageX","onMouseup","setColumnWidth","setBodyStyle","onMouseMove","delta","finalWidth","minimumColumnWidth","updateColumn","setColumnHeaderWidth","longestCell","bodyRenderer","visibleRows","$longestCellHTML","cellmanager","getCellHTML","$div","cellText","disableReorderColumn","$parent","onEnd","$draggedCell","nextSortOrder","freeze","refreshRows","unfreeze","fireEvent","removedCol","showFilter","applyFilter","getAppliedFilters","showRows","columnsToSort","sortColumn","columnWidth","styles","setStyle","$column","minWidth","getColumnCount","bindCheckbox","checkMap","$checkbox","checkAll","checkRow","renderBody","setDimensions","updateRow","getCheckedRows","toggle","highlightRow","showCheckStatus","getTotalRows","highlightAll","checkedRowStatus","clearToastMessage","$row","getRow$","_highlightedRows","renderRows","getImmediateChildren","childrenToShow","getChildrenToShowForNode","visibleRowIndices","rowsToHide","getChildren","getChildrenToHideForNode","getRows","flat","depth","rowsToOpen","rowsToClose","getRowCount","_lastScrollTo","rowsInView","offset","rowIdentifier","getFilterInput","title","footer","computedStyle","cellHeight","rowHTML","restoreState","renderFooter","getNoDataHTML","getRowsForView","showTotalRow","totalRow","getTotalRow","hooks","columnTotal","columnValues","prevRow","prevCell","highlightCheckedRows","selectAreaOnClusterChanged","focusCellOnClusterChanged","hideAfter","toastMessage","getToastMessageHTML","scopeClass","instances","datatableWrapper","styleEl","bindResizeWindow","bindScrollHeader","stylesheet","sheet","onWindowResize","layout","_settingHeaderPosition","distributeRemainingWidth","refreshColumnWidth","styleObject","_styleRulesMap","prefixedSelector","_getPrefixedSelector","ruleString","_getRuleString","insertRule","cssRules","rule","selectorText","deleteRule","dashed","setCellHeight","setupMinWidth","setupNaturalColumnWidth","setupColumnWidth","setColumnStyle","$headerCell","naturalWidth","totalWidth","getColumnById","onePart","ratioWidth","getRowIndexColumnWidth","wrapperWidth","firstRow","firstRowWidth","headerRow","resizableColumns","deltaWidth","getColumnHeaderElement","text-align","bodyWidth","rowWidth","bodyHeight","Infinity","listeners","keyCode","shiftKey","ctrlKey","metaKey","preventBubbling","listener","DataTable","HTMLElement","initializeTranslations","setDefaultOptions","buildOptions","prepare","initializeComponents","applyDefaultSortOrder","translationManager","addTranslations","DEFAULT_OPTIONS","dropdownButton","label","events","onRemoveColumn","onSwitchColumn","column1","column2","onSortColumn","onCheckRow","onDestroy","asc","desc","none","overrideComponents","freezeMessage","clusterize","logs","noDataMessage","dynamicRowHeight","prepareDom","components","Style$$1","Keyboard$$1","DataManager$$1","RowManager$$1","ColumnManager$$1","CellManager$$1","BodyRenderer$$1","freezeContainer","init","appendRows","refreshRow","renderHeader","viewportHeight","eventName","_internalEventHandlers","packageJson","__version__","provide","ReportView","ListView","view_name","super","setup_defaults","page_title","__","view","get_route","report_name","get_report_doc","doc","report_doc","json","JSON","parse","order_by","add_totals_row","page_length","chart_args","view_user_settings","get_list_view_settings","setup_columns","setup_new_doc_event","setup_events","page","main","addClass","list_view_settings","disable_auto_refresh","socketio","doctype_subscribe","doctype","realtime","on_update","menu_items","report_menu_items","setup_page","toggle_side_bar","setup_result_area","setup_charts_area","$datatable_wrapper","$result","$charts_wrapper","setup_charts","setup_paging_area","$paging_area","sort_selector","ui","SortSelector","filter_area","$filter_list_wrapper","onchange","on_sort_change","group_by_control","GroupBy","group_by","apply_settings","get_args","set_args","before_refresh","set_dirty_state_for_custom_report","save_report_settings","init_chart","current_settings","fields","get_sql_string","column_widths","get_column_widths","get_settings","get_chart_settings","report_settings","deep_equal","clear_indicator","set_indicator","model","user_settings","save_view_user_settings","dict","render_count","chart","refresh_charts","datatable","setup_datatable","get_data","disable_count","$list_count","prependTo","get_count_str","flash_row","user","session","db","get_doc","update_row","to_refresh","fieldname","cdt_row","cdt","cdoc","_field","new_row","build_row","removeClass","_flash_row","get_editing_object","boot","lang","get_translations","is_rtl","remove_column_from_datatable","switch_column","checked_items","get_checked_items","toggle_actions_menu_button","report_column_total","datatabe_col","columns_in_picker","get_columns_for_picker","df","is_column_added","Dialog","fieldtype","docfield","bold","primary_action","show_alert","indicator","hide","insert_before","add_column_to_datatable","show","hasClass","build_chart_args","x_axis","y_axes","chart_type","make_chart","x_fields","y_fields","numeric_fieldtypes","dialog","description","to_title_case","datasets","y_axis","columns_map","labels","last_chart_type","Chart","truncateLegends","colors","axisOptions","shortenYAxisNumbers","tooltipOptions","formatTooltipY","field","always_show_decimals","inline","control","render_editing_input","change","set_focus","set_value","docname","set_control_value","updated_doc","_data","get_value","last_updated_doc","reject","fail","on_hide","fields_dict","form","make_control","render_input","toggle_label","toggle_description","can_write","docstatus","allow_on_submit","read_only","hidden","std_fields_list","build_rows","_add_field","set_default_fields","add_field","title_field","image_field","in_list_view","in_standard_filter","perm","has_perm","permlevel","is_value_type","report_hide","settings","add_fields","build_fields","table_fields","fields_already_in_table","fields_to_add","column_name","get_full_column_name","cdt_name_fields","get_unique_cdt_in_view","uniqBy","col_index","add_currency_column","get_docfield","has_field","field_label","get_label","throw","col1","col2","_fields","standard_fields_filter","in_list","no_value_type","doctype_fields","get_docfields","std_fields","has_status_values","get_indicator","reqd","get_table_fields","child_table_fields","dialog_fields","build_column","docfield_map","get_group_by_docfield","get_std_field","toTitle","is_non_std_field","is_numeric_field","cint","compareFn","datetime","user_to_obj","str_to_obj","totals","get_columns_totals","totals_row","formatted_value","format_total_cell","cell_value","cdt_field","is_editable","status","dependent_col","add_status_dependency_column","only_docnames","save_type","_save_report","stringify","exc","msgprint","all_reports","ref_doctype","report_type","prompt","response","history","back","with_doc","condition","row_totals","flt","rows_in_order","total_data","get_print_settings","print_settings","render_grid","subtitle","get_filters_html_for_print","can_use_smaller_font","toggle_charts","shortcut","get_dialog_fields","reorder_fields","$body","setup_search","can_export","selected_items","total_count","count_without_children","primary_action_label","cmd","file_format_type","export_all_rows","open_url_post","request","url","report","can_edit_or_delete","is_standard","owner","save_report","confirm","delete_report","can_set_user_permissions","has_role","get_view_settings","standard","standard_pages","add_page","make_app_page","single_column","query_report","QueryReport","BaseList","load","init_promise","tasks","setup_report_wrapper","run_serially","page_name","get_route_str","refresh_button","add_action_icon","setup_progress_bar","toggle_primary_button_disabled","prepared_report_action","prepared_report_doc_name","alert_message","action_name","currentTarget","toggle_nothing_to_show","route_options","load_report","has_route_options","refresh_report","clear_inner_toolbar","show_save","get_menu_items","get_report_settings","setup_page_head","add_chart_buttons_to_toolbar","add_card_button_to_toolbar","add_inner_button","add_card_to_dashboard","create_chart_button","add_button","open_create_chart_dialog","chart_fields","chart_options","add_to_dashboard_button","add_chart_to_dashboard","field_options","report_utils","get_field_options_from_report","raw_data","dashboard_field","dashboard_utils","get_dashboard_link_field","set_standard","developer_mode","numeric_fields","report_field","create_number_card","dashboard","create_dashboard_chart","dashboard_chart_name","dashboard_name","card_name","filters_json","get_filter_values","add_to_dashboard","chart_name","unscrub","color","custom_options","x_field_title","x_field","y_field_title","y_axis_fields","y_field","use_report_chart","xcall","dashboard_route_html","toggle_message","toggle_report","setup_filters","set_route_filters","clear_custom_actions","onload","with_doctype","query_reports","eval","script","after_ajax","get_local_report_settings","html_format","execution_time","report_script_name","reference_report","seconds_elapsed","interval","show_progress","guardian_has_value","depends_on","evaluate_depends_on_value","hidden_due_to_dependency","toggle_filter_display","expression","filter_label","clear_filters","page_form","set_input","get_query","on_change","refresh_filters_dependency","current_filters","previous_filters","prepared_report","reset_report_view","_no_refresh","hide_form","show_form","promises","clear_fields","have_filters_changed","are_default_filters","res","show_loading_screen","last_ajax","abort","query_params","get_query_params","prepared_report_name","is_tree","tree","parent_field","always","btn_secondary","hide_status","custom_filters","set_filters","prepared_report_document","filters_from_report","add_prepared_report_buttons","report_summary","$summary","render_summary","show_status","prepare_report_data","get_chart_options","$chart","render_chart","make_chart_options","render_datatable","$report","show_footer_message","hide_progress","finally","hide_loading_screen","summary","build_summary_item","appendTo","query_string","get_query_string","open","urllib","get_full_url","encodeURIComponent","part1","comment_when","report_end_time","part2","part3","primary_action_map","New","click","show_warning_or_generate_report","Edit","Rebuild","primary_button","set_primary_action","disable","reports","queued_prepared_reports","get_queued_prepared_reports_warning_message","prepared_report_dialog","generate_background_report","bind_actions_with_object","report_link_html","no_of_reports_html","warning_message","prepare_columns","custom_columns","prepare_data","linked_doctypes","get_linked_doctypes","tree_report","add_total_row","datatable_options","get_datatable_options","initial_depth","setTreeDepth","after_datatable_render","loading_state","$loading","get_chart_data","me","set_chart_values","preview_chart","get_values","non_numeric_fields","x_field_label","y_field_label","prepare_field_from_column","format_cell","for_print","row_obj","raise","missing_mandatory","mandatory","wildcard_filter","get_filter","field_value_map","get_meta","breadcrumbs","file_format","file_type","custom_format","filters_html","landscape","orientation","make_access_log","template","get_data_for_print","get_columns_for_print","original_data","base_url","get_base_url","print_css","applied_filters","render_template","layout_direction","filter_values","name_len","render_pdf","export_dialog","export_dialog_fields","column_row","get_data_for_csv","include_indentation","tools","downloadify","get_dict","visible_idx","standard_column_count","get_formatted_duration","repeat","is_total_row","get_visible_columns","is_report_manager","print_report","letter_head","add_portrait_warning","can_print","pdf_report","export_report","set_df_property","insert_after_index","insert_after","get_fieldname_for_column","link_field","doctype_field_map","custom_data","add_custom_column","set_menu_items","existing_fieldnames","scrub","custom_column","column_field","doctypes","dynamic_links","dynamic_doctypes","Set","link_name","doc_field_pair","$status","insertAfter","message_div","$message","status_message","$report_footer","$tree_footer","execution_time_msg","expandAllNodes","collapseAllNodes","get_no_result_message","$page","report_view","make","make_group_by_button","init_group_by_popover","set_popover_events","sql_aggregate_functions","group_by_template","group_by_conditions","get_group_by_fields","aggregate_function_conditions","group_by_button","popover","trigger","placement","parents","setup_group_by_area","update_group_by_button","router","aggregate_on_html","group_by_select","group_by_field","aggregate_function_select","aggregate_on_select","remove_group_by_button","aggregate_function","toggle_aggregate_on_field","aggregate_on","aggregate_on_field","set_group_by_events","group_by_doctype","apply_group_by_and_refresh","aggregate_on_doctype","remove_group_by","toggle_aggregate_on_field_display","all_fields","option_text","get_fieldname","get_doctype","get_aggregate_on_doctype","apply_group_by","before","icon","sort_by","sort_order","original_fields","get_fields","with_comment_count","group_by_fields","tag_field","localeCompare","group_by_applied","button_label","get_group_by_field_label","get_column_values","xAxisMode","column_index","indices","accumulator","current_value","current_index","isFinite","get_options","get_report_filters","get_result_of_fn","Minimum","Maximum","Average","Sum"],"mappings":"sZAI2CA,UAA+G,WAAW,SAASC,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEE,iBAAiBF,EAAEE,iBAAiBH,EAAEE,GAAE,GAAID,EAAEG,YAAY,KAAKJ,EAAEE,GAAG,SAASG,EAAEL,EAAEC,EAAEC,GAAG,OAAOD,EAAEK,oBAAoBL,EAAEK,oBAAoBN,EAAEE,GAAE,GAAID,EAAEM,YAAY,KAAKP,EAAEE,GAAG,SAASM,EAAER,GAAG,MAAM,mBAAmBS,OAAOC,UAAUC,SAASC,KAAKZ,GAAG,SAASa,EAAEb,EAAEC,GAAG,OAAOa,OAAOC,iBAAiBD,OAAOC,iBAAiBd,GAAGD,GAC3fC,EAAEe,aAAahB,GAAG,IAAIiB,EAAE,WAAW,IAAI,IAAIjB,EAAE,EAAEC,EAAEiB,SAASC,cAAc,KAAKjB,EAAED,EAAEmB,KAAK,GAAGnB,EAAEoB,UAAU,uBAAuBrB,EAAE,uBAAuBE,EAAE,KAAK,OAAO,EAAEF,EAAEA,EAAEkB,SAASI,aAA1J,GAA0KC,EAAEC,UAAUC,SAASC,cAAcC,QAAQ,OAAO,EAAEC,EAAE,SAAS5B,GAAG,KAAK6B,gBAAgBD,GAAG,OAAO,IAAIA,EAAE5B,GAAG,IAAIC,EAAE4B,KAAK3B,EAAE,CAAC4B,cAAc,GAAGC,kBAAkB,EAAEC,IAAI,KAAKC,kBAAiB,EAAGC,cAAc,qBAAqBC,aAAa,UAAUC,aAAY,EAAGC,UAAU,IAAIpC,EAAEqC,QAAQ,GAAG,IAAI,IACheC,EADoeC,EAAE,wGAAwGC,MAAM,KACxlBC,EAAE,EAAIH,EAAEC,EAAEE,GAAGA,IAAIzC,EAAEqC,QAAQC,QAAG,IAAoBvC,EAAEuC,IAAI,MAAMvC,EAAEuC,GAAGvC,EAAEuC,GAAGrC,EAAEqC,GAA0B,IAAvBrC,EAAE,CAAC,SAAS,WAAewC,EAAE,EAAEF,EAAEtC,EAAEwC,GAAGA,IAAI,GAAGzC,EAAEuC,EAAE,SAASxC,EAAEwC,EAAE,MAAMtB,SAASyB,eAAe3C,EAAEwC,EAAE,OAAOxC,EAAEwC,EAAE,SAASvC,EAAEuC,EAAE,SAAS,MAAMI,MAAM,yBAAyBJ,EAAE,YAAYvC,EAAE4C,aAAaC,aAAa,aAAa7C,EAAE4C,aAAaE,aAAa,WAAW,GAAG,IAAIC,EAAExC,EAAER,EAAEiD,MAAMjD,EAAEiD,KAAKhD,EAAEiD,cAAcC,EAAE,GAAGnD,EAAEC,EAAEmD,YAAYC,UAAUpD,EAAEqD,YAAYN,EAAEG,GAAGlD,EAAEmD,YAAYC,UAAUrD,EAAE,IAAIuD,GAAE,EAAG1C,EAAE,EAAEI,GAAE,EAAGuC,EAAE,WAAWjC,IAAIN,IAAIhB,EAAE4C,aAAaY,MAAMC,cACngB,QAAQzC,GAAE,EAAG0C,aAAa9C,GAAGA,EAAE+C,WAAW,WAAW3D,EAAE4C,aAAaY,MAAMC,cAAc,OAAOzC,GAAE,GAAI,KAAKsC,IAAIA,EAAEtD,EAAE4D,kBAAkB5D,EAAEqD,YAAYN,EAAEG,GAAGlD,EAAEqC,QAAQD,UAAUyB,mBAAmB7D,EAAEqC,QAAQD,UAAUyB,kBAAkB7D,EAAE8D,sBAAsBC,EAAE,EAAEC,EAAE,WAAWN,aAAaK,GAAGA,EAAEJ,WAAW3D,EAAEiE,QAAQ,MAAMnE,EAAE,SAASE,EAAEmD,YAAYI,GAAGzD,EAAE,SAASe,OAAOmD,GAAGhE,EAAEkE,QAAQ,SAASnE,GAAGK,EAAE,SAASJ,EAAEmD,YAAYI,GAAGnD,EAAE,SAASS,OAAOmD,GAAGhE,EAAEmE,MAAMpE,EAAEC,EAAEoE,mBAAmBrB,GAAGsB,KAAK,MAAMrE,EAAEiE,QAAQ,SAASlE,IAAIC,EAAEsE,cAAcvB,IACtgBhD,IAAIC,EAAEuE,OAAOxB,IAAI/C,EAAEuE,OAAO,SAASxE,GAAGgD,EAAExC,EAAER,GAAGA,EAAE,GAAGA,EAAEC,EAAEmD,YAAYC,UAAUL,EAAEyB,OAAOxE,EAAEqC,QAAQoC,YAAY1E,IAAIuD,EAAEtD,EAAEmD,YAAYC,UAAU,GAAGpD,EAAEqD,YAAYN,EAAEG,GAAGlD,EAAEmD,YAAYC,UAAUrD,GAAGC,EAAE0E,MAAM,WAAW1E,EAAEuE,OAAO,KAAKvE,EAAE2E,cAAc,WAAW,OAAO5B,EAAEyB,QAAQxE,EAAE8D,kBAAkB,WAAW,OAAOlC,KAAKS,QAAQuC,YAAY7B,EAAEyB,OAAO5C,KAAKS,QAAQoC,aAAa,KAAK,GAAG,IAAII,EAAE,SAAS9E,EAAEE,GAAG,IAAIsC,EAAEhC,EAAEN,GAAGA,EAAE,GAAGsC,EAAEiC,SAASzB,EAAE,UAAUhD,EAAEgD,EAAE+B,OAAOvC,GAAGA,EAAEuC,OAAO/B,GAAG/C,EAAEqD,YAAYN,EAAEG,KAAKlD,EAAE+E,OAAO,SAAS/E,GAAG6E,EAAE,SAClf7E,IAAIA,EAAEgF,QAAQ,SAAShF,GAAG6E,EAAE,UAAU7E,KAMkZ,OAN7Y2B,EAAElB,UAAU,CAACwE,YAAYtD,EAAEsB,YAAY,WAAW,IAAI,IAAIlD,EAAE,GAAGC,EAAE4B,KAAKsD,cAActD,KAAKgB,cAAc5C,EAAEwE,QAAQzE,EAAEoF,KAAKnF,EAAEoF,QAAQC,WAAW,OAAOtF,GAAGuF,mBAAmB,SAASvF,EAAEC,GAAG,IAAIC,EAAE2B,KAAKS,QAAQpC,EAAEsF,YAAY3D,KAAKgB,aAAa4C,QAAQ/D,cAAc1B,EAAEyE,SAASxD,GAAG,GAAGA,IAAIf,EAAE8B,MAAM9B,EAAE8B,IAAIhC,EAAE,GAAG0F,MAAM,eAAe,GAAGhE,eAAe,GAAGG,KAAKgB,aAAa8C,SAASlB,SAASxE,EAAE2F,KAAK/D,KAAKuC,KAAKpE,EAAE,GAAGA,EAAE,GAAGA,EAAE,KAAKE,EAAE8B,MAAM9B,EAAE8B,IAAIH,KAAKgB,aAAa8C,SAAS,GAAGF,QAAQ/D,eACxfG,KAAK0C,cAAcvE,KAAKuE,cAAc,SAASvE,GAAG,IAAIC,EAAE4B,KAAKS,QAAQpC,EAAED,EAAEyE,YAA+B,GAAnBzE,EAAE4F,eAAe,EAAK7F,EAAEyE,OAAO,CAA8B,IAAIjC,GAAjCxC,EAAE6B,KAAKgB,aAAa8C,UAAiBG,KAAKC,MAAM/F,EAAEyE,OAAO,IACpE,OADwExE,EAAEyE,YAAYlC,EAAEwD,aAAa,MAAM/F,EAAE+B,KAAK,YAAYnB,EAAE,iBAAiBgB,KAAKgB,gBAAgB5C,EAAEyE,aAAauB,SAASpF,EAAE,gBAAgBgB,KAAKgB,cAAc,KAAK,GAAG,MAAM5C,EAAE+B,MAAMhC,EAAEiG,SAASpF,EAAE,YAAY2B,GAAG,KAAK,EAAEA,EAAEyD,SAASpF,EAAE,eAAe2B,GAAG,KAAK,EAAEvC,EAAEyE,aAAaoB,KAAKI,IAAIlG,EAAEwC,IAAIvC,EAAEkG,aAAalG,EAAEyE,YAAYzE,EAAE6B,cACze7B,EAAEmG,gBAAgBnG,EAAE8B,kBAAkB9B,EAAE6B,cAAc7B,EAAE4F,eAAe5F,EAAE8B,kBAAkB9B,EAAEkG,aAAoBjG,GAAGD,EAAEyE,cAAcb,cAAc,WAA8D,OAAnDhC,KAAKS,QAAQuC,WAAWhD,KAAKuB,YAAYC,UAAiByC,KAAKC,MAAMlE,KAAKS,QAAQuC,YAAYhD,KAAKS,QAAQuD,eAAehE,KAAKS,QAAQ6D,gBAAgB,GAAG9B,iBAAiB,WAAW,IAAIrE,EAAE6B,KAAKS,QAAQ,IAAItC,EAAEgC,MAAMhC,EAAEiC,iBAAiB,MAAM,GAAG,IAA8EO,EAA1EvC,EAAEiB,SAASC,cAAcnB,EAAEgC,KAAK9B,EAAEgB,SAASmF,eAAerG,EAAEmC,cAC7W,OAD6XlC,EAAEqG,UAAUtG,EAAEkC,cAC5e,MAAMlC,EAAEgC,OAAMQ,EAAEtB,SAASC,cAAc,OAAQoF,QAAQ,IAAI/D,EAAEgE,YAAYtG,IAAID,EAAEuG,YAAYhE,GAAGtC,GAAS,CAACD,EAAEqF,YAAYmB,SAAS,SAASzG,EAAEC,GAAG,IAAIC,EAAE2B,KAAKS,QAAmB,IAAXE,EAAExC,EAAEyE,QAAYvE,EAAE4B,cAAc,MAAM,CAAC4E,WAAW,EAAEC,cAAc,EAAEC,WAAW,EAAE3D,KAAKT,EAAExC,EAAE6B,KAAKwC,oBAAoB,IAAI3B,EAAEoD,KAAKI,KAAKhG,EAAEkG,gBAAgBlG,EAAE4B,eAAe7B,EAAE,GAAGsC,EAAEG,EAAExC,EAAEkG,gBAAgBpD,EAAE8C,KAAKI,IAAIxD,EAAExC,EAAEwE,YAAY,GAAqClC,GAAlCtC,EAAE4F,KAAKI,KAAK1D,EAAED,GAAGrC,EAAEwE,YAAY,GAAK,IAAGvB,EAAET,EAAE,IAAI,EAAEM,GAAGG,IAAIT,EAAEH,EAAEG,IAAI1C,EAAE0C,IAAIF,EAAE4C,KAAKpF,EAAE0C,IAAI,MAAM,CAACgE,WAAW1D,EAAE2D,cAAczG,EACpf0G,WAAWzD,EAAEF,KAAKT,IAAIqE,eAAe,SAAS7G,EAAEC,GAAG,IAAIC,EAAEgB,SAASC,cAAcU,KAAKS,QAAQN,KAA+F,OAA1F9B,EAAEoG,UAAU,CAAC,uBAAuB,cAActG,GAAGsE,KAAK,KAAKrE,IAAIC,EAAEuD,MAAMqD,OAAO7G,EAAE,MAAaC,EAAEoF,WAAWhC,YAAY,SAAStD,EAAEC,GAAG4B,KAAKS,QAAQuD,gBAAgBhE,KAAK0D,mBAAmBvF,EAAEC,GAAG,IAAIC,EAAE2B,KAAK4E,SAASzG,EAAE6B,KAAKgC,iBAAiBrB,EAAEtC,EAAE+C,KAAKqB,KAAK,IAAI5B,EAAEb,KAAKkF,aAAa,OAAOvE,EAAEvC,GAAGsC,EAAEV,KAAKkF,aAAa,MAAM7G,EAAEwG,WAAWzG,GAAG+C,EAAEnB,KAAKkF,aAAa,SAAS7G,EAAEyG,cAAc1G,GAAGkD,EAAEtB,KAAKS,QAAQD,UAC3ekB,EAAE,GAAGb,GAAGH,GAAGrC,EAAEwG,aAAa7E,KAAKS,QAAQF,aAAamB,EAAE6B,KAAKvD,KAAKgF,eAAe,gBAAgBtD,EAAE6B,KAAKvD,KAAKgF,eAAe,YAAY3G,EAAEwG,cAAcnD,EAAE6B,KAAK5C,GAAGtC,EAAEyG,eAAepD,EAAE6B,KAAKvD,KAAKgF,eAAe,eAAe3G,EAAEyG,gBAAgBxD,EAAE6D,mBAAmB7D,EAAE6D,oBAAoBnF,KAAKuC,KAAKb,EAAEe,KAAK,KAAK,MAAMzC,KAAKS,QAAQkD,aAAa3D,KAAKgB,aAAaE,aAAa,QAAQ7C,EAAE0G,YAAYzD,EAAE8D,gBAAgB9D,EAAE8D,kBAAkBjE,IAAInB,KAAKgB,aAAaqE,UAAUzD,MAAMqD,OAAO5G,EAAEyG,cAAc,OAAOvC,KAAK,SAASpE,GAAG,IAAIC,EAClgB4B,KAAKgB,aAAa,GAAG5B,GAAG,GAAGA,GAAG,MAAMY,KAAKS,QAAQN,IAAI,CAAC,IAAI9B,EAAEgB,SAASC,cAAc,OAAO,IAAIjB,EAAEmB,UAAU,iBAAiBrB,EAAE,mBAAmBA,EAAEC,EAAEiH,WAAWjH,EAAEkH,YAAYnH,GAAG,IAAIE,EAAE2B,KAAKsD,cAAcjF,EAAEkH,WAAWA,YAAYlH,EAAEuE,QAAQxE,EAAEuG,YAAYtG,EAAEmF,cAAcpF,EAAEoB,UAAUrB,GAAGmF,cAAc,SAASnF,GAAgB,IAAI,IAAIC,EAAE,GAAGC,EAAE,EAAEsC,GAA9BxC,EAAEA,EAAE2F,UAA8BlB,OAAOvE,EAAEsC,EAAEtC,IAAID,EAAEmF,KAAKpF,EAAEE,IAAI,OAAOD,GAAG8G,aAAa,SAAS/G,EAAEC,EAAEC,GAAG,IAAIsC,EAAEvC,GAAGC,EAAEF,GAAU,OAAPE,EAAEF,GAAGC,EAASuC,IAAWZ,EAXtYvB,KCD1DgH,OAAOC,MAAMC,cAAgB,cAA4BF,OAAOC,MAAME,QACrEC,KAAKC,GACJC,IAAMC,EAAS,CAAC,OAAQF,EAAM,GAAI,UAE9BA,EAAM,IAETE,EAAOxC,KAAKsC,EAAM,IAGnBL,OAAOQ,UAAUD,mDCLnB,IAAyBE,EAAAA,EAatB,WAGF,GAAsB,oBAAXhH,SAA2BA,OAAOI,SAC5C,OAAO,WACN,MAAM,IAAI0B,MAAM,kDAIlB,IAAImF,EACHC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEAC,EACAC,EACAC,EAEAC,EACAC,EAEAC,EACAC,EASAC,EACAC,EACAC,EAEAC,EACAC,EAEAC,EAGAC,EACAC,EAGAC,EAEAC,EAIAC,EA3BAC,EAAc,GACdC,GAAY,EAEZC,GAAsB,EACtBC,GAAkB,EAClBC,EAAY,GAcZC,GAAwB,EACxBC,GAAyB,EAUzBC,EAAU,OAEVC,EAAU,YAAa,IAAKC,MAAMC,UAElCC,EAAMrJ,OACNI,EAAWiJ,EAAIjJ,SACf+E,EAAWkE,EAAIlE,SACfrC,EAAauG,EAAIvG,WAEjBwG,EAAID,EAAIE,QAAUF,EAAIG,MACtBC,EAAUJ,EAAII,QAEdC,EAAc,CACbC,SAAS,EACTC,SAAS,GAGVC,IAAenJ,UAAUoJ,UAAUlF,MAAM,2CACzCmF,IAASrJ,UAAUoJ,UAAUlF,MAAM,SAGnCoF,EAAmBD,GAAQF,EAAa,WAAa,QAGrDI,EAAoB,cAAe7J,EAASC,cAAc,OAE1D6J,EAA0B,WAEzB,GAAIL,EACH,OAAO,EAER,IAAIM,EAAK/J,EAASC,cAAc,KAEhC,OADA8J,EAAGxH,MAAMyH,QAAU,sBACe,SAA3BD,EAAGxH,MAAMC,cAPS,GAU1ByH,GAAU,EACVC,GAAiB,EAEjBC,EAAMvF,KAAKuF,IACXC,EAAMxF,KAAKwF,IAEXC,EAAoB,GAEpBC,EAAmB,SAASP,EAAI3I,GAC/B,IAAImJ,EAAQC,GAAKT,GAChBU,EAAU1F,EAASwF,EAAMG,OACzBC,EAASC,GAAUb,EAAI,EAAG3I,GAC1ByJ,EAASD,GAAUb,EAAI,EAAG3I,GAC1B0J,EAAgBH,GAAUH,GAAKG,GAC/BI,EAAiBF,GAAUL,GAAKK,GAChCG,EAAkBF,GAAiB/F,EAAS+F,EAAcG,YAAclG,EAAS+F,EAAcI,aAAeC,GAASR,GAAQD,MAC/HU,EAAmBL,GAAkBhG,EAASgG,EAAeE,YAAclG,EAASgG,EAAeG,aAAeC,GAASN,GAAQH,MACpI,GAAsB,SAAlBH,EAAMc,QACT,MAA+B,WAAxBd,EAAMe,eAAsD,mBAAxBf,EAAMe,cAC/C,WAAa,aAEhB,GAAIX,GAAkC,SAAxBG,EAAcS,MAAkB,CAC7C,IAAIC,EAA6C,SAAxBV,EAAcS,MAAmB,OAAS,QAEnE,OAAOV,GAAoC,SAAzBE,EAAetH,OAAoBsH,EAAetH,QAAU+H,EAChE,aAAb,WAEF,OAAQb,IAEoB,UAA1BG,EAAcO,SACY,SAA1BP,EAAcO,SACY,UAA1BP,EAAcO,SACY,SAA1BP,EAAcO,SACdL,GAAmBP,GACS,SAA5BF,EAAMX,IACNiB,GAC4B,SAA5BN,EAAMX,IACNoB,EAAkBI,EAAmBX,GAEtC,WAAa,cAmDfgB,EAA8B,SAAS1B,EAAI2B,GAE1C,IAAK3B,IAAOA,EAAG4B,sBAAuB,OAAO1C,EAE7C,IAAI2C,EAAO7B,EACP8B,GAAU,EACd,GAEC,GAAID,EAAKE,YAAcF,EAAKG,aAAeH,EAAKI,aAAeJ,EAAKK,aAAc,CACjF,IAAIC,EAAU1B,GAAKoB,GACnB,GACCA,EAAKE,YAAcF,EAAKG,cAAqC,QAArBG,EAAQC,WAA4C,UAArBD,EAAQC,YAC/EP,EAAKI,aAAeJ,EAAKK,eAAsC,QAArBC,EAAQE,WAA4C,UAArBF,EAAQE,WAChF,CACD,IAAKR,IAASA,EAAKD,uBAAyBC,IAAS5L,EAASqM,KAAM,OAAOpD,EAE3E,GAAI4C,GAAWH,EAAa,OAAOE,EACnCC,GAAU,UAIJD,EAAOA,EAAKU,YAErB,OAAOrD,GAGRsD,EAAcC,GAAU,SAAoBC,EAAgBrL,EAAyB6F,EAAoByF,GAExG,GAAItL,EAAQuL,OAAQ,CACnB,IAAIC,EAAQ3F,EAASA,EAAO6B,GAAWlJ,OACtCiN,EAAOzL,EAAQ0L,kBACfC,EAAQ3L,EAAQ4L,YAEhB3M,EAAIoM,EAAIQ,QACRC,EAAIT,EAAIU,QAKRC,GAHWxN,OAAOyN,WACNzN,OAAO0N,aAEE,GAGlBjG,IAAmBJ,IACtBsG,KAEAnG,EAAWhG,EAAQuL,OACnBrF,EAAiBlG,EAAQoM,UAER,IAAbpG,IACHA,EAAWqE,EAA4BxE,GAAQ,GAC/CI,EAAiBD,IAKnB,IAAIqG,EAAY,EACZC,EAAgBtG,EACpB,EAAG,CACF,IAWC2E,EACAE,EAEA0B,EAEAC,EACAC,EAEAC,EACAC,EAEAC,EACAC,EAvBGlE,EAAK2D,EACRQ,EAAO/C,GAASpB,GAEhBoE,EAAMD,EAAKC,IACXC,EAASF,EAAKE,OACdC,EAAOH,EAAKG,KACZC,EAAQJ,EAAKI,MAEb5D,EAAQwD,EAAKxD,MACb9E,EAASsI,EAAKtI,OA8Cf,GA7BImE,IAAOd,GACV8C,EAAchC,EAAGgC,YACjBE,EAAelC,EAAGkC,aAElB0B,EAAMnD,GAAKT,GAEX+D,EAAapD,EAAQqB,IAAkC,SAAlB4B,EAAIxB,WAA0C,WAAlBwB,EAAIxB,WACrE4B,EAAanI,EAASqG,IAAmC,SAAlB0B,EAAIvB,WAA0C,WAAlBuB,EAAIvB,WAEvE4B,EAAajE,EAAGwE,WAChBN,EAAalE,EAAG5H,YAEhB4J,EAAc/L,EAASwO,gBAAgBzC,YACvCE,EAAejM,EAASwO,gBAAgBvC,aAExC0B,EAAMnD,GAAKxK,EAASwO,iBAEpBV,EAAapD,EAAQqB,IAAkC,SAAlB4B,EAAIxB,WAA0C,WAAlBwB,EAAIxB,WAA4C,YAAlBwB,EAAIxB,WACnG4B,EAAanI,EAASqG,IAAmC,SAAlB0B,EAAIvB,WAA0C,WAAlBuB,EAAIvB,WAA4C,YAAlBuB,EAAIvB,WAErG4B,EAAahO,EAASwO,gBAAgBD,WACtCN,EAAajO,EAASwO,gBAAgBrM,WAGvCyL,EAAKE,IAAe3D,EAAImE,EAAQjO,IAAMwM,GAASmB,EAAatD,EAASqB,IAAgB5B,EAAIkE,EAAOhO,IAAMwM,KAAUmB,GAEhHH,EAAKE,IAAe5D,EAAIiE,EAASlB,IAAML,GAASoB,EAAarI,EAAUqG,IAAiB9B,EAAIgE,EAAMjB,IAAML,KAAUoB,IAG7G3F,EAAYmF,GAChB,IAAK,IAAIgB,EAAI,EAAGA,GAAKhB,EAAWgB,IAC1BnG,EAAYmG,KAChBnG,EAAYmG,GAAK,IAKhBnG,EAAYmF,GAAWG,IAAMA,GAAMtF,EAAYmF,GAAWI,IAAMA,GAAMvF,EAAYmF,GAAW1D,KAAOA,IACvGzB,EAAYmF,GAAW1D,GAAKA,EAC5BzB,EAAYmF,GAAWG,GAAKA,EAC5BtF,EAAYmF,GAAWI,GAAKA,EAE5Ba,cAAcpG,EAAYmF,GAAWkB,MAEjC5E,GAAa,GAAN6D,GAAiB,GAANC,IACrBT,GAAqB,EAErB9E,EAAYmF,GAAWkB,IAAMC,YAAY,WAEpClC,GAA6B,IAAf/L,KAAKkO,OACtBC,GAASC,OAAOC,kBAAiB,GAElC,IAAIC,EAAgB3G,EAAY3H,KAAKkO,OAAOhB,GAAKvF,EAAY3H,KAAKkO,OAAOhB,GAAKd,EAAQ,EAClFmC,EAAgB5G,EAAY3H,KAAKkO,OAAOjB,GAAKtF,EAAY3H,KAAKkO,OAAOjB,GAAKb,EAAQ,EAElF,sBACyG,aAAxGzF,EAAe5H,KAAKkN,EAAOsC,EAAeD,EAAexC,EAAK1E,EAAUO,EAAY3H,KAAKkO,OAAO9E,MAIjGzB,EAAY3H,KAAKkO,OAAO9E,KAAOd,EAClCA,EAAIkG,SAASlG,EAAImG,YAAcF,EAAejG,EAAIoG,YAAcJ,IAEhE3G,EAAY3H,KAAKkO,OAAO9E,GAAG5H,WAAa8M,EACxC3G,EAAY3H,KAAKkO,OAAO9E,GAAGwE,YAAcW,KAExCI,KAAK,CAACT,MAAOpB,IAAa,MAG/BA,UACQrM,EAAQmO,cAAgB7B,IAAkBzE,IAAQyE,EAAgBjC,EAA4BiC,GAAe,KACtHnF,EAAY6E,IAEX,IAEHG,GAAoB,WACnBjF,EAAYkH,QAAQ,SAASC,GAC5Bf,cAAce,EAAWd,OAE1BrG,EAAc,IAGfoH,GAAgB,SAAUtO,GACzB,SAASuO,EAAKC,EAAOC,GACpB,OAAO,SAASC,EAAIC,EAAMlJ,EAAQ4F,GACjC,IAAIuD,EAAYF,EAAG1O,QAAQ6O,MAAMC,MAC7BH,EAAK3O,QAAQ6O,MAAMC,MACnBJ,EAAG1O,QAAQ6O,MAAMC,OAASH,EAAK3O,QAAQ6O,MAAMC,KAEjD,GAAa,MAATN,IAAkBC,GAAQG,GAG7B,OAAO,EACD,GAAa,MAATJ,IAA2B,IAAVA,EAC3B,OAAO,EACD,GAAIC,GAAkB,UAAVD,EAClB,OAAOA,EACD,GAAqB,mBAAVA,EACjB,OAAOD,EAAKC,EAAME,EAAIC,EAAMlJ,EAAQ4F,GAAMoD,EAAnCF,CAAyCG,EAAIC,EAAMlJ,EAAQ4F,GAElE,IAAI0D,GAAcN,EAAOC,EAAKC,GAAM3O,QAAQ6O,MAAMC,KAElD,OAAkB,IAAVN,GACU,iBAAVA,GAAsBA,IAAUO,GACvCP,EAAMxM,MAAQwM,EAAMnP,QAAQ0P,IAAe,GAK/C,IAAIF,EAAQ,GACRG,EAAgBhP,EAAQ6O,MAEvBG,GAAyC,iBAAjBA,IAC5BA,EAAgB,CAACF,KAAME,IAGxBH,EAAMC,KAAOE,EAAcF,KAC3BD,EAAMI,UAAYV,EAAKS,EAAcP,MAAM,GAC3CI,EAAMK,SAAWX,EAAKS,EAAcG,KACpCN,EAAMO,YAAcJ,EAAcI,YAElCpP,EAAQ6O,MAAQA,GAGjBQ,GAAkB,SAAShE,GACrB5F,GAAWA,EAAOyF,YACvBzF,EAAOyF,WAAWxD,IAAYjC,EAAOyF,WAAWxD,GAAS4H,kBAAkBjE,IAG5EkE,GAAwB,SAAS5G,EAAI6G,GAEpC,IADA,IAAIC,EAAaD,GACTC,EAAW/H,IAClB+H,EAAaA,EAAWvE,WAGzB,OAAOvC,IAAO8G,GAGfC,GAAmB,SAASC,EAAUC,EAAaC,GAGlD,IADA,IAAIC,EAAaH,EAASzE,WACnB4E,IAAeA,EAAWpI,IAChCoI,EAAaA,EAAW5E,WAGrB4E,GACHA,EAAWpI,GAASmI,GAAQE,GAAQH,EAAa,CAChDI,kBAAkB,MAKrBC,GAAsB,YAChBvH,GAA2B/C,GAC/ByD,GAAKzD,EAAS,UAAW,SAI3BuK,GAAwB,YAClBxH,GAA2B/C,GAC/ByD,GAAKzD,EAAS,UAAW,KAM5B/G,EAASf,iBAAiB,QAAS,SAASwN,GAC3C,GAAIhE,EAKH,OAJAgE,EAAI8E,iBACJ9E,EAAI+E,iBAAmB/E,EAAI+E,kBAC3B/E,EAAIgF,0BAA4BhF,EAAIgF,2BACpChJ,GAAkB,GACX,IAEN,GAEH,IAsnDIiJ,GAtnDAC,GAAgC,SAASlF,GAE5C,GADAA,EAAMA,EAAImF,QAAUnF,EAAImF,QAAQ,GAAKnF,EACjC5F,EAAQ,CACX,IAAIgL,EAhTyB,SAASxR,EAAG6M,GACzC,IAAK,IAAIuB,EAAI,EAAGA,EAAI/F,EAAUnF,OAAQkL,IACrC,IAAI/F,EAAU+F,GAAGhK,SAASlB,OAA1B,CAEA,IAAI2K,EAAO/C,GAASzC,EAAU+F,IAC7BqD,EAAYpJ,EAAU+F,GAAG3F,GAAS1H,QAAQ2Q,qBAC1CC,EAAqB3R,GAAM6N,EAAKG,KAAOyD,GAAczR,GAAM6N,EAAKI,MAAQwD,EACxEG,EAAmB/E,GAAMgB,EAAKC,IAAM2D,GAAc5E,GAAMgB,EAAKE,OAAS0D,EAEvE,GAAIE,GAAsBC,EACzB,OAAOvJ,EAAU+F,IAsSLyD,CAA4BzF,EAAIQ,QAASR,EAAIU,SAEvD0E,GACHA,EAAQ/I,GAASqJ,YAAY,CAC5BlF,QAASR,EAAIQ,QACbE,QAASV,EAAIU,QACbyD,OAAQiB,EACR5K,OAAQ4K,MAeZ,SAAS/C,GAAS/E,EAAI3I,GACrB,IAAM2I,IAAMA,EAAGqI,UAA4B,IAAhBrI,EAAGqI,SAC7B,KAAM,2CAA6C,GAAG3S,SAASC,KAAKqK,GAGrEpJ,KAAKoJ,GAAKA,EACVpJ,KAAKS,QAAUA,EAAU+P,GAAQ,GAAI/P,GAIrC2I,EAAGjB,GAAWnI,KAGd,IAAI0R,EAAW,CACdpC,MAAO,KACPqC,MAAM,EACNC,UAAU,EACVC,MAAO,KACPC,OAAQ,KACR9F,QAAQ,EACRG,kBAAmB,GACnBE,YAAa,GACbuC,cAAc,EACdmD,UAAW,SAASC,KAAK5I,EAAG6I,UAAY,MAAQ,KAChDC,cAAe,EACfC,YAAY,EACZC,sBAAuB,KACvBC,mBAAmB,EACnBC,UAAW,WACV,OAAO3I,EAAiBP,EAAIpJ,KAAKS,UAElC8R,WAAY,iBACZC,YAAa,kBACbC,UAAW,gBACXC,OAAQ,SACRC,OAAQ,KACRC,iBAAiB,EACjBC,UAAW,EACXC,OAAQ,KACRC,QAAS,SAAUC,EAAc9M,GAChC8M,EAAaD,QAAQ,OAAQ7M,EAAO+M,cAErCC,YAAY,EACZC,gBAAgB,EAChBC,WAAY,UACZC,MAAO,EACPC,oBAAqBlP,EAASnF,OAAOsU,iBAAkB,KAAO,EAC9DC,eAAe,EACfC,cAAe,oBACfC,gBAAgB,EAChBC,kBAAmB,EACnBC,eAAgB,CAAClU,EAAG,EAAG6M,EAAG,GAC1BsH,gBAA4C,IAA5B1F,GAAS0F,iBACvB,iBAAkB5U,QACnBA,OAAOU,WAAc,qBAAsBV,OAAOU,WAEnDyR,qBAAsB,GAKvB,IAAK,IAAI7B,KAAQmC,IACdnC,KAAQ9O,KAAaA,EAAQ8O,GAAQmC,EAASnC,IAMjD,IAAK,IAAIuE,KAHT/E,GAActO,GAGCT,KACO,MAAjB8T,EAAGC,OAAO,IAAkC,mBAAb/T,KAAK8T,KACvC9T,KAAK8T,GAAM9T,KAAK8T,GAAInF,KAAK3O,OAK3BA,KAAKgU,iBAAkBvT,EAAQ+S,eAAwBtK,EAGnDzI,EAAQoT,eACXI,GAAI7K,EAAI,cAAepJ,KAAKkU,cAE5BD,GAAI7K,EAAI,YAAapJ,KAAKkU,aAC1BD,GAAI7K,EAAI,aAAcpJ,KAAKkU,cAGxBlU,KAAKgU,kBACRC,GAAI7K,EAAI,WAAYpJ,MACpBiU,GAAI7K,EAAI,YAAapJ,OAGtB+H,EAAUxE,KAAKvD,KAAKoJ,IAGpB3I,EAAQoR,OAASpR,EAAQoR,MAAMsC,KAAOnU,KAAK2R,KAAKlR,EAAQoR,MAAMsC,IAAInU,OAAS,IA0lC5E,SAASoU,GAAyBhL,EAAeiL,EAA0BC,EAAKC,GAC/E,GAAInL,EAAI,CACPkL,EAAMA,GAAOjV,EAEb,EAAG,CACF,GACa,MAAZgV,IAEiB,MAAhBA,EAAS,IAAcjL,EAAGuC,aAAe2I,GAAOE,GAASpL,EAAIiL,EAASI,UAAU,KAChFD,GAASpL,EAAIiL,KAEdE,GAAcnL,IAAOkL,EAErB,OAAOlL,EAGR,GAAIA,IAAOkL,EAAK,YAERlL,EAAKsL,GAAiBtL,IAGhC,OAAO,KAIR,SAASsL,GAAiBtL,GACzB,OAAQA,EAAGuL,MAAQvL,IAAO/J,GAAY+J,EAAGuL,KAAKlD,SAC3CrI,EAAGuL,KACHvL,EAAGuC,WAYP,SAASsI,GAAI7K,EAAIwL,EAAOd,GACvB1K,EAAG9K,iBAAiBsW,EAAOd,EAAInL,GAIhC,SAASkM,GAAKzL,EAAIwL,EAAOd,GACxB1K,EAAG3K,oBAAoBmW,EAAOd,EAAInL,GAInC,SAASmM,GAAa1L,EAAImG,EAAMwF,GAC/B,GAAI3L,GAAMmG,EACT,GAAInG,EAAG4L,UACN5L,EAAG4L,UAAUD,EAAQ,MAAQ,UAAUxF,OAEnC,CACJ,IAAI9K,GAAa,IAAM2E,EAAG3E,UAAY,KAAKwQ,QAAQ/M,EAAS,KAAK+M,QAAQ,IAAM1F,EAAO,IAAK,KAC3FnG,EAAG3E,WAAaA,GAAasQ,EAAQ,IAAMxF,EAAO,KAAK0F,QAAQ/M,EAAS,MAM3E,SAAS2B,GAAKT,EAAI8L,EAAMC,GACvB,IAAIvT,EAAQwH,GAAMA,EAAGxH,MAErB,GAAIA,EAAO,CACV,QAAY,IAARuT,EAQH,OAPI9V,EAAS+V,aAAe/V,EAAS+V,YAAYlW,iBAChDiW,EAAM9V,EAAS+V,YAAYlW,iBAAiBkK,EAAI,IAExCA,EAAGjK,eACXgW,EAAM/L,EAAGjK,mBAGM,IAAT+V,EAAkBC,EAAMA,EAAID,GAG7BA,KAAQtT,IAAsC,IAA5BsT,EAAKpV,QAAQ,YACpCoV,EAAO,WAAaA,GAGrBtT,EAAMsT,GAAQC,GAAsB,iBAARA,EAAmB,GAAK,OAKvD,SAASE,GAAQjM,GAChB,IAAIkM,EAAoB,GACxB,EAAG,CACF,IAAIC,EAAY1L,GAAKT,EAAI,aAErBmM,GAA2B,SAAdA,IAChBD,EAAoBC,EAAY,IAAMD,SAG/BlM,EAAKA,EAAGuC,YAEjB,OAAI1M,OAAOuW,UACH,IAAIA,UAAUF,GACXrW,OAAOwW,gBACV,IAAIA,gBAAgBH,GACjBrW,OAAOyW,UACV,IAAIA,UAAUJ,QADf,EAMR,SAASK,GAAMrB,EAAK1Q,EAASgS,GAC5B,GAAItB,EAAK,CACR,IAAIuB,EAAOvB,EAAIwB,qBAAqBlS,GAAUkK,EAAI,EAAGtP,EAAIqX,EAAKjT,OAE9D,GAAIgT,EACH,KAAO9H,EAAItP,EAAGsP,IACb8H,EAASC,EAAK/H,GAAIA,GAIpB,OAAO+H,EAGR,MAAO,GAKR,SAASE,GAAe3F,EAAU9J,EAAQiJ,EAAMyG,EAAUC,EAAMC,EAAQC,EAAYtP,EAAUwJ,GAE7F,IAAIvE,EACHrL,GAFD2P,EAAYA,GAAY9J,EAAO6B,IAEX1H,QACnB2V,EAAS,KAAO7G,EAAKwE,OAAO,GAAGsC,cAAgB9G,EAAK+G,OAAO,IAExDrX,OAAOsX,aAAgBzN,GAAeE,GAMzC8C,EAAMzM,EAASmX,YAAY,UACvBC,UAAUlH,GAAM,GAAM,GAN1BzD,EAAM,IAAIyK,YAAYhH,EAAM,CAC3BmH,SAAS,EACTC,YAAY,IAOd7K,EAAIqD,GAAK8G,GAAQ3P,EACjBwF,EAAIsD,KAAO8G,GAAU5P,EACrBwF,EAAI8K,KAAOZ,GAAY1P,EACvBwF,EAAI+K,MAAQxQ,EAEZyF,EAAIlF,SAAWuP,EACfrK,EAAIjF,SAAWA,EAEfiF,EAAIgL,cAAgBzG,EAEhB/J,GACHA,EAAOyQ,cAAcjL,GAGlBrL,EAAQ2V,IACX3V,EAAQ2V,GAAQrX,KAAKqR,EAAUtE,GAKjC,SAASkL,GAAQd,EAAQD,EAAM/P,EAAQ+Q,EAAUjB,EAAUkB,EAAY7G,EAAa8G,GACnF,IAAIrL,EAGHsL,EAFAhH,EAAW8F,EAAO/N,GAClBkP,EAAWjH,EAAS3P,QAAQ6W,OA6B7B,OA1BIrY,OAAOsX,aAAgBzN,GAAeE,GAMzC8C,EAAMzM,EAASmX,YAAY,UACvBC,UAAU,QAAQ,GAAM,GAN5B3K,EAAM,IAAIyK,YAAY,OAAQ,CAC7BG,SAAS,EACTC,YAAY,IAOd7K,EAAIqD,GAAK8G,EACTnK,EAAIsD,KAAO8G,EACXpK,EAAIyL,QAAUrR,EACd4F,EAAI0L,YAAcP,EAClBnL,EAAI2L,QAAUzB,GAAYC,EAC1BnK,EAAI4L,YAAcR,GAAc1M,GAASyL,GACzCnK,EAAIqL,gBAAkBA,EAEtBrL,EAAIgL,cAAgBzG,EAEpB6F,EAAOa,cAAcjL,GAEjBuL,IACHD,EAASC,EAAStY,KAAKqR,EAAUtE,EAAKuE,IAGhC+G,EAGR,SAASO,GAAkBvO,GAC1BA,EAAG2I,WAAY,EAGhB,SAAS6F,KACRtO,GAAU,EAWX,SAASW,GAAUb,EAAIyO,EAAUpX,GAKhC,IAJA,IAAIqX,EAAe,EAClBhK,EAAI,EACJhK,EAAWsF,EAAGtF,SAERgK,EAAIhK,EAASlB,QAAQ,CAC3B,GAC+B,SAA9BkB,EAASgK,GAAGlM,MAAM8I,SAClB5G,EAASgK,KAAO1H,GAChBtC,EAASgK,KAAO5H,GAChBkO,GAAStQ,EAASgK,GAAIrN,EAAQsR,UAAW3I,GAAI,GAC5C,CACD,GAAI0O,IAAiBD,EACpB,OAAO/T,EAASgK,GAEjBgK,IAGDhK,IAED,OAAO,KAQR,SAASiK,GAAW3O,GAGnB,IAFA,IAAI4O,EAAO5O,EAAG6O,kBAEPD,IAAS5R,GAAkC,SAAvB4R,EAAKpW,MAAM8I,WACrCsN,EAAOA,EAAKE,0BAKb,OAAOF,GAAQ,KAuHhB,SAASG,GAAY/O,GAKpB,IAJA,IAAIgP,EAAMhP,EAAGxF,QAAUwF,EAAG3E,UAAY2E,EAAGiP,IAAMjP,EAAGkP,KAAOlP,EAAG6J,YAC3DnF,EAAIsK,EAAIxV,OACR2V,EAAM,EAEAzK,KACNyK,GAAOH,EAAII,WAAW1K,GAGvB,OAAOyK,EAAIzZ,SAAS,IAUrB,SAAS2Z,GAAOrP,EAAIiL,GACnB,IAAIqE,EAAQ,EAEZ,IAAKtP,IAAOA,EAAGuC,WACd,OAAQ,EAGT,KAAOvC,IAAOA,EAAKA,EAAG8O,yBACc,aAA9B9O,EAAG6I,SAASoE,eAAiCjN,IAAO/C,GACxDqS,IAIF,OAAOA,EAGR,SAASlE,GAAyBpL,EAAeiL,GAChD,GAAIjL,EACH,IACC,GAAIA,EAAGuP,QACN,OAAOvP,EAAGuP,QAAQtE,GACZ,GAAIjL,EAAGwP,kBACb,OAAOxP,EAAGwP,kBAAkBvE,GACtB,GAAIjL,EAAGyP,sBACb,OAAOzP,EAAGyP,sBAAsBxE,GAEhC,MAAMyE,GACP,OAAO,EAIT,OAAO,EAIR,SAASjN,GAAUkN,EAAUC,GAC5B,OAAO,WACN,IAAKjI,GAAkB,CACtB,IAAIkI,EAAOC,UACVjN,EAAQjM,KAET+Q,GAAmBhP,EAAW,WACT,IAAhBkX,EAAKrW,OACRmW,EAASha,KAAKkN,EAAOgN,EAAK,IAE1BF,EAASI,MAAMlN,EAAOgN,GAGvBlI,QAAmB,GACjBiI,KAUN,SAASxI,GAAQ4I,EAAKf,GACrB,GAAIe,GAAOf,EACV,IAAK,IAAIgB,KAAOhB,EACXA,EAAIiB,eAAeD,KACtBD,EAAIC,GAAOhB,EAAIgB,IAKlB,OAAOD,EAGR,SAASG,GAAOnQ,GACf,OAAIV,GAAWA,EAAQ8Q,IACf9Q,EAAQ8Q,IAAIpQ,GAAIqQ,WAAU,GAEzBlR,EACDA,EAAEa,GAAIyN,OAAM,GAAM,GAGlBzN,EAAGqQ,WAAU,GAgBtB,SAASC,GAAU5F,GAClB,OAAO/R,EAAW+R,EAAI,GAGvB,SAAS6F,GAAgBC,GACxB,OAAO9X,aAAa8X,GAYrB,SAASpP,GAASpB,EAAIyQ,EAAWC,GAChC,GAAK1Q,EAAG4B,uBAAyB5B,IAAOd,EAAxC,CAEA,IAAIyR,EACHvM,EACAE,EACAD,EACAE,EACA1I,EACA8E,EAmBD,GAjBIX,IAAOd,GAEVkF,GADAuM,EAAS3Q,EAAG4B,yBACCwC,IACbE,EAAOqM,EAAOrM,KACdD,EAASsM,EAAOtM,OAChBE,EAAQoM,EAAOpM,MACf1I,EAAS8U,EAAO9U,OAChB8E,EAAQgQ,EAAOhQ,QAEfyD,EAAM,EACNE,EAAO,EACPD,EAASxO,OAAO0N,YAChBgB,EAAQ1O,OAAOyN,WACfzH,EAAShG,OAAO0N,YAChB5C,EAAQ9K,OAAOyN,YAGZoN,GAAsB1Q,IAAOd,EAAK,CAMrC,GAJAuR,EAAYA,GAAazQ,EAAGuC,YAIvB7C,EACJ,GACC,GAAI+Q,GAAaA,EAAU7O,uBAA0D,SAAjCnB,GAAKgQ,EAAW,aAAyB,CAC5F,IAAIG,EAAgBH,EAAU7O,wBAG9BwC,GAAOwM,EAAcxM,IAAMpJ,EAASyF,GAAKgQ,EAAW,qBACpDnM,GAAQsM,EAActM,KAAOtJ,EAASyF,GAAKgQ,EAAW,sBACtDpM,EAASD,EAAMuM,EAAO9U,OACtB0I,EAAQD,EAAOqM,EAAOhQ,MAEtB,aAGO8P,EAAYA,EAAUlO,YAIhC,IAAIsO,EAAS5E,GAAQjM,GACpB8Q,EAASD,GAAUA,EAAO7b,EAC1B+b,EAASF,GAAUA,EAAOtZ,EAEvBsZ,IAOHxM,GANAD,GAAO2M,IAIPlV,GAAUkV,GAGVxM,GANAD,GAAQwM,IAERnQ,GAASmQ,IAQX,MAAO,CACN1M,IAAKA,EACLE,KAAMA,EACND,OAAQA,EACRE,MAAOA,EACP5D,MAAOA,EACP9E,OAAQA,IA8EV,OA50DAgP,GAAI5U,EAAU,WAAY2R,IAC1BiD,GAAI5U,EAAU,YAAa2R,IAC3BiD,GAAI5U,EAAU,YAAa2R,IAuG3B7C,GAAStP,UAA6C,CACrDwE,YAAa8K,GAEb4B,kBAAmB,SAASjE,GAC3B,IAAImE,EAWJ,GATI7J,IAAY+C,GACfuH,KACAT,EAAS5Q,EAAS+a,iBAAiBtO,EAAIQ,QAASR,EAAIU,SACpDmE,MAEAV,EAASnE,EAAImE,OAGdA,EAASmE,GAASnE,EAAQjQ,KAAKS,QAAQsR,UAAW/R,KAAKoJ,IAAI,IACvDG,GACCrD,GAAUA,EAAOyF,aAAe3L,KAAKoJ,GAA1C,CAGA,IADA,IAza+B1J,EAAG6M,EAAGnD,EAAIiR,EACrCnD,EACHoD,EACAC,EACAC,EAqaG1W,EAAW9D,KAAKoJ,GAAGtF,SACdgK,EAAI,EAAGA,EAAIhK,EAASlB,OAAQkL,IAEhCsG,GAAStQ,EAASgK,GAAI9N,KAAKS,QAAQsR,UAAW/R,KAAKoJ,IAAI,IAAUtF,EAASgK,KAAOmC,IACpFnM,EAASgK,GAAG2M,sBA7aiB/a,EA6a2BoM,EAAIQ,QA7a5BC,EA6aqCT,EAAIU,QA7atCpD,EA6a+CtF,EAASgK,GA7apDuM,EA6awDra,KAAK0a,cAAc5O,EAAK,MAAO9L,KAAKS,QA5ajIyW,OAAAA,EACHoD,OAAAA,EACAC,OAAAA,EACAC,OAAAA,EAHGtD,EAAa1M,GAASpB,GACzBkR,EAAuB,aAATD,EAAsBnD,EAAWxJ,KAAOwJ,EAAW1J,IACjE+M,EAAuB,aAATF,EAAsBnD,EAAWvJ,MAAQuJ,EAAWzJ,OAG5D6M,GAFNE,EAA0B,aAATH,EAAsB3a,EAAI6M,IAELiO,EAAiBD,IA2anDnG,GAASnE,EAAQjQ,KAAKS,QAAQsR,UAAW/R,KAAKoJ,IAAI,KACtD9B,EAAa,MAGdiC,GAAiB,EACjBxH,EAAW,WACVwH,GAAiB,GACf,MAIJmR,cAAe,SAAS5O,EAAKmE,GAC5B,MAA0C,mBAA3BjQ,KAAKS,QAAQ6R,UAA4BtS,KAAKS,QAAQ6R,UAAUvT,KAAKiB,KAAM8L,EAAKmE,EAAQ/J,GAAUlG,KAAKS,QAAQ6R,WAG/H4B,YAAa,SAAiCpI,GAC7C,GAAKA,EAAI6K,WAAT,CACA,IASCR,EATGlK,EAAQjM,KACXoJ,EAAKpJ,KAAKoJ,GACV3I,EAAUT,KAAKS,QACfmS,EAAkBnS,EAAQmS,gBAC1B+H,EAAO7O,EAAI6O,KACXC,EAAQ9O,EAAImF,SAAWnF,EAAImF,QAAQ,GACnChB,GAAU2K,GAAS9O,GAAKmE,OACxB4K,EAAiB/O,EAAImE,OAAO6K,aAAgBhP,EAAIiP,MAAQjP,EAAIiP,KAAK,IAAQjP,EAAIkP,cAAgBlP,EAAIkP,eAAe,KAAQ/K,EACxH0C,EAASlS,EAAQkS,OAQlB,GAm/CF,SAAgCsI,GAC/BvR,EAAkB9G,OAAS,EAE3B,IAAIsY,EAASD,EAAKnF,qBAAqB,SACnCqF,EAAMD,EAAOtY,OAEjB,KAAOuY,KAAO,CACb,IAAI/R,EAAK8R,EAAOC,GAChB/R,EAAGgS,SAAW1R,EAAkBnG,KAAK6F,IAhgDrCiS,CAAuBjS,KAKnBN,GAAegD,EAAI2E,kBAAqBT,GAAsB5G,EAAI6G,MAKlE/J,KAIA,wBAAwB8L,KAAK2I,IAAwB,IAAf7O,EAAIwP,QAAgB7a,EAAQmR,UAKlEiJ,EAAeU,mBAMnB,GAFAtL,EAASmE,GAASnE,EAAQxP,EAAQsR,UAAW3I,GAAI,IASjD,GAAI5C,IAAeyJ,EAAnB,CASA,GAHAkG,EAAasC,GAAOxI,EAAQxP,EAAQsR,WAGd,mBAAXY,GACV,GAAIA,EAAO5T,KAAKiB,KAAM8L,EAAKmE,EAAQjQ,MAGlC,OAFA+V,GAAe9J,EAAO4O,EAAgB,SAAU5K,EAAQ7G,EAAIA,EAAI+M,QAChEvD,GAAmB9G,EAAI6K,YAAc7K,EAAI8E,uBAItC,GAAI+B,IACRA,EAASA,EAAO/R,MAAM,KAAK4a,KAAK,SAAUC,GAGzC,GAFAA,EAAWrH,GAASyG,EAAgBY,EAASC,OAAQtS,GAAI,GAIxD,OADA2M,GAAe9J,EAAOwP,EAAU,SAAUxL,EAAQ7G,EAAIA,EAAI+M,IACnD,KAMR,YADAvD,GAAmB9G,EAAI6K,YAAc7K,EAAI8E,kBAKvCnQ,EAAQqR,SAAWsC,GAASyG,EAAgBpa,EAAQqR,OAAQ1I,GAAI,IAKpEpJ,KAAK2b,kBAAkB7P,EAAK8O,EAAO3K,EAAQkG,SA3CtCrN,GACHqH,GAAiB/G,EAAI0C,EAAK,iBA8C7B8P,kBAAmB,SAAS9P,EAAK+P,GAChC,GAAK3V,GAAWlG,KAAKS,QAAQuL,OAA7B,CACA,IAAItM,EAAIoM,EAAIQ,QACXC,EAAIT,EAAIU,QAERvB,EAAO5L,EAAS+a,iBAAiB1a,EAAG6M,GACpCN,EAAQjM,KAKT,GAAI6b,GAAY7S,GAAQF,EAAY,CACnC8C,EAAYE,EAAKG,EAAMxL,QAASwK,EAAM4Q,GAGtC,IAAIC,EAAiBhR,EAA4BG,GAAM,IAEtDrD,GAEEZ,GACDtH,IAAMuH,GACNsF,IAAMrF,IAIPF,GAA8B+G,cAAc/G,GAE5CA,EAA6BiH,YAAY,WACxC,GAAK/H,EAAL,CAEA,IAAI6V,EAAUjR,EAA4BzL,EAAS+a,iBAAiB1a,EAAG6M,IAAI,GACvEwP,IAAYD,IACfA,EAAiBC,EACjBnP,KACAhB,EAAYE,EAAKG,EAAMxL,QAASqb,EAAgBD,MAE/C,IACH5U,EAAmBvH,EACnBwH,EAAmBqF,OAGd,CAEN,IAAKN,EAAMxL,QAAQmO,cAAgB9D,EAA4BG,GAAM,KAAUhM,OAE9E,YADA2N,KAGDhB,EAAYE,EAAKG,EAAMxL,QAASqK,EAA4BG,GAAM,IAAQ,MAI5E0Q,kBAAmB,SAAsB7P,EAAiB8O,EAAyB3K,EAAqBkG,GACvG,IAIC6F,EAJG/P,EAAQjM,KACXoJ,EAAK6C,EAAM7C,GACX3I,EAAUwL,EAAMxL,QAChBwb,EAAgB7S,EAAG6S,cAGhBhM,IAAW/J,GAAW+J,EAAOtE,aAAevC,IAC/C9C,EAAS8C,EAETjD,GADAD,EAAS+J,GACStE,WAClBpF,EAASL,EAAOgW,YAChB1V,EAAayJ,EACbnJ,EAAcrG,EAAQ6O,MACtB1I,EAAWuP,EAEXhP,EAAS,CACR8I,OAAQ/J,EACRoG,SAAUsO,GAAS9O,GAAKQ,QACxBE,SAAUoO,GAAS9O,GAAKU,SAGzBxM,KAAKmc,QAAUvB,GAAS9O,GAAKQ,QAC7BtM,KAAKoc,QAAUxB,GAAS9O,GAAKU,QAE7BtG,EAAOtE,MAAM,eAAiB,MAE9BsE,EAAOtE,MAAMya,WAAa,GAC1BnW,EAAOtE,MAAM2T,UAAY,GAEzByG,EAAc,WAGb/P,EAAMqQ,sBAGNpW,EAAO6L,UAAY9F,EAAM+H,gBAGzB/H,EAAMsQ,kBAAkBzQ,EAAK8O,GAG7B7E,GAAe9J,EAAO3F,EAAQ,SAAUJ,EAAQI,EAAQA,EAAQM,GAGhEkO,GAAa5O,EAAQzF,EAAQ+R,aAAa,IAI3C/R,EAAQiS,OAAO9R,MAAM,KAAKiO,QAAQ,SAAU4M,GAC3C9F,GAAMzP,EAAQuV,EAASC,OAAQ/D,MAG5BlX,EAAQoT,eACXI,GAAIgI,EAAe,YAAahQ,EAAMuQ,UAEtCvI,GAAIgI,EAAe,UAAWhQ,EAAMuQ,SACpCvI,GAAIgI,EAAe,WAAYhQ,EAAMuQ,SACrCvI,GAAIgI,EAAe,cAAehQ,EAAMuQ,UAGrC/b,EAAQ4S,OAIXY,GAAIgI,EAAe,UAAWhQ,EAAMqQ,qBACpCrI,GAAIgI,EAAe,WAAYhQ,EAAMqQ,qBACrCrI,GAAIgI,EAAe,cAAehQ,EAAMqQ,qBACxCrI,GAAIgI,EAAe,YAAahQ,EAAMwQ,8BACtCxI,GAAIgI,EAAe,YAAahQ,EAAMwQ,8BACtChc,EAAQoT,gBAAkBI,GAAIgI,EAAe,cAAehQ,EAAMwQ,8BAElExQ,EAAMyQ,gBAAkB3a,EAAWia,EAAavb,EAAQ4S,QAExD2I,MAKHS,6BAA8B,SAAyCtb,GACtE,IAAIyZ,EAAQzZ,EAAE8P,QAAU9P,EAAE8P,QAAQ,GAAK9P,EACnCsI,EAAID,EAAIoR,EAAMtO,QAAUtM,KAAKmc,QAAS3S,EAAIoR,EAAMpO,QAAUxM,KAAKoc,UAC9Dpc,KAAKS,QAAQ6S,qBAEjBtT,KAAKsc,uBAIPA,oBAAqB,WACpB,IAAIL,EAAgBjc,KAAKoJ,GAAG6S,cAE5Bna,aAAa9B,KAAK0c,iBAClB7H,GAAKoH,EAAe,UAAWjc,KAAKsc,qBACpCzH,GAAKoH,EAAe,WAAYjc,KAAKsc,qBACrCzH,GAAKoH,EAAe,cAAejc,KAAKsc,qBACxCzH,GAAKoH,EAAe,YAAajc,KAAKyc,8BACtC5H,GAAKoH,EAAe,YAAajc,KAAKyc,8BACtC5H,GAAKoH,EAAe,cAAejc,KAAKyc,+BAGzCF,kBAAmB,SAAsBzQ,EAAiB8O,GACzDA,EAAQA,IAA6B,SAAnB9O,EAAI6Q,YAAyB7Q,EAAM,OAEhD9L,KAAKgU,iBAAmB4G,EACxB5a,KAAKS,QAAQoT,eAChBI,GAAI5U,EAAU,cAAeW,KAAK4c,cAElC3I,GAAI5U,EADMub,EACI,YAEA,YAFa5a,KAAK4c,eAKjC3I,GAAI/N,EAAQ,UAAWlG,MACvBiU,GAAI3N,EAAQ,YAAatG,KAAK6c,eAG/B,IACKxd,EAASyd,UAEZpD,GAAU,WACTra,EAASyd,UAAUC,UAGpB9d,OAAO+d,eAAeC,kBAEtB,MAAOC,MAIVC,aAAc,SAAUtB,GAEvB,GADAhU,GAAsB,EAClBvB,GAAUJ,EAAQ,CACjBlG,KAAKgU,kBACRC,GAAI5U,EAAU,WAAYW,KAAK4b,mBAC/B3H,GAAI5U,EAAU,WAAYyQ,KAE3B,IAAIrP,EAAUT,KAAKS,SAGlBob,GAAY/G,GAAa5O,EAAQzF,EAAQgS,WAAW,GACrDqC,GAAa5O,EAAQzF,EAAQ8R,YAAY,GAGzC1I,GAAK3D,EAAQ,YAAa,IAE1BiI,GAASC,OAASpO,KAElB6b,GAAY7b,KAAKod,eAGjBrH,GAAe/V,KAAMsG,EAAQ,QAASJ,EAAQI,EAAQA,EAAQM,QAE9D5G,KAAKqd,YAIPhP,iBAAkB,SAAUiP,GAC3B,GAAIlW,EAAU,CACb,GAAIpH,KAAKmc,SAAW/U,EAASkF,SAAWtM,KAAKoc,SAAWhV,EAASoF,UAAY8Q,EAC5E,OAEDtd,KAAKmc,OAAS/U,EAASkF,QACvBtM,KAAKoc,OAAShV,EAASoF,QAEvBkE,KAKA,IAHA,IAAIT,EAAS5Q,EAAS+a,iBAAiBhT,EAASkF,QAASlF,EAASoF,SAC9D+Q,EAAStN,EAENA,GAAUA,EAAO6K,YAEvByC,EADAtN,EAASA,EAAO6K,WAAWV,iBAAiBhT,EAASkF,QAASlF,EAASoF,SAIxE,GAAI+Q,EACH,EAAG,CACF,GAAIA,EAAOpV,GAUV,GAPWoV,EAAOpV,GAASqJ,YAAY,CACtClF,QAASlF,EAASkF,QAClBE,QAASpF,EAASoF,QAClByD,OAAQA,EACR3J,OAAQiX,MAGQvd,KAAKS,QAAQ0S,eAC7B,MAIFlD,EAASsN,QAGHA,EAASA,EAAO5R,YAExBzF,EAAOyF,WAAWxD,GAAS4H,kBAAkB3I,GAE7CuJ,OAKFiM,aAAc,SAAyB9Q,GACtC,GAAI3E,EAAQ,CACX,IAAI1G,EAAUT,KAAKS,QAClBkT,EAAoBlT,EAAQkT,kBAC5BC,EAAiBnT,EAAQmT,eACzBgH,EAAQ9O,EAAImF,QAAUnF,EAAImF,QAAQ,GAAKnF,EACvCmO,EAAS7T,GAAWiP,GAAQjP,GAC5B8T,EAAS9T,GAAW6T,GAAUA,EAAO7b,EACrC+b,EAAS/T,GAAW6T,GAAUA,EAAOtZ,EACrC6c,GAAO5C,EAAMtO,QAAUnF,EAAOmF,QAAWsH,EAAelU,IAAMwa,GAAkB,GAChFuD,GAAO7C,EAAMpO,QAAUrF,EAAOqF,QAAWoH,EAAerH,IAAM4N,GAAkB,GAChFuD,EAAc5R,EAAImF,QAAU,eAAiBuM,EAAK,MAAQC,EAAK,QAAU,aAAeD,EAAK,MAAQC,EAAK,MAI3G,IAAKtP,GAASC,SAAWvG,EAAqB,CAC7C,GAAI8L,GACHlK,EAAID,EAAIoR,EAAMtO,QAAUtM,KAAKmc,QAAS3S,EAAIoR,EAAMpO,QAAUxM,KAAKoc,SAAWzI,EAE1E,OAED3T,KAAK6c,aAAa/Q,GAAK,GAGxB9L,KAAK4b,kBAAkBhB,GAAO,GAG9BvT,GAAQ,EACRD,EAAWwT,EAGX/Q,GAAKzD,EAAS,kBAAmBsX,GACjC7T,GAAKzD,EAAS,eAAgBsX,GAC9B7T,GAAKzD,EAAS,cAAesX,GAC7B7T,GAAKzD,EAAS,YAAasX,GAE3B5R,EAAI6K,YAAc7K,EAAI8E,mBAIxBwM,aAAc,WACb,IAAKhX,EAAS,CACb,IAAImH,EAAO/C,GAAStE,EAAQlG,KAAKS,QAAQiT,eAAiBrU,EAASqM,KAAOpF,GAAQ,GAEjF7F,GADMoJ,GAAK3D,GACDlG,KAAKS,SAIhBqU,GAFA1O,EAAUF,EAAOuT,WAAU,GAELhZ,EAAQ8R,YAAY,GAC1CuC,GAAa1O,EAAS3F,EAAQgT,eAAe,GAC7CqB,GAAa1O,EAAS3F,EAAQgS,WAAW,GAEzC5I,GAAKzD,EAAS,aAAc,cAC5ByD,GAAKzD,EAAS,SAAU,GACxByD,GAAKzD,EAAS,MAAOmH,EAAKC,KAC1B3D,GAAKzD,EAAS,OAAQmH,EAAKG,MAC3B7D,GAAKzD,EAAS,QAASmH,EAAKxD,OAC5BF,GAAKzD,EAAS,SAAUmH,EAAKtI,QAC7B4E,GAAKzD,EAAS,UAAW,OACzByD,GAAKzD,EAAS,WAAY,SAC1ByD,GAAKzD,EAAS,SAAU,UACxByD,GAAKzD,EAAS,gBAAiB,QAE/B3F,EAAQiT,gBAAkBrU,EAASqM,KAAK/G,YAAYyB,IAAYE,EAAO3B,YAAYyB,KAIrFyW,aAAc,SAAoB/Q,EAAiB+P,GAClD,IAAI5P,EAAQjM,KACRgT,EAAelH,EAAIkH,aACnBvS,EAAUwL,EAAMxL,SAGpB4F,EAAUkT,GAAOrT,IAET6L,WAAY,EACpB1L,EAAQzE,MAAM,eAAiB,GAE/B5B,KAAK2d,aAEL7I,GAAazO,EAAS4F,EAAMxL,QAAQ+R,aAAa,GAIjDvG,EAAM2R,SAAWlE,GAAU,WACrBzN,EAAMxL,QAAQ4R,mBAClB/L,EAAOuX,aAAaxX,EAASH,GAE9B6P,GAAe9J,EAAO3F,EAAQ,QAASJ,MAIvC2V,GAAY/G,GAAa5O,EAAQzF,EAAQgS,WAAW,GAGjDoJ,GACH/T,GAAkB,EAClBmE,EAAM6R,QAAU7P,YAAYhC,EAAMoC,iBAAkB,MAGpDwG,GAAKxV,EAAU,UAAW4M,EAAMuQ,SAChC3H,GAAKxV,EAAU,WAAY4M,EAAMuQ,SACjC3H,GAAKxV,EAAU,cAAe4M,EAAMuQ,SAEhCxJ,IACHA,EAAa+K,cAAgB,OAC7Btd,EAAQsS,SAAWtS,EAAQsS,QAAQhU,KAAKkN,EAAO+G,EAAc9M,IAG9D+N,GAAI5U,EAAU,OAAQ4M,GAGtBpC,GAAK3D,EAAQ,YAAa,kBAG3B2B,GAAsB,EAEtBoE,EAAM+R,aAAetE,GAAUzN,EAAMkR,aAAaxO,KAAK1C,EAAO4P,IAC9D5H,GAAI5U,EAAU,cAAe4M,IAI9BuF,YAAa,SAAoB1F,GAChC,IAECmL,EACAC,EACA+G,EAJG7U,EAAKpJ,KAAKoJ,GACb6G,EAASnE,EAAImE,OAIbxP,EAAUT,KAAKS,QACf6O,EAAQ7O,EAAQ6O,MAChB4O,EAAiB/P,GAASC,OAC1B+P,EAAWrX,IAAgBwI,EAC3B8O,EAAU3d,EAAQkR,KAClB1F,EAAQjM,KAET,IAAIsJ,KAGAR,GAAegD,EAAIxF,QAAWwF,EAAI2E,kBAAqBT,GAAsB5G,EAAI6G,IAArF,CAkDA,QAV2B,IAAvBnE,EAAI8E,gBACP9E,EAAI6K,YAAc7K,EAAI8E,iBAIvBvJ,GAAQ,EAER4I,EAASmE,GAASnE,EAAQxP,EAAQsR,UAAW3I,GAAI,GAG3CgL,GAAStI,EAAImE,OAAQ,KAAM/J,GAAQ,IAAS+J,EAAOoO,SACxD,OAAOC,IAOR,GAJIrO,IAAW/J,IACd4B,GAAkB,GAGfoW,IAAmBzd,EAAQmR,WAC7BuM,EACEC,IAAYH,GAAU3X,EAAOiY,SAASrY,IAEvCa,IAAgB/G,OAEdA,KAAKwe,YAAc1X,EAAY4I,UAAU1P,KAAMke,EAAgBhY,EAAQ4F,KACxEwD,EAAMK,SAAS3P,KAAMke,EAAgBhY,EAAQ4F,IAI/C,CACD,IAAIuO,EAAOra,KAAK0a,cAAc5O,EAAKmE,GAInC,GAFAgH,EAAWzM,GAAStE,GAEhB+X,EAUH,OATAje,KAAK2d,aACLxX,EAAWG,EAEPC,EACHD,EAAOuX,aAAa3X,EAAQK,GAE5BD,EAAO3B,YAAYuB,GAGboY,IAGR,GAA4B,IAAvBlV,EAAGtF,SAASlB,QAAkBwG,EAAGtF,SAAS,KAAOsC,GAsvBzD,SAAsB0F,EAAKuO,EAAMjR,GAChC,IAAI2Q,EAASvP,GAASuN,GAAW3O,IAChCqV,EAAuB,aAATpE,EAAsBvO,EAAIU,QAAUV,EAAIQ,QACtDkO,EAA0B,aAATH,EAAsBvO,EAAIQ,QAAUR,EAAIU,QACzDkS,EAAoB,aAATrE,EAAsBN,EAAOtM,OAASsM,EAAOpM,MACxD2M,EAAuB,aAATD,EAAsBN,EAAOrM,KAAOqM,EAAOvM,IACzD+M,EAAuB,aAATF,EAAsBN,EAAOpM,MAAQoM,EAAOtM,OAG3D,MACU,aAAT4M,EACEG,EAAiBD,EAJV,IAIkCC,GAAkBD,GAAekE,EAAcC,GAAYlE,GAAkBF,EACtHmE,EAAcC,GAAYlE,EAAiBF,GAAemE,GAAeC,GAAYlE,EAAiBD,EAL/F,GA5vBPoE,CAAa7S,EAAKuO,EAAMjR,KAAQlD,EAAOmY,UAiBvC,GAd2B,IAAvBjV,EAAGtF,SAASlB,QAAgBwG,EAAGtF,SAAS,KAAOsC,GAAWgD,IAAO0C,EAAImE,SACxEA,EAAS8H,GAAW3O,IAGjB6G,IACHiH,EAAa1M,GAASyF,IAGnBkO,EACHD,EAAeP,aAEfO,EAAeU,WAAW5e,OAGsD,IAA7EgX,GAAQ1Q,EAAQ8C,EAAIlD,EAAQ+Q,EAAUhH,EAAQiH,EAAYpL,IAAOmE,GAQpE,OAPA7G,EAAGzE,YAAYuB,GACfC,EAAWiD,EACX1B,EAAiB,KAEjBmX,IACA7e,KAAK8e,SAAS7H,EAAU/Q,GACxB+J,GAAUjQ,KAAK8e,SAAS5H,EAAYjH,GAC7BqO,SAGJ,GAAIrO,GAAUA,IAAW/J,GAAU+J,EAAOtE,aAAevC,EAAI,CACjE,IACC2V,EADGzM,EAAY,EAEf0M,EAAU/O,EAAOwK,qBACjBwE,EAAiB/Y,EAAOyF,aAAevC,EACvC8V,EAgiCL,SAAyB9V,EAAI+V,GAC5B,IAAI5B,EAASzS,EAA4ByS,GAAQ,GAChD6B,EAAS5U,GAASpB,GAAI+V,GAGvB,KAAO5B,GAAQ,CACd,IAAI8B,EAAa7U,GAAS+S,GAAQ4B,GASlC,KANa,QAATA,GAA2B,SAATA,EACXC,GAAUC,EAEVD,GAAUC,GAGP,OAAO,EAErB,GAAI9B,IAAWjV,EAAK,MAEpBiV,EAASzS,EAA4ByS,GAAQ,GAG9C,OAAO,EAtjCe+B,CAAgBrP,EAAiB,aAAToK,EAAsB,MAAQ,QAkCzE,GAhCI/S,IAAe2I,IAClBzI,EAAW,KACXuX,EAAwBvU,GAASyF,GAAiB,aAAToK,EAAsB,MAAQ,QACvErS,GAAwB,GAnhCT,SAASuX,EAAKC,EAAKnF,GACrC,IAAIoF,EAAUF,IAAQrZ,GAAUwB,GAAkB8C,GAAS+U,GAC1DG,EAAUF,IAAQtZ,GAAUwB,GAAkB8C,GAASgV,GACvDG,EAAoB,aAATtF,EAAsBoF,EAAQ/R,KAAO+R,EAAQjS,IACxDoS,EAAoB,aAATvF,EAAsBoF,EAAQ9R,MAAQ8R,EAAQhS,OACzDoS,EAAwB,aAATxF,EAAsBoF,EAAQ1V,MAAQ0V,EAAQxa,OAC7D6a,EAAoB,aAATzF,EAAsBqF,EAAQhS,KAAOgS,EAAQlS,IACxDuS,EAAoB,aAAT1F,EAAsBqF,EAAQ/R,MAAQ+R,EAAQjS,OACzDuS,EAAwB,aAAT3F,EAAsBqF,EAAQ3V,MAAQ2V,EAAQza,OAE9D,OACC0a,IAAaG,GACbF,IAAaG,GACZJ,EAAWE,EAAe,IAAQC,EAAWE,EAAe,EA2gC3DC,CAAiB/Z,EAAQ+J,EAAQoK,IAAS2E,GAC1CC,GACAC,GACAze,EAAQ0R,YACK,WAAb3K,GAGa,SAAbA,GAGiB,SAAbA,IACHS,EAAyBxH,EAAQ0R,YAAc8M,GAAkBrX,GAAasX,GAG/E5M,EA4sBL,SAA2BxG,EAAKmE,EAAQoK,EAAMnI,EAAeE,EAAuBD,EAAY+N,GAC/F,IAAIhJ,EAAa1M,GAASyF,GACzBwO,EAAuB,aAATpE,EAAsBvO,EAAIU,QAAUV,EAAIQ,QACtD6T,EAAwB,aAAT9F,EAAsBnD,EAAWjS,OAASiS,EAAWnN,MACpEqW,EAAoB,aAAT/F,EAAsBnD,EAAW1J,IAAM0J,EAAWxJ,KAC7DgR,EAAoB,aAATrE,EAAsBnD,EAAWzJ,OAASyJ,EAAWvJ,MAChEsJ,EAAWzM,GAAStE,GACpBma,GAAS,EAGV,IAAKlO,EAEJ,GAAI+N,GAAgBzY,EAAqB0Y,EAAejO,EAiBvD,IAfKlK,IACe,IAAlBT,EAECkX,EAAc2B,EAAWD,EAAe/N,EAAwB,EAGhEqM,EAAcC,EAAWyB,EAAe/N,EAAwB,KAMlEpK,GAAwB,GAGpBA,EAiBJqY,GAAS,MAjBkB,CACL,aAAThG,EAAsBpD,EAASzJ,IAAMyJ,EAASvJ,KACxC,aAAT2M,EAAsBpD,EAASxJ,OAASwJ,EAAStJ,MAE3D,GACmB,IAAlBpG,EAECkX,EAAc2B,EAAW3Y,EAGzBgX,EAAcC,EAAWjX,EAI1B,OAAwB,EAAjBF,OAOT,GACCkX,EAAc2B,EAAYD,GAAgB,EAAIjO,GAAiB,GAC/DuM,EAAcC,EAAYyB,GAAgB,EAAIjO,GAAiB,EAE/D,OAASuM,EAAc2B,EAAWD,EAAe,GAAM,EAAI,EAO9D,IAFAE,EAASA,GAAUlO,KAKjBsM,EAAc2B,EAAYD,EAAe/N,EAAwB,GACjEqM,EAAcC,EAAYyB,EAAe/N,EAAwB,GAGjE,OAASqM,EAAc2B,EAAWD,EAAe,EAAK,GAAK,EAI7D,OAAO,EApxBSG,CAAkBxU,EAAKmE,EAAQoK,EAC1C5Z,EAAQyR,cAAgD,MAAjCzR,EAAQ2R,sBAAgC3R,EAAQyR,cAAgBzR,EAAQ2R,sBAC/FnK,EACAX,IAAe2I,GAChBzI,EAAW,SAGX8K,EAuxBL,SAA6BrC,EAAQxP,GACpC,IAAI8f,EAAc9H,GAAOvS,EAAQzF,EAAQsR,WACxCyO,EAAc/H,GAAOxI,EAAQxP,EAAQsR,WAEtC,OAAIwO,EAAcC,EACV,GAEC,EA9xBOC,CAAoBxQ,EAAQxP,GACxC+G,EAAW,UAEM,IAAd8K,EAAiB,OAAOgM,IAE5B5W,EAAiB,KACjBJ,EAAa2I,EAEb1I,EAAgB+K,EAEhB4E,EAAa1M,GAASyF,GAEtB,IAAIiM,EAAcjM,EAAOyQ,mBACxBC,GAAQ,EAILC,EAAa5J,GAAQ1Q,EAAQ8C,EAAIlD,EAAQ+Q,EAAUhH,EAAQiH,EAAYpL,EAF3E6U,EAAsB,IAAdrO,GAIR,IAAmB,IAAfsO,EA8BH,OA7BmB,IAAfA,IAAoC,IAAhBA,IACvBD,EAAwB,IAAfC,GAGVtX,GAAU,EACVvH,EAAW6V,GAAW,IAElBuG,EACHD,EAAeP,aAEfO,EAAeU,WAAW5e,MAGvB2gB,IAAUzE,EACb9S,EAAGzE,YAAYuB,GAEf+J,EAAOtE,WAAWkS,aAAa3X,EAAQya,EAAQzE,EAAcjM,GAG9D9J,EAAWD,EAAOyF,gBAGYkV,IAA1B9B,GAAwC9W,IAC3CR,EAAqB+B,EAAIuV,EAAwBvU,GAASyF,GAAiB,aAAToK,EAAsB,MAAQ,UAEjGwE,KACCI,GAAkBjf,KAAK8e,SAAS5H,EAAYjH,GAC7CjQ,KAAK8e,SAAS7H,EAAU/Q,GAEjBoY,IAIT,GAAIlV,EAAGmV,SAASrY,GACf,OAAOoY,IAQT,OAJIxV,IAAegD,EAAIxF,QACtB6J,GAAiB/G,EAAI0C,EAAK,gBAGpB,EAjNP,SAASwS,IA0BR,OAzBIJ,IAEHpJ,GAAa5O,EAAQa,EAAcA,EAAYtG,QAAQ8R,WAAa2L,EAAezd,QAAQ8R,YAAY,GACvGuC,GAAa5O,EAAQzF,EAAQ8R,YAAY,IAGtCxL,IAAgBkF,GAASA,IAAUkC,GAASC,OAC/CrH,EAAckF,EACJA,IAAUkC,GAASC,SAC7BrH,EAAc,OAKVkJ,IAAW/J,IAAWA,EAAOmY,UAAcpO,IAAW7G,IAAO6G,EAAOoO,YACxE/W,EAAa,MAGT7G,EAAQ0S,gBAAmBrH,EAAIxF,QAAU2J,IAAW5Q,IACxD4M,EAAM2P,kBAAkB9P,GACxB5F,EAAOyF,WAAWxD,GAAS4H,kBAAkBjE,KAG7CrL,EAAQ0S,gBAAkBrH,EAAI+E,iBAAmB/E,EAAI+E,mBAE/C,EAIR,SAASgO,IACR9I,GAAe9J,EAAO3F,EAAQ,SAAU2J,EAAQ7G,EAAI9C,EAAQM,EAAU6R,GAAOvS,EAAQzF,EAAQsR,WAAYjG,KAqL3GgT,SAAU,SAAUgC,EAAU7Q,GAC7B,IAAI+I,EAAKhZ,KAAKS,QAAQoS,UAEtB,GAAImG,EAAI,CACP,IAAI+H,EAAcvW,GAASyF,GAW3B,GATIA,IAAW/J,IACdwB,EAAiBqZ,GAGQ,IAAtBD,EAASrP,WACZqP,EAAWtW,GAASsW,IAIhBA,EAASpT,KAAOoT,EAAS/W,MAAQ,IAAQgX,EAAYrT,KAAOqT,EAAYhX,MAAQ,GAChF+W,EAAStT,IAAMsT,EAAS7b,OAAS,IAAQ8b,EAAYvT,IAAMuT,EAAY9b,OAAS,EACnF,CACD,IAAIgV,EAAS5E,GAAQrV,KAAKoJ,IACzB8Q,EAASD,GAAUA,EAAO7b,EAC1B+b,EAASF,GAAUA,EAAOtZ,EAE3BkJ,GAAKoG,EAAQ,aAAc,QAC3BpG,GAAKoG,EAAQ,YAAa,gBACtB6Q,EAASpT,KAAOqT,EAAYrT,OAASwM,GAAkB,GAAK,OAC5D4G,EAAStT,IAAMuT,EAAYvT,MAAQ2M,GAAkB,GAAK,SAG5ClK,EAAO+Q,YACzBnX,GAAKoG,EAAQ,aAAc,aAAe+I,EAAK,MAAQhZ,KAAKS,QAAQqS,OAAS,IAAM9S,KAAKS,QAAQqS,OAAS,KACzGjJ,GAAKoG,EAAQ,YAAa,sBAGC,iBAApBA,EAAOoO,UAA0Bvc,aAAamO,EAAOoO,UAC7DpO,EAAOoO,SAAWtc,EAAW,WAC5B8H,GAAKoG,EAAQ,aAAc,IAC3BpG,GAAKoG,EAAQ,YAAa,IAC1BA,EAAOoO,UAAW,GAChBrF,KAILiI,aAAc,WACb,IAAIhF,EAAgBjc,KAAKoJ,GAAG6S,cAE5BpH,GAAKxV,EAAU,YAAaW,KAAK4c,cACjC/H,GAAKxV,EAAU,cAAeW,KAAK4c,cACnC/H,GAAKoH,EAAe,UAAWjc,KAAKwc,SACpC3H,GAAKoH,EAAe,WAAYjc,KAAKwc,SACrC3H,GAAKoH,EAAe,YAAajc,KAAKwc,SACtC3H,GAAKoH,EAAe,cAAejc,KAAKwc,SACxC3H,GAAKxV,EAAU,cAAeW,OAG/Bwc,QAAS,SAAoB1Q,GAC5B,IAAI1C,EAAKpJ,KAAKoJ,GACb3I,EAAUT,KAAKS,QAChBoH,GAAsB,EACtBD,GAAY,EACZK,GAAyB,EACzBD,GAAwB,EAExB+F,cAAc/N,KAAK8d,SAEnB/P,cAAc/G,GACd4F,KAivBD9K,aAAaiP,IACbA,QAAmB,EA/uBlBjP,aAAa9B,KAAK0c,iBAElB/C,GAAgB3Z,KAAK4d,UACrBjE,GAAgB3Z,KAAKge,cAGrBnJ,GAAKxV,EAAU,YAAaW,KAAK4c,cAG7B5c,KAAKgU,kBACRa,GAAKxV,EAAU,OAAQW,MACvB6U,GAAKzL,EAAI,YAAapJ,KAAK6c,cAC3BhI,GAAKxV,EAAU,WAAYW,KAAK4b,mBAChC/G,GAAKxV,EAAU,WAAYyQ,KAG5B9P,KAAKihB,eAEDnV,IACCzE,IACHyE,EAAI6K,YAAc7K,EAAI8E,kBACrBnQ,EAAQyS,YAAcpH,EAAI+E,mBAG5BzK,GAAWA,EAAQuF,YAAcvF,EAAQuF,WAAWrG,YAAYc,IAE5DE,IAAWH,GAAaY,GAA2C,UAA5BA,EAAYyX,cAEtDnY,GAAWA,EAAQsF,YAActF,EAAQsF,WAAWrG,YAAYe,GAG7DH,IACClG,KAAKgU,iBACRa,GAAK3O,EAAQ,UAAWlG,MAGzB2X,GAAkBzR,GAClBA,EAAOtE,MAAM,eAAiB,GAG9BkT,GAAa5O,EAAQa,EAAcA,EAAYtG,QAAQ8R,WAAavS,KAAKS,QAAQ8R,YAAY,GAC7FuC,GAAa5O,EAAQlG,KAAKS,QAAQ+R,aAAa,GAG/CuD,GAAe/V,KAAMsG,EAAQ,WAAYJ,EAAQC,EAAUG,EAAQM,EAAU,KAAMkF,GAE/ExF,IAAWH,IACdU,EAAW4R,GAAOvS,EAAQzF,EAAQsR,aAElB,IAEfgE,GAAe,KAAM5P,EAAU,MAAOD,EAAQC,EAAUG,EAAQM,EAAUC,EAAUiF,GAGpFiK,GAAe/V,KAAMsG,EAAQ,SAAUJ,EAAQC,EAAUG,EAAQM,EAAUC,EAAUiF,GAGrFiK,GAAe,KAAM5P,EAAU,OAAQD,EAAQC,EAAUG,EAAQM,EAAUC,EAAUiF,GACrFiK,GAAe/V,KAAMsG,EAAQ,OAAQJ,EAAQC,EAAUG,EAAQM,EAAUC,EAAUiF,IAGpF/E,GAAeA,EAAYma,QAGvBhb,EAAOgW,cAAgB3V,IAE1BM,EAAW4R,GAAOvS,EAAQzF,EAAQsR,aAElB,IAEfgE,GAAe/V,KAAMsG,EAAQ,SAAUJ,EAAQC,EAAUG,EAAQM,EAAUC,EAAUiF,GACrFiK,GAAe/V,KAAMsG,EAAQ,OAAQJ,EAAQC,EAAUG,EAAQM,EAAUC,EAAUiF,IAKlFqC,GAASC,SAEI,MAAZvH,IAAkC,IAAdA,IACvBA,EAAWD,GAGZmP,GAAe/V,KAAMsG,EAAQ,MAAOJ,EAAQC,EAAUG,EAAQM,EAAUC,EAAUiF,GAGlF9L,KAAKkhB,UAKRlhB,KAAKqd,YAGNA,SAAU,WACT/W,EACAJ,EACAC,EACAC,EACAG,EACAF,EACAG,EAEAC,EACAC,EACAiB,EAAY/E,OAEZoE,EACAC,EACAC,EAEAC,EACAC,EAEAC,EACAR,EACAD,EAEAU,EACAC,EAGAG,EAEAX,EACAD,EACAqH,GAASC,OAAS,KAElB1E,EAAkBmF,QAAQ,SAAUzF,GACnCA,EAAGgS,SAAU,IAGd1R,EAAkB9G,OAAS,GAG5Bue,YAAa,SAAoBrV,GAChC,OAAQA,EAAI6O,MACX,IAAK,OACL,IAAK,UACJ3a,KAAKwc,QAAQ1Q,GACb,MAED,IAAK,YACL,IAAK,WACA5F,IACHlG,KAAKwR,YAAY1F,GAmMtB,SAAmCA,GAC9BA,EAAIkH,eACPlH,EAAIkH,aAAaoO,WAAa,QAE/BtV,EAAI6K,YAAc7K,EAAI8E,iBAtMlByQ,CAAgBvV,IAEjB,MAED,IAAK,cACJA,EAAI8E,mBAUP0Q,QAAS,WAQR,IAPA,IACClY,EADGmY,EAAQ,GAEXzd,EAAW9D,KAAKoJ,GAAGtF,SACnBgK,EAAI,EACJtP,EAAIsF,EAASlB,OACbnC,EAAUT,KAAKS,QAETqN,EAAItP,EAAGsP,IAETsG,GADJhL,EAAKtF,EAASgK,GACGrN,EAAQsR,UAAW/R,KAAKoJ,IAAI,IAC5CmY,EAAMhe,KAAK6F,EAAGoY,aAAa/gB,EAAQ2S,aAAe+E,GAAY/O,IAIhE,OAAOmY,GAQR5P,KAAM,SAAU4P,GACf,IAAIE,EAAQ,GAAInb,EAAStG,KAAKoJ,GAE9BpJ,KAAKshB,UAAUzS,QAAQ,SAAU+K,EAAI9L,GACpC,IAAI1E,EAAK9C,EAAOxC,SAASgK,GAErBsG,GAAShL,EAAIpJ,KAAKS,QAAQsR,UAAWzL,GAAQ,KAChDmb,EAAM7H,GAAMxQ,IAEXpJ,MAEHuhB,EAAM1S,QAAQ,SAAU+K,GACnB6H,EAAM7H,KACTtT,EAAOhB,YAAYmc,EAAM7H,IACzBtT,EAAO3B,YAAY8c,EAAM7H,QAS5BsH,KAAM,WACL,IAAIrP,EAAQ7R,KAAKS,QAAQoR,MACzBA,GAASA,EAAM6P,KAAO7P,EAAM6P,IAAI1hB,OAUjC2hB,QAAS,SAAUvY,EAAIiL,GACtB,OAAOD,GAAShL,EAAIiL,GAAYrU,KAAKS,QAAQsR,UAAW/R,KAAKoJ,IAAI,IAUlEwY,OAAQ,SAAUrS,EAAMN,GACvB,IAAIxO,EAAUT,KAAKS,QAEnB,QAAc,IAAVwO,EACH,OAAOxO,EAAQ8O,GAEf9O,EAAQ8O,GAAQN,EAEH,UAATM,GACHR,GAActO,IASjB6B,QAAS,WACR,IAAI8G,EAAKpJ,KAAKoJ,GAEdA,EAAGjB,GAAW,KAEd0M,GAAKzL,EAAI,YAAapJ,KAAKkU,aAC3BW,GAAKzL,EAAI,aAAcpJ,KAAKkU,aAC5BW,GAAKzL,EAAI,cAAepJ,KAAKkU,aAEzBlU,KAAKgU,kBACRa,GAAKzL,EAAI,WAAYpJ,MACrB6U,GAAKzL,EAAI,YAAapJ,OAGvB6hB,MAAMhjB,UAAUgQ,QAAQ9P,KAAKqK,EAAG0Y,iBAAiB,eAAgB,SAAU1Y,GAC1EA,EAAG2Y,gBAAgB,eAGpB/hB,KAAKwc,UAELzU,EAAUia,OAAOja,EAAUjI,QAAQE,KAAKoJ,IAAK,GAE7CpJ,KAAKoJ,GAAKA,EAAK,MAGhBuU,WAAY,WACNtX,EAAQ4b,cACZpY,GAAKxD,EAAS,UAAW,QACzBA,EAAQ4b,aAAc,EAClB5b,EAAQsF,YAAc3L,KAAKS,QAAQ4R,mBACtChM,EAAQsF,WAAWrG,YAAYe,KAKlCuY,WAAY,SAAS7X,GACY,UAA5BA,EAAYyX,YAKZnY,EAAQ4b,cAEP3b,EAAOiY,SAASrY,KAAYlG,KAAKS,QAAQ6O,MAAMO,YAClDvJ,EAAOuX,aAAaxX,EAASH,GACnBK,EACVD,EAAOuX,aAAaxX,EAASE,GAE7BD,EAAO3B,YAAY0B,GAGhBrG,KAAKS,QAAQ6O,MAAMO,aACtB7P,KAAK8e,SAAS5Y,EAAQG,GAEvBwD,GAAKxD,EAAS,UAAW,IACzBA,EAAQ4b,aAAc,GAlBtBjiB,KAAK2d,eA0nBR1J,GAAI5U,EAAU,YAAa,SAASyM,IAC9BqC,GAASC,QAAUvG,IAAwBiE,EAAI6K,YACnD7K,EAAI8E,mBAMNzC,GAAS+T,MAAQ,CAChBC,GAAIlO,GACJmO,IAAKvN,GACL7H,IAAKnD,GACLwY,KAAM1M,GACN2M,GAAI,SAAUlZ,EAAIiL,GACjB,QAASD,GAAShL,EAAIiL,EAAUjL,GAAI,IAErCmZ,OAAQ/R,GACRgS,SAAU3W,GACV8V,QAASvN,GACTqO,YAAa3N,GACb+B,MAAO0C,GACPb,MAAOD,GACPiK,SAAUhJ,GACViJ,eAAgBhJ,GAChBiJ,gBAAiBjZ,EACjBkZ,SAAU5Y,IASXkE,GAAS2U,OAAS,SAAU1Z,EAAI3I,GAC/B,OAAO,IAAI0N,GAAS/E,EAAI3I,IAKzB0N,GAAS4U,QAAU,QACZ5U,IA7xENlQ,UAAiBgI,6KCVnB,IAF0B+c,EAEtB7U,GAFsB6U,EAEKC,aAF8B,iBAAPD,GAAoB,YAAaA,EAAMA,EAAY,QAAIA,EAI7G,SAASza,EAAE2a,EAAMC,GACb,MAAuB,iBAATD,GACTC,GAAO9jB,UAAU+jB,cAAcF,GAChCA,GAAQ,KAGhB3a,EAAE8a,cAAQH,EAAMC,GACZ,MAAuB,iBAATD,EACVrB,MAAMzS,MAAM+T,GAAO9jB,UAAUyiB,iBAAiBoB,IAC9CA,GAAQ,MAGhB3a,EAAEua,gBAAU3iB,EAAKmjB,GACbC,IAAIC,EAAUnkB,SAASC,cAAca,iBAGjCojB,IAAIpO,EAAMmO,EAAExV,GAEZ,GAAU,WAANA,EACAvF,EAAE4M,GAAKxQ,YAAY6e,QAEvB,GAAU,WAAN1V,EAAgB,CAChByV,IAAIE,EAAMlb,EAAE4M,GACZsO,EAAI9X,WAAWkS,aAAa2F,EAASC,GACrCD,EAAQ7e,YAAY8e,OAEd,WAAN3V,EACmB,iBAARqH,GACPvW,OAAO8kB,KAAKvO,GAAKwO,aAAIzO,GACjBsO,EAAQ5hB,MAAMsT,GAAQC,EAAID,KAIlCpH,KAAK0V,EACLA,EAAQ1V,GAAKqH,EAEbqO,EAAQtiB,aAAa4M,EAAGqH,IArBhC,IAAKoO,IAAIzV,KAAKwV,OAyBd,OAAOE,GAGXjb,EAAE4Z,YAAMqB,EAAS5O,EAAOP,EAAU0E,GACzBA,EAIDxQ,EAAEqb,SAASJ,EAAS5O,EAAOP,EAAU0E,IAHrCA,EAAW1E,EACX9L,EAAEoG,KAAK6U,EAAS5O,EAAOmE,KAM/BxQ,EAAE6Z,aAAOoB,EAAS5O,EAAOiP,GACrBL,EAAQ/kB,oBAAoBmW,EAAOiP,IAGvCtb,EAAEoG,cAAQ6U,EAAS5O,EAAOmE,GACtBnE,EAAMhU,MAAM,OAAOiO,QAAQ,SAAU+F,GACjC4O,EAAQllB,iBAAiBsW,EAAOmE,MAIxCxQ,EAAEqb,kBAAYJ,EAAS5O,EAAOP,EAAU0E,GACpCyK,EAAQllB,iBAAiBsW,EAAO,SAAUzT,GACtC2E,IAAMge,EAAkB3iB,EAAE8O,OAAO0R,QAAQtN,GACrCyP,IACA3iB,EAAE2iB,gBAAkBA,EACpB/K,EAASha,KAAKiB,KAAMmB,EAAG2iB,OAKnCvb,EAAEwb,gBAAUP,EAASF,GACjB,GAAIE,EAAS,mBAELD,IAAIxK,EAAWuK,EAAE1O,GAEjBA,EAAMhU,MAAM,OAAOiO,QAAQ,SAAU+F,GACjC4O,EAAQ/kB,oBAAoBmW,EAAOmE,MAJ3C,IAAKwK,IAAI3O,KAAS0O,SAU1B/a,EAAEyb,cAAQ/T,EAAQ0K,EAAMsJ,GACpBV,IAAIzX,EAAMzM,SAASmX,YAAY,cAI/B,IAAK+M,IAAIW,KAFTpY,EAAI2K,UAAUkE,GAAM,GAAM,GAEZsJ,EACVnY,EAAIoY,GAAKD,EAAWC,GAGxB,OAAOjU,EAAO8G,cAAcjL,IAGhCvD,EAAExE,cAAQyf,EAASW,GACf,IAAKA,EACD,OAAOX,EAAQY,QAGnB,IAAKte,IAAMue,KAAQF,EACfX,EAAQY,QAAQC,GAAQF,EAAME,IAItC9b,EAAE3G,eAAS0iB,EAAUC,GAEjB,GAAwB,iBAAbA,EACP,OAAOhc,EAAEic,SAASF,EAAUC,GAG3B1C,MAAM4C,QAAQH,KACfA,EAAW,CAACA,IAGhBA,EAASX,aAAIH,GACT,IAAK1d,IAAMoP,KAAQqP,EACff,EAAQ5hB,MAAMsT,GAAQqP,EAASrP,MAK3C3M,EAAEmc,qBAAeJ,EAAUK,GAClB9C,MAAM4C,QAAQH,KACfA,EAAW,CAACA,IAGXzC,MAAM4C,QAAQE,KACfA,EAAa,CAACA,IAGlBL,EAASX,aAAIH,GACT,IAAK,UAAcmB,kBAAY,CAA1B7e,IAAMoP,OACPsO,EAAQ5hB,MAAMsT,GAAQ,OAKlC3M,EAAEic,kBAAYhB,EAAStO,GACnB,IAAKA,EACD,OAAOhW,iBAAiBskB,GAG5BD,IAAIpO,EAAMjW,iBAAiBskB,GAAStO,GAMpC,MAJI,CAAC,QAAS,UAAU0P,SAAS1P,KAC7BC,EAAM0P,WAAW1P,IAGdA,GAGX5M,EAAEoZ,iBAAWtN,EAAUmP,GACnB,OAAKA,EAEDA,EAAQ7K,QAAQtE,GACTmP,EAGJjb,EAAEoZ,QAAQtN,EAAUmP,EAAQ7X,YANd,MASzBpD,EAAEuc,oBAAc1b,EAAIjD,GAChB,MAKIiD,EAAG4B,gEAMH7E,EAAS6E,8DAEb,OAAOwC,GAAOuX,GAAQrX,GAAQsX,GAASvX,GAAUwX,GAAWtX,GAASuX,GAGzE3c,EAAE/G,UAAY,SAAmBgiB,EAAS2B,GACtCC,iCACI5B,EAAQhiB,UAAY2jB,KAI5B5c,EAAE8c,cAAgB,WAId,OAHK9c,EAAE+c,qBACH/c,EAAE+c,mBAKV,WAIIxf,IAAMyf,EAAYlmB,SAASC,cAAc,OACzCiJ,EAAE3G,MAAM2jB,EAAW,CACfxb,MAAO,QACP9E,OAAQ,QACRugB,SAAU,SACVC,SAAU,WACVjY,IAAK,YAETnO,SAASqM,KAAK/G,YAAY4gB,GAG1Bzf,IAAM4f,EAAiBH,EAAUvE,YAAcuE,EAAUpa,YAKzD,OAFA9L,SAASqM,KAAKpG,YAAYigB,GAEnBG,EAzBoBC,IAEpBpd,EAAE+c,oBA0Bb/c,EAAEqd,oBAAsB,SAAUpC,GAC9B,OAAOA,EAAQlY,aAAekY,EAAQrf,aAAe,IAGzDoE,EAAEsd,sBAAwB,SAAUrC,GAChC,OAAOA,EAAQpY,YAAcoY,EAAQxC,YAAc,IAGvDzY,EAAEud,iBAAmB,SAAUC,GAC3BjgB,IAAMkgB,EAAM3mB,SAASC,cAAc,OAQnC,OAPA0mB,EAAIpkB,MAAM6jB,SAAW,WACrBO,EAAIpkB,MAAMqkB,WAAa,SACvBD,EAAIpkB,MAAMqD,OAAS,OACnB+gB,EAAIpkB,MAAMmI,MAAQ,OAClBic,EAAIpkB,MAAMskB,WAAa,SACvBF,EAAIG,UAAYJ,EAChB1mB,SAASqM,KAAK/G,YAAYqhB,GACnBA,EAAI7a,YAAc,GAiC7B,IAAIib,EALJ,SAAkBnX,GAChB,IAAI0L,SAAc1L,EAClB,OAAgB,MAATA,IAA0B,UAAR0L,GAA4B,YAARA,IAK3C0L,EAAmC,oBAAXpnB,OAAyBA,YAA2B,IAAXqnB,eAAyBA,eAAyB,oBAATC,KAAuBA,KAAO,GAE5I,SAASC,IACR,MAAM,IAAIzlB,MAAM,0EAYjB,IAEI0lB,EAFsC,iBAAlBJ,GAA8BA,GAAkBA,EAAeznB,SAAWA,QAAUynB,EAKxGK,EAA0B,iBAARH,MAAoBA,MAAQA,KAAK3nB,SAAWA,QAAU2nB,KAKxEI,EAFOF,GAAeC,GAAYE,SAAS,cAATA,GAwBlCC,EAJM,WACR,OAAOF,EAAMve,KAAK0e,OAQhBC,EAFSJ,EAAMK,OAKfC,EAAcroB,OAAOC,UAGrBya,EAAiB2N,EAAY3N,eAO7B4N,EAAuBD,EAAYnoB,SAGnCqoB,EAAiBJ,EAAUA,EAAQK,iBAAcvG,EA4BrD,IAAIwG,EAnBJ,SAAmBpY,GACjB,IAAIqY,EAAQhO,EAAeva,KAAKkQ,EAAOkY,GACnChnB,EAAM8O,EAAMkY,GAEhB,IACElY,EAAMkY,QAAkBtG,EACxB,MAAO1f,IAET,IAAIomB,EAASL,EAAqBnoB,KAAKkQ,GAQvC,OANMqY,EACFrY,EAAMkY,GAAkBhnB,SAEjB8O,EAAMkY,GAGVI,GAaLC,EAPgB5oB,OAAOC,UAOgBC,SAa3C,IAAI2oB,EAJJ,SAAwBxY,GACtB,OAAOuY,EAAuBzoB,KAAKkQ,IAMjCyY,EAAU,gBACVC,EAAe,qBAGfC,EAAmBb,EAAUA,EAAQK,iBAAcvG,EAkBvD,IAAIgH,EATJ,SAAoB5Y,GAClB,OAAa,MAATA,OACe4R,IAAV5R,EAAsB0Y,EAAeD,EAEtCE,GAAoBA,KAAoBhpB,OAAOqQ,GACnDoY,EAAWpY,GACXwY,EAAgBxY,IAiCtB,IAAI6Y,EAJJ,SAAsB7Y,GACpB,OAAgB,MAATA,GAAiC,iBAATA,GAM7B8Y,EAAY,kBAwBhB,IAAIC,EALJ,SAAkB/Y,GAChB,MAAuB,iBAATA,GACX6Y,EAAe7Y,IAAU4Y,EAAY5Y,IAAU8Y,GAMhDE,EAAM,IAGNC,EAAS,aAGTC,EAAa,qBAGbC,EAAa,aAGbC,EAAY,cAGZC,EAAelkB,SA8CnB,IAAImkB,EArBJ,SAAkBtZ,GAChB,GAAoB,iBAATA,EACT,OAAOA,EAET,GAAI+Y,EAAW/Y,GACb,OAAOgZ,EAET,GAAI7B,EAAWnX,GAAQ,CACrB,IAAIuZ,EAAgC,mBAAjBvZ,EAAMwZ,QAAwBxZ,EAAMwZ,UAAYxZ,EACnEA,EAAQmX,EAAWoC,GAAUA,EAAQ,GAAMA,EAE7C,GAAoB,iBAATvZ,EACT,OAAiB,IAAVA,EAAcA,GAASA,EAEhCA,EAAQA,EAAMgG,QAAQiT,EAAQ,IAC9B,IAAIQ,EAAWN,EAAWpW,KAAK/C,GAC/B,OAAQyZ,GAAYL,EAAUrW,KAAK/C,GAC/BqZ,EAAarZ,EAAM0Z,MAAM,GAAID,EAAW,EAAI,GAC3CP,EAAWnW,KAAK/C,GAASgZ,GAAOhZ,GAMnC2Z,EAAkB,sBAGlBC,EAAY5kB,KAAKI,IACjBykB,EAAY7kB,KAAKwF,IAoLrB,IAAIsf,EA5HJ,SAAkBC,EAAMC,EAAMxoB,GAC5B,IAAIyoB,EACAC,EACAC,EACA7B,EACA8B,EACAC,EACAC,EAAiB,EACjBC,GAAU,EACVC,GAAS,EACTC,GAAW,EAEf,GAAmB,mBAARV,EACT,MAAM,IAAIW,UAAUf,GAUtB,SAASgB,EAAWC,GAClB,IAAI5Q,EAAOiQ,EACPY,EAAUX,EAKd,OAHAD,EAAWC,OAAWtI,EACtB0I,EAAiBM,EACjBtC,EAASyB,EAAK7P,MAAM2Q,EAAS7Q,GAuB/B,SAAS8Q,EAAaF,GACpB,IAAIG,EAAoBH,EAAOP,EAM/B,YAAyBzI,IAAjByI,GAA+BU,GAAqBf,GACzDe,EAAoB,GAAOP,GANJI,EAAON,GAM8BH,EAGjE,SAASa,IACP,IAAIJ,EAAOhD,IACX,GAAIkD,EAAaF,GACf,OAAOK,EAAaL,GAGtBR,EAAUtnB,WAAWkoB,EA3BvB,SAAuBJ,GACrB,IAEIM,EAAclB,GAFMY,EAAOP,GAI/B,OAAOG,EACHX,EAAUqB,EAAaf,GAJDS,EAAON,IAK7BY,EAoB+BC,CAAcP,IAGnD,SAASK,EAAaL,GAKpB,OAJAR,OAAUxI,EAIN6I,GAAYR,EACPU,EAAWC,IAEpBX,EAAWC,OAAWtI,EACf0G,GAeT,SAAS8C,IACP,IAAIR,EAAOhD,IACPyD,EAAaP,EAAaF,GAM9B,GAJAX,EAAWhQ,UACXiQ,EAAWnpB,KACXspB,EAAeO,EAEXS,EAAY,CACd,QAAgBzJ,IAAZwI,EACF,OAzEN,SAAqBQ,GAMnB,OAJAN,EAAiBM,EAEjBR,EAAUtnB,WAAWkoB,EAAchB,GAE5BO,EAAUI,EAAWC,GAAQtC,EAmEzBgD,CAAYjB,GAErB,GAAIG,EAGF,OADAJ,EAAUtnB,WAAWkoB,EAAchB,GAC5BW,EAAWN,GAMtB,YAHgBzI,IAAZwI,IACFA,EAAUtnB,WAAWkoB,EAAchB,IAE9B1B,EAIT,OA1GA0B,EAAOV,EAAWU,IAAS,EACvB7C,EAAW3lB,KACb+oB,IAAY/oB,EAAQ+oB,QAEpBJ,GADAK,EAAS,YAAahpB,GACHooB,EAAUN,EAAW9nB,EAAQ2oB,UAAY,EAAGH,GAAQG,EACvEM,EAAW,aAAcjpB,IAAYA,EAAQipB,SAAWA,GAmG1DW,EAAUG,OAnCV,gBACkB3J,IAAZwI,GACFvnB,aAAaunB,GAEfE,EAAiB,EACjBL,EAAWI,EAAeH,EAAWE,OAAUxI,GA+BjDwJ,EAAUI,MA5BV,WACE,YAAmB5J,IAAZwI,EAAwB9B,EAAS2C,EAAarD,MA4BhDwD,GAMLK,EAAoB,sBAgExB,IAAIC,EAlBJ,SAAkB3B,EAAMC,EAAMxoB,GAC5B,IAAI+oB,GAAU,EACVE,GAAW,EAEf,GAAmB,mBAARV,EACT,MAAM,IAAIW,UAAUe,GAMtB,OAJItE,EAAW3lB,KACb+oB,EAAU,YAAa/oB,IAAYA,EAAQ+oB,QAAUA,EACrDE,EAAW,aAAcjpB,IAAYA,EAAQipB,SAAWA,GAEnDX,EAAWC,EAAMC,EAAM,CAC5BO,QAAWA,EACXJ,QAAWH,EACXS,SAAYA,KAOZkB,EAAW,yBACXC,EAAU,oBACVC,EAAS,6BACTC,EAAW,iBA6Bf,IASMC,EATFC,EAVJ,SAAoBhc,GAClB,IAAKmX,EAAWnX,GACd,OAAO,EAIT,IAAI9O,EAAM0nB,EAAY5Y,GACtB,OAAO9O,GAAO0qB,GAAW1qB,GAAO2qB,GAAU3qB,GAAOyqB,GAAYzqB,GAAO4qB,GAQlEG,EAFavE,EAAM,sBAKnBwE,GACEH,EAAM,SAASI,KAAKF,GAAeA,EAAYxH,MAAQwH,EAAYxH,KAAK2H,UAAY,KAC1E,iBAAmBL,EAAO,GAc1C,IAAIM,EAJJ,SAAkBtC,GAChB,QAASmC,GAAeA,KAAcnC,GASpCuC,EAHY3E,SAAS/nB,UAGIC,SAqB7B,IAAI0sB,EAZJ,SAAkBxC,GAChB,GAAY,MAARA,EAAc,CAChB,IACE,OAAOuC,EAAaxsB,KAAKiqB,GACzB,MAAO7nB,IACT,IACE,OAAQ6nB,EAAO,GACf,MAAO7nB,KAEX,MAAO,IAYLsqB,EAAe,8BAGfC,EAAc9E,SAAS/nB,UACvB8sB,EAAgB/sB,OAAOC,UAGvB+sB,EAAiBF,EAAY5sB,SAG7B+sB,GAAmBF,EAAcrS,eAGjCwS,GAAaC,OAAO,IACtBH,EAAe7sB,KAAK8sB,IAAkB5W,QAjBrB,sBAiB2C,QAC3DA,QAAQ,yDAA0D,SAAW,KAmBhF,IAAI+W,GARJ,SAAsB/c,GACpB,SAAKmX,EAAWnX,IAAUqc,EAAUrc,MAGtBgc,EAAahc,GAAS6c,GAAaL,GAClCzZ,KAAKwZ,EAAUvc,KAiBhC,IAAIgd,GAJJ,SAAkBC,EAAQ7S,GACxB,OAAiB,MAAV6S,OAAiBrL,EAAYqL,EAAO7S,IAkB7C,IAAI8S,GALJ,SAAmBD,EAAQ7S,GACzB,IAAIpK,EAAQgd,GAAUC,EAAQ7S,GAC9B,OAAO2S,GAAc/c,GAASA,OAAQ4R,GAQpCuL,GAFeD,GAAWvtB,OAAQ,UAgBtC,IAAIytB,GALJ,WACErsB,KAAKssB,SAAWF,GAAgBA,GAAc,MAAQ,GACtDpsB,KAAKusB,KAAO,GAqBd,IAAIC,GANJ,SAAoBnT,GAClB,IAAIkO,EAASvnB,KAAKysB,IAAIpT,WAAerZ,KAAKssB,SAASjT,GAEnD,OADArZ,KAAKusB,MAAQhF,EAAS,EAAI,EACnBA,GAMLmF,GAAiB,4BAMjBC,GAHgB/tB,OAAOC,UAGUya,eAoBrC,IAAIsT,GATJ,SAAiBvT,GACf,IAAItV,EAAO/D,KAAKssB,SAChB,GAAIF,GAAe,CACjB,IAAI7E,EAASxjB,EAAKsV,GAClB,OAAOkO,IAAWmF,QAAiB7L,EAAY0G,EAEjD,OAAOoF,GAAiB5tB,KAAKgF,EAAMsV,GAAOtV,EAAKsV,QAAOwH,GASpDgM,GAHgBjuB,OAAOC,UAGUya,eAgBrC,IAAIwT,GALJ,SAAiBzT,GACf,IAAItV,EAAO/D,KAAKssB,SAChB,OAAOF,QAA+BvL,IAAd9c,EAAKsV,GAAsBwT,GAAiB9tB,KAAKgF,EAAMsV,IAM7E0T,GAAmB,4BAmBvB,IAAIC,GAPJ,SAAiB3T,EAAKpK,GACpB,IAAIlL,EAAO/D,KAAKssB,SAGhB,OAFAtsB,KAAKusB,MAAQvsB,KAAKysB,IAAIpT,GAAO,EAAI,EACjCtV,EAAKsV,GAAQ+S,SAA2BvL,IAAV5R,EAAuB8d,GAAmB9d,EACjEjP,MAYT,SAASitB,GAAKC,GACZ,IAAIxU,GAAS,EACT9V,EAAoB,MAAXsqB,EAAkB,EAAIA,EAAQtqB,OAG3C,IADA5C,KAAK8C,UACI4V,EAAQ9V,GAAQ,CACvB,IAAIuqB,EAAQD,EAAQxU,GACpB1Y,KAAK0hB,IAAIyL,EAAM,GAAIA,EAAM,KAK7BF,GAAKpuB,UAAUiE,MAAQupB,GACvBY,GAAKpuB,UAAkB,OAAI2tB,GAC3BS,GAAKpuB,UAAUsV,IAAMyY,GACrBK,GAAKpuB,UAAU4tB,IAAMK,GACrBG,GAAKpuB,UAAU6iB,IAAMsL,GAErB,IAAII,GAAQH,GAcZ,IAAII,GALJ,WACErtB,KAAKssB,SAAW,GAChBtsB,KAAKusB,KAAO,GAyCd,IAAIe,GAJJ,SAAYre,EAAOuZ,GACjB,OAAOvZ,IAAUuZ,GAAUvZ,GAAUA,GAASuZ,GAAUA,GAuB1D,IAAI+E,GAVJ,SAAsBC,EAAOnU,GAE3B,IADA,IAAIzW,EAAS4qB,EAAM5qB,OACZA,KACL,GAAI0qB,GAAKE,EAAM5qB,GAAQ,GAAIyW,GACzB,OAAOzW,EAGX,OAAQ,GASNof,GAHaH,MAAMhjB,UAGCmjB,OA4BxB,IAAIyL,GAjBJ,SAAyBpU,GACvB,IAAItV,EAAO/D,KAAKssB,SACZ5T,EAAQ6U,GAAcxpB,EAAMsV,GAEhC,QAAIX,EAAQ,IAIRA,GADY3U,EAAKnB,OAAS,EAE5BmB,EAAK2pB,MAEL1L,GAAOjjB,KAAKgF,EAAM2U,EAAO,KAEzB1Y,KAAKusB,KACA,KAqBT,IAAIoB,GAPJ,SAAsBtU,GACpB,IAAItV,EAAO/D,KAAKssB,SACZ5T,EAAQ6U,GAAcxpB,EAAMsV,GAEhC,OAAOX,EAAQ,OAAImI,EAAY9c,EAAK2U,GAAO,IAkB7C,IAAIkV,GAJJ,SAAsBvU,GACpB,OAAOkU,GAAcvtB,KAAKssB,SAAUjT,IAAQ,GA4B9C,IAAIwU,GAbJ,SAAsBxU,EAAKpK,GACzB,IAAIlL,EAAO/D,KAAKssB,SACZ5T,EAAQ6U,GAAcxpB,EAAMsV,GAQhC,OANIX,EAAQ,KACR1Y,KAAKusB,KACPxoB,EAAKR,KAAK,CAAC8V,EAAKpK,KAEhBlL,EAAK2U,GAAO,GAAKzJ,EAEZjP,MAYT,SAAS8tB,GAAUZ,GACjB,IAAIxU,GAAS,EACT9V,EAAoB,MAAXsqB,EAAkB,EAAIA,EAAQtqB,OAG3C,IADA5C,KAAK8C,UACI4V,EAAQ9V,GAAQ,CACvB,IAAIuqB,EAAQD,EAAQxU,GACpB1Y,KAAK0hB,IAAIyL,EAAM,GAAIA,EAAM,KAK7BW,GAAUjvB,UAAUiE,MAAQuqB,GAC5BS,GAAUjvB,UAAkB,OAAI4uB,GAChCK,GAAUjvB,UAAUsV,IAAMwZ,GAC1BG,GAAUjvB,UAAU4tB,IAAMmB,GAC1BE,GAAUjvB,UAAU6iB,IAAMmM,GAE1B,IAAIE,GAAaD,GAKbE,GAFM7B,GAAWxF,EAAO,OAoB5B,IAAIsH,GATJ,WACEjuB,KAAKusB,KAAO,EACZvsB,KAAKssB,SAAW,CACd4B,KAAQ,IAAId,GACZzJ,IAAO,IAAKqK,IAAQD,IACpBI,OAAU,IAAIf,KAoBlB,IAAIgB,GAPJ,SAAmBnf,GACjB,IAAI0L,SAAc1L,EAClB,MAAgB,UAAR0L,GAA4B,UAARA,GAA4B,UAARA,GAA4B,WAARA,EACrD,cAAV1L,EACU,OAAVA,GAoBP,IAAIof,GAPJ,SAAoB1K,EAAKtK,GACvB,IAAItV,EAAO4f,EAAI2I,SACf,OAAO8B,GAAW/U,GACdtV,EAAmB,iBAAPsV,EAAkB,SAAW,QACzCtV,EAAK4f,KAoBX,IAAI2K,GANJ,SAAwBjV,GACtB,IAAIkO,EAAS8G,GAAYruB,KAAMqZ,GAAa,OAAEA,GAE9C,OADArZ,KAAKusB,MAAQhF,EAAS,EAAI,EACnBA,GAkBT,IAAIgH,GAJJ,SAAqBlV,GACnB,OAAOgV,GAAYruB,KAAMqZ,GAAKlF,IAAIkF,IAkBpC,IAAImV,GAJJ,SAAqBnV,GACnB,OAAOgV,GAAYruB,KAAMqZ,GAAKoT,IAAIpT,IAwBpC,IAAIoV,GATJ,SAAqBpV,EAAKpK,GACxB,IAAIlL,EAAOsqB,GAAYruB,KAAMqZ,GACzBkT,EAAOxoB,EAAKwoB,KAIhB,OAFAxoB,EAAK2d,IAAIrI,EAAKpK,GACdjP,KAAKusB,MAAQxoB,EAAKwoB,MAAQA,EAAO,EAAI,EAC9BvsB,MAYT,SAAS0uB,GAASxB,GAChB,IAAIxU,GAAS,EACT9V,EAAoB,MAAXsqB,EAAkB,EAAIA,EAAQtqB,OAG3C,IADA5C,KAAK8C,UACI4V,EAAQ9V,GAAQ,CACvB,IAAIuqB,EAAQD,EAAQxU,GACpB1Y,KAAK0hB,IAAIyL,EAAM,GAAIA,EAAM,KAK7BuB,GAAS7vB,UAAUiE,MAAQmrB,GAC3BS,GAAS7vB,UAAkB,OAAIyvB,GAC/BI,GAAS7vB,UAAUsV,IAAMoa,GACzBG,GAAS7vB,UAAU4tB,IAAM+B,GACzBE,GAAS7vB,UAAU6iB,IAAM+M,GAEzB,IAAIE,GAAYD,GAGZE,GAAmB,4BAiBvB,IAAIC,GALJ,SAAqB5f,GAEnB,OADAjP,KAAKssB,SAAS5K,IAAIzS,EAAO2f,IAClB5uB,MAkBT,IAAI8uB,GAJJ,SAAqB7f,GACnB,OAAOjP,KAAKssB,SAASG,IAAIxd,IAa3B,SAAS8f,GAASC,GAChB,IAAItW,GAAS,EACT9V,EAAmB,MAAVosB,EAAiB,EAAIA,EAAOpsB,OAGzC,IADA5C,KAAKssB,SAAW,IAAIqC,KACXjW,EAAQ9V,GACf5C,KAAKivB,IAAID,EAAOtW,IAKpBqW,GAASlwB,UAAUowB,IAAMF,GAASlwB,UAAU0E,KAAOsrB,GACnDE,GAASlwB,UAAU4tB,IAAMqC,GAEzB,IAAII,GAAYH,GAyBhB,IAAII,GAZJ,SAAuB3B,EAAO4B,EAAWC,EAAWC,GAIlD,IAHA,IAAI1sB,EAAS4qB,EAAM5qB,OACf8V,EAAQ2W,GAAaC,EAAY,GAAK,GAElCA,EAAY5W,MAAYA,EAAQ9V,GACtC,GAAIwsB,EAAU5B,EAAM9U,GAAQA,EAAO8U,GACjC,OAAO9U,EAGX,OAAQ,GAgBV,IAAI6W,GAJJ,SAAmBtgB,GACjB,OAAOA,GAAUA,GA2BnB,IAAIugB,GAZJ,SAAuBhC,EAAOve,EAAOogB,GAInC,IAHA,IAAI3W,EAAQ2W,EAAY,EACpBzsB,EAAS4qB,EAAM5qB,SAEV8V,EAAQ9V,GACf,GAAI4qB,EAAM9U,KAAWzJ,EACnB,OAAOyJ,EAGX,OAAQ,GAoBV,IAAI+W,GANJ,SAAqBjC,EAAOve,EAAOogB,GACjC,OAAOpgB,GAAUA,EACbugB,GAAehC,EAAOve,EAAOogB,GAC7BF,GAAe3B,EAAO+B,GAAYF,IAmBxC,IAAIK,GALJ,SAAuBlC,EAAOve,GAE5B,QADsB,MAATue,IAAoBA,EAAM5qB,SACpB6sB,GAAajC,EAAOve,EAAO,IAAM,GA0BtD,IAAI0gB,GAZJ,SAA2BnC,EAAOve,EAAO2gB,GAIvC,IAHA,IAAIlX,GAAS,EACT9V,EAAkB,MAAT4qB,EAAgB,EAAIA,EAAM5qB,SAE9B8V,EAAQ9V,GACf,GAAIgtB,EAAW3gB,EAAOue,EAAM9U,IAC1B,OAAO,EAGX,OAAO,GAiBT,IAAImX,GAJJ,SAAkBC,EAAOzW,GACvB,OAAOyW,EAAMrD,IAAIpT,IAQf0W,GAFM5D,GAAWxF,EAAO,OAoB5B,IAAIqJ,GAJJ,aAuBA,IAAIC,GAVJ,SAAoBvO,GAClB,IAAIhJ,GAAS,EACT6O,EAAS1F,MAAMH,EAAI6K,MAKvB,OAHA7K,EAAI7S,QAAQ,SAASI,GACnBsY,IAAS7O,GAASzJ,IAEbsY,GAmBL2I,GAJcH,IAAS,EAAIE,GAAY,IAAIF,GAAK,GAAG,KAAK,IAT7C,EAAA,EASyE,SAASf,GAC/F,OAAO,IAAIe,GAAKf,IAD6DgB,GAO3EG,GAAmB,IA+DvB,IAAIC,GApDJ,SAAkB5C,EAAO6C,EAAUT,GACjC,IAAIlX,GAAS,EACTkM,EAAW8K,GACX9sB,EAAS4qB,EAAM5qB,OACf0tB,GAAW,EACX/I,EAAS,GACTgJ,EAAOhJ,EAEX,GAAIqI,EACFU,GAAW,EACX1L,EAAW+K,QAER,GAAI/sB,GAAUutB,GAAkB,CACnC,IAAIzO,EAAM2O,EAAW,KAAOH,GAAW1C,GACvC,GAAI9L,EACF,OAAOuO,GAAYvO,GAErB4O,GAAW,EACX1L,EAAWiL,GACXU,EAAO,IAAIrB,QAGXqB,EAAOF,EAAW,GAAK9I,EAEzBiJ,EACA,OAAS9X,EAAQ9V,GAAQ,CACvB,IAAIqM,EAAQue,EAAM9U,GACd+X,EAAWJ,EAAWA,EAASphB,GAASA,EAG5C,GADAA,EAAS2gB,GAAwB,IAAV3gB,EAAeA,EAAQ,EAC1CqhB,GAAYG,GAAaA,EAAU,CAErC,IADA,IAAIC,EAAYH,EAAK3tB,OACd8tB,KACL,GAAIH,EAAKG,KAAeD,EACtB,SAASD,EAGTH,GACFE,EAAKhtB,KAAKktB,GAEZlJ,EAAOhkB,KAAK0L,QAEJ2V,EAAS2L,EAAME,EAAUb,KAC7BW,IAAShJ,GACXgJ,EAAKhtB,KAAKktB,GAEZlJ,EAAOhkB,KAAK0L,IAGhB,OAAOsY,GA2BT,IAAIoJ,GAJJ,SAAcnD,GACZ,OAAQA,GAASA,EAAM5qB,OAAUwtB,GAAU5C,GAAS,IAKtD,SAASoD,GAAgBxY,GACrB,OAAOA,EAAInD,QAAQ,oBAAa3T,aAAUA,EAAE,GAAGzB,gBAGnD,SAASgxB,GAAwBC,GAG7B,OAFalyB,OAAO8kB,KAAKoN,GAGpBnN,aAAKtK,GACFvT,IAAMirB,EAAOH,GAAgBvX,GACvBlE,EAAM2b,EAAMzX,GAElB,YAAYwH,IAAR1L,EAA0B,WACf4b,OAAS5b,SAE3B1S,KAAK,IACLiZ,OAGT,SAASsV,GAAoBjL,GAEzB,IAAIkL,EAAW5xB,SAASC,cAAc,YAkBtC2xB,EAASrvB,MAAM6jB,SAAW,QAC1BwL,EAASrvB,MAAM4L,IAAM,EACrByjB,EAASrvB,MAAM8L,KAAO,EAItBujB,EAASrvB,MAAMmI,MAAQ,MACvBknB,EAASrvB,MAAMqD,OAAS,MAGxBgsB,EAASrvB,MAAMsvB,QAAU,EAGzBD,EAASrvB,MAAMuvB,OAAS,OACxBF,EAASrvB,MAAMwvB,QAAU,OACzBH,EAASrvB,MAAMyvB,UAAY,OAG3BJ,EAASrvB,MAAM0vB,WAAa,cAE5BL,EAAShiB,MAAQ8W,EAEjB1mB,SAASqM,KAAK/G,YAAYssB,GAE1BA,EAASM,SAET,IACIlyB,SAASmyB,YAAY,QACvB,MAAOtU,GACLuU,QAAQC,IAAI,wBAGhBryB,SAASqM,KAAKpG,YAAY2rB,GAO9B1N,IAAIoO,GAAahH,EAEbiH,GAAa7I,EAEjB,SAASrG,GAAS5O,EAAI+d,GAClB,sBAD4B,wEAExB,OAAO,IAAIC,iBAAQC,GAKfhwB,sBAHI+D,IAAMksB,EAAMle,EAAGqF,MAAM0Y,EAAS5Y,GAC9B8Y,EAAQC,QAMxB,SAASC,GAAehiB,EAAQiiB,EAAQjO,GACpCne,IAAMgrB,EAAQ7M,EAAWkO,gBAAQC,EAAKld,GAMlC,OALAkd,EAAIld,GAAQ,CACRf,eACI,OAAO+d,EAAOhd,KAGfkd,GACR,IACHxzB,OAAOyzB,iBAAiBpiB,EAAQ6gB,GAUpC,SAASwB,GAASnd,GACd,OAAQod,MAAMpd,GAUlB,SAASqd,GAAOC,GACZ,OAAO9B,GAAO8B,GAGlB,SAASC,GAAct0B,EAAGD,GACtB,OAAOC,EAAID,EAEf,SAASw0B,GAAUpwB,GACf,OAAOA,EAAK0S,QAAQ,WAAY,IAmoBpC,MAAM2d,WAAkBjJ,WAMxBpG,IAAIsP,GAAQ,CACRC,YAAa,gRACbC,aAAc,kRAGlB,MAAMC,GACFptB,YAAYqtB,GACRjzB,KAAKizB,SAAWA,EAChBhB,GAAejyB,KAAMA,KAAKizB,SAAU,CAChC,UACA,UACA,QACA,SACA,iBACA,gBACA,aACA,cACA,aAGJjzB,KAAKkzB,aAGTttB,aACI5F,KAAKmzB,gBACLnzB,KAAKozB,eACLpzB,KAAKqzB,wBACLrzB,KAAKszB,uBACLtzB,KAAKuzB,kBACLvzB,KAAKwzB,iBAGT5tB,gBACI5F,KAAKyzB,kBAGT7tB,0BACI5F,KAAK0zB,aAAe,KAEpBnrB,EAAE4Z,GAAGniB,KAAK2zB,eAAgB,WAAY,oBAAaxyB,EAAGyyB,GAClD5zB,EAAK6zB,gBAAgBD,KAGzB5zB,KAAK8zB,SAAS3R,GAAG,mBACTniB,EAAK+zB,eAAiB/zB,EAAK0zB,aAE3B1zB,EAAK6zB,gBAAgB7zB,EAAK+zB,cACnB/zB,EAAK0zB,cAEZ1zB,EAAKg0B,sBAKjBpuB,6BA0BI,CAAC,OAAQ,QAAS,KAAM,OAAQ,MAAO,aAClC+d,aAAIrR,UAAatS,EAAK8zB,SAAS3R,GAAG7P,oBAAiBtS,EAAKi0B,qBAAqB3hB,OAElF,CAAC,OAAQ,QAAS,KAAM,QACnBqR,aAAIrR,UAAatS,EAAK8zB,SAAS3R,WAAW7P,6BA7BxBA,GACnB,IAAKtS,EAAK+zB,cAAgB/zB,EAAK0zB,aAC3B,OAAO,EAGXnQ,IAAI2Q,EAAQl0B,EAAK+zB,eAIbxrB,EAAExE,KAAKmwB,6BAaX,MAXkB,SAAd5hB,EACA4hB,EAAQl0B,EAAKm0B,iBAAiBC,GACT,UAAd9hB,EACP4hB,EAAQl0B,EAAKq0B,kBAAkBD,GACV,OAAd9hB,EACP4hB,EAAQl0B,EAAKs0B,gBAAgBC,GACR,SAAdjiB,IACP4hB,EAAQl0B,EAAKw0B,mBAAmBD,IAGpCv0B,EAAKy0B,UAAUP,IACR,EAOuDQ,CAAcpiB,OAEhFtS,KAAK8zB,SAAS3R,GAAG,iBACbniB,EAAKg0B,mBAAkB,GACvBh0B,EAAK20B,cAAcC,cAAa,KAGhC50B,KAAKS,QAAQo0B,gBACb70B,KAAK8zB,SAAS3R,GAAG,kBAAWhhB,GACxB2E,IAAMouB,EAAQ3rB,EAAEoZ,QAAQ,WAAYxgB,EAAE8O,UACjB1H,EAAExE,KAAKmwB,YAG5B,OADAl0B,EAAK80B,eAAeP,IACb,IAGXhsB,EAAE4Z,GAAGniB,KAAK+0B,OAAQ,UAAW,wBACzB/0B,EAAKg1B,YAAYh1B,EAAK+zB,iBAKlCnuB,mCAiBI,CAAC,OAAQ,QAAS,KAAM,QACnB+d,aAAIrR,UACDtS,EAAK8zB,SAAS3R,YAAY7P,oBAAmBtS,EAAKi1B,oBAlB1B3iB,GAC5BiR,IAAI2R,EAAmBl1B,EAAKm1B,qBAY5B,MAVkB,SAAd7iB,EACA4iB,EAAmBl1B,EAAKo1B,aAAaF,GAChB,UAAd5iB,EACP4iB,EAAmBl1B,EAAKq1B,cAAcH,GACjB,OAAd5iB,EACP4iB,EAAmBl1B,EAAKs1B,cAAcJ,GACjB,SAAd5iB,IACP4iB,EAAmBl1B,EAAKu1B,cAAcL,IAGnCA,EAK0DM,CAAuBljB,QAGhG1M,kCACI5F,KAAK8zB,SAAS3R,GAAG,oBACbrc,IAAM2vB,EAAkBz1B,EAAK01B,iBAAiB11B,EAAK+zB,aAAc/zB,EAAKk1B,kBAChES,EAAU31B,EAAKizB,SAAS2C,UAAU,uBAAwB,CAC5DC,MAAOJ,IAGPA,GACAz1B,EAAKizB,SAAS6C,iBAAiBH,EAAS,KAI5C31B,KAAKS,QAAQs1B,oBACb/1B,KAAK8zB,SAAS3R,GAAG,kBAAWhhB,GAWxB,OARAnB,EAAKizB,SAAS+C,YAAYC,QAE1Bl0B,sBACI+D,IAAM/B,EAAO/D,EAAKizB,SAAS+C,YAAY/mB,MACvCjP,EAAKizB,SAAS+C,YAAY/mB,MAAQ,GAClCjP,EAAKk2B,mBAAmBnyB,IACzB,KAEI,IAKnB6B,6BACQuwB,EAAY,KAEhB5tB,EAAE4Z,GAAGniB,KAAK2zB,eAAgB,YAAa,oBAAaxyB,GAChDg1B,GAAY,EACZn2B,EAAKy0B,UAAUlsB,EAAEpH,EAAE2iB,oBAGvBvb,EAAE4Z,GAAGniB,KAAK2zB,eAAgB,qBACtBwC,GAAY,IAQhB5tB,EAAE4Z,GAAGniB,KAAK2zB,eAAgB,YAAa,WAAYhC,YAL/BxwB,GACXg1B,GACLn2B,EAAKi1B,WAAW1sB,EAAEpH,EAAE2iB,mBAGkD,KAG9Ele,4BACI2C,EAAE4Z,GAAGniB,KAAK2zB,eAAgB,QAAS,iCAA0BxyB,EAAGi1B,GAC5DtwB,IAAMouB,EAAQ3rB,EAAEoZ,QAAQ,WAAYyU,KACf7tB,EAAExE,KAAKmwB,YAExBA,EAAMlf,UAAUuJ,SAAS,uBACzBve,EAAKq2B,WAAWC,eAAelC,GAE/Bp0B,EAAKq2B,WAAWE,gBAAgBnC,KAK5CxuB,UAAUsuB,EAAOzQ,kBAIb,8CAHqB,uCACN,4BAGf,kBAFmB,GAEdyQ,GAGDA,IAAUl0B,KAAK0zB,aAAnB,CAEA,MAGInrB,EAAExE,KAAKmwB,gBACX,gBAKyB,IADVl0B,KAAK20B,cAAc6B,UAAUjC,GACjCkC,YAINC,GACD12B,KAAK22B,aAAazC,GAGtBl0B,KAAKg0B,oBACA4C,GACD52B,KAAK62B,iBAGL72B,KAAK+zB,cACL/zB,KAAK+zB,aAAa/e,UAAU8hB,OAAO,kBAGvC92B,KAAK+zB,aAAeG,EACpBA,EAAMlf,UAAUia,IAAI,kBAEf8H,GAED7C,EAAM+B,QAGVj2B,KAAKg3B,yBAAyB9C,KAGlCtuB,YAAYsuB,GACHA,IAGLA,EAAMlf,UAAU8hB,OAAO,kBACvB92B,KAAK+zB,aAAe,KAGhB/zB,KAAKi3B,aACLj3B,KAAKi3B,YAAYpoB,iBAAQkmB,UAAUA,GAAUA,EAAO/f,UAAU8hB,OAAO,yBAI7ElxB,yBAAyBsuB,GACrB,MAGI3rB,EAAExE,KAAKmwB,6BAGLgD,EAAoB,oBAAoB3C,EACxC4C,EAAoB,aAFLn3B,KAAKo3B,YAAYC,mBAAmB,iBAEFjD,EAEnDp0B,KAAKi3B,aACLj3B,KAAKi3B,YAAYpoB,iBAAQkmB,UAAUA,GAAUA,EAAO/f,UAAU8hB,OAAO,wBAGzEhxB,IAAMwxB,EAAY/uB,EAAE2uB,EAAmBl3B,KAAKu3B,SACtCC,EAAYjvB,EAAE4uB,EAAmBn3B,KAAKu3B,SAE5Cv3B,KAAKi3B,YAAc,CAACK,EAAWE,GAC/Bx3B,KAAKi3B,YAAYpoB,iBAAQkmB,UAAUA,GAAUA,EAAO/f,UAAUia,IAAI,wBAGtErpB,6BACI,GAAM5F,KAAK+zB,cAAgB/zB,KAAKk1B,iBAAhC,CACA,MAGI3sB,EAAExE,KAAK/D,KAAKk1B,4CACVhB,EAAQl0B,KAAKy3B,SAASlD,EAAUH,GAEtC,GAAKF,GAASA,IAAUl0B,KAAKk1B,iBAA7B,CAGApvB,IAAM4xB,EAAQnvB,EAAExE,KAAK/D,KAAK+zB,cAC1B/zB,KAAK+zB,aAAe/zB,KAAKy3B,SAASC,EAAMnD,SAAUmD,EAAMtD,UAExDp0B,KAAKi1B,WAAWf,KAGpBtuB,4BACI,GAAK5F,KAAK+zB,aAAV,CAEA,MAGIxrB,EAAExE,KAAK/D,KAAK+zB,wCACVG,EAAQl0B,KAAKy3B,SAASlD,EAAUH,GAEjCF,GAMLl0B,KAAKy0B,UAAUP,EAAO,CAClB0C,mBAAoB,EACpBG,aAAc,EACdL,iBAAkB,KAI1B9wB,WAAWsvB,GACFl1B,KAAK+zB,cAEN/zB,KAAK23B,YAAY33B,KAAK+zB,aAAcmB,KAEpCl1B,KAAKk1B,iBAAmBA,GAIhCtvB,YAAYgyB,EAAQC,cAChB,GAAID,IAAWC,EAAQ,OAAO,EAE9B/xB,IAAMgyB,EAAQ93B,KAAK+3B,gBAAgBH,EAAQC,GAC3C,QAAKC,IAEL93B,KAAK62B,iBACL72B,KAAKg4B,eAAiBF,EAAMnU,aAAIjL,kBAAS1Y,GAAKy3B,eAAShU,EAAG/K,KAC1D0M,iCACIplB,EAAKg4B,eAAerU,aAAIuQ,UAASA,EAAMlf,UAAUia,IAAI,2BAElD,GAGXrpB,gBAAgBgyB,EAAQC,aAChBI,EAAWC,EAAWC,EAAWC,EAErC,GAAsB,iBAAXR,EACNK,KAA8C/e,cAAnCgf,OAAWC,OAAWC,YAEtC,GAAsB,iBAAXR,EAAqB,CAC5B,IAAMA,IAAUC,EACZ,OAAO,EAGX/xB,IAAMuyB,EAAQ9vB,EAAExE,KAAK6zB,GACfU,EAAQ/vB,EAAExE,KAAK8zB,GAErBI,GAAaI,EAAM9D,SACnB2D,GAAaG,EAAMjE,SACnB+D,GAAaG,EAAM/D,SACnB6D,GAAaE,EAAMlE,SAWvB,GARI8D,EAAYE,IACXF,KAAwB,CAACE,EAAWF,OAAzBE,QAGZH,EAAYE,IACXF,KAAwB,CAACE,EAAWF,OAAzBE,QAGZn4B,KAAKu4B,eAAeN,IAAcj4B,KAAKu4B,eAAeJ,GACtD,OAAO,EAQX,IALAryB,IAAMgyB,EAAQ,GACVvD,EAAW0D,EACX7D,EAAW8D,EACTM,EAAa,GAEZpE,GAAYgE,GACfI,EAAWj1B,KAAK6wB,GAChBA,GAAY,EAWhB,OARAoE,EAAW7U,aAAKyQ,GACZ,KAAOG,GAAY4D,GACfL,EAAMv0B,KAAK,CAACgxB,EAAUH,IACtBG,IAEJA,EAAW0D,IAGRH,EAGXlyB,kBACK5F,KAAKg4B,gBAAkB,IACnBnpB,iBAAQqlB,UAASA,EAAMlf,UAAU8hB,OAAO,wBAE7C92B,KAAKg4B,eAAiB,GACtBh4B,KAAKk1B,iBAAmB,KAG5BtvB,qBACI,OAAO5F,KAAKk1B,kBAAoBl1B,KAAK+zB,aAGzCnuB,gBAAgBsuB,GACZl0B,KAAKy0B,UAAUP,GACf,MAGI3rB,EAAExE,KAAKmwB,6BAELuE,EAAMz4B,KAAK20B,cAAc6B,UAAUjC,GACzC,IAAIkE,IAAyB,IAAjBA,EAAIC,WAAwC,IAAlBD,EAAIhC,UAA1C,CAIA3wB,IAAM8tB,EAAO5zB,KAAK24B,QAAQpE,EAAUH,GACpC,IAAIR,IAA0B,IAAlBA,EAAK8E,SAAjB,CAIA,GAAI14B,KAAK0zB,aAAc,CACnB,MAGInrB,EAAExE,KAAK/D,KAAK0zB,0CAEhB,GAAIU,IAAawE,GAAarE,IAAasE,EAEvC,OAIR74B,KAAK0zB,aAAeQ,EACpBA,EAAMlf,UAAUia,IAAI,oBAEpBnpB,IAAMgzB,EAAYvwB,EAAE,iBAAkB2rB,GACtC4E,EAAUt5B,UAAY,GAEtBsG,IAAMizB,EAAS/4B,KAAKg5B,UAAUzE,EAAUH,EAAUR,EAAKqF,QAASH,GAE5DC,IACA/4B,KAAKk5B,kBAAoBH,EAEzBA,EAAOI,UAAUvF,EAAKqF,QAAS7E,EAAUqE,MAIjD7yB,kBAAkBwzB,mBAAc,GACxBA,GACAp5B,KAAKq5B,gBAGLr5B,KAAK+zB,cAAc/zB,KAAK+zB,aAAakC,QAEpCj2B,KAAK0zB,eACV1zB,KAAK0zB,aAAa1e,UAAU8hB,OAAO,oBACnC92B,KAAK0zB,aAAe,MAGxB9tB,UAAU2uB,EAAUH,EAAUnlB,EAAOsO,GACjCzX,IAAMwzB,EAASt5B,KAAKo3B,YAAYZ,UAAUjC,GACpCgF,EAAMv5B,KAAKo3B,YAAYoC,OAAOpF,GAC9BrwB,EAAO/D,KAAKo3B,YAAYqC,QAAQrF,GAClC2E,EAAS/4B,KAAKS,QAAQu4B,UACtBh5B,KAAKS,QAAQu4B,UAAUzE,EAAUH,EAAUnlB,EAAOsO,EAAQ+b,EAAQC,EAAKx1B,GACvE/D,KAAK05B,iBAAiBnc,GAE1B,OAAe,IAAXwb,SAIWlY,IAAXkY,IAEAA,EAAS/4B,KAAK05B,iBAAiBnc,IAG5Bwb,GAGXnzB,iBAAiB2X,GACbzX,IAAM6zB,EAASpxB,EAAEua,OAAO,QAAS,CAC7B8W,MAAO,WACPjf,KAAM,OACNkf,OAAQtc,IAGZ,MAAO,CACH4b,mBAAUlqB,GACN0qB,EAAO1D,QACP0D,EAAO1qB,MAAQA,GAEnB6qB,oBACI,OAAOH,EAAO1qB,OAElB8qB,kBAAS9qB,GACL0qB,EAAO1qB,MAAQA,IAK3BrJ,2BACQo0B,EAAUlI,QAAQC,UACtB,IAAK/xB,KAAK0zB,aAAc,OAAOsG,EAE/Bl0B,IAAMouB,EAAQl0B,KAAK0zB,eAIfnrB,EAAExE,KAAKmwB,6BACLuE,EAAMz4B,KAAKo3B,YAAYZ,UAAUjC,GAEvC,GAAIL,EAAO,CACPpuB,IAAMizB,EAAS/4B,KAAKk5B,kBAEpB,GAAIH,EAAQ,CACRxV,IAAI0W,EAAelB,EAAOe,WAGrBG,EAAaC,OACdD,EAAenI,QAAQC,QAAQkI,IAGnCD,EAAUC,EAAaC,cAAMjrB,GACzBnJ,IAAMq0B,EAAWn6B,EAAK24B,QAAQpE,EAAUH,GAAU6E,QAElD,GAAIkB,IAAalrB,EAAO,OAAO,EAE/BnJ,IAAMs0B,EAAOrB,EAAOgB,SAAS9qB,EAAOmlB,EAAUqE,GAa9C,OAVAz4B,EAAKq6B,WAAW9F,EAAUH,EAAUnlB,GAAO,GAC3CilB,EAAM+B,QAEFmE,GAAQA,EAAKF,MAEbE,EAAKE,eAAOn5B,GACRswB,QAAQC,IAAIvwB,GACZnB,EAAKq6B,WAAW9F,EAAUH,EAAU+F,KAGrCC,KAMnB,OADAp6B,KAAKk5B,kBAAoB,KAClBc,EAGXp0B,iBAAiBgyB,EAAQC,cACrB,IAAKA,GAAUD,EAAQ,CAEnB,MAGIrvB,EAAExE,KAAK6zB,6BAGX,OADA5G,GADahxB,KAAK24B,QAAQpE,EAAUH,GACX6E,SAClB,EAEXnzB,IAAMgyB,EAAQ93B,KAAK+3B,gBAAgBH,EAAQC,GAE3C,IAAKC,EAAO,OAAO,EAEnBhyB,IAAM1E,EAAO02B,EAERnU,aAAIjL,kBAAS1Y,GAAK24B,cAAQlV,EAAG/K,KAE7ByZ,gBAAQC,EAAKmI,GACVz0B,IAAMsuB,EAAWmG,EAAKnG,SAKtB,OAHAhC,EAAIgC,GAAYhC,EAAIgC,IAAa,GACjChC,EAAIgC,GAAU7wB,KAAKg3B,EAAKtB,SAEjB7G,GACR,IAWP,OAHApB,GANe5vB,EAEVuiB,aAAI4V,UAAOA,EAAI92B,KAAK,QAEpBA,KAAK,OAKHrB,EAAK+wB,gBAAQqI,EAAOjB,UAAQiB,EAAQjB,EAAI32B,QAAQ,GAG3DgD,mBAAmB7B,cACf,GAAK/D,KAAK+zB,aAAV,CAEAjuB,IAAMmU,EAASlW,EACVnD,MAAM,MACN+iB,aAAI4V,UAAOA,EAAI34B,MAAM,QACrB+R,gBAAO4mB,UAAOA,EAAI32B,QAAU22B,EAAIkB,eAAMC,UAAMA,QAEpBnyB,EAAExE,KAAK/D,KAAK+zB,wCAErC4G,GACWpG,EADXoG,GAEWvG,EAGfna,EAAOpL,iBAAS0qB,EAAKzrB,GACjByV,IAAI6Q,EAAWtmB,EAAI6sB,EACnBpB,EAAI1qB,iBAAS+kB,EAAM1P,GACfX,IAAIgR,EAAWrQ,EAAIyW,EACnB36B,EAAKq6B,WAAW9F,EAAUH,EAAUR,GAAM,QAKtDhuB,eAAe2uB,GACXv0B,KAAK20B,cAAcC,eACnB50B,KAAK20B,cAAciG,YAAYrG,GAE1Bv0B,KAAK20B,cAAckG,eAEpB76B,KAAK+zB,cAAgB/zB,KAAK+zB,aAAakC,QAI/CrwB,WAAW2uB,EAAUH,EAAUnlB,EAAO6rB,mBAAc,GAChDh1B,IAAM8tB,EAAO5zB,KAAKo3B,YAAYiD,WAAW9F,EAAUH,EAAU,CACzD6E,QAAShqB,IAEbjP,KAAK+6B,YAAYnH,EAAMkH,GAG3Bl1B,YAAYguB,EAAMkH,mBAAc,GACdvyB,EAAEvI,KAAKqU,SAASuf,EAAKW,SAAUX,EAAKQ,UAAWp0B,KAAK2zB,gBAC5Dn0B,UAAYQ,KAAKg7B,eAAepH,EAAMkH,GAGhDl1B,iBAAiBwuB,EAAU6G,GACvBn1B,IAAMyuB,EAAWv0B,KAAK20B,cAAcuG,sBAC9BhH,EAAQl0B,KAAKy3B,SAASlD,EAAUH,GAClCF,GACAA,EAAMlf,UAAUimB,EAAO,SAAW,OAAO,uBAIjDr1B,eAAe2uB,GAEX,OAAOA,EAAWv0B,KAAK20B,cAAcuG,sBAGzCt1B,qBAAqB0M,GACjB,IAAKtS,KAAK+zB,cAAiB/zB,KAAK0zB,cAAgB,CAAC,OAAQ,QAAS,KAAM,QAAQ9O,SAAStS,GACrF,OAAO,EACAtS,KAAK0zB,cAAgB,CAAC,MAAO,aAAa9O,SAAStS,IAC1DtS,KAAKg0B,oBAGTzQ,IAAI2Q,EAAQl0B,KAAK+zB,aAYjB,GAVkB,SAAdzhB,GAAsC,cAAdA,EACxB4hB,EAAQl0B,KAAKo1B,aAAalB,GACL,UAAd5hB,GAAuC,QAAdA,EAChC4hB,EAAQl0B,KAAKq1B,cAAcnB,GACN,OAAd5hB,EACP4hB,EAAQl0B,KAAKs1B,cAAcpB,GACN,SAAd5hB,IACP4hB,EAAQl0B,KAAKu1B,cAAcrB,KAG1BA,EACD,OAAO,EAGX,MAEI3rB,EAAExE,KAAKmwB,YAGX,IAFel0B,KAAK20B,cAAc6B,UAAUjC,GAEhCkC,UAAW,CACnBlT,IAAI4X,EAAmBn7B,KAAK+zB,aAC5B/zB,KAAKg1B,YAAYmG,GACjBn7B,KAAK+zB,aAAeG,EACpB3Q,IAAI6X,EAAMp7B,KAAKi0B,qBAAqB3hB,GAIpC,OAHK8oB,GACDp7B,KAAKy0B,UAAU0G,GAEZC,EAIX,OADAp7B,KAAKy0B,UAAUP,IACR,EAGXtuB,SAAS2uB,EAAUH,GACf,OAAO7rB,EAAEvI,KAAKqU,SAASkgB,EAAUH,GAAWp0B,KAAK2zB,gBAGrD/tB,cAAcsuB,GAMV,IALA,MAEI3rB,EAAExE,KAAKmwB,YAEPmH,EAAYnH,EAAMoH,cAAcpjB,uBAC7BmjB,GAAaA,EAAUrmB,UAAUuJ,SAAS,iBAC7C8c,EAAYA,EAAUnjB,uBAG1B,OAAKmjB,EACE9yB,mBAAmBgsB,EAAY8G,GADfnH,EAI3BtuB,cAAcsuB,GAMV,IALA,MAEI3rB,EAAExE,KAAKmwB,YAEPqH,EAAYrH,EAAMoH,cAAc5a,mBAC7B6a,GAAaA,EAAUvmB,UAAUuJ,SAAS,iBAC7Cgd,EAAYA,EAAU7a,mBAG1B,OAAK6a,EACEhzB,mBAAmBgsB,EAAYgH,GADfrH,EAI3BtuB,aAAasuB,GACT,OAAOA,EAAMhc,uBAGjBtS,cAAcsuB,GACV,OAAOA,EAAMxT,mBAGjB9a,iBAAiBwuB,GACb,OAAOp0B,KAAKy3B,SAASz3B,KAAK20B,cAAcuG,sBAAuB9G,GAGnExuB,kBAAkBwuB,GACd,OAAOp0B,KAAKy3B,SAASz3B,KAAK20B,cAAc6G,qBAAsBpH,GAGlExuB,gBAAgB2uB,GACZ,OAAOv0B,KAAKy3B,SAASlD,EAAUv0B,KAAKq2B,WAAWoF,oBAGnD71B,mBAAmB2uB,GACf,OAAOv0B,KAAKy3B,SAASlD,EAAUv0B,KAAKq2B,WAAWqF,mBAGnD91B,QAAQ2uB,EAAUH,GACd,OAAOp0B,KAAKizB,SAASmE,YAAYuB,QAAQpE,EAAUH,GAGvDxuB,eACI,OAAO2C,EAAE3G,MAAM2G,EAAE,UAAWvI,KAAK2zB,gBAAiB,UAGtD/tB,aAAasuB,GACT,GAAI3rB,EAAEuc,WAAWoP,EAAOl0B,KAAK2zB,gBAAiB,OAAO,EAErD,MAEIprB,EAAExE,KAAKmwB,YAEX,OADAl0B,KAAKq2B,WAAWsF,YAAYvH,IACrB,EAGXxuB,qBACI,OAAO3B,KAAK23B,KAAK57B,KAAKizB,SAAS4I,oBAAsB77B,KAAK87B,gBAG9Dl2B,YAAYguB,GACR,uEAOMmI,EAAWlL,GAAwB,UACrCuD,WACAG,WACAyH,WACAC,aACAC,IAGE3C,EAAMv5B,KAAKo3B,YAAYoC,OAAOpF,GAE9B+H,IAAeH,GAAYC,GAAYC,GAa7C,mCAXkB,CACd,UACA,gBAAkB3H,EAClB4H,cAAyB5H,MAAYH,EAAa,GAClD+H,EAAa,gBAAkB/H,EAAW,GAC1C4H,EAAW,kBAAoB,GAC/BA,qBAA8BzH,EAAa,GAC3C0H,EAAW,kBAAoB,GAC/BE,GAAe5C,GAAOA,EAAI6C,KAAKC,gBAAmB,sBAAwB,IAC5E55B,KAAK,UAGyBs5B,qCACtB/7B,KAAKg7B,eAAepH,oCAKlChuB,eAAeguB,EAAMkH,mBAAc,GAC/B,IAuBIwB,yCAhBEC,GADYP,IAA8B,IAAlBpI,EAAK8E,SACH14B,KAAKw8B,gBAAgBjI,GAAY,GAG3DkI,EADWT,IAA8B,IAAlBpI,EAAKxjB,2DAGxBpQ,KAAKS,QAAQg8B,cAAc7I,EAAK8I,mCAEtC,GAGEC,EADYX,IAA+B,IAAnBpI,EAAKgJ,UACF,+CAAiD,GAG5EC,EADcb,IAA8B,IAAlBpI,EAAKiJ,SACN78B,KAAK20B,cAAcmI,kBAAoB,GAElEC,EAAkB/J,GAAYgK,uBAAuBpJ,GAEzD,GAAIoI,GAAYC,IAAac,EACzBT,EAAc1I,EAAKqF,aAEnB,IAAKrF,EAAKrxB,MAAQu4B,EAAa,CAC3Bh1B,IAAMyzB,EAAMv5B,KAAKo3B,YAAYoC,OAAO5F,EAAKQ,UACnCrwB,EAAO/D,KAAKo3B,YAAYqC,QAAQ7F,EAAKQ,UAC3CkI,EAAcS,EAAgBnJ,EAAKqF,QAASM,EAAK3F,EAAK0F,OAAQv1B,QAE9Du4B,EAAc1I,EAAKrxB,KAM3B,GAFAqxB,EAAKrxB,KAAO+5B,EAERt8B,KAAKS,QAAQw8B,WAAcjB,IAAYC,QAA6Bpb,IAAhB+S,EAAKsJ,OAAsB,CAC/Ep3B,IAAMq3B,EAAUn9B,KAAKo3B,YAAYoC,OAAO5F,EAAKQ,SAAW,GAClDgJ,EAAYD,GAAWA,EAAQf,KAAKc,OAAStJ,EAAKsJ,OAMxD,GADyBl9B,KAAKo3B,YAAYC,mBAAmB,aAAe,IACnDzD,EAAKW,SAAU,CACpCzuB,IAAMorB,EANU,IAME0C,EAAKsJ,QAAU,GAMjCZ,EAAc,mDAAmDpL,EAXxD,8BAMUkM,sDACoClM,EARvC,IACP,yDAQyB2B,4EACCA,uDACpB,mCAGHyJ,sCAKpBx2B,IAKIu3B,EAAkB,6BALJ,CACd,mBACArB,8BAAuCzH,2BAAsCA,GAC/E9xB,KAAK,4BAIG65B,uBACAG,uBACAE,uBACAE,uCAEJN,eAGFvW,EAAM3mB,SAASC,cAAc,OACjC0mB,EAAIxmB,UAAY88B,EAEhB/Y,IAAItQ,EAAc+S,EAAI/S,YAKtB,OAJAA,EAAcA,EAAYgC,QAAQ,OAAQ,KAAKyG,OAE/C2hB,EAAkBA,EAAgBpoB,QAAQ,eAj/ClD,SAAoBqoB,GAChB,IAAKA,EAAK,MAAO,GACjB/Z,IAAIga,EAAoB,CACpBC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,UAGT,OAAOC,OAAOV,GAAKroB,QAAQ,uBAAgBgpB,UAASV,EAAkBU,IAASA,KAo+CNhrB,SAKzErN,gBAAgB2uB,GACZ,sDAAuDA,aAG3D3uB,SAAS2uB,EAAUH,GACf,mBAAoBG,MAAYH,EAGpCxuB,8BAA8BguB,GAC1B,OAAOA,EAAKsK,QAAWtK,EAAK0F,QAAU1F,EAAK0F,OAAO4E,QAAW,MA6yBrE,IA94HwBx+B,GA84HpBy+B,GA14HJ,SAA8BrqB,EAAI7V,GACjC,OAAiC6V,EAA1B7V,EAAS,CAAEmgC,QAAS,IAAiBngC,EAAOmgC,SAAUngC,EAAOmgC,QAy4HrDC,CAAqB,SAAUpgC,EAAQmgC,GACzCngC,EAAOmgC,QAAkC,SAAUj9B,EAAEQ,EAAEnD,EAAEG,GAAG,SAAS2/B,EAAEhb,EAAEnhB,GAAG,IAAI3D,EAAE8kB,GAAG,CAAC,IAAI3hB,EAAE2hB,GAAG,CAAC,IAAIllB,EAAsCooB,EAAgB,IAAIrkB,GAAG/D,EAAE,OAAOA,EAAEklB,GAAE,GAAI,GAAGxV,EAAE,OAAOA,EAAEwV,GAAE,GAAI,IAAIziB,EAAE,IAAIE,MAAM,uBAAuBuiB,EAAE,KAAK,MAAMziB,EAAE09B,KAAK,mBAAmB19B,EAAE,IAAIzB,EAAEZ,EAAE8kB,GAAG,CAAC8a,QAAQ,IAAIz8B,EAAE2hB,GAAG,GAAGvkB,KAAKK,EAAEg/B,QAAQ,SAASj9B,GAAG,IAAI3C,EAAEmD,EAAE2hB,GAAG,GAAGniB,GAAG,OAAOm9B,EAAE9/B,GAAI2C,IAAI/B,EAAEA,EAAEg/B,QAAQj9B,EAAEQ,EAAEnD,EAAEG,GAAI,OAAOH,EAAE8kB,GAAG8a,QAAkE,IAA1D,IAAItwB,EAAsC0Y,EAAwBlD,EAAE,EAAEA,EAAE3kB,EAAEiE,OAAO0gB,IAAIgb,EAAE3/B,EAAE2kB,IAAI,OAAOgb,EAAxd,CAA4d,CAACE,EAAE,CAAC,SAASC,EAAQxgC,EAAOmgC,GAI/iBx/B,OAAO8/B,eAAeN,EAAS,aAAc,CAC3CnvB,OAAO,IAGT,IAAI0vB,EAAe,WAAc,SAAStM,EAAiBpiB,EAAQ6gB,GAAS,IAAK,IAAIhjB,EAAI,EAAGA,EAAIgjB,EAAMluB,OAAQkL,IAAK,CAAE,IAAI8wB,EAAa9N,EAAMhjB,GAAI8wB,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMngC,OAAO8/B,eAAezuB,EAAQ2uB,EAAWvlB,IAAKulB,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAY5M,EAAiB2M,EAAYngC,UAAWogC,GAAiBC,GAAa7M,EAAiB2M,EAAaE,GAAqBF,GAA7gB,GAIfG,EAAgB,CAClBp1B,MAAO,OACP9E,OAAQ,QAINqtB,EAAW,SAAkB8M,GAC/B,OAAOC,OAAOD,IAAWC,OAAOD,IAQ9BE,EAAY,WAqDd,SAASA,EAAU9b,EAAS+b,GAC1B,IAAItzB,EAAQjM,MAvEhB,SAAyBizB,EAAU+L,GAAe,KAAM/L,aAAoB+L,GAAgB,MAAM,IAAIrV,UAAU,qCAyE5G6V,CAAgBx/B,KAAMs/B,GAEtBt/B,KAAKy/B,QAAU,GACfz/B,KAAK0/B,aAAe,KACpB1/B,KAAK2/B,kBAAoBL,EAAUM,sBAEnC5/B,KAAKqC,QAAQmhB,EAAS+b,GAEtB,IAAIM,EAAS7/B,KAAKy/B,SAGL,SAASK,IACpB,IAAIt+B,EAAYyK,EAAM8zB,qBAClBC,EAAc/zB,EAAMyzB,aAIxB,GAFAzzB,EAAMg0B,sBAAwBhhC,OAAOmmB,sBAAsB0a,GAEvDt+B,IAAcw+B,KAIbA,GAAe/7B,KAAKuF,IAAIhI,EAAYw+B,GAAe/zB,EAAMi0B,gBAAgB,CAC5E,IAAIC,EAAWl0B,EAAMm0B,eAErBn0B,EAAMyzB,aAAel+B,GAEJ,IAAb2+B,GAAoD,mBAAvBN,EAAOQ,aACtCR,EAAOQ,eAKbP,GA0TF,OAjZAnB,EAAaW,EAAW,KAAM,CAAC,CAC7BjmB,IAAK,SACLpK,MAAO,SAAgBuU,EAAS+b,GAC9B,OAAO,IAAID,EAAU9b,EAAS+b,KAS/B,CACDlmB,IAAK,aACLpK,MAAO,SAAoBuU,EAAS5hB,GAClC,IAAK,IAAIkM,KAAKlM,EACR4hB,EAAQ5hB,MAAMkM,KAAOlM,EAAMkM,KAC7B0V,EAAQ5hB,MAAMkM,GAAKlM,EAAMkM,MAI9B,CACDuL,IAAK,sBACLpK,MAAO,WAKL,IAAIsoB,EAAUl4B,SAASC,cAAc,OACjCghC,EAAUjhC,SAASC,cAAc,OAIrCggC,EAAUiB,WAAWhJ,EAAS,CAAE9R,SAAU,WAAYxgB,OAAQ,MAAOu7B,QAAS,IAC9ElB,EAAUiB,WAAWD,EAAS,CAAEr7B,OAAQ,UAGxCsyB,EAAQ5yB,YAAY27B,GAGpBjhC,SAASqM,KAAK/G,YAAY4yB,GAG1B,IAAIkJ,EAAmBH,EAAQn8B,aAK/B,OAFA9E,SAASqM,KAAKpG,YAAYiyB,GAEnBkJ,MA0CX9B,EAAaW,EAAW,CAAC,CACvBjmB,IAAK,UACLpK,MAAO,WACLhQ,OAAOyhC,qBAAqB1gC,KAAKigC,yBAElC,CACD5mB,IAAK,UACLpK,MAAO,SAAiBuU,EAAS+b,GAC/B,IAAIoB,EAAS3gC,KAIb,GAFApB,OAAOgiC,OAAO5gC,KAAKy/B,QAASN,EAAeI,IAEtC/b,GAAgC,IAArBA,EAAQ/R,SACtB,MAAM,IAAI1Q,MAAM,iDAGlBf,KAAK6gC,SAAWrd,EAEhB,IAAIqc,EAAS7/B,KAAKy/B,QAEdqB,EAAW9gC,KAAK+gC,WAAalB,EAAOiB,UAAYzhC,SAASC,cAAcugC,EAAOmB,iBAAmB,MAOrG,GAJkC,kBAAvBnB,EAAOoB,cAChBjhC,KAAKy/B,QAAQwB,aAAc,IAGxBpB,EAAOj7B,SACV,MAAM,IAAI7D,MAAM,wCAGlB,IAAKuxB,EAASuN,EAAOrF,OACnB,MAAM,IAAIz5B,MAAM,mDAGlB,IAAK8gB,MAAM4C,QAAQob,EAAOqB,cAAgB5O,EAASuN,EAAOqB,YACxD,MAAM,IAAIngC,MAAM,kFAAkF2a,QACzF4W,EAASuN,EAAOqB,YACzBlhC,KAAKmhC,aAAetf,MAAMge,EAAOrF,OAAO4G,KAAKvB,EAAOqB,YAEpDlhC,KAAKmhC,aAAetB,EAAOqB,WAK7BtiC,OAAO8kB,KAAKyb,GAAexsB,OAAO,SAAUuC,GAC1C,OAAOA,KAAQ2qB,IACdhxB,QAAQ,SAAUqG,GACnB,IAAIjG,EAAQ4wB,EAAO3qB,GACfmsB,EAAgB/O,EAASrjB,GACzBqyB,GAAiBD,GAA4C,MAApBpyB,EAAM0Z,OAAO,GAE1D,GAAI1Z,GAA0B,iBAAVA,GAAuC,iBAAVA,EAAoB,CACnE,IAAIsyB,EAAM,qBAAuBrsB,EAAO,+BACxC,MAAM,IAAInU,MAAMwgC,GAKlB,GAJWF,IACTxB,EAAO3qB,GAAQjG,EAAQ,MAGZ,WAATiG,EAAJ,CAKA,IAAIssB,EAAcH,EAAgBpyB,EAAQ7K,SAAS6K,EAAMgG,QAAQ,OAAQ,IAAK,IAG5E0rB,EAAOc,iBADLH,EACwBriC,OAAO0N,YAAc60B,EAAc,IAEnClP,EAASrjB,GAASA,EAAQuyB,KAMxD,IAAIE,EAAe,CACjB33B,MAAO,GAAK81B,EAAO91B,MACnB9E,OAAQ,GAAK46B,EAAO56B,OACpBugB,SAAU,OACVC,SAAU,YAGZ6Z,EAAUiB,WAAW/c,EAASke,GAE9B,IAAIC,EAAiB9B,EAAOqB,WAAarB,EAAOrF,MAC5CiG,EAAmBzgC,KAAK2/B,kBAExBgC,EAAiBlB,GACnBhP,QAAQmQ,KAAK,CAAC,wCAAyCnB,EAAmB,SAAU,kDAAkDh+B,KAAK,MAG7I,IAAIo/B,EAAgB,CAClBrB,QAAS,IACT/a,SAAU,WACV1b,MAAO,MACP9E,OAAQ08B,EAAiB,MAG3BrC,EAAUiB,WAAWO,EAAUe,GAG1B7hC,KAAK+gC,WACRvd,EAAQ7e,YAAYm8B,GAItB9gC,KAAK+gC,UAAYD,EACjB9gC,KAAK8hC,cAAgB9hC,KAAK+hC,uBAG1B/hC,KAAKgiC,eAAiBhiC,KAAKgiC,gBAAkBngB,MAAMge,EAAOrF,OAAO4G,KAAK,GAGtEphC,KAAKiiC,kBAAkB,GAGvBjiC,KAAKogC,aAAmC,OAAtBpgC,KAAK0/B,cAEW,mBAAvBG,EAAOQ,aAChBR,EAAOQ,gBAGV,CACDhnB,IAAK,UACLpK,MAAO,SAAiBnB,GACtB,IAAI+xB,EAAS7/B,KAAKy/B,QACd7oB,EAAOipB,EAAOj7B,SAASkJ,GACvB7I,EAAS2R,EAAK3R,OAelB,QAbe4b,IAAX5b,GAAwBqtB,EAASrtB,IACnC2R,EAAOA,EAAK4M,QAGRve,IAAWjF,KAAKmhC,eAClBnhC,KAAKmhC,aAAarzB,GAAK7I,EACvBjF,KAAKiiC,kBAAkBn0B,GACvB9N,KAAK8hC,cAAgB9hC,KAAK+hC,qBAAqBj0B,KAGjD7I,EAASjF,KAAKmhC,aAAarzB,IAGxB8I,GAA0B,IAAlBA,EAAKnF,SAChB,MAAM,IAAI1Q,MAAM,kDAAoD+M,GAGtE,IAAIo0B,EAAWtrB,EAAK4K,aAAa,UAAY,GAC7C5K,EAAK1V,aAAa,QAASghC,EAAW,KAAOrC,EAAOsC,cAAgB,SAEpE,IAAI30B,EAAMxN,KAAKgiC,eAAel0B,GAO9B,OALAwxB,EAAUiB,WAAW3pB,EAAM,CACzB6O,SAAU,WACVjY,IAAKA,EAAM,OAGNoJ,IAER,CACDyC,IAAK,qBACLpK,MAAO,WACL,IAAI4wB,EAAS7/B,KAAKy/B,QAElB,MAA6C,mBAAlCI,EAAOuC,uBACTvC,EAAOuC,yBAGTpiC,KAAK6gC,SAASr/B,YAEtB,CACD6X,IAAK,eACLpK,MAAO,SAAsBozB,GAC3B,IAAIxC,EAAS7/B,KAAKy/B,QACdjc,EAAUxjB,KAAK6gC,SACfr/B,EAAYxB,KAAK+/B,qBACjBvF,EAAQqF,EAAOrF,MAEfprB,EAAOywB,EAAOyC,QAAUtiC,KAAKuiC,gBAAgB/gC,GAAaxB,KAAKwiC,SAAShhC,GAAa,EAMzF,IAJI4N,EAAO,GAAKA,EAAOpP,KAAKyiC,gBAAkB,KAC5CrzB,EAAO,IAGJizB,GAASriC,KAAK0iC,YAActzB,EAC/B,OAAO,EAGTpP,KAAK0iC,UAAYtzB,EAEjB,IAAID,EAAKC,EAAOpP,KAAK2iC,iBAEjBxzB,EAAKqrB,GAASrrB,EAAKnP,KAAK2iC,gBAAkBnI,KAC5CrrB,EAAKqrB,GAKP,IAAIoI,EAAW/C,EAAOoB,YAAc5hC,SAASwjC,yBAA2B,GAMnE/B,EAAW9gC,KAAK+gC,UAGrB6B,EAAS/C,EAAOoB,YAAc,cAAgB,QAAQH,GAEtD,IAAK,IAAIhzB,EAAIsB,EAAMtB,EAAIqB,EAAIrB,IAAK,CAC9B,IAAIyrB,EAAMv5B,KAAK8iC,QAAQh1B,GAEvB80B,EAAS/C,EAAOoB,YAAc,cAAgB,QAAQ1H,GAGxD,GAAIsG,EAAOkD,WACT,OAAOlD,EAAOkD,WAAWvf,EAASof,GAGpCpf,EAAQhkB,UAAY,GACpBgkB,EAAQ7e,YAAYi+B,KAErB,CACDvpB,IAAK,oBACLpK,MAAO,WACL,IAAIG,EAAO8J,UAAUtW,QAAU,QAAsBie,IAAjB3H,UAAU,GAAmB,EAAIA,UAAU,GAE3E2mB,EAAS7/B,KAAKy/B,QACdjF,EAAQqF,EAAOrF,MACf8H,EAAUzC,EAAOyC,QAEjBlzB,EAAO,IAAMkzB,IACflzB,EAAO,GAGT,IAAK,IAAItB,EAAIsB,EAAMtB,EAAI0sB,EAAO1sB,IACxBw0B,EACQ,IAANx0B,EACF9N,KAAKgiC,eAAe,GAAKhiC,KAAK8hC,cAAgB9hC,KAAKmhC,aAAa,GAEhEnhC,KAAKgiC,eAAel0B,GAAK9N,KAAKgiC,eAAel0B,EAAI,GAAK9N,KAAKmhC,aAAarzB,GAG1E9N,KAAKgiC,eAAel0B,GAAK9N,KAAKmhC,aAAarzB,EAAI,GAAK9N,KAAKgiC,eAAel0B,EAAI,KAIjF,CACDuL,IAAK,uBACLpK,MAAO,WACL,IAAI+zB,EAAShjC,KAET6/B,EAAS7/B,KAAKy/B,QACdjF,EAAQqF,EAAOrF,MACflvB,EAAetL,KAAKmhC,aAAahP,OAAO,SAAU/zB,EAAGD,GACvD,OAAOC,EAAID,GACV,GAEHmhC,EAAUiB,WAAWvgC,KAAK+gC,UAAW,CACnCP,QAAS,EACT/a,SAAU,WACV1b,MAAO,MACP9E,OAAQqG,EAAe,OAIzB,IAAI23B,EAAoBjjC,KAAKmhC,aAAaxY,MAAM,GAAGhX,KAAK,SAAUvT,EAAGD,GACnE,OAAOC,EAAID,IAET+kC,EAASj/B,KAAKC,MAAMs2B,EAAQ,GAC5B2I,EAAgB3I,EAAQ,GAAM,GAAKyI,EAAkBC,GAAUD,EAAkBC,EAAS,IAAM,EAAID,EAAkBC,GAEtHE,EAAkBpjC,KAAK6gC,SAASx1B,aAAerL,KAAK6gC,SAASx1B,aAAerL,KAAKyhC,iBAcrF,OAbAzhC,KAAKyiC,gBAAkBx+B,KAAK23B,KAAKwH,EAAkBD,GACnDnjC,KAAKyhC,iBAAmB2B,EAGxBpjC,KAAK2iC,gBAAkB1+B,KAAKI,IAAIrE,KAAK2iC,iBAAmB,EAA0B,EAAvB3iC,KAAKyiC,iBAChEziC,KAAKkgC,eAAiBiD,EAElBtD,EAAOyC,SACTrjC,OAAOmmB,sBAAsB,WAC3B4d,EAAOnC,SAASr/B,UAAY8J,IAIzBA,IAER,CACD+N,IAAK,WACLpK,MAAO,SAAkBzN,GAGvB,IAFA,IAAIsM,EAAI,EAED9N,KAAKgiC,eAAel0B,GAAKtM,GAC9BsM,IAGF,OAAOA,IAER,CACDuL,IAAK,kBACLpK,MAAO,SAAyBzN,GAG9B,IAFA,IAAIsM,EAAI9N,KAAKy/B,QAAQjF,MAAQ,EAEtB1sB,EAAI,GAAK9N,KAAKgiC,eAAel0B,GAAKtM,EAAYxB,KAAKyhC,kBACxD3zB,IAGF,OAAOA,MAIJwxB,EAlZO,GAqZhBlB,EAAQiF,QAAU/D,EAClBrhC,EAAOmgC,QAAUA,EAAiB,SAEhC,KAAK,GAAG,CAAC,GAnb4C,CAmbxC,KAIXkB,IAt0IoB5/B,GAs0IMy+B,KAr0IjBz+B,GAAE4jC,YAAc1kC,OAAOC,UAAUya,eAAeva,KAAKW,GAAG,WAAaA,GAAW,QAAIA,GAs0JjGoG,IAAMy9B,GAAW,CACbC,GAAI,QACJC,GAAI,OACJC,GAAI,QACJC,GAAI,OACJC,GAAI,MACJC,GAAI,OACJC,GAAI,KACJC,GAAI,QACJC,GAAI,OACJC,EAAG,MACHC,GAAI,MACJC,GAAI,IACJC,GAAI,IACJC,GAAI,KA0CR,IAAIC,GAAK,CACRC,iBAAkB,iBAClBC,kBAAmB,kBACnBC,gBAAiB,gBACjBC,gBAAiB,gBACjBC,UAAW,UACXC,uBAAwB,CAACpG,EAAI,sBAAsB6E,QAAU,wBAC7DwB,wBAAyB,CAACrG,EAAI,uBAAuB6E,QAAU,0BAG5DyB,GAAK,CACRP,iBAAkB,wBAClBC,kBAAmB,uBACnBC,gBAAiB,0BACjBC,gBAAiB,mBACjBC,UAAW,cACXC,uBAAwB,CAACpG,EAAI,wBAAwB6E,QAAU,0BAC/DwB,wBAAyB,CAACrG,EAAI,2BAA2B6E,QAAU,8BAGhE0B,GAAK,CACRR,iBAAkB,4BAClBC,kBAAmB,8BACnBC,gBAAiB,uBACjBC,gBAAiB,oBACjBC,UAAW,iBACXC,uBAAwB,CAACpG,EAAI,yBAAyB6E,QAAU,4BAChEwB,wBAAyB,CAACrG,EAAI,6BAA6B6E,QAAU,iCAGlE3I,GAAK,CACR6J,iBAAkB,yBAClBC,kBAAmB,0BACnBC,gBAAiB,0BACjBC,gBAAiB,kBACjBC,UAAW,cACXC,uBAAwB,CAACpG,EAAI,wBAAwB6E,QAAU,yBAC/DwB,wBAAyB,CAACrG,EAAI,4BAA4B6E,QAAU,8BAYrE,MAAM2B,GACFp/B,YAAYq/B,GACRjlC,KAAKilC,SAAWA,EAChBjlC,KAAKklC,aAXF,IACHZ,MACAQ,MACAC,MACArK,IAUJ90B,gBAAgBs/B,GACZllC,KAAKklC,aAAetmC,OAAOgiC,OAAO5gC,KAAKklC,aAAcA,GAGzDt/B,UAAUu/B,EAAYlsB,GAClBsK,IAAI6hB,EAAeplC,KAAKklC,aAAallC,KAAKilC,WACtCjlC,KAAKklC,aAAallC,KAAKilC,UAAUE,IAAgBA,EAQrD,MAN2B,iBAAhBC,IACPA,EAAcnsB,GAAQA,EAAK4c,MACvB71B,KAAKqlC,yBAAyBD,EAAansB,EAAK4c,OAChDsP,GAz2GhB,SAAgB/sB,EAAKa,GACjB,OAAKb,GAELxZ,OAAO8kB,KAAKzK,GAAMpK,iBAAQy2B,GACtB/hB,IAAIgiB,EAAQ,IAAIxZ,YAAYuZ,OAAS,KACrCltB,EAAMA,EAAInD,QAAQswB,EAAOtsB,EAAKqsB,MAG3BltB,GAPUA,EA22GN8lB,CAAOkH,EAAansB,GAAQ,IAGvCrT,yBAAyBs/B,EAAcrP,GACnC,OAAOqP,EAAarP,IAAUqP,EAAsB,SAI5D,SAASM,GAAWpkC,EAAMqkC,GACtBliB,IAAImiB,EAAqB,GAEzB,GAAoC,IAAhC9mC,OAAO8kB,KAAK+hB,GAAS7iC,OACrB,OAAOxB,EAAKuiB,aAAI4V,UAAOA,EAAI6C,KAAKhI,6BAIhCtuB,IAAM6/B,EAAUF,EAAQlR,GAMlBuD,GAJe4N,EAAmB9iC,OACpC8iC,EAAmB/hB,aAAI7V,UAAK1M,EAAK0M,KACjC1M,GAEuBuiB,aAAI4V,UAAOA,EAAIhF,KAEtC5hB,EAqHZ,SAAqBgzB,kBAAU,IAC3B,GAAuB,IAAnBA,EAAQ/iC,OAAc,MAAO,GAEjC2gB,IAAIqiB,EAAgBD,EAEhB,CAAC,IAAK,IAAK,KAAK/gB,SAASghB,EAAc,IACvCA,EAAgBD,EAAQhd,MAAM,GACvBid,EAAcC,WAAW,QAChCD,EAAgBD,EAAQhd,MAAM,IAGlC,GAAIgd,EAAQE,WAAW,MACfD,EACA,MAAO,CACHjrB,KAAM,cACNoL,KAAM6f,EAAclqB,QAKhC,GAAIiqB,EAAQE,WAAW,MACfD,EACA,MAAO,CACHjrB,KAAM,WACNoL,KAAM6f,EAAclqB,QAKhC,GAAIiqB,EAAQE,WAAW,MACfvT,GAASsT,GACT,MAAO,CACHjrB,KAAM,SACNoL,KAAMsZ,OAAOsG,EAAQhd,MAAM,GAAGjN,SAK1C,GAAI4W,GAASsT,GACT,MAAO,CACHjrB,KAAM,iBACNoL,KAAM6f,GAId,GAAID,EAAQE,WAAW,OACfvT,GAASsT,GACT,MAAO,CACHjrB,KAAM,YACNoL,KAAMsZ,OAAOsG,EAAQhd,MAAM,GAAGjN,SAK1C,GAAkC,IAA9BiqB,EAAQ/kC,MAAM,KAAKgC,QAAgB+iC,EAAQ/kC,MAAM,KAAK65B,eAAMr4B,UAAKkwB,GAASlwB,EAAEsZ,UAE5E,MAAO,CACHf,KAAM,QACNoL,MAHJ6f,EAAgBD,EAAQ/kC,MAAM,MAGN+iB,aAAIvhB,UAAKA,EAAEsZ,UAIvC,MAAO,CACHf,KAAM,WACNoL,KAAM6f,EAAc/lC,eArLPimC,CAAYH,GACrBI,EAWZ,SAAyB3kC,EAAMuR,GAC3B7M,IASMkgC,WAAqBpS,UACvBoK,OAAOrL,GAAUiB,EAAKrxB,MAAQ,cAVRqxB,GACtBrQ,IAAI0iB,EAAYjT,GAAYgK,uBAAuBpJ,GACnD,GAAIqS,GAAarS,EAAKqF,QAElB,OADArF,EAAKrxB,KAAO0jC,EAAUrS,EAAKqF,QAAS73B,EAAKwyB,EAAKQ,UAAWR,EAAK0F,OAAQl4B,EAAKwyB,EAAKQ,WAAW,GACpFzB,GAAUiB,EAAKrxB,MAE1B,OAAOqxB,EAAKqF,SAAW,GAIciN,CAAkBtS,IAAO/zB,eAE5DsmC,WAAqBvS,UAAQ/O,WAAW+O,EAAKqF,UAE7CmN,WAAoBxS,EAAM+R,GAC5B,GAAI/R,EAAK0F,OAAO+M,aAAc,CAC1BvgC,IAAMwgC,EAAgB1S,EAAK0F,OAAO+M,aAAazS,EAAM+R,GACrD,GAAIW,GAAiBzkB,MAAM4C,QAAQ6hB,GAAgB,OAAOA,EAI9DxgC,IAAM8E,EAAQu7B,EAAmBvS,GACjC,OAAKrB,MAAM3nB,GAIJ,CAACo7B,EAAmBpS,GAAO+R,GAHvB,CAAC/6B,EAAO+6B,IA8EvB,MAxEsB,CAClBpnB,kBAASonB,EAAS7N,GACd,OAAOA,EACFnlB,gBAAOihB,GACJ9tB,IAAMygC,EAAMP,EAAmBpS,GACzB4S,GAAUb,GAAW,IAAI9lC,cAC/B,OAAQ2mC,GAAUD,EAAI3hB,SAAS4hB,KAElC7iB,aAAIiQ,UAAQA,EAAKQ,YAG1BqS,qBAAYd,EAAS7N,GACjB,OAAOA,EACFnlB,gBAAOihB,GACJ,MAAqCwS,EAAiBxS,EAAM+R,iBAC5D,OAAOU,EAAeK,IAEzB/iB,aAAIiQ,UAAQA,EAAKQ,YAG1BuS,kBAAShB,EAAS7N,GACd,OAAOA,EACFnlB,gBAAOihB,GACJ,MAAqCwS,EAAiBxS,EAAM+R,iBAC5D,OAAOU,EAAeK,IAEzB/iB,aAAIiQ,UAAQA,EAAKQ,YAG1BwS,gBAAOjB,EAAS7N,GACZ,OAAOA,EACFnlB,gBAAOihB,GACJ9tB,IAAMmJ,EAAQ4V,WAAW+O,EAAKqF,SAC9B,OAAOhqB,IAAU02B,IAEpBhiB,aAAIiQ,UAAQA,EAAKQ,YAG1ByS,mBAAUlB,EAAS7N,GACf,OAAOA,EACFnlB,gBAAOihB,GACJ9tB,IAAMmJ,EAAQ4V,WAAW+O,EAAKqF,SAC9B,OAAOhqB,IAAU02B,IAEpBhiB,aAAIiQ,UAAQA,EAAKQ,YAG1B0S,eAAMC,EAAajP,GACf,OAAOA,EACFnlB,gBAAOihB,GACJ9tB,IAAMkhC,EAAUZ,EAAiBxS,EAAMmT,EAAY,IAC7CE,EAAUb,EAAiBxS,EAAMmT,EAAY,IAC7C93B,EAAQ+3B,EAAQ,GACtB,OAAO/3B,GAAS+3B,EAAQ,IAAM/3B,GAASg4B,EAAQ,KAElDtjB,aAAIiQ,UAAQA,EAAKQ,YAG1B8S,wBAAevB,EAAS7N,GACpB,OAAOA,EACFnlB,gBAAOihB,GACJrQ,IAAI4jB,EAAStiB,WAAW8gB,EAAS,IAC7BxX,EAASwX,EACTyB,EAAYjB,EAAmBvS,GAC/ByT,EAAYrB,EAAmBpS,GAEnC,OAAOuT,IAAWC,GAAaC,EAAUziB,SAASuJ,KAErDxK,aAAIiQ,UAAQA,EAAKQ,aAIPzhB,EAAOgI,MAjHP2sB,CAAgBlmC,EAAMuR,GAGrC+yB,EADAK,EACqBA,EAAapzB,EAAOoT,KAAM+R,GAE1BA,EAAMnU,aAAIiQ,UAAQA,EAAKQ,YAfpD,IAAK7Q,IAAIgR,KAAYkR,OAmBrB,OAAOC,EAsPXniB,IAAIgkB,GAAoB,aA1mHxB,MACI3hC,YAAYnF,GACRT,KAAKS,QAAUA,EACfT,KAAKwnC,SAAW9kB,GAAS1iB,KAAKwnC,SAAUxnC,MACxCA,KAAKynC,aAAe/kB,GAAS1iB,KAAKynC,aAAcznC,MAChDA,KAAK0nC,aAAehlB,GAAS1iB,KAAK0nC,aAAc1nC,MAChDA,KAAKS,QAAQ+kC,WAAa9iB,GAAS1iB,KAAKS,QAAQ+kC,WAAYxlC,MAGhE4F,KAAK7B,EAAM4jC,GACF5jC,IACDA,EAAO/D,KAAKS,QAAQsD,MAEpB4jC,IACA3nC,KAAKS,QAAQknC,QAAUA,GAG3B3nC,KAAK+D,KAAOA,EAEZ/D,KAAK4nC,SAAW,EAChB5nC,KAAK2nC,QAAU,GACf3nC,KAAKoB,KAAO,GAEZpB,KAAK6nC,iBACL7nC,KAAK8nC,cACL9nC,KAAK+nC,kBACL/nC,KAAKgoC,iBACLhoC,KAAKioC,wBAITC,kBAEI,OADYloC,KAAK2nC,QAAQtlB,cAAKoW,SAAyB,SAAlBA,EAAIiE,aAC3B,CACVnI,UAAW,EACXmI,UAAW,QAInB92B,iBACI5F,KAAK2nC,QAAU,GACf3nC,KAAKmoC,kBACLnoC,KAAKooC,wBACLpoC,KAAKqoC,gBAGTziC,wBACI,GAAI5F,KAAKS,QAAQ6nC,iBAAmBtoC,KAAKuoC,cAAc,aAAc,CACjEziC,IAAM8tB,EAAO,CACTha,GAAI,YACJqf,QAASj5B,KAAKwoC,kBACd9P,UAAU,EACVkE,WAAW,EACXxsB,UAAU,EACVqmB,WAAW,EACXoG,UAAU,EACV9yB,MAAO,IAEX/J,KAAK2nC,QAAQpkC,KAAKqwB,GAGlB5zB,KAAKS,QAAQgoC,iBAAmBzoC,KAAKuoC,cAAc,cAWnDvoC,KAAK2nC,QAAQpkC,KAVF,CACPqW,GAAI,YACJqf,QAAS,GACTyP,MAAO,SACPhQ,UAAU,EACVkE,WAAW,EACXnG,WAAW,EACXoG,UAAU,IAOtBj3B,2BACQ+hC,EAAU3nC,KAAK2nC,QAAQzkC,OAAOlD,KAAKS,QAAQknC,SACzCgB,EAAW,CACb3M,SAAU,EACVtD,UAAU,EACVtoB,UAAU,EACVwsB,WAAW,EACXnG,WAAW,EACXoG,UAAU,EACV9yB,MAAO,KACPm0B,gBAASjvB,GACL,OAAIA,MAAAA,EACO,GAEJA,EAAQ,KAIvBjP,KAAK2nC,QAAUA,EACVhkB,aAAKiQ,EAAM9lB,UAAM9N,EAAK4oC,YAAYhV,EAAM9lB,KACxC6V,aAAI8U,UAAO75B,OAAOgiC,OAAO,GAAI+H,EAAUlQ,KACvC9U,aAAI8U,GAGD,OAFAA,EAAIQ,QAAUR,EAAIQ,SAAWR,EAAIlpB,MAAQ,GACzCkpB,EAAI7e,GAAK6e,EAAI7e,IAAM6e,EAAIQ,QAChBR,IAInB7yB,YAAYqzB,EAASnrB,GACjBhI,IAAM8tB,EAAO,CACTqF,QAAS,GACTyD,UAAW,OACXnI,SAAUzmB,EACVwrB,OAAQt5B,KAAK2nC,QAAQ75B,IAUzB,OAPgB,OAAZmrB,GAAuC,iBAAZA,EAE3Br6B,OAAOgiC,OAAOhN,EAAMqF,GAEpBrF,EAAKqF,QAAUA,EAGZrF,EAGXhuB,wBACIE,IAAM+iC,EAAO7oC,KAAKw5B,OAAO,GACpBqP,IACL7oC,KAAK2nC,QAAU3nC,KAAK2nC,QAAQhkB,aAAK2V,EAAQxrB,GAErChI,IAAMgjC,EAAYD,EAAK/6B,GAAGmrB,QAK1B,OAJKK,EAAOoP,OApNZnW,MAoN+BuW,KAC3BxP,EAAOoP,MAAQ,SAGZpP,KAIf1zB,yBACI5F,KAAK+oC,aAAa/oC,KAAK+D,MAEvB/D,KAAKoB,KAAOpB,KAAK+D,KAAK4f,aAAKhjB,EAAGmN,GAC1BhI,IAAM4S,EAAQ1Y,EAAKgpC,mBAEfzP,EAAM,GACN6C,EAAO,CACPhI,SAAU1b,GAGd,GAAImJ,MAAM4C,QAAQ9jB,GAUd,IARIX,EAAKS,QAAQ6nC,gBACb/O,EAAIh2B,KAAKvD,EAAKwoC,mBAEdxoC,EAAKS,QAAQgoC,gBACblP,EAAIh2B,KAAMmV,EAAQ,EAAK,IAE3B6gB,EAAMA,EAAIr2B,OAAOvC,GAEV44B,EAAI32B,OAAS5C,EAAK2nC,QAAQ/kC,QAC7B22B,EAAIh2B,KAAK,QAGV,CAEH,IAAK,UAAWvD,EAAK2nC,wBAAS,CAAzBpkB,IAAIkV,OACU,cAAXA,EAAI7e,GACJ2f,EAAIh2B,KAAKvD,EAAKwoC,mBACI,cAAX/P,EAAI7e,GACX2f,EAAIh2B,KAAMmV,EAAQ,EAAK,IAEvB6gB,EAAIh2B,KAAK5C,EAAE83B,EAAI7e,KAIvBwiB,EAAKc,OAASv8B,EAAEu8B,QAAU,EAG9B,OAAOl9B,EAAKipC,WAAW1P,EAAK6C,KAIpCx2B,6BACI5F,KAAKoB,KAAKyN,iBAAS0qB,EAAKzrB,GACpB,GAAIwkB,GAASiH,EAAI6C,KAAKc,QAAS,CAE3Bp3B,IAAMq3B,EAAUn9B,EAAKw5B,OAAO1rB,EAAI,GAChCyrB,EAAI6C,KAAK8M,QAAU/L,IAhPnC,SAAehoB,GACX,YAAe0L,IAAR1L,GAA6B,OAARA,EAIpBg0B,CA4OehM,EAAQf,KAAKc,SACpBC,EAAQf,KAAKc,QAAU3D,EAAI6C,KAAKc,OACpC3D,EAAI6C,KAAKC,iBAAkB,KAKvCz2B,iBAII5F,KAAKopC,aAAeppC,KAAKoB,KAAKuiB,aAAI4V,UAAOA,EAAI6C,KAAKhI,WAGtDxuB,WAAW2zB,EAAK6C,cACNiN,EAAc,CAChBjV,SAAUgI,EAAKhI,SACf8I,OAAQd,EAAKc,QASjB,OANA3D,EAAMA,EACD5V,aAAKiQ,EAAM9lB,UAAM9N,EAAK4oC,YAAYhV,EAAM9lB,KACxC6V,aAAIiQ,UAAQh1B,OAAOgiC,OAAO,GAAIyI,EAAazV,MAG5CwI,KAAOA,EACJ7C,EAGX3zB,kBACIE,IAAM6hC,EAAU3nC,KAAKS,QAAQknC,QAC7B,IAAK9lB,MAAM4C,QAAQkjB,GACf,MAAM,IAAI/U,GAAU,8BAGxB+U,EAAQ94B,iBAASyqB,EAAQxrB,GACrB,GAAsB,iBAAXwrB,GAAyC,iBAAXA,EACrC,MAAM,IAAI1G,cAAqB9kB,uCAK3ClI,aAAa7B,GACT,GAAI8d,MAAM4C,QAAQ1gB,KACG,IAAhBA,EAAKnB,QAAgBif,MAAM4C,QAAQ1gB,EAAK,KAA0B,iBAAZA,EAAK,IAC5D,OAAO,EAEX,MAAM,IAAI6uB,GAAU,gDAGxBhtB,WAAWxE,SACPpB,KAAK+oC,aAAa3nC,MAElBpB,KAAKoB,MAAKmC,WAAKkgB,EAAGzjB,KAAK8nC,YAAY1mC,IAGvCwE,SAAS2uB,EAAUmI,kBAAY,QAC3BnI,GAAYA,EAGZv0B,KAAKspC,aACA3lB,aAAI8U,GACGA,EAAIlE,WAAaA,EACjBkE,EAAIiE,UAAYA,EAEhBjE,EAAIiE,UAAY,SAI5B18B,KAAKupC,UAAUhV,EAAUmI,GAG7B92B,UAAU2uB,EAAUmI,cAEhB,GAAI18B,KAAKkoC,YAAY3T,WAAaA,IAGM,QAA/Bv0B,KAAKkoC,YAAYxL,WAAqC,SAAdA,GACT,SAA/B18B,KAAKkoC,YAAYxL,WAAsC,QAAdA,GAI1C,OAFA18B,KAAKwpC,aAAaxpC,KAAKopC,mBACvBppC,KAAKkoC,YAAYxL,UAAYA,GA4BrC,GAvBA18B,KAAKopC,aAAaz3B,cAAMvT,EAAGD,GACvB2H,IAAM2jC,EAASrrC,EACTsrC,EAASvrC,EAEXwrC,EAAW3pC,EAAK24B,QAAQpE,EAAUn2B,GAAG66B,QACrC2Q,EAAW5pC,EAAK24B,QAAQpE,EAAUp2B,GAAG86B,QAIzC,GAHA0Q,EAAuB,MAAZA,EAAmB,GAAKA,EACnCC,EAAuB,MAAZA,EAAmB,GAAKA,EAEjB,SAAdlN,EACA,OAAO+M,EAASC,EACb,GAAkB,QAAdhN,EAAqB,CAC5B,GAAIiN,EAAWC,EAAU,OAAQ,EACjC,GAAID,EAAWC,EAAU,OAAO,EAChC,GAAID,IAAaC,EAAU,OAAO,OAC/B,GAAkB,SAAdlN,EAAsB,CAC7B,GAAIiN,EAAWC,EAAU,OAAO,EAChC,GAAID,EAAWC,EAAU,OAAQ,EACjC,GAAID,IAAaC,EAAU,OAAO,EAEtC,OAAO,IAGP5pC,KAAKuoC,cAAc,aAAc,CAEjCziC,IAAM+jC,EAAe7pC,KAAKq3B,mBAAmB,aAC7Cr3B,KAAKoB,KAAKyN,iBAAS0qB,EAAK7gB,GACpB5S,IAAMgkC,EAAY9pC,EAAKopC,aAAatpC,QAAQ4Y,GAC/B6gB,EAAIsQ,GACZ5Q,QAAW6Q,EAAY,EAAK,MAK7ClkC,aAAa4nB,GACTjK,IAAI7V,EAAO,KACPC,EAAQ,KAGZ,IAAKD,EAAO,EAAGC,EAFF6f,EAAM5qB,OAEa,EAAG8K,EAAOC,EAAOD,GAAQ,EAAGC,GAAS,EAAG,CACpE7H,IAAMikC,EAAYvc,EAAM9f,GAExB8f,EAAM9f,GAAQ8f,EAAM7f,GACpB6f,EAAM7f,GAASo8B,GAIvBnkC,aAAaokC,EAAQC,GAEjBnkC,IAAMokC,EAAOlqC,KAAK2nC,QAAQqC,GAC1BhqC,KAAK2nC,QAAQqC,GAAUhqC,KAAK2nC,QAAQsC,GACpCjqC,KAAK2nC,QAAQsC,GAAUC,EAEvBlqC,KAAK2nC,QAAQqC,GAAQzV,SAAWyV,EAChChqC,KAAK2nC,QAAQsC,GAAQ1V,SAAW0V,EAGhCjqC,KAAKoB,KAAKyN,iBAAQ0qB,GACdzzB,IAAMqkC,EAAWvrC,OAAOgiC,OAAO,GAAIrH,EAAIyQ,GAAS,CAC5CzV,SAAU0V,IAERG,EAAWxrC,OAAOgiC,OAAO,GAAIrH,EAAI0Q,GAAS,CAC5C1V,SAAUyV,IAGdzQ,EAAI0Q,GAAUE,EACd5Q,EAAIyQ,GAAUI,IAItBxkC,aAAa8S,GACTA,GAASA,EAMT1Y,KAAK2nC,QAAU3nC,KAAK2nC,QACfh1B,gBANUihB,UAAQA,EAAKW,WAAa7b,IAOpCiL,aANQiQ,EAAM9lB,UAAMlP,OAAOgiC,OAAO,GAAIhN,EAAM,CAC7CW,SAAUzmB,MAQd9N,KAAKoB,KAAKyN,iBAAQ0qB,GAEdA,EAAIvX,OAAOtJ,EAAO,GAElB6gB,EAAI1qB,iBAAS+kB,EAAM9lB,GACf8lB,EAAKW,SAAWzmB,MAK5BlI,UAAU2zB,EAAKnF,GACPmF,EAAI32B,OAAS5C,KAAK2nC,QAAQ/kC,SACtB5C,KAAKuoC,cAAc,eAGnBhP,EAAM,CAFOnF,EAAW,EAAK,IAEjBlxB,OAAOq2B,IAGnBv5B,KAAKuoC,cAAc,eAGnBhP,EAAM,CAFM,6BAEAr2B,OAAOq2B,KAI3BzzB,IAAMukC,EAAOrqC,KAAKipC,WAAW1P,EAAK,UAACnF,IAC7B1b,EAAQ1Y,KAAKoB,KAAKkpC,mBAAU/Q,UAAOA,EAAI,GAAGnF,WAAaA,IAG7D,OAFAp0B,KAAKoB,KAAKsX,GAAS2xB,EAEZA,EAGXzkC,WAAW2uB,EAAUH,EAAU3zB,GAC3B8iB,IAAIqQ,EAaJ,IAAKrQ,IAAIlK,IAZe,iBAAbkb,IAIPA,GADAX,EAAOW,GACSA,SAChBH,EAAWR,EAAKQ,SAEhB3zB,EAAUmzB,GAEdA,EAAO5zB,KAAK24B,QAAQpE,EAAUH,GAGd3zB,EAAS,CACrBqF,IAAMykC,EAAS9pC,EAAQ4Y,QACRwH,IAAX0pB,IACA3W,EAAKva,GAAOkxB,GAIpB,OAAO3W,EAGXhuB,aAAa2uB,EAAUiW,GACnB1kC,IAAMwzB,EAASt5B,KAAKw2B,UAAUjC,GAC9B,IAAKhR,IAAIlK,KAAOmxB,EAAa,CACzB1kC,IAAMykC,EAASC,EAAYnxB,QACZwH,IAAX0pB,IACAjR,EAAOjgB,GAAOkxB,GAGtB,OAAOjR,EAGX1zB,WAAW6/B,cACP,OAAOzlC,KAAKS,QAAQ+kC,WAAWxlC,KAAKoB,KAAMqkC,GACrCvL,cAAK3S,GASF,OARKA,IACDA,EAASvnB,EAAKyqC,oBAGbljB,EAAO2S,OACR3S,EAASuK,QAAQC,QAAQxK,IAGtBA,EAAO2S,cAAKwQ,GAMf,OALA1qC,EAAK2qC,cAAgBD,EAKd,YAHY1qC,EAAKyqC,mBACnB93B,gBAAO+F,UAAUgyB,EAAW9lB,SAASlM,gBAItCgyB,OAMpB9kC,wBACI,OAAO5F,KAAK2qC,eAAiB3qC,KAAKyqC,mBAGtC7kC,mBACI,OAAO5F,KAAKoB,KAAKuiB,aAAI4V,UAAOA,EAAI6C,KAAKhI,WAGzCxuB,cACI,OAAO5F,KAAK4nC,SAGhBhiC,mBACIE,IAAMqP,EAAMnV,KAAK4nC,SAGjB,OADA5nC,KAAK4nC,WACEzyB,EAGXvP,QAAQglC,EAAOC,GACX,OAAO7qC,KAAKoB,KAAKunB,MAAMiiB,EAAOC,GAGlCjlC,eAAeglC,EAAOC,cAElB,OADa7qC,KAAKopC,aAAazlB,aAAI7V,UAAK9N,EAAKoB,KAAK0M,KACtC6a,MAAMiiB,EAAOC,GAG7BjlC,WAAWklC,GACPvnB,IAAIokB,EAAU3nC,KAAK2nC,QAMnB,OAJImD,IACAnD,EAAUA,EAAQhf,MAAM3oB,KAAK+qC,2BAG1BpD,EAGX/hC,yBACI,OAAI5F,KAAKS,QAAQ6nC,gBAAkBtoC,KAAKS,QAAQgoC,eACrC,EAGPzoC,KAAKS,QAAQ6nC,gBAAkBtoC,KAAKS,QAAQgoC,eACrC,EAGJ,EAGX7iC,eAAeklC,GACXvnB,IAAIpO,EAAMnV,KAAK2nC,QAAQ/kC,OAMvB,OAJIkoC,IACA31B,GAAYnV,KAAK+qC,0BAGd51B,EAGXvP,UAAU2uB,GAQN,OAPAA,GAAYA,GAEG,IAEXA,EAAWv0B,KAAK2nC,QAAQ/kC,OAAS2xB,GAG9Bv0B,KAAK2nC,QAAQtlB,cAAKoW,UAAOA,EAAIlE,WAAaA,IAGrD3uB,cAAcgU,GACV,OAAO5Z,KAAK2nC,QAAQtlB,cAAKoW,UAAOA,EAAI7e,KAAOA,IAG/ChU,OAAOwuB,GAEH,OADAA,GAAYA,EACLp0B,KAAKoB,KAAKgzB,GAGrBxuB,QAAQ2uB,EAAUH,GAGd,OAFAA,GAAYA,EACZG,GAAYA,EACLv0B,KAAKw5B,OAAOpF,GAAUG,GAGjC3uB,YAAYolC,GACRA,GAAkBA,EAIlB,IAHAllC,IAAMmlC,EAAejrC,KAAKw5B,OAAOwR,GAAgB5O,KAAKc,OAChDlL,EAAM,GAEHlkB,EAAIk9B,EAAiB,EAAGl9B,EAAI9N,KAAK4nC,SAAU95B,IAAK,CACrDhI,IAAMyzB,EAAMv5B,KAAKw5B,OAAO1rB,GACxB,IAAIykB,MAAMgH,EAAI6C,KAAKc,UAEf3D,EAAI6C,KAAKc,OAAS+N,GAClBjZ,EAAIzuB,KAAKuK,GAGTyrB,EAAI6C,KAAKc,SAAW+N,GACpB,MAIR,OAAOjZ,EAGXpsB,qBAAqBolC,GACjBA,GAAkBA,EAKlB,IAJAllC,IAAMmlC,EAAejrC,KAAKw5B,OAAOwR,GAAgB5O,KAAKc,OAChDlL,EAAM,GACNkZ,EAAcD,EAAe,EAE1Bn9B,EAAIk9B,EAAiB,EAAGl9B,EAAI9N,KAAK4nC,SAAU95B,IAAK,CACrDhI,IAAMyzB,EAAMv5B,KAAKw5B,OAAO1rB,GACxB,KAAIykB,MAAMgH,EAAI6C,KAAKc,SAAW3D,EAAI6C,KAAKc,OAASgO,KAE5C3R,EAAI6C,KAAKc,SAAWgO,GACpBlZ,EAAIzuB,KAAKuK,GAGTyrB,EAAI6C,KAAKc,SAAW+N,GACpB,MAIR,OAAOjZ,EAGXpsB,MACI,MAAO,CACH+hC,QAAS3nC,KAAK2nC,QACdvmC,KAAMpB,KAAKoB,MAWnBwE,QAAQwuB,GACJ,OAAOp0B,KAAK+D,KAAKqwB,GAGrBxuB,UAAU2J,GACN,OAAO47B,QAAQnrC,KAAK2nC,QAAQtlB,cAAKoW,UAAOA,EAAIQ,UAAY1pB,KAG5D3J,cAAcgU,GACV,OAAOuxB,QAAQnrC,KAAK2nC,QAAQtlB,cAAKoW,UAAOA,EAAI7e,KAAOA,KAGvDhU,eAAe2J,GACX,OAAOvP,KAAK2nC,QAAQ2C,mBAAU7R,UAAOA,EAAIQ,UAAY1pB,IAGzD3J,mBAAmBgU,GACf,OAAO5Z,KAAK2nC,QAAQ2C,mBAAU7R,UAAOA,EAAI7e,KAAOA,IAGpDhU,kBACI,MAAO,0CA0gGXotB,iBAznEJ,MACIptB,YAAYqtB,GACRjzB,KAAKizB,SAAWA,EAEhBhB,GAAejyB,KAAMA,KAAKizB,SAAU,CAChC,UACA,YACA,SACA,cACA,cACA,QACA,UACA,aACA,iBACA,iBAGJjzB,KAAKkzB,aAGTttB,eACI5F,KAAK+0B,OAAOv1B,UAAY,cACxBQ,KAAKorC,gBAGTxlC,gBACIE,IAAM6hC,EAAU3nC,KAAKo3B,YAAYkS,aAGjC/gC,EAAE,MAAOvI,KAAK+0B,QAAQv1B,UAAYQ,KAAKqrC,cAAc1D,GAErD3nC,KAAKsrC,WAAa/iC,EAAE,iBAAkBvI,KAAK+0B,QACvC/0B,KAAKsrC,YACL/iC,EAAE3G,MAAM5B,KAAKsrC,WAAY,CAAE5gC,QAAS,SAGxC1K,KAAKurC,WAAa,GAClBvrC,KAAKwrC,iBAGT5lC,cAAc+hC,GACVpkB,IAAIhhB,EAAOvC,KAAKq2B,WAAWoV,WAAW9D,EAAS,CAC3C3L,SAAU,IAOd,OALIh8B,KAAKS,QAAQo0B,gBACbtyB,GAAQvC,KAAKq2B,WAAWoV,WAAW9D,EAAS,CACxC1L,SAAU,KAGX15B,EAGXqD,aACI5F,KAAK0rC,eACL1rC,KAAK2rC,mBACL3rC,KAAK4rC,yBACL5rC,KAAK6rC,aAGTjmC,0BACQ6c,EAAc,uBACdqpB,EAAgB,qBAGpB9rC,KAAKizB,SAAS8Y,kBAAkBvsC,UAAYQ,KAAKgsC,sBACjDhsC,KAAKisC,cAAgBjsC,KAAKizB,SAAS8Y,kBAAkBG,kBAErD3jC,EAAE4Z,GAAGniB,KAAK+0B,OAAQ,QAAStS,WAAathB,GACpCnB,EAAKmsC,aAAahrC,KAGtB2E,IAAMsmC,WAAiCjrC,GACnC2E,IAAMuO,EAAW,CACboO,EAAaA,EAAc,KAC3BqpB,EAAeA,EAAgB,MACjCrpC,KAAK,KACHtB,EAAE8O,OAAO0I,QAAQtE,IACrBg4B,KAEJ9jC,EAAE4Z,GAAG9iB,SAASqM,KAAM,QAAS0gC,GAC7B/sC,SAASf,iBAAiB,SAAU+tC,GAAoB,GAExDrsC,KAAKizB,SAAS9Q,GAAG,uBACb5Z,EAAE6Z,IAAI/iB,SAASqM,KAAM,QAAS0gC,GAC9B7jC,EAAE6Z,IAAI/iB,SAAU,SAAUgtC,KAG9B9jC,EAAE4Z,GAAGniB,KAAKisC,cAAe,QAAS,mCAA4B9qC,EAAGmrC,GAC7D,GAAKtsC,EAAKusC,wBAAV,CACAzmC,IAAM0mC,EAAgBxsC,EAAKS,QAAQgsC,iBACjBlkC,EAAExE,KAAKuoC,SACnB/X,EAAWv0B,EAAKusC,wBAClBxzB,EAAWyzB,EAAc9zB,GAAOg0B,OAEpC3zB,GAAYA,EAASha,KAAKiB,EAAKizB,SAAUjzB,EAAKw2B,UAAUjC,IACxDv0B,EAAK2sC,kBAGT7mC,IAAMmG,EAAQjM,KACd,SAASqsC,EAAmBlrC,GACxB8K,EAAM0gC,eAGV3sC,KAAK2sC,eAGT/mC,aAAazE,GACJnB,KAAK4sC,iBACNrkC,EAAE3G,MAAM5B,KAAKisC,cAAe,CAAEvhC,QAAS,KACvC1K,KAAK4sC,eAAiBrkC,EAAE3G,MAAM5B,KAAKisC,cAAe,UAEtD1jC,EAAE3G,MAAM5B,KAAKisC,cAAe,CACxBvhC,QAAS,GACTgD,KAAOvM,EAAEmL,QAAUtM,KAAK4sC,eAAiB,EAAK,KAC9Cp/B,IAAMrM,EAAEqL,QAAU,EAAK,OAE3B1G,IAAMouB,EAAQ3rB,EAAEoZ,QAAQ,WAAYxgB,EAAE8O,UACjB1H,EAAExE,KAAKmwB,YAC5Bl0B,KAAKusC,wBAA0BhY,EAGnC3uB,eACI2C,EAAE3G,MAAM5B,KAAKisC,cAAe,CACxBvhC,QAAS,SAEb1K,KAAKusC,wBAA0B,KAGnC3mC,uBAEQinC,EAAeC,EAAYC,SAD3BC,GAAa,EAGjBzkC,EAAE4Z,GAAGniB,KAAK+0B,OAAQ,YAAa,4CAAqC5zB,EAAG8rC,GACnE5tC,SAASqM,KAAKsJ,UAAUia,IAAI,aAC5BnpB,IAAMouB,EAAQ+Y,EAAQthC,WAAWA,WACjCkhC,EAAgB3Y,EAChB,MAEI3rB,EAAExE,KAAK8oC,YACLpU,EAAMz4B,EAAKw2B,UAAUjC,GAEvBkE,IAAyB,IAAlBA,EAAImE,YAIfoQ,GAAa,EACbF,EAAavkC,EAAE3G,MAAM2G,EAAE,oBAAqBskC,GAAgB,SAC5DE,EAAS5rC,EAAE+rC,SAGfpnC,IAAMqnC,WAAahsC,GAEf,GADA9B,SAASqM,KAAKsJ,UAAU8hB,OAAO,aAC1B+V,EAAL,CACAG,GAAa,EAEb,MAEIzkC,EAAExE,KAAK8oC,YACX7sC,EAAKotC,eAAe7Y,GACpBv0B,EAAK4B,MAAMyrC,eACXR,EAAgB,OAEpBtkC,EAAE4Z,GAAG9iB,SAASqM,KAAM,UAAWyhC,GAC/BntC,KAAKizB,SAAS9Q,GAAG,uBACb5Z,EAAE6Z,IAAI/iB,SAASqM,KAAM,UAAWyhC,KAGpCrnC,IAAMwnC,WAAensC,GACjB,GAAK6rC,EAAL,CACAzpB,IAAIgqB,EAAQpsC,EAAE+rC,MAAQH,EACS,QAA3B/sC,EAAKS,QAAQ6R,YACbi7B,IAAS,GAEbznC,IAAM0nC,EAAaV,EAAaS,IAG5BhlC,EAAExE,KAAK8oC,YAEU7sC,EAAKS,QAAQgtC,mBACbD,IAIrBxtC,EAAKo3B,YAAYsW,aAAanZ,EAAU,CACpCxqB,MAAOyjC,IAEXxtC,EAAK2tC,qBAAqBpZ,MAE9BhsB,EAAE4Z,GAAG9iB,SAASqM,KAAM,YAAa4hC,GACjCttC,KAAKizB,SAAS9Q,GAAG,uBACb5Z,EAAE6Z,IAAI/iB,SAASqM,KAAM,YAAa4hC,KAI1C1nC,oCACI2C,EAAE4Z,GAAGniB,KAAK+0B,OAAQ,WAAY,4CAAqC5zB,EAAG8rC,GAClEnnC,IAAMouB,EAAQ+Y,EAAQthC,WAAWA,aACZpD,EAAExE,KAAKmwB,YAExB0Z,EAAc5tC,EAAK6tC,aAAaC,YAC/BnqB,aAAIhjB,UAAKA,EAAE4zB,KACXpC,gBAAQC,EAAKmI,UAASnI,EAAI6G,QAAQr2B,OAAS23B,EAAKtB,QAAQr2B,OAASwvB,EAAMmI,IAExEwT,EAAmB/tC,EAAKguC,YAAYC,YAAYL,GAChDM,EAAO7uC,SAASC,cAAc,OAClC4uC,EAAK1uC,UAAYuuC,EACjBxqB,IAAI4qB,EAAWD,EAAK9qB,cAAc,qBAAqBnQ,cAOnD1K,EAAEic,SAASxkB,EAAK2zB,eAAevQ,cAAc,sBAE7C8N,EAAU,oEACTvN,IAAIkB,YACJsN,gBAAQ5Z,EAAKpD,UAAQoD,EAAMpD,IAE5BpL,EAAQxB,EAAEud,iBAAiBqoB,GAAYjd,EAC3ClxB,EAAKo3B,YAAYsW,aAAanZ,EAAU,OAAExqB,IAC1C/J,EAAK2tC,qBAAqBpZ,GAC1Bv0B,EAAKotC,eAAe7Y,KAI5B3uB,4BACI,IAAI5F,KAAKS,QAAQ2tC,qBAAjB,CAEAtoC,IAAMuoC,EAAU9lC,EAAE,UAAWvI,KAAK+0B,QAElC/0B,KAAKoQ,SAAWjC,EAAS2U,OAAOurB,EAAS,CACrCC,eAAQntC,GACJ,8BAIMotC,EAAeptC,EAAEyV,MAGnBrO,EAAExE,KAAKwqC,cACO1nC,GAElB7G,EAAKynC,aAAa7gC,EAAUC,IAEhC+L,iBAAiB,EACjBD,OAAQ,wCACRH,YAAa,oBACbK,UAAW,OAInBjN,WAAW2uB,EAAUia,cACjBxuC,KAAKizB,SAASwb,SACdzuC,KAAKwnC,SAASjT,EAAUia,GACnBtU,gBAEG,OADAl6B,EAAKorC,gBACEprC,EAAKq2B,WAAWqY,gBAE1BxU,uBAAWl6B,EAAKizB,SAAS0b,aACzBzU,gBACGl6B,EAAK4uC,UAAU,eAAgB5uC,EAAKw2B,UAAUjC,MAI1D3uB,aAAa2uB,cACHsa,EAAa7uC,KAAKw2B,UAAUjC,GAClCv0B,KAAKizB,SAASwb,SACdzuC,KAAKo3B,YAAYsQ,aAAanT,GACzB2F,gBAEG,OADAl6B,EAAKorC,gBACEprC,EAAKq2B,WAAWqY,gBAE1BxU,uBAAWl6B,EAAKizB,SAAS0b,aACzBzU,gBACGl6B,EAAK4uC,UAAU,iBAAkBC,KAI7CjpC,aAAagB,EAAUC,cACnB7G,KAAKizB,SAASwb,SACdzuC,KAAKo3B,YAAYqQ,aAAa7gC,EAAUC,GACnCqzB,gBAEG,OADAl6B,EAAKorC,gBACEprC,EAAKq2B,WAAWqY,gBAE1BxU,gBACGl6B,EAAKotC,eAAexmC,GACpB5G,EAAKotC,eAAevmC,GACpB7G,EAAKizB,SAAS0b,aAEjBzU,gBACGl6B,EAAK4uC,UAAU,iBACX5uC,EAAKw2B,UAAU5vB,GAAW5G,EAAKw2B,UAAU3vB,MAKzDjB,aAAaq1B,GAGT1X,IAAIurB,EAFC9uC,KAAKS,QAAQo0B,iBAIdia,OADSjuB,IAAToa,GACcj7B,KAAK66B,cAENI,GAIb1yB,EAAE3G,MAAM5B,KAAKsrC,WAAY,CAAE5gC,QAAS,KAEpCnC,EAAE3G,MAAM5B,KAAKsrC,WAAY,CAAE5gC,QAAS,SAGxC1K,KAAK66B,cAAgBiU,EACrB9uC,KAAK4B,MAAMyrC,gBAGfznC,YAAY2uB,GACHv0B,KAAK66B,eAEWtyB,mBAAmBgsB,gBAAuBv0B,KAAKsrC,YACvDrV,QAGjBrwB,wBACS5F,KAAKS,QAAQo0B,eAIlBtsB,EAAE4Z,GAAGniB,KAAK+0B,OAAQ,UAAW,aAAcnD,YAH3BzwB,GACZnB,EAAK+uC,YAAY/uC,EAAKgvC,sBAEqC,MAGnEppC,YAAY6/B,cACRzlC,KAAKo3B,YAAYoO,WAAWC,GACvBvL,cAAMzW,sBAGHzjB,EAAKq2B,WAAW4Y,SAASvE,KAIrC9kC,oBACIE,IAAM2/B,EAAU,GAOhB,OANAl9B,EAAE8a,KAAK,aAAcrjB,KAAK+0B,QAAQpR,aAAKyb,GACnCt5B,IAAMmJ,EAAQmwB,EAAMnwB,MAChBA,IACAw2B,EAAQrG,EAAMhb,QAAQmQ,UAAYtlB,KAGnCw2B,EAGX7/B,wBAEIE,IAAMopC,EAAgBlvC,KAAKspC,aAAa32B,gBAAO8lB,SAAyB,SAAlBA,EAAIiE,YAE1D,GAA6B,IAAzBwS,EAActsC,OAAc,CAC5BkD,IAAMwzB,EAAS4V,EAAc,GAC7BlvC,KAAKmvC,WAAW7V,EAAO/E,SAAU+E,EAAOoD,YAIhD92B,SAAS2uB,EAAUmI,GACf,OAAO18B,KAAKo3B,YAAYoQ,SAASjT,EAAUmI,GAG/C92B,UAAU2uB,GACN,OAAOv0B,KAAKo3B,YAAYZ,UAAUjC,GAGtC3uB,aACI,OAAO5F,KAAKo3B,YAAYkS,aAG5B1jC,eAAe2uB,EAAUxqB,GACrBwqB,GAAYA,EAEZhR,IAAI6rB,EAAcrlC,GAAS/J,KAAKw2B,UAAUjC,GAAUxqB,MAE9CsK,EAAW,2BACakgB,yBACHA,GACzB9xB,KAAK,MAED4sC,EAAS,CACXtlC,MAAOqlC,EAAc,MAGzBpvC,KAAK4B,MAAM0tC,SAASj7B,EAAUg7B,GAGlCzpC,qBAAqB2uB,GACjBA,GAAYA,EACZv0B,KAAKurC,WAAavrC,KAAKurC,YAAc,GACrCzlC,IAAMuO,EAAW,6BAA6BkgB,IAG1Cv0B,KAAKw2B,UAAUjC,SAEfgb,EAAUvvC,KAAKurC,WAAWhX,GACzBgb,IACDA,EAAUvvC,KAAK+0B,OAAO3R,cAAc/O,GACpCrU,KAAKurC,WAAWhX,GAAYgb,GAGhCA,EAAQ3tC,MAAMmI,MAAQA,EAAQ,KAGlCnE,kBAAkB2uB,GAEd,OADAA,GAAYA,EACLv0B,KAAKw2B,UAAUjC,GAAUib,UAAY,GAGhD5pC,sBACI,OAAO5F,KAAKo3B,YAAYC,mBAAmB,aAAe,EAG9DzxB,eAAe2uB,GACX,OAAOhsB,sBAAsBgsB,EAAYv0B,KAAK+0B,QAGlDnvB,qBACI,OAAO5F,KAAKo3B,YAAYqY,iBAAmB,EAG/C7pC,kBAGI,mGAF2B5F,KAAKS,4DASpCmF,sBAGI,oEAF0C5F,KAAKS,uBAI3BkjB,aAAKhjB,EAAGmN,8EAC8BA,OAAMnN,iCACzD8B,KAAK,kDAMpB,MACImD,YAAYqtB,GACRjzB,KAAKizB,SAAWA,EAChBhB,GAAejyB,KAAMA,KAAKizB,SAAU,CAChC,UACA,YACA,UACA,iBACA,eACA,UAGJjzB,KAAKkzB,aACLlzB,KAAK0uC,YAAchsB,GAAS1iB,KAAK0uC,YAAa1uC,MAGlDo3B,kBACI,OAAOp3B,KAAKizB,SAASmE,YAGzB4W,kBACI,OAAOhuC,KAAKizB,SAAS+a,YAGzBpoC,aACI5F,KAAK0vC,eAGT9pC,0BACS5F,KAAKS,QAAQ6nC,iBAGlBtoC,KAAK2vC,SAAW,GAEhBpnC,EAAE4Z,GAAGniB,KAAKu3B,QAAS,QAAS,6CAAsCp2B,EAAGyuC,GACjE9pC,IAAMouB,EAAQ0b,EAAUjuB,QAAQ,cAI5BpZ,EAAExE,KAAKmwB,6BACL9Y,EAAUw0B,EAAUx0B,QAEtB4gB,EACAh8B,EAAK6vC,SAASz0B,GAEdpb,EAAK8vC,SAAS1b,EAAUhZ,MAKpCxV,cACI5F,KAAKizB,SAAS8c,aACd/vC,KAAKizB,SAAS+c,gBAGlBpqC,WAAW2zB,EAAKnF,cACCp0B,KAAKo3B,YAAY6Y,UAAU1W,EAAKnF,GAExCvlB,iBAAQ+kB,GACT5zB,EAAKguC,YAAYjT,YAAYnH,GAAM,KAI3ChuB,iBACI,IAAK5F,KAAK2vC,SACN,MAAO,GAGXpsB,IAAIyO,EAAM,GACV,IAAKzO,IAAI6Q,KAAYp0B,KAAK2vC,SAEN,IADA3vC,KAAK2vC,SAASvb,IAE1BpC,EAAIzuB,KAAK6wB,GAIjB,OAAOpC,EAGXpsB,kCACI5F,KAAKkwC,iBACAvsB,aAAIyQ,UAAYp0B,EAAK8vC,SAAS1b,GAAU,KAGjDxuB,SAASwuB,EAAU+b,GACfrqC,IAAMmJ,EAAQkhC,EAAS,EAAI,EAG3BnwC,KAAK2vC,SAASvb,GAAYnlB,EAE1B1G,EAAE8a,cAJe+Q,wBAA2BA,uBAIrC/f,CAAS+f,GAAWp0B,KAAK2zB,gBAC3BhQ,aAAIyb,GACDA,EAAMhkB,QAAU+0B,IAGxBnwC,KAAKowC,aAAahc,EAAU+b,GAC5BnwC,KAAKqwC,kBACLrwC,KAAK4uC,UAAU,aAAc5uC,KAAKo3B,YAAYoC,OAAOpF,IAGzDxuB,SAASuqC,cACClhC,EAAQkhC,EAAS,EAAI,EAGvBA,EACInwC,KAAKo3B,YAAYuT,cACjB3qC,KAAKo3B,YAAYuT,cAAc97B,iBAAQhO,GACnCb,EAAK8vC,SAASjvC,EAAGsvC,KAGrBnwC,KAAK2vC,SAAW9tB,MAAMzS,KAAKyS,MAAM7hB,KAAKswC,iBAAiB3sB,aAAItlB,UAAK4Q,IAGpEjP,KAAK2vC,SAAW,GAGpBpnC,EAAE8a,KAAK,oCAAqCrjB,KAAK2zB,gBAC5ChQ,aAAIyb,GACDA,EAAMhkB,QAAU+0B,IAGxBnwC,KAAKuwC,aAAaJ,GAClBnwC,KAAKqwC,kBACLrwC,KAAK4uC,UAAU,cAGnBhpC,kBACI,GAAK5F,KAAKS,QAAQ+vC,iBAAlB,CACA1qC,IACM+vB,EADc71B,KAAKkwC,iBACCttC,OAC1B,GAAIizB,EAAQ,EAAG,CACXtS,IAAIoS,EAAU31B,KAAKizB,SAAS2C,UAAU,wBAAyB,CAC3DC,MAAOA,IAEX71B,KAAK6tC,aAAa/X,iBAAiBH,QAEnC31B,KAAK6tC,aAAa4C,qBAI1B7qC,aAAawuB,EAAU+b,mBAAS,GAC5BrqC,IAAM4qC,EAAO1wC,KAAK2wC,QAAQvc,GACrBsc,IAEAP,IAAUnwC,KAAK2zB,eAAe3e,UAAUuJ,SAAS,iCAKlD4xB,GAAUO,EAAK17B,UAAUuJ,SAAS,wBAClCmyB,EAAK17B,UAAU8hB,OAAO,uBAG1B92B,KAAK4wC,iBAAmB5wC,KAAK4wC,kBAAoB,GAE7CT,GACAO,EAAK17B,UAAUia,IAAI,qBACnBjvB,KAAK4wC,iBAAiBxc,GAAYsc,IAElCA,EAAK17B,UAAU8hB,OAAO,4BACf92B,KAAK4wC,iBAAiBxc,KAf7Bsc,EAAK17B,UAAUia,IAAI,wBAmB3BrpB,aAAauqC,GACT,mBADkB,GACdA,EACAnwC,KAAK2zB,eAAe3e,UAAUia,IAAI,oCAC/B,CAEH,IAAKnpB,IAAMsuB,KADXp0B,KAAK2zB,eAAe3e,UAAU8hB,OAAO,gCACd92B,KAAK4wC,iBACX5wC,KAAK4wC,iBAAiBxc,GAC9Bpf,UAAU8hB,OAAO,qBAE1B92B,KAAK4wC,iBAAmB,IAIhChrC,SAAS4yB,OAhpEQrjB,SAAAA,EAipEYqjB,EACzB1yB,IAAM1E,GADNo3B,EAhpEC3W,MAAM4C,QAAQtP,GAGZA,EAFI,CAACA,IAgpEgBwO,aAAIyQ,UAAYp0B,EAAKo3B,YAAYoC,OAAOpF,KAChEp0B,KAAK6tC,aAAagD,WAAWzvC,GAGjCwE,cACIE,IAAM0yB,EAAax4B,KAAKo3B,YAAYqT,mBACpCzqC,KAAKivC,SAASzW,GAGlB5yB,yBAAyBwuB,GAIrB,OAHYp0B,KAAKo3B,YAAYoC,OAAOpF,GAChCgI,KAAKC,iBAAkB,EAEpBr8B,KAAKo3B,YAAY0Z,qBAAqB1c,GAGjDxuB,eAAewuB,GACXtuB,IAAMirC,EAAiB/wC,KAAKgxC,yBAAyB5c,GAC/C6c,EAAoBjxC,KAAK6tC,aAAaoD,kBACtCvG,EAAalY,GAAOue,SAAuBE,IAAoBt/B,KAAK+gB,IAE1E1yB,KAAKivC,SAASvE,GAGlB9kC,yBAAyBwuB,cACTp0B,KAAKo3B,YAAYoC,OAAOpF,GAChCgI,KAAKC,iBAAkB,EAE3Bv2B,IAAMorC,EAAalxC,KAAKo3B,YAAY+Z,YAAY/c,GAQhD,OAPA8c,EAAWriC,iBAAQulB,GACftuB,IAAMyzB,EAAMv5B,EAAKo3B,YAAYoC,OAAOpF,GAC/BmF,EAAI6C,KAAK8M,SACV3P,EAAI6C,KAAKC,iBAAkB,KAI5B6U,EAGXtrC,gBAAgBwuB,GACZtuB,IAAMorC,EAAalxC,KAAKoxC,yBAAyBhd,GAE3CsW,EADc1qC,KAAK6tC,aAAaoD,kBAEjCt+B,gBAAOyhB,UAAa8c,EAAWtsB,SAASwP,KACxCziB,KAAK+gB,IAEV1yB,KAAKivC,SAASvE,GAGlB9kC,4BAIUmrC,EAHK/wC,KAAKo3B,YAAYia,UACP1+B,gBAAO4mB,UAAQA,EAAI6C,KAAK8M,SAEZvlB,aAAI4V,UAAOv5B,EAAKgxC,yBAAyBzX,EAAI6C,KAAKhI,YAAWkd,OACxFL,EAAoBjxC,KAAK6tC,aAAaoD,kBACtCvG,EAAalY,GAAOue,SAAuBE,IAAoBt/B,KAAK+gB,IAE1E1yB,KAAKivC,SAASvE,GAGlB9kC,8BAIUsrC,EAHKlxC,KAAKo3B,YAAYia,UACP1+B,gBAAO4mB,UAA2B,IAApBA,EAAI6C,KAAKc,SAEfvZ,aAAI4V,UAAOv5B,EAAKoxC,yBAAyB7X,EAAI6C,KAAKhI,YAAWkd,OAEpF5G,EADc1qC,KAAK6tC,aAAaoD,kBAEjCt+B,gBAAOyhB,UAAa8c,EAAWtsB,SAASwP,KACxCziB,KAAK+gB,IAEV1yB,KAAKivC,SAASvE,GAGlB9kC,aAAa2rC,GACThuB,IAAIniB,EAAOpB,KAAKo3B,YAAYia,UAEtBG,EAAapwC,EAAKuR,gBAAO4mB,UAAOA,EAAI6C,KAAKc,OAASqU,IAClDE,EAAcrwC,EAAKuR,gBAAO4mB,UAAOA,EAAI6C,KAAKc,QAAUqU,IACpDL,EAAaO,EAAY9+B,gBAAO4mB,UAAOA,EAAI6C,KAAKc,OAASqU,IAE/DE,EAAY5iC,iBAAQ0qB,GACXA,EAAI6C,KAAK8M,SACV3P,EAAI6C,KAAKC,iBAAkB,KAGnCmV,EAAW3iC,iBAAQ0qB,GACVA,EAAI6C,KAAK8M,SACV3P,EAAI6C,KAAKC,iBAAkB,KAInCv2B,IAAM4kC,EAAatpC,EACduR,gBAAO4mB,UAAQ2X,EAAWtsB,SAAS2U,KACnC5V,aAAI4V,UAAOA,EAAI6C,KAAKhI,WACpBziB,KAAK+gB,IACV1yB,KAAKivC,SAASvE,GAGlB9kC,QAAQwuB,GACJ,OAAO7rB,EAAEvI,KAAKqU,SAAS+f,GAAWp0B,KAAK2zB,gBAG3C/tB,eACI,OAAO5F,KAAKo3B,YAAYsa,cAG5B9rC,mBACI,OAAO,EAGXA,kBACI,OAAO5F,KAAKo3B,YAAYsa,cAAgB,EAG5C9rC,YAAYwuB,GACRA,GAAYA,EACZp0B,KAAK2xC,cAAgB3xC,KAAK2xC,eAAiB,EAC3C7rC,IAAM4qC,EAAO1wC,KAAK2wC,QAAQvc,GAC1B,IAAI7rB,EAAEuc,WAAW4rB,EAAM1wC,KAAK2zB,gBAA5B,CAEA,MAEI+c,EAAK1lC,iCAILhL,KAAK2zB,eAAe3oB,2CAClB4mC,EAAa3tC,KAAKC,OAAOuJ,EAASD,GAAOvI,GAE3C4sC,EAAS,EAETA,EADAzd,EAAWp0B,KAAK2xC,cACP1sC,GAAWmvB,EAAW,EAAKwd,GAE3B3sC,GAAWmvB,EAAW,EAAK,GAGxCp0B,KAAK2xC,cAAgBvd,EACrB7rB,EAAE/G,UAAUxB,KAAK2zB,eAAgBke,IAGrCjsC,WAAW2zB,EAAKzI,cACNiL,EAAWlL,GAAwBC,GACrCghB,EAAgBhhB,EAAMsD,SAoB1B,OAlBItD,EAAMmL,WACN1C,EAAMA,EAAI5V,aAAIiQ,UAASh1B,OAAOgiC,OAAO,GAAIhN,EAAM,CAC3CqF,QAASj5B,EAAK+xC,eAAe,CACzBxd,SAAUX,EAAKW,SACfhlB,KAAMqkB,EAAKrkB,OAEf0sB,SAAU,EACVD,cAAUnb,EACV6X,UAAU,MAGdoZ,EAAgB,UAGhBhhB,EAAMkL,WACN8V,EAAgB,qDAIYA,OAAkB/V,wBACxCxC,EAAI5V,aAAIiQ,UAAQ5zB,EAAKguC,YAAYC,YAAYra,KAAOnxB,KAAK,qCAKvEmD,eAAekrB,GACXvN,IAAIyuB,EAAQ,2BAA0BlhB,EAAMvhB,MAAQ,aAEpD,uDADiBshB,GAAwBC,kCAEhB,IAAnBA,EAAMyD,SAAiB,WAAayd,SAG9CpsC,SAASwuB,GACL,iBAAkBA,iBA8b1B,MACIxuB,YAAYqtB,GACRjzB,KAAKizB,SAAWA,EAChBjzB,KAAKS,QAAUwyB,EAASxyB,QACxBT,KAAKo3B,YAAcnE,EAASmE,YAC5Bp3B,KAAKq2B,WAAapD,EAASoD,WAC3Br2B,KAAKguC,YAAc/a,EAAS+a,YAC5BhuC,KAAK2zB,eAAiBV,EAASU,eAC/B3zB,KAAKiyC,OAASjyC,KAAKizB,SAASgf,OAC5BjyC,KAAK0xB,IAAMuB,EAASvB,IAGxB9rB,WAAWxE,cAIP,GAHApB,KAAK8tC,YAAc1sC,EACnBpB,KAAKixC,kBAAoB7vC,EAAKuiB,aAAI4V,UAAOA,EAAI6C,KAAKhI,WAE9B,IAAhBhzB,EAAKwB,OAAT,CAKAkD,IAAMsjC,EAAeppC,KAAKo3B,YAAYgS,aAAazlB,aAAIjL,GACnD,OAAI1Y,EAAKixC,kBAAkBrsB,SAASlM,GACzBA,EAEJ,OACR/F,gBAAO+F,UAAmB,OAAVA,IAEbw5B,EAAgBhzC,iBAAiBc,KAAK2zB,gBAExCkM,EAAS,CACT91B,MAAOmoC,EAAcnoC,MACrB9E,OAAQitC,EAAcjtC,OACtBi8B,WAAYlhC,KAAKS,QAAQ0xC,WACzB3X,MAAOp5B,EAAKwB,OACZgC,kBAAW8T,GACP5S,IAAMsD,EAAK/J,SAASC,cAAc,OAC5B80B,EAAWgV,EAAa1wB,GACxB6gB,EAAMv5B,EAAKo3B,YAAYoC,OAAOpF,GAC9Bge,EAAUpyC,EAAKq2B,WAAWoV,WAAWlS,EAAKA,EAAI6C,MAEpD,OADAhzB,EAAG5J,UAAY4yC,EACRhpC,EAAGtF,SAAS,IAEvBu8B,uBACIrgC,EAAKqyC,iBAIRryC,KAAKm+B,UAGNn+B,KAAKm+B,UAAU97B,QAAQrC,KAAK2zB,eAAgBkM,GAF5C7/B,KAAKm+B,UAAY,IAAImB,GAAUt/B,KAAK2zB,eAAgBkM,GAKxD7/B,KAAKsyC,oBArCDtyC,KAAK2zB,eAAen0B,UAAYQ,KAAKuyC,gBAwC7C3sC,SACIE,IAAM1E,EAAOpB,KAAKo3B,YAAYob,iBAC9BxyC,KAAK6wC,WAAWzvC,GAEhBpB,KAAKizB,SAAS+c,gBAGlBpqC,eACI,GAAK5F,KAAKS,QAAQgyC,aAAlB,CAEA3sC,IAAM4sC,EAAW1yC,KAAK2yC,cAClBpwC,EAAOvC,KAAKq2B,WAAWoV,WAAWiH,EAAU,CAAExW,WAAY,EAAG9H,SAAU,aAE3Ep0B,KAAKiyC,OAAOzyC,UAAY+C,GAG5BqD,yBAuCI,OAtCgB5F,KAAKo3B,YAAYkS,aACA3lB,aAAI8U,GACjClV,IAAI0V,EAAU,KAId,MAHI,CAAC,YAAa,aAAarU,SAAS6T,EAAI7e,MACxCqf,EAAU,IAEP,SACHA,EACAiD,WAAY,EACZ3H,SAAUkE,EAAIlE,SACd+E,OAAQb,KAIkB9U,aAAKiQ,EAAM9lB,GACzC,GAAqB,KAAjB8lB,EAAKqF,QAAgB,OAAOrF,EAEhC,GAAI5zB,EAAKS,QAAQmyC,MAAMC,YAAa,CAChC/sC,IAAMgtC,EAAe9yC,EAAK8tC,YAAYnqB,aAAI4V,UAAOA,EAAIzrB,GAAGmrB,UAClD1R,EAASvnB,EAAKS,QAAQmyC,MAAMC,YAAY9zC,KAAKiB,EAAKizB,SAAU6f,EAAclf,GAChF,GAAc,MAAVrM,EAEA,OADAqM,EAAKqF,QAAU1R,EACRqM,EAaf,OATAA,EAAKqF,QAAUj5B,EAAK8tC,YAAY3b,gBAAQC,EAAK2gB,GACzCjtC,IAAMktC,EAAWD,EAAQjlC,GACzB,MAAgC,iBAArBklC,EAAS/Z,SACL,MAAP7G,IAAaA,EAAM,GAChBA,EAAM4gB,EAAS/Z,SAEnB7G,GACRwB,EAAKqF,SAEDrF,IAMfhuB,eACI5F,KAAKq2B,WAAW4c,uBAChBjzC,KAAKguC,YAAYkF,6BACjBlzC,KAAKguC,YAAYmF,4BAGrBvtC,iBAAiB+vB,EAASyd,cACtBpzC,KAAKizB,SAASogB,aAAa7zC,UAAYQ,KAAKszC,oBAAoB3d,GAE5Dyd,GACArxC,sBACI/B,EAAKywC,qBACM,IAAZ2C,GAIXxtC,oBACI5F,KAAKizB,SAASogB,aAAa7zC,UAAY,GAG3CoG,gBACI,6CAA8C5F,KAAKS,+BAGvDmF,oBAAoB+vB,GAChB,yCAA0CA,oBAIlD,MACI/vB,YAAYqtB,GACRjzB,KAAKizB,SAAWA,EAEhBhB,GAAejyB,KAAMA,KAAKizB,SAAU,CAChC,UAAW,cAAe,gBAC1B,SAAU,SAAU,iBAAkB,mBACtC,YAAa,iBAGjBjzB,KAAKuzC,WAAa,eAAiBtgB,EAAS5vB,YAAYmwC,UACxDvgB,EAASwgB,iBAAiBz+B,UAAUia,IAAIjvB,KAAKuzC,YAE7CztC,IAAM4tC,EAAUr0C,SAASC,cAAc,SACvC2zB,EAASsE,QAAQ1Z,aAAa61B,EAASzgB,EAASwgB,kBAChDzzC,KAAK0zC,QAAUA,EAEf1zC,KAAK2zC,mBACL3zC,KAAK4zC,mBAGTC,iBACI,OAAO7zC,KAAK0zC,QAAQI,MAGxBluC,mBACI5F,KAAK+zC,eAAiB/zC,KAAK+zC,eAAeplC,KAAK3O,MAC/CA,KAAK+zC,eAAiBpiB,GAAW3xB,KAAK+zC,eAAgB,KAE1B,UAAxB/zC,KAAKS,QAAQuzC,QACbzrC,EAAE4Z,GAAGljB,OAAQ,SAAUe,KAAK+zC,gBAIpCnuC,8BACI5F,KAAKi0C,wBAAyB,EAE9B1rC,EAAE4Z,GAAGniB,KAAK2zB,eAAgB,kBAAWxyB,GAC7BnB,EAAKi0C,yBAETj0C,EAAKi0C,wBAAyB,EAE9B7uB,iCACItf,IAAM4H,GAAQvM,EAAE8O,OAAOrC,WAEvBrF,EAAE3G,MAAM5B,EAAK+0B,OAAQ,CACjBxf,wBAAyB7H,UAE7BnF,EAAE3G,MAAM5B,EAAKiyC,OAAQ,CACjB18B,wBAAyB7H,UAE7B1N,EAAKi0C,wBAAyB,OAK1CruC,iBACI5F,KAAKk0C,2BACLl0C,KAAKm0C,qBACLn0C,KAAKqtC,eAGTznC,UACI5F,KAAK0zC,QAAQ5c,SACbvuB,EAAE6Z,IAAInjB,OAAQ,SAAUe,KAAK+zC,gBAGjCnuC,SAASyO,EAAU+/B,cACf,GAAI//B,EAASuQ,SAAS,KAClBvQ,EAASzT,MAAM,KACV+iB,aAAI2a,UAAKA,EAAE5iB,SACX7M,iBAAQwF,GACLrU,EAAKsvC,SAASj7B,EAAU+/B,UAMpC,GADA//B,EAAWA,EAASqH,OACpB,CAEA1b,KAAKq0C,eAAiBr0C,KAAKq0C,gBAAkB,GAC7CvuC,IAAMwuC,EAAmBt0C,KAAKu0C,qBAAqBlgC,GAE/CrU,KAAKq0C,eAAeC,KACpBt0C,KAAK0kB,YAAYrQ,GAGjB+/B,EAAcx1C,OAAOgiC,OAAO,GAAI5gC,KAAKq0C,eAAeC,GAAmBF,IAG3EtuC,IACM0uC,EAAgBF,QADFt0C,KAAKy0C,eAAeL,QAGxCp0C,KAAKq0C,eAAeC,GAAoBF,EACxCp0C,KAAK6zC,WAAWa,WAAWF,IAG/B5uC,YAAYyO,cACR,GAAIA,EAASuQ,SAAS,KAClBvQ,EAASzT,MAAM,KACV+iB,aAAI2a,UAAKA,EAAE5iB,SACX7M,iBAAQwF,GACLrU,EAAK0kB,YAAYrQ,UAM7B,GADAA,EAAWA,EAASqH,OACpB,CAGA5V,IAAMwuC,EAAmBt0C,KAAKu0C,qBAAqBlgC,GAC7CqE,EAAQmJ,MAAMzS,KAAKpP,KAAK6zC,WAAWc,UACpCrK,mBAAUsK,UAAQA,EAAKC,eAAiBP,KAE9B,IAAX57B,GACJ1Y,KAAK6zC,WAAWiB,WAAWp8B,IAG/B9S,qBAAqByO,GACjB,UAAWrU,oBAAmBqU,EAGlCzO,eAAewuC,GACX,OAAOx1C,OAAO8kB,KAAK0wB,GACdzwB,aAAIzO,GACDqO,IAAIwxB,EAAS7/B,EAIb,OAHKA,EAAK0P,SAAS,OACfmwB,EAASnkB,GAAgB1b,IAEnB6/B,MAAUX,EAAYl/B,SAEnCzS,KAAK,IAGdmD,gBACI5F,KAAKg1C,gBACLh1C,KAAKi1C,gBACLj1C,KAAKk1C,0BACLl1C,KAAKm1C,mBACLn1C,KAAKk0C,2BACLl0C,KAAKo1C,iBACLp1C,KAAKqtC,eAGTznC,gBACI5F,KAAKsvC,SAAS,WAAY,CACtBrqC,OAAQjF,KAAKS,QAAQ0xC,WAAa,OAI1CvsC,2BACI2C,EAAE8a,KAAK,mBAAoBrjB,KAAK+0B,QAAQpR,aAAI8U,GACxC,MAAqBlwB,EAAExE,KAAK00B,YACtBa,EAASt5B,EAAKw2B,UAAUjC,GAE9B,IAAK+E,EAAOkW,SAAU,CAClB1pC,IAAMiE,EAAQxB,EAAE3G,MAAM2G,EAAE,oBAAqBkwB,GAAM,SAEnDa,EAAOkW,SAAWzlC,KAK9BnE,qCACS2C,EAAE,aAEPA,EAAE8a,KAAK,0BAA2BrjB,KAAK+0B,QAAQpR,aAAI0xB,GAC/C,MAAqB9sC,EAAExE,KAAKsxC,YACtB/b,EAASt5B,EAAKo3B,YAAYZ,UAAUjC,GACtCxqB,EAAQxB,EAAE3G,MAAM2G,EAAE,oBAAqB8sC,GAAc,SACpC,iBAAVtrC,GAAsBA,GAAS/J,EAAKS,QAAQgtC,mBACnDnU,EAAOgc,aAAevrC,EAEtBuvB,EAAOgc,aAAet1C,EAAKS,QAAQgtC,qBAK3CllC,EAAE8a,KAAK,qBAAsBrjB,KAAK2zB,gBAAgBhQ,aAAIuQ,GAClD,MAEI3rB,EAAExE,KAAKmwB,YACLoF,EAASt5B,EAAKo3B,YAAYZ,UAAUjC,GAEtC+gB,EAAe/sC,EAAE3G,MAAM2G,EAAE,oBAAqB2rB,GAAQ,SAE9B,iBAAjBohB,GAA6BA,GAAgBhc,EAAOgc,aAC3Dhc,EAAOgc,aAAeA,EAEtBhc,EAAOgc,aAAehc,EAAOgc,gBAKzC1vC,8BACI,GAA4B,UAAxB5F,KAAKS,QAAQuzC,OAAoB,CACjCzwB,IAAIgyB,EAAahtC,EAAE3G,MAAM5B,KAAKyzC,iBAAkB,SAE5CzzC,KAAKS,QAAQgoC,iBAEb8M,EAAaA,EADUv1C,KAAKo3B,YAAYoe,cAAc,aACbzrC,MAAQ,GAGjD/J,KAAKS,QAAQ6nC,iBAEbiN,EAAaA,EADUv1C,KAAKo3B,YAAYoe,cAAc,aACbzrC,MAAQ,GAGrDjE,IAaM2vC,EAAUF,EAbGv1C,KAAKo3B,YAAYkS,aAC/B3lB,aAAI2V,GACD,MAAkB,cAAdA,EAAO1f,IAAoC,cAAd0f,EAAO1f,GAC7B,GAEN0f,EAAOvvB,QACRuvB,EAAOvvB,MAAQ,GAEnBuvB,EAAOoc,WAAatxC,SAASk1B,EAAOvvB,MAAO,IACpCuvB,EAAOoc,cAEjBvjB,gBAAQ/zB,EAAGC,UAAMD,EAAIC,IAI1B2B,KAAKo3B,YAAYkS,aACZ3lB,aAAI2V,GACiB,cAAdA,EAAO1f,IAAoC,cAAd0f,EAAO1f,KACxC0f,EAAOvvB,MAAQ9F,KAAKC,MAAMuxC,EAAUnc,EAAOoc,YAAc,UAGjE11C,KAAKo3B,YAAYkS,aACZ3lB,aAAI2V,GACIA,EAAOvvB,QACRuvB,EAAOvvB,MAAQuvB,EAAOgc,cAER,cAAdhc,EAAO1f,KACP0f,EAAOvvB,MAAQ/J,EAAK21C,0BAEpBrc,EAAOvvB,MAAQ/J,EAAKS,QAAQgtC,qBAC5BnU,EAAOvvB,MAAQ/J,EAAKS,QAAQgtC,sBAMhD7nC,sCACI,GAA4B,UAAxB5F,KAAKS,QAAQuzC,OAAjB,CAEAluC,IAAM8vC,EAAertC,EAAE3G,MAAM5B,KAAKizB,SAASwgB,iBAAkB,SACzDoC,EAAWttC,EAAE,UAAWvI,KAAK2zB,gBAC7BmiB,EAAgBF,EACpB,GAAKC,EAMDC,EAAgBvtC,EAAE3G,MAAMi0C,EAAU,aANvB,CACXtyB,IAAIwyB,EAAYxtC,EAAE,UAAWvI,KAAKizB,SAAS8B,QAG3C+gB,EAFiBj0B,MAAMzS,KAAK2mC,EAAUjyC,UACjC6f,aAAIiQ,UAAQA,EAAK5S,cACKmR,gBAAQ5Z,EAAKna,UAAMma,EAAMna,GAAG,GAI3D0H,IAAMkwC,EAAmBh2C,KAAKo3B,YAAYkS,aAAa32B,gBAAO8lB,UAAOA,EAAImE,YACnEqZ,GAAcL,EAAeE,GAAiBE,EAAiBpzC,OAErEozC,EAAiBryB,aAAI8U,GACjB3yB,IAAMiE,EAAQxB,EAAE3G,MAAM5B,EAAKk2C,uBAAuBzd,EAAIlE,UAAW,SAC7DiZ,EAAavpC,KAAKC,MAAM6F,EAAQksC,GAAc,EAElDj2C,EAAKo3B,YAAYsW,aAAajV,EAAIlE,SAAU,CACxCxqB,MAAOyjC,OAKnB5nC,4BAEI5F,KAAKo3B,YAAYkS,aACZ3lB,aAAI2V,GAEIA,EAAOoP,QACRpP,EAAOoP,MAAQ,QAEd,CAAC,OAAQ,SAAU,SAAS9jB,SAAS0U,EAAOoP,SAC7CpP,EAAOoP,MAAQ,QAEnB1oC,EAAKsvC,0BAA0BhW,EAAe,SAAI,CAC9C6c,aAAc7c,EAAOoP,QAIzB1oC,EAAK20B,cAAcgZ,qBAAqBrU,EAAO/E,UAC/Cv0B,EAAK20B,cAAcyY,eAAe9T,EAAO/E,YAIrD3uB,gCACI5F,KAAKo3B,YAAYkS,aACZ3lB,aAAI2V,GACDt5B,EAAK20B,cAAcgZ,qBAAqBrU,EAAO/E,UAC/Cv0B,EAAK20B,cAAcyY,eAAe9T,EAAO/E,YAIrD3uB,eACIE,IAAMswC,EAAY7tC,EAAE3G,MAAM5B,KAAKyzC,iBAAkB,SAC3CoC,EAAWttC,EAAE,UAAWvI,KAAK2zB,gBACnC,GAAKkiB,EAAL,CACA/vC,IAAMuwC,EAAW9tC,EAAE3G,MAAMi0C,EAAU,SAE/B9rC,EAAQqsC,EAAYC,EAAWA,EAAWD,EAC9C7tC,EAAE3G,MAAM5B,KAAK2zB,eAAgB,CACzB5pB,MAAOA,EAAQ,OAInBxB,EAAEmc,YAAY1kB,KAAK2zB,eAAgB,UAInCpQ,IAIIte,EAJAqxC,EAAa/tC,EAAEic,SAASxkB,KAAK2zB,eAAgB,UAC3CroB,GAAgBtL,KAAK6tC,aAAa1P,WAAa,IAAI2D,eAAiByU,EAAAA,EACpE1wB,EAAwBtd,EAAEsd,sBAAsB7lB,KAAK2zB,gBAIvDroB,EAAegrC,IACfrxC,EAASqG,EAILua,IACA5gB,GAAUsD,EAAE8c,iBAGhB9c,EAAE3G,MAAM5B,KAAK2zB,eAAgB,CACzB1uB,OAAQA,EAAS,QAIAjF,KAAK2zB,eAAeroB,aAAetL,KAAK2zB,eAAexvB,aACzDoE,EAAE8c,iBAIrB9c,EAAE3G,MAAM5B,KAAK2zB,eAAgB,CACzBloB,UAAW,WAIS,UAAxBzL,KAAKS,QAAQuzC,QACbzrC,EAAE3G,MAAM5B,KAAK2zB,eAAgB,CACzBnoB,UAAW,YAKvB5F,uBAAuB2uB,GAEnB,OADAA,GAAYA,GACG,EAAU,KAClBhsB,mBAAmBgsB,EAAYv0B,KAAK+0B,QAG/CnvB,yBACIE,IAAM8hC,EAAW5nC,KAAKo3B,YAAYsa,cAElC,OAAOnpC,EAAEud,iBAAiB8hB,EAAW,IADrB,cAsBxB,MACIhiC,YAAY4d,GACRxjB,KAAKw2C,UAAY,GACjBjuC,EAAE4Z,GAAGqB,EAAS,UAAWxjB,KAAK6jB,QAAQlV,KAAK3O,OAG/C4F,QAAQzE,GACJoiB,IAAIlK,EAAMkqB,GAASpiC,EAAEs1C,SAEjBt1C,EAAEu1C,UAAoB,UAARr9B,IACdA,EAAM,SAAWA,IAGhBlY,EAAEw1C,SAAmB,SAARt9B,GAAoBlY,EAAEy1C,SAAmB,SAARv9B,KAC/CA,EAAM,QAAUA,GAGpBvT,IAAM0wC,EAAYx2C,KAAKw2C,UAAUn9B,GAEjC,GAAIm9B,GAAaA,EAAU5zC,OAAS,EAChC,IAAK,UAAgB4zC,kBAAW,CAA3BjzB,IACKszB,GAAkBC,QAAS31C,QACT0f,IAApBg2B,IAAqD,IAApBA,GACjC11C,EAAEyP,kBAMlBhL,GAAGyT,EAAKy9B,cACSz9B,EAAIzY,MAAM,KAAK+iB,aAAIjiB,UAAKA,EAAEga,SAElCiI,aAAItK,GACLrZ,EAAKw2C,UAAUn9B,GAAOrZ,EAAKw2C,UAAUn9B,IAAQ,GAC7CrZ,EAAKw2C,UAAUn9B,GAAK9V,KAAKuzC,QA4WrC,MAAMC,GACFnxC,YAAY2xB,EAAS92B,GAQjB,GAPAs2C,GAAUvD,YAEa,iBAAZjc,IAEPA,EAAUl4B,SAAS+jB,cAAcmU,IAErCv3B,KAAKu3B,QAAUA,IACTv3B,KAAKu3B,mBAAmByf,aAC1B,MAAM,IAAIj2C,MAAM,wCAGpBf,KAAKi3C,uBAAuBx2C,GAC5BT,KAAKk3C,oBACLl3C,KAAKm3C,aAAa12C,GAClBT,KAAKo3C,UACLp3C,KAAKq3C,uBAEDr3C,KAAKS,QAAQsD,OACb/D,KAAKqC,UACLrC,KAAK20B,cAAc2iB,yBAI3B1xC,uBAAuBnF,GACnBT,KAAKilC,SAAWxkC,EAAQwkC,UAAY,KACpCjlC,KAAKu3C,mBAAqB,IAAIvS,GAAmBhlC,KAAKilC,UAElDxkC,EAAQykC,cACRllC,KAAKu3C,mBAAmBC,gBAAgB/2C,EAAQykC,cAIxDt/B,oBAnHJ,IAA2BqtB,EAoHnBjzB,KAAKy3C,iBApHcxkB,EAoHsBjzB,KAnHtC,CACH2nC,QAAS,GACT5jC,KAAM,GACN2zC,eAAgB7kB,GAAMC,YACtB2Z,eAAgB,CACZ,CACIkL,MAAO1kB,EAAS2C,UAAU,kBAC1B8W,OAAQ,SAAUpT,GACdt5B,KAAKmvC,WAAW7V,EAAO/E,SAAU,SAGzC,CACIojB,MAAO1kB,EAAS2C,UAAU,mBAC1B8W,OAAQ,SAAUpT,GACdt5B,KAAKmvC,WAAW7V,EAAO/E,SAAU,UAGzC,CACIojB,MAAO1kB,EAAS2C,UAAU,iBAC1B8W,OAAQ,SAAUpT,GACdt5B,KAAKmvC,WAAW7V,EAAO/E,SAAU,UAGzC,CACIojB,MAAO1kB,EAAS2C,UAAU,iBAC1B8W,OAAQ,SAAUpT,GACdt5B,KAAK0nC,aAAapO,EAAO/E,aAIrCqjB,OAAQ,CACJC,wBAAeve,KACfwe,wBAAeC,EAASC,KACxBC,sBAAa3e,KACb4e,oBAAW3e,KACX4e,wBAEJvF,MAAO,CACHC,YAAa,MAEjBpW,cAAe,CACX2b,IAAK,IACLC,KAAM,IACNC,KAAM,IAEVC,mBAAoB,GAGpB/S,WAAYA,GACZgT,cAAe,GACfxf,UAAW,KACXyP,gBAAgB,EAChBH,gBAAgB,EAChBmQ,YAAY,EACZC,MAAM,EACN1E,OAAQ,QACR2E,cAAe1lB,EAAS2C,UAAU,WAClCuc,WAAY,GACZ1E,mBAAoB,GACpB5Y,eAAe,EACfoI,UAAU,EACVuT,kBAAkB,EAClBoI,kBAAkB,EAClB7iB,oBAAoB,EACpB0c,cAAc,EACdngC,UAAW,MACX87B,sBAAsB,IAoD1BxoC,aAAanF,GACTT,KAAKS,QAAUT,KAAKS,SAAW,GAE/BT,KAAKS,QAAU7B,OAAOgiC,OAClB,GAAI5gC,KAAKy3C,gBACTz3C,KAAKS,SAAW,GAAIA,GAGxBA,EAAQgsC,eAAiBhsC,EAAQgsC,gBAAkB,GACnDzsC,KAAKS,QAAQgsC,eAAiBzsC,KAClBy3C,gBAAgBhL,sBACrBhsC,EAAQgsC,gBAIfzsC,KAAK43C,OAASh5C,OAAOgiC,OACjB,GAAI5gC,KAAKy3C,gBAAgBG,OACzB53C,KAAKS,QAAQm3C,QAAU,GACvBn3C,EAAQm3C,QAAU,IAEtB53C,KAAK4uC,UAAY5uC,KAAK4uC,UAAUjgC,KAAK3O,MAGzC4F,UACI5F,KAAK64C,aACL74C,KAAK2uC,WAGT/oC,uBACI2d,IAAIu1B,EAAal6C,OAAOgiC,OAAO,GAAI2G,GAAmBvnC,KAAKS,QAAQ83C,6HAWnEv4C,KAAK4B,MAAQ,IAAIm3C,EAAS/4C,MAC1BA,KAAK8zB,SAAW,IAAIklB,EAAYh5C,KAAKu3B,SACrCv3B,KAAKo3B,YAAc,IAAI6hB,EAAej5C,KAAKS,SAC3CT,KAAKq2B,WAAa,IAAI6iB,EAAcl5C,MACpCA,KAAK20B,cAAgB,IAAIwkB,EAAiBn5C,MAC1CA,KAAKguC,YAAc,IAAIoL,EAAep5C,MACtCA,KAAK6tC,aAAe,IAAIwL,EAAgBr5C,MAG5C4F,aACI5F,KAAKu3B,QAAQ/3B,UAAY,6CACSQ,KAAKS,kSAMrBT,KAAKS,oRASvBT,KAAKyzC,iBAAmBlrC,EAAE,aAAcvI,KAAKu3B,SAC7Cv3B,KAAK+0B,OAASxsB,EAAE,aAAcvI,KAAKu3B,SACnCv3B,KAAKiyC,OAAS1pC,EAAE,aAAcvI,KAAKu3B,SACnCv3B,KAAK2zB,eAAiBprB,EAAE,iBAAkBvI,KAAKu3B,SAC/Cv3B,KAAKs5C,gBAAkB/wC,EAAE,aAAcvI,KAAKu3B,SAC5Cv3B,KAAKqzC,aAAe9qC,EAAE,YAAavI,KAAKu3B,SACxCv3B,KAAKg2B,YAAcztB,EAAE,mBAAoBvI,KAAKu3B,SAC9Cv3B,KAAK+rC,kBAAoBxjC,EAAE,yBAA0BvI,KAAKu3B,SAG9D3xB,QAAQ7B,EAAM4jC,GACV3nC,KAAKo3B,YAAYmiB,KAAKx1C,EAAM4jC,GAC5B3nC,KAAK8/B,SACL9/B,KAAKgwC,gBAGTpqC,UACI5F,KAAKu3B,QAAQ/3B,UAAY,GACzBQ,KAAK4B,MAAMU,UACXtC,KAAK4uC,UAAU,aAGnBhpC,WAAWxE,GACPpB,KAAKo3B,YAAYoiB,WAAWp4C,GAC5BpB,KAAKq2B,WAAWqY,cAGpB9oC,WAAW2zB,EAAKnF,GACZp0B,KAAKq2B,WAAWojB,WAAWlgB,EAAKnF,GAGpCxuB,SACI5F,KAAK05C,eACL15C,KAAK+vC,aAGTnqC,eACI5F,KAAK20B,cAAc+kB,eAGvB9zC,aACI5F,KAAK6tC,aAAa/N,SAGtBl6B,gBACI5F,KAAK4B,MAAMouC,gBAGfpqC,iBAAiB+vB,EAASyd,GACtBpzC,KAAK6tC,aAAa/X,iBAAiBH,EAASyd,GAGhDxtC,oBACI5F,KAAK6tC,aAAa4C,oBAGtB7qC,UAAU2uB,GACN,OAAOv0B,KAAKo3B,YAAYZ,UAAUjC,GAGtC3uB,aACI,OAAO5F,KAAKo3B,YAAYkS,aAG5B1jC,UACI,OAAO5F,KAAKo3B,YAAYia,UAG5BzrC,QAAQ2uB,EAAUH,GACd,OAAOp0B,KAAKo3B,YAAYuB,QAAQpE,EAAUH,GAG9CxuB,uBAAuB2uB,GACnB,OAAOv0B,KAAK20B,cAAcuhB,uBAAuB3hB,GAGrD3uB,oBAKI,OAJK5F,KAAK25C,iBACN35C,KAAK25C,eAAiBpxC,EAAE3G,MAAM5B,KAAK2zB,eAAgB,WAGhD3zB,KAAK25C,eAGhB/zC,WAAW2uB,EAAUmI,GACjB18B,KAAK20B,cAAcwa,WAAW5a,EAAUmI,GAG5C92B,aAAa2uB,GACTv0B,KAAK20B,cAAc+S,aAAanT,GAGpC3uB,qBACI5F,KAAKyzC,iBAAiB7lC,WAAa,KAGvChI,SACI2C,EAAE3G,MAAM5B,KAAKs5C,gBAAiB,CAC1B5uC,QAAS,KAIjB9E,WACI2C,EAAE3G,MAAM5B,KAAKs5C,gBAAiB,CAC1B5uC,QAAS,SAIjB9E,cAAcnF,GACVT,KAAKm3C,aAAa12C,GAGtBmF,UAAUg0C,iEAQN,IALA9zC,WACQ9F,KAAK65C,uBAAuBD,IAAc,YAC9C55C,KAAK43C,OAAOgC,KACdjnC,OAAOw4B,yBAEqB,MAClBhyB,MAAMnZ,KAAMiZ,IAI5BrT,GAAGgP,EAAOiP,GACN7jB,KAAK65C,uBAAyB75C,KAAK65C,wBAA0B,GAC7D75C,KAAK65C,uBAAuBjlC,GAAS5U,KAAK65C,uBAAuBjlC,IAAU,GAC3E5U,KAAK65C,uBAAuBjlC,GAAOrR,KAAKsgB,GAG5Cje,MACQ5F,KAAKS,QAAQi4C,MACbjnB,QAAQC,IAAIvY,MAAMsY,QAASvY,WAInCtT,UAAUwS,EAAKa,GACX,OAAOjZ,KAAKu3C,mBAAmB3hB,UAAUxd,EAAKa,IAItD89B,GAAUvD,UAAY,EAEtB,IAiBIsG,GAhBU,oBAoCd/C,GAAUgD,YAAcD,GAExB77C,UAAiB84C,yDCxxLjBvxC,OAAOw0C,QAAQ,gBAEfx0C,OAAOC,MAAMw0C,WAAa,cAAyBz0C,OAAOC,MAAMy0C,SAC/DC,gBACC,MAAO,SAGRv0C,iBAIAA,4BACCw0C,MAAMC,iBACNr6C,KAAKs6C,WAAaC,GAAG,WAAa,IAAMv6C,KAAKs6C,WAC7Ct6C,KAAKw6C,KAAO,SAEZ10C,IAAMD,EAAQL,OAAOi1C,YAKrB,OAJqB,IAAjB50C,EAAMjD,SACT5C,KAAK06C,YAAc70C,EAAM,IAGtB7F,KAAK06C,YACD16C,KAAK26C,iBACVzgB,cAAK0gB,GACL56C,EAAK66C,WAAaD,EAClB56C,EAAK66C,WAAWC,KAAOC,KAAKC,MAAMh7C,EAAK66C,WAAWC,MAElD96C,EAAKylC,QAAUzlC,EAAK66C,WAAWC,KAAKrV,QACpCzlC,EAAKi7C,SAAWj7C,EAAK66C,WAAWC,KAAKG,SACrCj7C,EAAKk7C,eAAiBl7C,EAAK66C,WAAWC,KAAKI,eAC3Cl7C,EAAKs6C,WAAaC,GAAGv6C,EAAK06C,aAC1B16C,EAAKm7C,YAAcn7C,EAAK66C,WAAWC,KAAKK,aAAe,GACvDn7C,EAAKi7C,SAAWj7C,EAAK66C,WAAWC,KAAKG,UAAY,gBACjDj7C,EAAKo7C,WAAap7C,EAAK66C,WAAWC,KAAKM,cAGzCp7C,KAAKk7C,eAAiBl7C,KAAKq7C,mBAAmBH,gBAAkB,EAChEl7C,KAAKo7C,WAAap7C,KAAKq7C,mBAAmBD,WAEpCp7C,KAAKs7C,0BAGb11C,aACC5F,KAAKu7C,gBACLnB,MAAMoB,sBACNx7C,KAAKy7C,eACLz7C,KAAK07C,KAAKC,KAAKC,SAAS,eAGzBh2C,0BACK5F,KAAK67C,oBAAsB77C,KAAK67C,mBAAmBC,uBAGvDt2C,OAAOu2C,SAASC,kBAAkBh8C,KAAKi8C,SACvCz2C,OAAO02C,SAAS/5B,GAAG,uBAAgBpe,UAAS/D,EAAKm8C,UAAUp4C,MAG5D6B,aACC5F,KAAKo8C,WAAap8C,KAAKq8C,oBACvBjC,MAAMkC,aAGP12C,kBACCw0C,MAAMmC,kBAENv8C,KAAK8/B,QAAO,GAGbl6B,oBACCw0C,MAAMoC,oBACNx8C,KAAKy8C,oBACLz8C,KAAK08C,mBAAqBn0C,EAAE,mCAC5BvI,KAAK28C,QAAQx5C,OAAOnD,KAAK08C,oBAG1B92C,+BACC5F,KAAK48C,gBAAkBr0C,EAAE,4QAKzBvI,KAAK28C,QAAQx5C,OAAOnD,KAAK48C,iBACzB58C,KAAK48C,gBAAgBv6B,KAAK,wBAAwBF,GAAG,mBACpDniB,EAAK68C,iBAIPj3C,oBACCw0C,MAAM0C,oBACNh3C,IAAM6vB,EAAU4kB,GAAG,0FACnBv6C,KAAK+8C,aAAa16B,KAAK,eAAelf,sDACUwyB,aAIjD/vB,sBACC5F,KAAKg9C,cAAgB,IAAIx3C,OAAOy3C,GAAGC,aAAa,CAC/C3/B,OAAQvd,KAAKm9C,YAAYC,qBACzBnB,QAASj8C,KAAKi8C,QACdhjC,KAAMjZ,KAAKi7C,SACXoC,SAAUr9C,KAAKs9C,eAAe3uC,KAAK3O,QAIpCA,KAAKu9C,iBAAmB,IAAI/3C,OAAOy3C,GAAGO,QAAQx9C,MAC1CA,KAAK66C,YAAc76C,KAAK66C,WAAWC,KAAK2C,UAC3Cz9C,KAAKu9C,iBAAiBG,eAAe19C,KAAK66C,WAAWC,KAAK2C,UAEvDz9C,KAAKq7C,oBAAsBr7C,KAAKq7C,mBAAmBoC,UACtDz9C,KAAKu9C,iBAAiBG,eAAe19C,KAAKq7C,mBAAmBoC,UAK/D73C,WACCE,IAAMmT,EAAOmhC,MAAMuD,WAGnB,cAFO1kC,EAAKwkC,SACZz9C,KAAKu9C,iBAAiBK,SAAS3kC,GACxBA,EAGRrT,iBACC,OAAI5F,KAAK66C,WAED/oB,QAAQC,UAETqoB,MAAMyD,iBAGdj4C,eACK5F,KAAK66C,WACR76C,KAAK89C,oCAEL99C,KAAK+9C,uBAED/9C,KAAKy9C,UACTz9C,KAAKg+C,aAIPp4C,oCACC2d,IAAI06B,EAAmB,CACtBxY,QAASzlC,KAAKm9C,YAAYhpC,MAC1B+pC,OAAQl+C,KAAKk+C,OACbjD,SAAUj7C,KAAKg9C,cAAcmB,iBAC7BjD,eAAgBl7C,KAAKk7C,eACrBC,YAAan7C,KAAKm7C,YAClBiD,cAAep+C,KAAKq+C,oBACpBZ,SAAUz9C,KAAKu9C,iBAAiBe,eAChClD,WAAYp7C,KAAKu+C,sBAGdC,EAAkB,CACrB/Y,QAASzlC,KAAK66C,WAAWC,KAAKrV,QAC9ByY,OAAQl+C,KAAK66C,WAAWC,KAAKoD,OAC7BjD,SAAUj7C,KAAK66C,WAAWC,KAAKG,SAC/BC,eAAgBl7C,KAAK66C,WAAWC,KAAKI,eACrCC,YAAan7C,KAAK66C,WAAWC,KAAKK,YAClCiD,cAAep+C,KAAK66C,WAAWC,KAAKsD,cACpCX,SAAUz9C,KAAK66C,WAAWC,KAAK2C,SAC/BrC,WAAYp7C,KAAK66C,WAAWC,KAAKM,YAG7B51C,OAAO0c,MAAMu8B,WAAWR,EAAkBO,GAG9Cx+C,KAAK07C,KAAKgD,kBAFV1+C,KAAK07C,KAAKiD,cAAcpE,GAAG,aAAc,UAM3C30C,uBACCJ,OAAOo5C,MAAMC,cAAc39B,KAAKlhB,KAAKi8C,QAAS,YAAaj8C,KAAKm6C,WAE3Dn6C,KAAK06C,aACT16C,KAAK8+C,wBAAwB,CAC5BZ,OAAQl+C,KAAKk+C,OACbzY,QAASzlC,KAAKm9C,YAAYhpC,MAC1B8mC,SAAUj7C,KAAKg9C,cAAcmB,iBAC7BV,SAAUz9C,KAAKu9C,iBAAiBe,eAChClD,WAAYp7C,KAAKu+C,qBACjBrD,eAAgBl7C,KAAKk7C,iBAKxBt1C,aAAajH,GACZ4kB,IAAIxf,EAAOpF,EAAEg3B,SAAW,GACxB5xB,EAAOyB,OAAO0c,MAAM68B,KAAKh7C,EAAK2f,KAAM3f,EAAKirB,QAEtB,IAAfhvB,KAAK4qC,MACR5qC,KAAK+D,KAAOA,EAEZ/D,KAAK+D,KAAO/D,KAAK+D,KAAKb,OAAOa,GAI/B6B,OAAOy8B,GACmB,IAArBriC,KAAK+D,KAAKnB,SACd5C,KAAKg/C,eACLh/C,KAAKu7C,gBAEDv7C,KAAKy9C,SACRz9C,KAAK48C,gBAAgBhB,SAAS,UACpB57C,KAAKi/C,OACfj/C,KAAKk/C,kBAGFl/C,KAAKm/C,WAAc9c,EAIvBriC,KAAKo/C,gBAAgBp/C,KAAK+D,MAHzB/D,KAAKm/C,UAAU98C,QAAQrC,KAAKq/C,SAASr/C,KAAK+D,MAAO/D,KAAK2nC,UAMxD/hC,eACC,IAAI5F,KAAK67C,qBAAsB77C,KAAK67C,mBAAmByD,cAAvD,CAGA/7B,IAAIg8B,EAAcv/C,KAAK+8C,aAAa16B,KAAK,eACpCk9B,EAAY38C,SAChB28C,EAAch3C,EAAE,UACdqzC,SAAS,yBACT4D,UAAUx/C,KAAK+8C,aAAa16B,KAAK,kBAEpCriB,KAAKy/C,gBACHvlB,cAAK9hB,GACLmnC,EAAYx5B,KAAK3N,MAIpBxS,UAAU7B,cACT,GAAI/D,KAAKi8C,UAAYl4C,EAAKk4C,SAAWl4C,EAAKwL,KAAM,CAE/CzJ,IAAM45C,EAAY37C,EAAK47C,OAASn6C,OAAOo6C,QAAQD,KAC3C3/C,KAAK+D,KAAKse,cAAK1hB,UAAKA,EAAE4O,OAASxL,EAAKwL,OAEvC/J,OAAOq6C,GAAGC,QAAQ/7C,EAAKk4C,QAASl4C,EAAKwL,MACnC2qB,cAAK0gB,UAAO56C,EAAK+/C,WAAWnF,EAAK8E,KAGnC1/C,KAAKqC,WAKRuD,WAAWg1C,EAAK8E,cACTM,EAAa,GAEnBhgD,KAAK+D,KAAO/D,KAAK+D,KAAK4f,aAAKhjB,EAAGmN,GAC7B,GAAInN,EAAE4O,OAASqrC,EAAIrrC,KAAM,CACxB,IAAKgU,IAAI08B,KAAat/C,EACrB,GAAIs/C,EAAUr7B,SAAS,KAAM,CAE5B,MAAsBq7B,EAAUr/C,MAAM,mBAChCs/C,EAAUthD,OAAO8kB,KAAKk3B,GAC1BjoC,gBAAO0G,UACPwI,MAAM4C,QAAQm2B,EAAIvhC,KACfuhC,EAAIvhC,GAAKzW,QACTg4C,EAAIvhC,GAAK,GAAG4iC,UAAYkE,IAE3Bx8B,aAAItK,UAAOuhC,EAAIvhC,KACfsK,aAAIvlB,UAAKA,EAAE,KACXuU,gBAAOytC,UAAQA,EAAK7wC,OAAS5O,EAAEw/C,EAAM,WAAU,GAC7CD,IACHv/C,EAAEs/C,GAAaC,EAAQG,SAGxB1/C,EAAEs/C,GAAarF,EAAIqF,GAGrBD,EAAWz8C,KAAK,CAAC5C,EAAGmN,IAErB,OAAOnN,IAWRq/C,EAAWnxC,iBAAS4U,qBACb68B,EAAUtgD,EAAKugD,UAAUx8C,GAC/B/D,EAAKm/C,UAAU1F,WAAW6G,EAASlsB,YAThBA,GACnB,GAAKsrB,EAAL,CACA55C,IAAM4qC,EAAO1wC,EAAK28C,QAAQt6B,gCAAgC+R,QAC1Dsc,EAAKkL,SAAS,cACd75C,6BAAiB2uC,EAAK8P,YAAY,eAAe,MAMjDC,CAAWrsB,KAIbxuB,gBAAgBopB,cACfhvB,KAAK08C,mBAAmB3/B,QACxB/c,KAAKm/C,UAAY,IAAIpI,UAAU/2C,KAAK08C,mBAAmB,GAAI,CAC1D/U,QAAS3nC,KAAK2nC,QACd5jC,KAAM/D,KAAKq/C,SAASrwB,GACpBgK,UAAWh5B,KAAK0gD,mBAAmB/xC,KAAK3O,MACxCilC,SAAUz/B,OAAOm7C,KAAKC,KACtB1b,aAAc1/B,OAAO0c,MAAMi9B,UAAU0B,mBACrCvY,gBAAgB,EAChBzT,eAAe,EACfsd,WAAY,GACZ7/B,UAAW9M,OAAO0c,MAAM4+B,SAAW,MAAQ,MAC3ClJ,OAAQ,CACPC,wBAAiBve,GAChBt5B,EAAK+gD,6BAA6BznB,IAEnCwe,wBAAiBC,EAASC,GACzBh4C,EAAKghD,cAAcjJ,EAASC,IAE7BE,sBACCpyC,IAAMm7C,EAAgBjhD,EAAKkhD,oBAC3BlhD,EAAKmhD,2BAA2BF,EAAcr+C,OAAS,KAGzDgwC,MAAO,CACNC,YAAartC,OAAO0c,MAAMk/B,qBAE3B3U,eAAgB,CAAC,CAChBkL,MAAO4C,GAAG,cACV7N,gBAAS2U,GACR99B,IAAI+9B,EAAoB,GAClB3Z,EAAU3nC,EAAKuhD,yBAErBD,EAAoB3Z,EAAQ3nC,EAAKi8C,SAC/BtpC,gBAAO6uC,UAAOxhD,EAAKyhD,gBAAgBD,KACnC79B,aAAI69B,UACJ7J,MAAO4C,GAAGiH,EAAG7J,OACb1oC,MAAOuyC,EAAGvB,oBAGLtY,EAAQ3nC,EAAKi8C,2BAGnBtU,EAAQwY,GACNxtC,gBAAO6uC,UAAOxhD,EAAKyhD,gBAAgBD,KACnC79B,aAAI69B,UACJ7J,MAAO4C,GAAGiH,EAAG7J,OAAS,KAAKwI,MAC3BlxC,MAAOuyC,EAAGvB,UAAY,IAAME,KAE5BtxC,iBAAQ2yC,UAAMF,EAAkB/9C,KAAKi+C,MAPxC,IAAKj+B,IAAI48B,KAAOxY,OAUhB7hC,IAAMnF,EAAI,IAAI6E,OAAOy3C,GAAGyE,OAAO,CAC9B1P,MAAOuI,GAAG,cACV2D,OAAQ,CACP,CACCvG,MAAO4C,GAAG,iBACV0F,UAAW,SACX0B,UAAW,eACXlhD,QAAS6gD,GAEV,CACC3J,MAAO4C,GAAG,2BAA4B,CAACA,GAAG8G,EAAaO,SAASjK,OAAOkK,SACvE5B,UAAW,gBACX0B,UAAW,UAGbG,wBAAiBr+B,sCAChB,IAAK69B,EAAkB39B,aAAI8U,UAAOA,EAAIxpB,QAAO2V,SAAS0U,GAGrD,OAFA9zB,OAAOu8C,WAAW,CAACpsB,QAAS4kB,GAAG,kBAAmByH,UAAW,gBAC7DrhD,EAAEshD,OAIH1+B,IAAI04B,EAAUj8C,EAAKi8C,QACf3iB,EAAO1U,SAAS,SACC0U,EAAO14B,MAAM,KAAhC04B,OAAQ2iB,QAIV14B,IAAI7K,EAAQ2oC,EAAa9sB,SACrB2tB,IACHxpC,GAAgB,GAGjB1Y,EAAKmiD,wBAAwB7oB,EAAQ2iB,EAASvjC,GAC9C/X,EAAEshD,UAIJthD,EAAEyhD,YAMNx8C,gBAEM5F,KAAKi/C,MAKNj/C,KAAK48C,gBAAgByF,SAAS,WAEjCriD,KAAK48C,gBAAgB4D,YAAY,UACjCxgD,KAAKk/C,mBAGLl/C,KAAK48C,gBAAgBhB,SAAS,UAC9B57C,KAAK8+C,wBACJ,CAAE1D,WAAY,OACfp7C,KAAKo7C,WAAa,MAblBp7C,KAAK68C,eAiBPj3C,aAEM5F,KAAKi/C,OACLj/C,KAAKo7C,aACRp7C,KAAKsiD,iBAAiBtiD,KAAKo7C,WAAWmH,OACrCviD,KAAKo7C,WAAWoH,OAChBxiD,KAAKo7C,WAAWqH,YAEjBziD,KAAK0iD,cAKR98C,eAGC,eADI+8C,EAAW,GAAIC,EAAW,SACd5iD,KAAK2nC,wBAAS,CAAzBpkB,IAAIkV,OAERkqB,EAASp/C,KAAK,CACbo0C,MAAOlf,EAAIQ,QACXgnB,UAAWxnB,EAAI7e,GACf3K,MAAOwpB,EAAI7e,KAIR6e,EAAImpB,UAAYp8C,OAAOo5C,MAAMiE,mBAAmBj+B,SAAS6T,EAAImpB,SAASD,YACzEiB,EAASr/C,KAAK,CACbo0C,MAAOlf,EAAIQ,QACXgnB,UAAWxnB,EAAI7e,GACf3K,MAAOwpB,EAAI7e,KAKd9T,IAAM4L,EAAW1R,KAAKo7C,YAAc,GAE9B0H,EAAS,IAAIt9C,OAAOy3C,GAAGyE,OAAO,CACnC1P,MAAOuI,GAAG,mBACV2D,OAAQ,CACP,CACCvG,MAAO4C,GAAG,gBACVoH,UAAW,SACX1B,UAAW,SACXx/C,QAASkiD,EACTtf,QAAS3xB,EAAS6wC,QAEnB,CACC5K,MAAO4C,GAAG,iBACVoH,UAAW,cACX1B,UAAW,SACXx/C,QAASmiD,EACTG,YAAaxI,GAAG,2CAChBlX,QAAS3xB,EAAS8wC,OAAS9wC,EAAS8wC,OAAO//C,KAAK,MAAQ,MAEzD,CACCk1C,MAAO4C,GAAG,cACVoH,UAAW,SACXlhD,QAAS,CAAC,MAAO,OAAQ,MAAO,aAAc,SAC9Cw/C,UAAW,aACX5c,QAAS3xB,EAAS+wC,WACjBj9C,OAAO0c,MAAM8gC,cAActxC,EAAS+wC,YACpC,QAGHX,wBAAiB/9C,GAChBA,EAAKy+C,OAASz+C,EAAKy+C,OAAO5hD,MAAM,KAAK+iB,aAAIhjB,UAAKA,EAAE+a,SAAQ/I,OAAOw4B,SAE/DnrC,EAAKsiD,iBAAiBv+C,EAAKw+C,OAAQx+C,EAAKy+C,OAAQz+C,EAAK0+C,YACrDziD,EAAK0iD,aACLI,EAAOb,UAITa,EAAOV,OAGRx8C,iBAAiB28C,EAAQC,EAAQC,cAC5BQ,EAAWT,EAAO7+B,aAAIu/B,UACzB3zC,KAAMvP,EAAKmjD,YAAYD,GAAQjqB,QAC/BjK,OAAQhvB,EAAK+D,KAAK4f,aAAIhjB,UAAKA,EAAEuiD,QAG9BljD,KAAKo7C,WAAa,CACjBqH,WAAYA,EAAW5iD,cACvB0iD,OAAQA,EACRC,OAAQA,EACRY,OAAQpjD,KAAK+D,KAAK4f,aAAIhjB,UAAKA,EAAE4hD,KAC7BU,SAAUA,GAGXjjD,KAAK8+C,wBACJ,CAAE1D,WAAYp7C,KAAKu+C,uBAGrB34C,qBACC,GAAI5F,KAAKo7C,WACR,MAAO,CACNqH,WAAYziD,KAAKo7C,WAAWqH,WAC5BF,OAAQviD,KAAKo7C,WAAWmH,OACxBC,OAAQxiD,KAAKo7C,WAAWoH,QAK3B58C,wBACOqT,EAAOjZ,KAAKo7C,WACdr3C,EAAO,CACVq/C,OAAQnqC,EAAKmqC,OACbH,SAAUhqC,EAAKgqC,UAGhBjjD,KAAKqjD,gBAAkBpqC,EAAKwpC,WAK5BziD,KAAK48C,gBAAgB4D,YAAY,UAEjCxgD,KAAKi/C,MAAQ,IAAIz5C,OAAO89C,MAAMtjD,KAAK48C,gBAAgBv6B,KAAK,yBAAyB,GAAI,CACpF2vB,MAAOuI,GAAG,YAAa,CAACv6C,KAAKi8C,UAC7Bl4C,KAAMA,EACN4W,KAAM1B,EAAKwpC,WACXc,gBAAiB,EACjBC,OAAQ,CAAC,UAAW,aAAc,SAAU,OAC5CC,YAAa,CACZC,oBAAqB,GAEtBC,eAAgB,CACfC,wBAAgB30C,UAASzJ,OAAO04B,OAAOjvB,GAfzB40C,EAeuC7jD,EAAKo7C,WAAWoH,OAAO,GAfpDxiD,EAAKmjD,YAAYU,GAAOjC,UAeiC,CAAEkC,sBAAsB,EAAMC,QAAQ,YAdxG90C,EAAO40C,UAAU7jD,EAAK+D,KAAKse,cAAK1hB,UAAKA,EAAEkjD,KAAW50C,IAc8D6wC,CAAQ7wC,EAAM2rC,UAf/HiJ,MAoBjBj+C,iBACC,GAAK5F,KAAKi/C,OAAUj/C,KAAKo7C,WAAzB,CACAp7C,KAAK48C,gBAAgB4D,YAAY,UACjC,MAAuCxgD,KAAKo7C,gDAC5Cp7C,KAAKsiD,iBAAiBC,EAAQC,EAAQC,GACtCziD,KAAKi/C,MAAMt8C,OAAO3C,KAAKo7C,aAGxBx1C,mBAAmB2uB,EAAUH,EAAUnlB,EAAOsO,cACvCymC,EAAUhkD,KAAKikD,qBAAqB1vB,EAAUtlB,EAAOsO,GAC3D,QAAKymC,IAELA,EAAQxC,GAAG0C,yBAAeF,EAAQG,aAE3B,CACNhrB,mBAAYlqB,GACX,OAAO+0C,EAAQI,UAAUn1C,IAE1B8qB,kBAAW9qB,GACVnJ,IAAM8tB,EAAO5zB,EAAKm/C,UAAUxmB,QAAQpE,EAAUH,GAC1C6rB,EAAYjgD,EAAKm/C,UAAU3oB,UAAUjC,GAAUqtB,SAAS3B,UACxDoE,EAAUzwB,EAAKrkB,KACf0sC,EAAUroB,EAAKqoB,QAGnB,OADA+H,EAAQI,UAAUn1C,GACXjP,EAAKskD,kBAAkBrI,EAASoI,EAASpE,EAAWhxC,GACzDirB,cAAMqqB,GACNz+C,IAAM0+C,EAAQxkD,EAAK+D,KACjB4O,gBAAOxU,UAAKA,EAAEoR,OAASg1C,EAAYh1C,OACnC8S,cAAKjkB,UAEJ69C,GAAWsI,EAAYtI,SAAW79C,EAAE69C,EAAU,UAAYoI,GACxDpI,GAAWsI,EAAYtI,UAG5B,IAAK14B,IAAIsgC,KAASW,EACjB,GAAIX,EAAMj/B,SAAS,KAAM,CAExB,MAAsBi/B,EAAMjjD,MAAM,mBAC5Bs/C,EAAUthD,OAAO8kB,KAAK6gC,GAC1B5xC,gBAAO0G,UACPwI,MAAM4C,QAAQ8/B,EAAYlrC,KACvBkrC,EAAYlrC,GAAKzW,QACjB2hD,EAAYlrC,GAAK,GAAG4iC,UAAYkE,IAEnCx8B,aAAItK,UAAOkrC,EAAYlrC,KAAM,GAC7B1G,gBAAOytC,UAAQA,EAAK7wC,OAASi1C,EAAMrE,EAAM,WAAU,GACjDD,IACHsE,EAAMX,GAAS3D,EAAQG,SAGxBmE,EAAMX,GAASU,EAAYV,KAI7B3pB,uBAAWl6B,EAAKk/C,oBAEnBplB,oBACC,OAAOkqB,EAAQS,eAKlB7+C,kBAAkBq2C,EAASoI,EAASpE,EAAWhxC,GAE9C,OADAjP,KAAK0kD,iBAAmBL,EACjB,IAAIvyB,iBAASC,EAAS4yB,SAC5Bn/C,OAAOq6C,GAAGuE,UAAUnI,EAASoI,KAAS,KAAEpE,GAAYhxC,MAClDirB,cAAKv7B,GACDA,EAAEg3B,QACL5D,EAAQpzB,EAAEg3B,SAEVgvB,MAGDC,KAAKD,KAIT/+C,qBAAqB2uB,EAAUtlB,EAAOsO,cAC/Bkb,EAAMz4B,KAAKm/C,UAAU3oB,UAAUjC,GACjCyvB,EAAU,KAEd,GAA+B,gBAA3BvrB,EAAImpB,SAASD,UAA6B,CAC7C77C,IAAMnF,EAAI,IAAI6E,OAAOy3C,GAAGyE,OAAO,CAC9B1P,MAAOuI,GAAG,WAAY,CAAC9hB,EAAImpB,SAASjK,QACpCuG,OAAQ,CAACzlB,EAAImpB,UACbE,0BACC9hD,EAAKm/C,UAAUnR,YAAYha,oBAC3BrzB,EAAEshD,QAEH4C,mBACC7kD,EAAKm/C,UAAUnR,YAAYha,mBAAkB,MAG/CrzB,EAAEyhD,OACF4B,EAAUrjD,EAAEmkD,YAAYrsB,EAAImpB,SAAS3B,gBAGrC+D,EAAUx+C,OAAOy3C,GAAG8H,KAAKC,aAAa,CACrCxD,GAAI/oB,EAAImpB,SACRrkC,OAAQA,EACR0nC,cAAc,KAEPb,UAAUn1C,GAClB+0C,EAAQkB,cAAa,GACrBlB,EAAQmB,oBAAmB,GAG5B,OAAOnB,EAGRp+C,YAAY47C,EAAIz9C,GACf,SAAIy9C,IACAh8C,OAAOo5C,MAAMwG,UAAUplD,KAAKi8C,UAER,IAAnBl4C,EAAKshD,YAAmB7D,EAAG8D,iBAET,IAAnBvhD,EAAKshD,WACJ7D,EAAG+D,WACH/D,EAAGgE,QAEHhgD,OAAOo5C,MAAM6G,gBAAgB7gC,SAAS48B,EAAGvB,YAK/Cr6C,SAASopB,GACR,OAAOhvB,KAAK0lD,WAAW12B,GAGxBppB,wBAEC,CAAC,OAAQ,aAAa+d,aAAK9iB,UAAMb,EAAK2lD,WAAW9kD,KAE7Cb,KAAK06C,aAAe16C,KAAK66C,WAAWC,KAAKoD,OAC/Bl+C,KAAK66C,WAAWC,KAAKoD,OAAOv1B,QAClC9Z,iBAAQhO,UAAKb,EAAK2lD,WAAW9kD,EAAE,GAAIA,EAAE,MAElCb,KAAKq7C,mBAAmB6C,OAErBl+C,KAAKq7C,mBAAmB6C,OAC9BrvC,iBAAQhO,UAAKb,EAAK2lD,WAAW9kD,EAAE,GAAIA,EAAE,MAI7Cb,KAAK4lD,qBAGNhgD,gCAEC5F,KAAKk+C,OAASl+C,KAAKk+C,QAAU,GAC7Bp4C,IAAM+/C,WAAYhlD,UAAKb,EAAK2lD,WAAW9kD,IAGvC,CACCb,KAAKo8B,KAAK0pB,YACV9lD,KAAKo8B,KAAK2pB,aACTpiC,IAAIkiC,GAGN//C,IAAMo4C,EAASl+C,KAAKo8B,KAAK8hB,OAAOvrC,gBAAO6uC,GACtC,OAAQA,EAAGwE,cAAgBxE,EAAGyE,qBAC1BzgD,OAAO0gD,KAAKC,SAASnmD,EAAKi8C,QAASuF,EAAG4E,UAAW,SACjD5gD,OAAOo5C,MAAMyH,cAAc7E,EAAGG,aAC7BH,EAAG8E,cAGTpI,EAAOv6B,IAAIkiC,GAGX3H,EAAOvrC,gBACN6uC,SAAuB,aAAjBA,EAAGG,WAA4BH,EAAG/gD,UACvCkjB,aAAI69B,GACDA,EAAG/gD,QAAQmkB,SAAS,KACvBihC,EAAUrE,EAAG/gD,QAAQG,MAAM,KAAK,IAEhCilD,EAAUrE,EAAG/gD,YAKdT,KAAKumD,SAASC,YAAc,IAAI7iC,IAAIkiC,GAGtCjgD,eACCw0C,MAAMqM,eAGP7gD,4BAGK8gD,EAAe1mD,KAAK2nC,QAAQhkB,aAAI69B,SAAM,CAACA,EAAGqC,MAAOrC,EAAGI,SAASrkC,UAK7DopC,EAA0BD,EAAa/zC,gBAAO6uC,GACjD,OAAOxhD,EAAKk+C,OAAO77B,cAAMwhC,GACxB,OAAOrC,EAAG,IAAMqC,EAAM,IAAMrC,EAAG,IAAMqC,EAAM,OAMzC+C,EAAgB5mD,KAAKk+C,OAAOvrC,gBAAO6uC,GACtC,OAAQkF,EAAarkC,cAAMwhC,GAC1B,OAAOrC,EAAG,IAAMqC,EAAM,IAAMrC,EAAG,IAAMqC,EAAM,OAK7C7jD,KAAKk+C,OAAayI,SAA4BC,GAG/ChhD,wBACKs4C,EAASl+C,KAAKk+C,OAAOv6B,aAAI9iB,GAC5B0iB,IAAIsjC,EAAcrhD,OAAOo5C,MAAMkI,qBAAqBjmD,EAAE,GAAIA,EAAE,IAK5D,OAJIA,EAAE,KAAOb,EAAKi8C,UAEjB4K,EAAcA,EAAc,QAAahmD,EAAE,OAAMA,EAAE,QAE7CgmD,IAEFE,EACL/mD,KAAKgnD,yBACHrjC,aAAIw8B,UAAO36C,OAAOo5C,MAAMkI,qBAAqB,OAAQ3G,GAAO,QAAaA,aAG5E,OAFAjC,EAASA,EAAOh7C,OAAO6jD,GAKxBnhD,oCACC,OAAO5F,KAAKk+C,OACVvrC,gBAAO9R,UAAKA,EAAE,KAAOb,EAAKi8C,UAC1Bt4B,aAAI9iB,UAAKA,EAAE,KACXomD,gBAAOtmD,UAAKA,IAGfiF,wBAAwBq6C,EAAWhE,EAASiL,GAC3CphD,IAAM+9C,EAAQ,CAAC5D,EAAWhE,GAC1Bj8C,KAAKk+C,OAAOl8B,OAAOklC,EAAW,EAAGrD,GAEjC7jD,KAAKmnD,oBAAoBlH,EAAWhE,EAASiL,GAE7ClnD,KAAKymD,eACLzmD,KAAKu7C,gBAEDv7C,KAAKm/C,WAAWn/C,KAAKm/C,UAAU78C,UACnCtC,KAAKm/C,UAAY,KACjBn/C,KAAKqC,UAGNuD,oBAAoBq6C,EAAWhE,EAASiL,GAEvCphD,IAAM07C,EAAKh8C,OAAO42B,KAAKgrB,aAAanL,EAASgE,GAC7C,GAAIuB,GAAuB,aAAjBA,EAAGG,WAA4BH,EAAG/gD,UAC1C+gD,EAAG/gD,QAAQmkB,SAAS,MAAQpf,OAAO42B,KAAKirB,UAAUpL,EAASuF,EAAG/gD,SAC9D,CACDqF,IAAM+9C,EAAQ,CAACrC,EAAG/gD,QAASw7C,QACTp7B,IAAdqmC,EACHlnD,KAAKk+C,OAAO36C,KAAKsgD,GAEjB7jD,KAAKk+C,OAAOl8B,OAAOklC,EAAW,EAAGrD,GAElC/9C,IAAMwhD,EAAc9hD,OAAO42B,KAAKmrB,UAAUtL,EAAS4H,EAAM,IACzDr+C,OAAOu8C,WACNxH,GAAG,+CAAgD,CAACA,GAAG+M,GAAazF,WAKvEj8C,6BAA6B6yB,EAAKwjB,GAEjC,GAAIxjB,IAAQz4B,KAAKk+C,OAAO77B,cAAKxhB,UAAKA,EAAE,KAAO43B,IAAM,CAChD3yB,IAAM+9C,EAAQ,CAACprB,EAAKwjB,GACpBj8C,KAAKk+C,OAAO36C,KAAKsgD,GACjB7jD,KAAKqC,UACLyD,IAAMwhD,EAAc9hD,OAAO42B,KAAKmrB,UAAUtL,EAAS4H,EAAM,IACzDr+C,OAAOu8C,WACNxH,GAAG,8CAA+C,CAACA,GAAG+M,GAAazF,WAKtEj8C,6BAA6B0zB,GAC5BxzB,IAAM4S,EAAQ1Y,KAAKk+C,OAAO5T,mBAAUzpC,UAAKy4B,EAAOuqB,QAAUhjD,EAAE,MAC7C,IAAX6X,IAGa,SAFH1Y,KAAKk+C,OAAOxlC,GAEhB,KACT1Y,KAAKqC,UACLmD,OAAOgiD,MAAMjN,GAAG,4BAGjBv6C,KAAKk+C,OAAOl8B,OAAOtJ,EAAO,GAC1B1Y,KAAKymD,eACLzmD,KAAKu7C,gBACLv7C,KAAKqC,WAGNuD,cAAc6hD,EAAMC,GACnB5hD,IAAMkkC,EAAShqC,KAAKk+C,OAAO5T,mBAAUzpC,UAAK4mD,EAAK5D,QAAUhjD,EAAE,KACrDopC,EAASjqC,KAAKk+C,OAAO5T,mBAAUzpC,UAAK6mD,EAAK7D,QAAUhjD,EAAE,KACrD8mD,EAAU3nD,KAAKk+C,OAAOv1B,QAExBuhB,EAAOyd,EAAQ3d,GACnB2d,EAAQ3d,GAAU2d,EAAQ1d,GAC1B0d,EAAQ1d,GAAUC,EAElBlqC,KAAKk+C,OAASyJ,EACd3nD,KAAKymD,eACLzmD,KAAKu7C,gBACLv7C,KAAKqC,UAGNuD,yBACC2d,IAAIyO,EAAM,GAEJ41B,WAAyBpG,UAAOqG,QAAQriD,OAAOo5C,MAAMkJ,cAAetG,EAAGG,YAEzEoG,EAAiBviD,OAAO42B,KAAK4rB,cAAchoD,KAAKi8C,SAAStpC,OAAOi1C,GAGhEK,EAAaziD,OAAOo5C,MAAMqJ,WAAWt1C,gBAAQ6uC,SAAuB,cAAjBA,EAAGvB,YAGtDiI,GAAoB,EAuCxB,OArCIloD,KAAK+D,OACRmkD,EAAoB1iD,OAAO2iD,cAAcnoD,KAAK+D,KAAK,GAAI/D,KAAKi8C,WAGxDz2C,OAAO42B,KAAKirB,UAAUrnD,KAAKi8C,QAAS,WAAaiM,IACrDH,EAAiB,CAAC,CACjBpQ,MAAO4C,GAAG,UACV0F,UAAW,YACX0B,UAAW,SACTz+C,OAAO6kD,IAGXA,EAAiB,CAAC,CACjBpQ,MAAO4C,GAAG,MACV0F,UAAW,OACX0B,UAAW,OACXyG,KAAM,IACJllD,OAAO6kD,EAAgBE,GAE1Bj2B,EAAIhyB,KAAKi8C,SAAW8L,EAECviD,OAAO42B,KAAKisB,iBAAiBroD,KAAKi8C,SAE1CptC,iBAAQ2yC,GACpB17C,IAAMq6C,EAAMqB,EAAG/gD,QACT6nD,EAAqB9iD,OAAO42B,KAAK4rB,cAAc7H,GAAKxtC,OAAOi1C,GAEjE51B,EAAImuB,GAAOmI,EAGXt2B,EAAImuB,GAAK58C,KAAK,CACbo0C,MAAO4C,GAAG,SACV0F,UAAW,MACX0B,UAAW,MACXpkC,OAAQ4iC,MAGHnuB,EAGRpsB,+BACO2iD,EAAgB,GAChB5gB,EAAU3nC,KAAKuhD,yBA2CrB,OAzCAgH,EAAchlD,KAAK,CAClBo0C,MAAO4C,GAAGv6C,KAAKi8C,SACfgE,UAAWjgD,KAAKi8C,QAChB0F,UAAW,aACXha,QAAS,EACTlnC,QAASknC,EAAQ3nC,KAAKi8C,SACpBtpC,gBAAO6uC,GACP,OAAQA,EAAGgE,QAA2B,SAAjBhE,EAAGvB,YAExBt8B,aAAI69B,UACJ7J,MAAO4C,GAAGiH,EAAG7J,OACb1oC,MAAOuyC,EAAGvB,UACV7kC,QAASpb,EAAKk+C,OAAO77B,cAAKxhB,UAAKA,EAAE,KAAO2gD,EAAGvB,WAAap/C,EAAE,KAAOb,EAAKi8C,sBAIlEtU,EAAQ3nC,KAAKi8C,SAECz2C,OAAO42B,KAAKisB,iBAAiBroD,KAAKi8C,SACrDtpC,gBAAO6uC,UAAOA,EAAGgE,SAEN32C,iBAAQ2yC,GACpB17C,IAAMq6C,EAAMqB,EAAG/gD,QAEf8nD,EAAchlD,KAAK,CAClBo0C,MAAO4C,GAAGiH,EAAG7J,OAAS,KAAK4C,GAAG4F,OAC9BF,UAAWuB,EAAG/gD,QACdkhD,UAAW,aACXha,QAAS,EACTlnC,QAASknC,EAAQwY,GACfxtC,gBAAO6uC,GACP,OAAQA,EAAGgE,SAEX7hC,aAAI69B,UACJ7J,MAAO4C,GAAGiH,EAAG7J,OACb1oC,MAAOuyC,EAAGvB,UACV7kC,QAASpb,EAAKk+C,OAAO77B,cAAKxhB,UAAKA,EAAE,KAAO2gD,EAAGvB,WAAap/C,EAAE,KAAOs/C,WAK9DoI,EAGR3iD,gBAAgB47C,GACf,OAAOrW,QACNnrC,KAAKk+C,OAAO77B,cAAKxhB,UAAKA,EAAE,KAAO2gD,EAAGvB,WAAauB,EAAGjkC,SAAW1c,EAAE,MAIjE+E,gBAEC2d,IAAI66B,EAAgB,KAChBp+C,KAAK2nC,UACRyW,EAAgBp+C,KAAKq+C,qBAGtBr+C,KAAK2nC,QAAU,GACf3nC,KAAKmjD,YAAc,GAEnB,IAAK,UAASnjD,KAAKk+C,uBAAQ,CAAtB36B,IAAI1iB,OACJy4B,SACO,cAAPz4B,EAAE,GACLy4B,EAASt5B,KAAKwoD,aAAa3nD,GAGtBb,KAAKk+C,OAAOt5B,SAAS,CAAC,SAAU5kB,KAAKi8C,WAAcz2C,OAAO42B,KAAKirB,UAAUrnD,KAAKi8C,QAAS,YAC3F3iB,EAASt5B,KAAKwoD,aAAa,CAAC,YAAaxoD,KAAKi8C,WAI5C3iB,IACC8kB,IACH9kB,EAAOvvB,MAAQq0C,EAAc9kB,EAAO1f,KAAO0f,EAAOvvB,OAAS,KAE5D/J,KAAK2nC,QAAQpkC,KAAK+1B,GAClBt5B,KAAKmjD,YAAY7pB,EAAO1f,IAAM0f,IAKjC1zB,aAAavH,GAEZ,kBACIujD,EAAWp8C,OAAO42B,KAAKqsB,aAAaxM,GAAWj8C,KAAKi8C,SAASgE,GAqCjE,GAlCkB,sBAAdA,IACH2B,EAAW5hD,KAAKu9C,iBAAiBmL,yBAIhB,QAAdzI,GAAuBhE,IAAYj8C,KAAKi8C,UAC3C2F,EAAW,CACVjK,MAAO,QACPgK,UAAW,MACXpkC,OAAQ0+B,IAIL2F,IACJA,EAAWp8C,OAAOo5C,MAAM+J,cAAc1I,GAAW,MAG5C2B,EAASjK,QACZiK,EAASjK,MAAQiR,QAAQ3I,GACtB2B,EAASjK,MAAM/yB,SAAS,OAC1Bg9B,EAASjK,MAAQiK,EAASjK,MAAM1iC,QAAQ,IAAI,OAG9C2sC,EAASrkC,OAASvd,KAAKi8C,QACN,QAAbgE,IACH2B,EAASnhD,QAAUT,KAAKi8C,SAER,aAAbgE,GAA6Bz6C,OAAO42B,KAAKirB,UAAUrnD,KAAKi8C,QAAS,YACpE2F,EAASjK,MAAQ,SACjBiK,EAASD,UAAY,OACrBC,EAASryC,KAAO,WAIdqyC,IAAYA,EAAS0E,YAA1B,CAEA/iC,IAAIyuB,EAAQuI,GAAGqH,EAAWA,EAASjK,MAAQiR,QAAQ3I,IAC/ChE,IAAYj8C,KAAKi8C,UACpBjK,GAAS,KAAKuI,GAAG0B,QAGlBn2C,IAAM4yB,EAAWlzB,OAAOo5C,MAAMiK,iBAAiB5I,KAAe2B,EAAS2D,UAEjE7c,EACcljC,OAAOo5C,MAAMkK,iBAAiBlH,GAEzC,QAEsB,SAAvBA,EAASD,UAAuB,QAAU,OAG9C/nC,EAAKqmC,EAGLhE,IAAYj8C,KAAKi8C,SAAyB,sBAAdgE,IAC/BrmC,EAAKqiC,MAAcgE,GAGpB18B,IAAIxZ,GAAS63C,EAAWmH,KAAKnH,EAAS73C,OAAS,OAAS,KACxD,GAAI/J,KAAK66C,WAGR9wC,GAD0B/J,KAAK66C,WAAWC,KAAKsD,eAAiB,IACpCxkC,IAAO7P,EAGpCwZ,IAAIylC,EAAY,KAahB,MAZ2B,SAAvBpH,EAASD,YACZqH,WAAap1B,EAAM+R,GAClB,IAAK/R,EAAKqF,QAAS,OAAO,KAC1B,GAAI0M,EAAQ/iC,SAAW,aAAaA,OAAQ,OAAO,KAEnDkD,IAAM4gC,EAAelhC,OAAOyjD,SAASC,YAAYvjB,GAEjD,MAAO,EADWngC,OAAOyjD,SAASE,WAAWv1B,EAAKqF,UAC7ByN,KAKhB,CACN9sB,GAAIA,EACJiqC,MAAO5D,EACP1wC,KAAMyiC,EACN/Y,QAAS+Y,WACT4P,QACA73C,WACA2uB,QACAgQ,EACArC,aAAc2iB,EACd9qB,gBAASjvB,EAAOsqB,EAAKD,EAAQv1B,GAC5Bwf,IAAIq3B,EAAM,KAWV,OATCA,EADG/4B,MAAM4C,QAAQ8U,GACXA,EAAIpH,gBAAQC,EAAKmI,GACtB,OAAKA,EAAKjB,OAAOsoB,UACjBxvB,EAAImI,EAAKjB,OAAOsoB,SAAS3B,WAAa1lB,EAAKtB,QACpC7G,GAF2BA,GAGhC,IAEGmH,EAGA/zB,OAAO04B,OAAOjvB,EAAOqqB,EAAOsoB,SAAU,CAAEkC,sBAAsB,GAAQlJ,MAKhFh1C,WAAW7B,cACJiuB,EAAMjuB,EAAK4f,aAAIhjB,UAAKX,EAAKugD,UAAU5/C,KAEzC,GAAIX,KAAKk7C,eAAgB,CACxBp1C,IAAMsjD,EAASppD,KAAKqpD,mBAAmBtlD,GACjCulD,EAAatpD,KAAK2nC,QAAQhkB,aAAK8U,EAAK3qB,GACzC,MAAO,CACNyB,KAAMgrC,GAAG,cACTthB,QAASmwB,EAAO3wB,EAAI7e,IACpBskB,gBAAQjvB,GACPsU,IAAIgmC,EAAkB/jD,OAAO04B,OAAOjvB,EAAOwpB,EAAImpB,SAAU,CACxDkC,sBAAsB,GACpB//C,EAAK,IACR,OAAU,IAAN+J,EACI9N,EAAKwpD,kBAAkBD,EAAiB9wB,GAEzC8wB,MAKVv3B,EAAIzuB,KAAK+lD,GAEV,OAAOt3B,EAGRpsB,kBAAkB2jD,EAAiB/H,GAClCj+B,IAAIkmC,EAAalP,GAAG,UAAUsH,OAM9B,OALIr8C,OAAOo5C,MAAMkK,iBAAiBtH,EAAGI,YACpC6H,EAAa,gDACVA,MAAclhD,EAAEghD,GAAiBxjC,0BAG9B0jC,EAGR7jD,UAAUjF,cACT,OAAOX,KAAK2nC,QAAQhkB,aAAI8U,GACvB,GAAIA,EAAImpB,SAASrkC,SAAWvd,EAAKi8C,QAAS,CAEzCn2C,IAAM4jD,WAAY7oD,UAAQ43B,EAAImpB,oBAAmB/gD,GAC3C0O,EAAO5O,EAAE+oD,EAAU,SAEzB,MAAO,CACNn6C,KAAMA,EACN0sC,QAASxjB,EAAImpB,SAASrkC,OACtB0b,QAASt4B,EAAE+oD,EAAUjxB,EAAIorB,SAAWljD,EAAE83B,EAAIorB,OAC1CnrB,SAAUyS,QAAQ57B,GAAQvP,EAAK2pD,YAAYlxB,EAAImpB,SAAUjhD,IACzDu9B,gBAAQjvB,GACP,OAAOzJ,OAAO04B,OAAOjvB,EAAOwpB,EAAImpB,SAAU,CAAEkC,sBAAsB,GAAQnjD,KAI7E,GAAkB,cAAd83B,EAAIorB,OAA0Br+C,OAAO42B,KAAKirB,UAAUrnD,EAAKi8C,QAAS,WAkB/D,GAAIxjB,EAAIorB,SAASljD,EAAG,CAC1BmF,IAAMmJ,EAAQtO,EAAE83B,EAAIorB,OACpB,MAAO,CACNt0C,KAAM5O,EAAE4O,KACR0sC,QAASxjB,EAAImpB,SAASrkC,OACtB0b,QAAShqB,EACTypB,SAAU14B,EAAK2pD,YAAYlxB,EAAImpB,SAAUjhD,SAxBsC,CAEhF4iB,IAAIqmC,EAASpkD,OAAO2iD,cAAcxnD,EAAGX,EAAKi8C,SAC1C,GAAI2N,EAAQ,CAEXrmC,IAAIsmC,EAAgBD,EAAO,IAAMA,EAAO,GAAGhpD,MAAM,KAAK,GAGtD,OADAZ,EAAK8pD,6BAA6BD,EAAe7pD,EAAKi8C,SAC/C,CACN1sC,KAAM5O,EAAE4O,KACR0sC,QAASxjB,EAAImpB,SAASrkC,OACtB0b,QAAS2wB,EAAO,GAChBlxB,UAAU,GAIX14B,EAAK+gD,6BAA6BtoB,GAWpC,MAAO,CACNQ,QAAS,MAKZrzB,kBAAkBmkD,cAEXtoC,EADUzhB,KAAKm/C,UAAU9oB,WAAW6Z,iBACpBvsB,aAAI7V,UAAK9N,EAAK+D,KAAK+J,KAAI6E,gBAAO7E,UAAU+S,MAAL/S,IAEzD,OAAIi8C,EACItoC,EAAMkC,aAAIhjB,UAAKA,EAAE4O,OAGlBkS,EAGR7b,YAAYokD,cACLC,WAAgB16C,GAErBzJ,IAAM04C,EAAkB,CACvB/Y,QAASzlC,EAAKm9C,YAAYhpC,MAC1B+pC,OAAQl+C,EAAKk+C,OACbjD,SAAUj7C,EAAKg9C,cAAcmB,iBAC7BjD,eAAgBl7C,EAAKk7C,eACrBC,YAAan7C,EAAKm7C,YAClBiD,cAAep+C,EAAKq+C,oBACpBZ,SAAUz9C,EAAKu9C,iBAAiBe,eAChClD,WAAYp7C,EAAKu+C,sBAGlB,OAAO/4C,OAAOzG,KAAK,CAClBuR,OAAQ,qCACR2I,KAAM,CACL1J,KAAMA,EACN0sC,QAASj8C,EAAKi8C,QACduC,gBAAiBzD,KAAKmP,UAAU1L,IAEjCzlC,kBAAUpa,GACT,GAAGA,EAAEwrD,IACJ3kD,OAAO4kD,SAAS7P,GAAG,iDADpB,CAIA,GAAG57C,EAAEg3B,SAAW31B,EAAK06C,YAUpB,OAPAl1C,OAAOm7C,KAAKhB,KAAK0K,YAAY1rD,EAAEg3B,SAAW,CACzC20B,YAAatqD,EAAKi8C,QAClBsO,YAAa,iBACbvY,MAAOrzC,EAAEg3B,cAGVnwB,OAAOQ,UAAU,OAAQhG,EAAKi8C,QAAS,SAAUt9C,EAAEg3B,SAKpD31B,EAAK66C,WAAWC,KAAO0D,EACvBx+C,EAAK89C,yCAML99C,KAAK06C,aAA4B,QAAbsP,EACtBC,EAAajqD,KAAK06C,aAElBl1C,OAAOglD,OAAO,CAACvK,UAAW,OAAQtI,MAAO4C,GAAG,mBAAoB6N,KAAM,EAAGzG,UAAW,iBAAU59C,GAC7FkmD,EAAalmD,EAAKwL,OAChBgrC,GAAG,YAIR30C,gBACC,OAAOJ,OAAOzG,KAAK,CAClBuR,OAAQ,uCACR2I,KAAM,CAAE1J,KAAMvP,KAAK06C,aACnB3hC,kBAAS0xC,GACJA,EAASN,KACblrD,OAAOyrD,QAAQC,UAKlB/kD,oBACC,OAAI5F,KAAKm/C,UACDn/C,KAAKm/C,UACV/nB,YACAkS,YAAW,GACXnX,gBAAQC,EAAKmI,GAEb,OADAnI,EAAImI,EAAK3gB,IAAMxV,SAASm2B,EAAKxwB,OACtBqoB,GACL,IAGE,GAGRxsB,4BACC,OAAO,IAAIksB,iBAAQC,GAClBvsB,OAAOo5C,MAAMgM,SAAS,SAAU5qD,EAAK06C,uBACpC3oB,EAAQvsB,OAAOs6C,QAAQ,SAAU9/C,EAAK06C,kBAKzC90C,6BAGC,OAFgB5F,KAAKm9C,YAAYhpC,MAG/BwP,aAAK9iB,GACL,gCACA,GAAkB,MAAdgqD,EAAmB,MAAO,GAC9B/kD,IAAM6xC,EAAQnyC,OAAO42B,KAAKmrB,UAAUtL,EAASgE,GACvC2B,EAAWp8C,OAAO42B,KAAKgrB,aAAanL,EAASgE,GACnD,aAAc1F,GAAG5C,QAAWnyC,OAAO04B,OAAOjvB,EAAO2yC,aAEjDn/C,KAAK,IAGRmD,mBAAmB7B,GAClB,IAAK/D,KAAKk7C,eACT,MAAO,GAGRp1C,IAAMglD,EAAa,GAanB,OAXA9qD,KAAK2nC,QAAQ94B,iBAAS4pB,EAAK3qB,GAC1BhI,IAAMsjD,EAASrlD,EAAKouB,gBAAQi3B,EAAQzoD,GACnC,GAAI83B,EAAI7e,MAAMjZ,GAAK6E,OAAOo5C,MAAMkK,iBAAiBrwB,EAAImpB,UAEpD,OADAwH,GAAU2B,IAAIpqD,EAAE83B,EAAI7e,MAGnB,GAEHkxC,EAAWryB,EAAI7e,IAAMwvC,IAGf0B,EAGRllD,+BACK6b,EAAQ,CACX,CACCk2B,MAAO4C,GAAG,eACV7N,kBACC1sC,EAAKk7C,gBAAkBl7C,EAAKk7C,eAC5Bl7C,EAAK8+C,wBAAwB,CAC5B5D,eAAgBl7C,EAAKk7C,iBAEtBl7C,EAAKm/C,UAAU98C,QAAQrC,EAAKq/C,SAASr/C,EAAK+D,SAG5C,CACC4zC,MAAO4C,GAAG,SACV7N,kBAEC5mC,IAAMklD,EAAgBhrD,EAAKm/C,UAAU/nB,YAAYgS,aAAazlB,aAAIjL,GACjE,GAAI1Y,EAAKm/C,UAAUtR,aAAaoD,kBAAkBrsB,SAASlM,GAC1D,OAAO1Y,EAAK+D,KAAK2U,KAEhB/F,OAAOw4B,SAEV,GAAInrC,EAAKk7C,eAAgB,CACxBp1C,IAAMmlD,EAAajrD,EAAKqpD,mBAAmBrpD,EAAK+D,MAEhDknD,EAAiB,KAAI1Q,GAAG,UAAUsH,OAClCmJ,EAAcznD,KAAK0nD,GAGpBzlD,OAAOy3C,GAAGiO,oBAAmB,WAAQC,GACpC,IAAInZ,EAAShyC,EAAK06C,aAAeH,GAAGv6C,EAAKi8C,SACzCz2C,OAAO4lD,YAAY,CAClBpZ,MAAOA,EACPqZ,SAAUrrD,EAAKsrD,6BACfH,eAAgBA,EAChBxjB,QAAS3nC,EAAK2nC,QACd5jC,KAAMinD,EACNO,qBAAsB,QAK1B,CACC5T,MAAO4C,GAAG,gBACV7N,yBAAc1sC,EAAKwrD,kBAEpB,CACC7T,MAAO4C,GAAG,kBACV7N,yBAAc1sC,EAAKu8C,mBACnBkP,SAAU,UAEX,CACC9T,MAAO4C,GAAG,gBACV7N,kBACC5mC,IAAMnF,EAAI,IAAI6E,OAAOy3C,GAAGyE,OAAO,CAC9B1P,MAAOuI,GAAG,gBACV2D,OAAQl+C,EAAK0rD,oBACb5J,wBAAiB9yB,GAEhBzL,IAAI26B,EAASlvB,EAAOhvB,EAAKi8C,SAASt4B,aAAI9iB,SAAK,CAACA,EAAGb,EAAKi8C,kBAC7CjtB,EAAOhvB,EAAKi8C,2BAIlBiC,EAASA,EAAOh7C,OAAO8rB,EAAOmxB,GAAKx8B,aAAI9iB,SAAK,CAACA,EAAGs/C,OADjD,IAAK58B,IAAI48B,KAAOnxB,OAKhBhvB,EAAKk+C,OAAS,CAAC,CAAC,OAAQl+C,EAAKi8C,iBAAaiC,GAE1Cl+C,EAAKk+C,OAAOv6B,aAAI9iB,UAAKb,EAAKmnD,oBAAoBtmD,EAAE,GAAIA,EAAE,MAEtDb,EAAK2rD,iBACL3rD,EAAKymD,eACLzmD,EAAKu7C,gBAELv7C,EAAKm/C,UAAU78C,UACftC,EAAKm/C,UAAY,KACjBn/C,EAAKqC,UAEL1B,EAAEshD,UAIJthD,EAAEirD,MAAMxoD,qGAE4Bm3C,GAAG,oGAIvC/0C,OAAO0c,MAAM2pC,aAAalrD,EAAEirD,MAAO,iBAAkB,eACrDjrD,EAAEyhD,UAKD58C,OAAOo5C,MAAMkN,WAAW9rD,KAAKi8C,UAChCx6B,EAAMle,KAAK,CACVo0C,MAAO4C,GAAG,UACV7N,kBACC5mC,IAAMmT,EAAOjZ,EAAK29C,WACZoO,EAAiB/rD,EAAKkhD,mBAAkB,GAC1ChD,EAAS,CACZ,CACCyD,UAAW,SACXhK,MAAO4C,GAAG,oBACV0F,UAAU,mBACVx/C,QAAS,CAAC,QAAS,OACnB4iC,QAAS,WAIPrjC,EAAKgsD,YAAchsD,EAAKisD,wBAA0BhzC,EAAKkiC,cAC1D+C,EAAO36C,KAAK,CACXo+C,UAAW,QACX1B,UAAW,kBACXtI,MAAO4C,GAAG,uBAAwB,EAAEv6C,EAAKgsD,YAAc,IAAInK,WAI7D/7C,IAAMnF,EAAI,IAAI6E,OAAOy3C,GAAGyE,OAAO,CAC9B1P,MAAOuI,GAAG,qBAAqB,CAACA,GAAGv6C,EAAKi8C,WACxCiC,OAAQA,EACRgO,qBAAsB3R,GAAG,YACzBuH,wBAAiB/9C,GAChBkV,EAAKkzC,IAAM,sCACXlzC,EAAKmzC,iBAAmBroD,EAAKqoD,iBAC7BnzC,EAAK+4B,MAAQhyC,EAAK06C,aAAe16C,EAAKi8C,QAEnCj8C,EAAKk7C,iBACPjiC,EAAKiiC,eAAiB,GAGpB6Q,EAAenpD,OAAS,IAC1BqW,EAAK8yC,eAAiBA,GAGlBhoD,EAAKsoD,wBAIFpzC,EAAK2xB,aACL3xB,EAAKkiC,cAJZliC,EAAK2xB,MAAQ,EACb3xB,EAAKkiC,YAAcn7C,EAAK+D,KAAKnB,QAM9B0pD,cAAc9mD,OAAO+mD,QAAQC,IAAKvzC,GAElCtY,EAAEshD,UAIJthD,EAAEyhD,UAKL3gC,EAAMle,KAAK,CACVo0C,MAAO4C,GAAG,oBACV7N,kBACI1sC,EAAK06C,YACPl1C,OAAOQ,UAAU,OAAQ,oBAAqB,CAACymD,OAAWzsD,EAAK06C,cAE/Dl1C,OAAO4kD,SAAS7P,GAAG,oCAKtBz0C,IAAM4mD,WAAsBhgB,GAC3B5mC,IAAMwK,EAAmB,UAAVo8B,EAAqB,aAAe,YACnD,OACC1sC,EAAK66C,YAC8B,QAAhC76C,EAAK66C,WAAW8R,cAElBnnD,OAAOo5C,MAAMtuC,GAAQ,WAClBtQ,EAAK66C,WAAW+R,QAAUpnD,OAAOo6C,QAAQD,OAmD/C,OA7CI+M,KACHjrC,EAAMle,KAAK,CACVo0C,MAAO4C,GAAG,QACV7N,yBAAc1sC,EAAK6sD,YAAY,WAKjCprC,EAAMle,KAAK,CACVo0C,MAAO4C,GAAG,WACV7N,yBAAc1sC,EAAK6sD,YAAY,cAI5BH,EAAmB,WACtBjrC,EAAMle,KAAK,CACVo0C,MAAO4C,GAAG,UACV7N,yBAAclnC,OAAOsnD,QACpB,iEACM9sD,EAAK+sD,mBAEZtB,SAAU,iBAKTzrD,KAAK06C,aAAel1C,OAAOo5C,MAAMoO,yBAAyB,WAC5DvrC,EAAMle,KAAK,CACVo0C,MAAO4C,GAAG,oBACV7N,kBACC5mC,IAAMmT,EAAO,CACZgjC,QAAS,SACT1sC,KAAMvP,EAAK06C,aAEZl1C,OAAOQ,UAAU,OAAQ,kBAAmBiT,MAK3CzT,OAAOm6C,KAAKsN,SAAS,mBACpBjtD,KAAKktD,mBACRzrC,EAAMle,KAAKvD,KAAKktD,qBAIXzrC,EAAMkC,aAAI7V,UAAKlP,OAAOgiC,OAAO9yB,EAAG,CAAEq/C,UAAU,QC9gDrD3nD,OAAOw0C,QAAQ,uBACfx0C,OAAOw0C,QAAQ,gBACfx0C,OAAOw0C,QAAQ,wBAEfx0C,OAAO4nD,eAAe,gBAAkB,WACvC,IAAI71B,EAAU/xB,OAAOqU,UAAUwzC,SAAS,gBAExC7nD,OAAOy3C,GAAGqQ,cAAc,CACvB/vC,OAAQga,EACRya,MAAOuI,GAAG,gBACVgT,eAAe,IAGhB/nD,OAAOgoD,aAAe,IAAIhoD,OAAOC,MAAMgoD,YAAY,CAClDlwC,OAAQga,IAGThvB,EAAEgvB,GAAS5oB,KAAK,OAAQ,WACvBnJ,OAAOgoD,aAAapL,UAItB58C,OAAOC,MAAMgoD,YAAc,MAAMA,oBAAoBjoD,OAAOC,MAAMioD,SACjE9nD,kBACC5F,KAAKu5C,OAAOrf,uBAAWl6B,EAAK2tD,SAG7B/nD,kBACC,GAAI5F,KAAK4tD,aACR,OAAO5tD,KAAK4tD,aAGbrqC,IAAIsqC,EAAQ,CACX7tD,KAAKq6C,eACLr6C,KAAKs8C,WACLt8C,KAAK8tD,qBACL9tD,KAAKy7C,cACJ93B,aAAI7P,UAAMA,EAAGnF,KAAK3O,KAEpB,OADAA,KAAK4tD,aAAepoD,OAAOuoD,aAAaF,GACjC7tD,KAAK4tD,aAGbhoD,iBACC5F,KAAK6F,MAAQL,OAAOi1C,YACpBz6C,KAAKguD,UAAYxoD,OAAOyoD,gBAGxBjuD,KAAK8hD,eAAiB,KAGtB9hD,KAAKqC,QAAUmD,OAAO0c,MAAMM,SAASxiB,KAAKqC,QAAS,KAEnDrC,KAAKo8C,WAAa,GAGnBx2C,0CACC5F,KAAKkuD,gBAAkBluD,KAAKkuD,eAAep3B,SAC3C92B,KAAKkuD,eAAiBluD,KAAK07C,KAAKyS,gBAAgB,qBAC/CnuD,EAAKouD,qBACLpuD,EAAKqC,YAIPuD,wBACC,qMAIM20C,GAAG,sCAIV30C,0BACCJ,OAAO02C,SAAS/5B,GAAG,4BAAqBpe,GAEvC,GADA/D,EAAKquD,gCAA+B,GACjCtqD,EAAK22C,YAKP,GAJA16C,EAAKsuD,uBAAyB,UAI3BvqD,EAAKwL,MAAQvP,EAAKuuD,yBACpBvuD,EAAKqC,cACC,CACNkhB,IAAIirC,EAAgB,UAAUxuD,iEACJA,wCAA0C+D,oBACpEyB,OAAOu8C,WAAW,CAACpsB,QAAS64B,EAAexM,UAAW,cAIzDhiD,KAAK07C,KAAKnkB,QAAQpV,GAAG,QAAS,yBAAkBhhB,GAC/CoiB,IAAIkrC,EAAclmD,EAAEpH,EAAEutD,eAAe3qD,KAAK,UACtC2oC,EAAS1sC,EAAKyuD,GACd/hB,EAAO3tC,MACV2tC,EAAO3tC,KAAKiB,EAAMmB,KAKrByE,OACC,GAAIJ,OAAOi1C,YAAY73C,OAAS,EAC/B5C,KAAK2uD,wBAAuB,OAD7B,CAKAprC,IAAIqrC,EAAgB,GACpBA,EAAgBhwD,OAAOgiC,OAAOguB,EAAeppD,OAAOopD,eAEhD5uD,KAAK06C,cAAgBl1C,OAAOi1C,YAAY,GAE3Cz6C,KAAK6uD,YAAYD,GAETppD,OAAOspD,qBAGf9uD,KAAK+uD,eAAeH,IAQtBhpD,YAAYgpD,cACX5uD,KAAK07C,KAAKsT,sBACVhvD,KAAK6F,MAAQL,OAAOi1C,YACpBz6C,KAAKguD,UAAYxoD,OAAOyoD,gBACxBjuD,KAAK06C,YAAc16C,KAAK6F,MAAM,GAC9B7F,KAAKs6C,WAAaC,GAAGv6C,KAAK06C,aAC1B16C,KAAKivD,WAAY,EACjBjvD,KAAKo8C,WAAap8C,KAAKkvD,iBACvBlvD,KAAKm/C,UAAY,KACjBn/C,KAAKsuD,uBAAyB,MAE9B9oD,OAAOuoD,aAAa,mBACb/tD,EAAK26C,oCACL36C,EAAKmvD,yCACLnvD,EAAKouD,wCACLpuD,EAAKovD,qCACLpvD,EAAK+uD,eAAeH,sBACpB5uD,EAAKqvD,8BAA6B,sBAClCrvD,EAAKsvD,4BAA2B,MAIxC1pD,wCACC5F,KAAK07C,KAAK6T,iBAAiBhV,GAAG,0BAC7Bv6C,EAAKwvD,0BAIP5pD,6BAA6Bw8C,cACxBA,GACHpiD,KAAKyvD,qBAAuBzvD,KAAKyvD,oBAAoB34B,SACrD92B,KAAKyvD,oBAAsBzvD,KAAK07C,KAAKgU,WAAWnV,GAAG,wBAClDv6C,EAAK2vD,8BAGF3vD,KAAK4vD,cAAgB5vD,KAAK6vD,iBAC7B7vD,KAAK8vD,yBAA2B9vD,KAAK8vD,wBAAwBh5B,SAC7D92B,KAAK8vD,wBAA0B9vD,KAAK07C,KAAKgU,WAAWnV,GAAG,qCACtDv6C,EAAK+vD,8BAIP/vD,KAAKyvD,qBAAuBzvD,KAAKyvD,oBAAoB34B,SACrD92B,KAAK8vD,yBAA2B9vD,KAAK8vD,wBAAwBh5B,UAI/DlxB,mCACKoqD,EAAgBxqD,OAAOyqD,aAAaC,8BAA8BlwD,KAAK2nC,QAAS3nC,KAAKmwD,UACnFC,EAAkB5qD,OAAO6qD,gBAAgBC,2BACzCC,EAAe/qD,OAAOm7C,KAAK6P,eAE3B1N,EAAS,IAAIt9C,OAAOy3C,GAAGyE,OAAO,CACnC1P,MAAOuI,GAAG,eACV2D,OAAQ,CACP,CACC+B,UAAW,eACXtI,MAAO4C,GAAG,SACVoH,UAAW,SACXlhD,QAASuvD,EAAcS,gBAExB,CACCxQ,UAAW,OACX0B,UAAW,gBAEZ,CACC1B,UAAW,kBACXtI,MAAO4C,GAAG,YACV95C,QAAS,CAAC,MAAO,UAAW,UAAW,WACvCkhD,UAAW,UAEZ,CACC1B,UAAW,OACXtI,MAAO4C,GAAG,oBACVoH,UAAW,iBAEZyO,EACA,CACCnQ,UAAW,OACX0B,UAAW,gBAEZ,CACC1B,UAAW,QACXtI,MAAO4C,GAAG,cACVoH,UAAW,SAGbuK,qBAAsB3R,GAAG,OACzBuH,wBAAiB9yB,GACXA,EAAO2oB,QACX3oB,EAAO2oB,MAAW3oB,yBAA6B45B,QAAQ55B,EAAO0hC,eAE/D1wD,EAAK2wD,mBAAmB3hC,EAAQA,EAAO4hC,UAAW5hC,EAAO2oB,MAAO4Y,GAChEzN,EAAOb,UAITa,EAAOV,OAIRx8C,oCACC,GAAI5F,KAAK4vD,cAAgB5vD,KAAK6vD,cAAe,CAC5C/pD,IAAMsqD,EAAkB5qD,OAAO6qD,gBAAgBC,2BACzCC,EAAe/qD,OAAOm7C,KAAK6P,eAE3B1N,EAAS,IAAIt9C,OAAOy3C,GAAGyE,OAAO,CACnC1P,MAAOuI,GAAG,gBACV2D,OAAQ,CACP,CACC+B,UAAW,uBACXtI,MAAO,aACPgK,UAAW,QAEZyO,GAEDlE,qBAAsB3R,GAAG,OACzBuH,wBAAiB9yB,GAChBhvB,EAAK6wD,uBACJ7wD,EAAK4vD,cAAgB5vD,EAAK6vD,cAC1B7gC,EAAO4hC,UACP5hC,EAAO8hC,qBACPP,GAEDzN,EAAOb,UAITa,EAAOV,YAEP58C,OAAO4kD,SAAS7P,GAAG,qBAIrB30C,mBAAmBopB,EAAQ+hC,EAAgBC,EAAWT,GACrDhtC,IAAItK,EAAO,CACV23C,UAAaG,GAAkB,KAC/Bp2C,KAAQ,SACR+/B,YAAe16C,KAAK06C,YACpBuW,aAAgBlW,KAAKmP,UAAUlqD,KAAKkxD,qBACpCX,aAAcA,GAEf3xD,OAAOgiC,OAAO3nB,EAAM+V,GAEpBhvB,KAAKmxD,iBACJ,wEACAl4C,EACA83C,EACAC,EACA,eAIFprD,uBAAuBw1C,EAAY2V,EAAgBK,EAAYb,GAC9DhtC,IAAItK,EAAO,CACV23C,UAAaG,GAAkB,KAC/BtO,WAAc,SACd/H,YAAe16C,KAAK06C,YACpB//B,KAAQygC,EAAWqH,YAAcj9C,OAAOo5C,MAAMyS,QAAQjW,EAAWzgC,MACjE22C,MAASlW,EAAWkW,MACpBL,aAAgBlW,KAAKmP,UAAUlqD,KAAKkxD,qBACpCK,eAAkB,GAClBhB,aAAgBA,GAGjB,IAAKhtC,IAAIlK,KAAO+hC,EACJ,QAAP/hC,IACHJ,EAAqB,eAAEI,GAAO+hC,EAAW/hC,IAI3C,GAAIrZ,KAAK4vD,aAAc,CACtBrsC,IAAIiuC,EAAgB5I,QAAQxN,EAAWqW,SACnCC,EAAgB9I,QAAQxN,EAAWwH,SAAS,IAChDwO,EAAaA,GAAkBpxD,sBAAqBwxD,SAAoBE,EAExE9yD,OAAOgiC,OAAO3nB,EACb,CACCm4C,WAAcA,EACdK,QAAWrW,EAAWqW,QACtBvO,OAAU9H,EAAWuW,cAAchuC,aAAI9iB,GACtC,MAAO,CAAC+wD,QAAW/wD,EAAE+wD,QAASN,MAASzwD,EAAEywD,SAE1CO,iBAAoB,SAItBT,EAAaA,GAAcpxD,KAAK06C,YAChC97C,OAAOgiC,OAAO3nB,EACb,CACCm4C,WAAcA,EACdS,iBAAoB,IAKvB7xD,KAAKmxD,iBACJ,0EACAl4C,EACA83C,EACAK,EACA,mBAIFxrD,iBAAiB0K,EAAQ2I,EAAM83C,EAAgBxhD,EAAM0sC,GACpDz2C,OAAOssD,MACNxhD,EACA,CAAC2I,KAAMA,IACNihB,gBACD3W,IAAIoS,EACJ,GAAIo7B,EAAgB,CACnBxtC,IAAIwuC,EAAuB,4BAA4BhB,OAAmBA,SAC1Ep7B,EAAU4kB,GAAG,qCAAsC,CAACA,GAAG0B,GAAU1sC,EAAMwiD,SAEvEp8B,EAAU4kB,GAAG,sBAAuB,CAACA,GAAG0B,GAAU1sC,IAGnD/J,OAAO4kD,SAASz0B,EAAS4kB,GAAG,kBAAmB,CAACA,GAAG0B,QAIrDr2C,eAAegpD,cAId,OAHA5uD,KAAKgyD,gBAAe,GACpBhyD,KAAKiyD,eAAc,GAEZzsD,OAAOuoD,aAAa,mBACpB/tD,EAAKkyD,mCACLlyD,EAAKmyD,kBAAkBvD,sBACvB5uD,EAAK07C,KAAK0W,0CACVpyD,EAAKw+C,gBAAgB6T,QAAUryD,EAAKw+C,gBAAgB6T,OAAOryD,sBAC3DA,EAAKqC,aAIbuD,4BACC,OAAOJ,OAAOo5C,MAAMgM,SAAS,SAAU5qD,KAAK06C,aAC1CxgB,cAAK0gB,GACL56C,EAAK66C,WAAaD,IAElB1gB,uBAAW10B,OAAOo5C,MAAM0T,aAAatyD,EAAK66C,WAAWyP,eAGxD1kD,iCACC,OAAO,IAAIksB,iBAASC,EAAS4yB,GACxBn/C,OAAO+sD,cAAcvyD,EAAK06C,cAC7B16C,EAAKw+C,gBAAkBh5C,OAAO+sD,cAAcvyD,EAAK06C,aACjD3oB,KAEAvsB,OAAOssD,MAAM,sCAAuC,CACnDpX,YAAa16C,EAAK06C,cAChBxgB,cAAKqsB,GACP/gD,OAAOgU,IAAIg5C,KAAKjM,EAASkM,QAAU,IACnCjtD,OAAOktD,sBACN1yD,EAAKw+C,gBAAkBx+C,EAAK2yD,4BAC5B3yD,EAAKw+C,gBAAgBoU,YAAcrM,EAASqM,YAC5C5yD,EAAKw+C,gBAAgBqU,eAAiBtM,EAASsM,gBAAkB,EACjErtD,OAAO+sD,cAAcvyD,EAAK06C,aAAe16C,EAAKw+C,gBAE1Cx+C,EAAK66C,WAAWpV,UAAYzlC,EAAKw+C,gBAAgB/Y,UAEpDzlC,EAAKw+C,gBAAgB/Y,QAAUzlC,EAAK66C,WAAWpV,SAGhD1T,QAECuI,MAAMqqB,KAKZ/+C,4BACC2d,IAAIuvC,EAAqD,kBAAhC9yD,KAAK66C,WAAW0P,YACtCvqD,KAAK66C,WAAWkY,iBAChB/yD,KAAK06C,YACR,OAAOl1C,OAAO+sD,cAAcO,IAAuB,GAGpDltD,qBACC2d,IAAIyvC,EAAkB,EAChBH,EAAiB7yD,KAAKw+C,gBAAgBqU,gBAAkB,EAE1DA,EAAiB,IAErB7yD,KAAKizD,SAAWhlD,YAAY,WAC3B+kD,GAAmB,EACnBxtD,OAAO0tD,cAAc3Y,GAAG,oBAAqByY,EAAiBH,IAC5D,MAGJjtD,wCACC5F,KAAKylC,QAAQ52B,iBAAQ8D,GACpBA,EAAOwgD,oBAAqB,EAExBxgD,EAAO6uC,GAAG4R,aACbzgD,EAAOwgD,mBACNnzD,EAAKqzD,0BAA0B1gD,EAAO6uC,GAAG4R,WAAYzgD,EAAO6uC,GAAG7J,OAE5DhlC,EAAOwgD,mBACNxgD,EAAO6uC,GAAG8R,2BACb3gD,EAAO6uC,GAAG8R,0BAA2B,EACrCtzD,EAAKuzD,sBAAsB5gD,EAAO6uC,GAAGvB,WAAW,IAG5CttC,EAAO6uC,GAAG8R,2BACd3gD,EAAO6uC,GAAG8R,0BAA2B,EACrCtzD,EAAKuzD,sBAAsB5gD,EAAO6uC,GAAGvB,WAAW,GAChDttC,EAAOyxC,UAAUzxC,EAAO6uC,GAAGne,SAAW,UAQ3Cz9B,0BAA0B4tD,WAAYC,cACrClwC,IAAIyO,IAAM,KACN4oB,IAAM56C,KAAKkxD,oBACf,GAAItW,IACH,GAA0B,kBAAf4Y,WACVxhC,IAAMwhC,gBACA,GAA+B,SAA3BA,WAAWl9C,OAAO,EAAG,GAC/B,IACC0b,IAAMwgC,KAAKgB,WAAWl9C,OAAO,IAC5B,MAAOnV,GACRqE,OAAOgiD,MAAMjN,GAAG,oDAAqD,CAACkZ,oBAEjE,CACN,IAAIxkD,MAAQ2rC,IAAI4Y,YAEfxhC,IADGzpB,EAAEkc,QAAQxV,SACLA,MAAMrM,SAENqM,MAIX,OAAO+iB,IAGRpsB,2BACC5F,KAAK0zD,gBACL,MAAyB1zD,KAAKw+C,uCAAZ,IAElBj7B,IAAI45B,EAAcn9C,KAAK07C,KAAKiY,UAE5B3zD,KAAKylC,QAAUA,EAAQ9hB,aAAI69B,GAC1B,GAAqB,UAAjBA,EAAGG,UAAP,CAEAp+B,IAAI1iB,EAAIb,EAAK07C,KAAKmK,UAAUrE,EAAIrE,GAqChC,OAnCIqE,EAAGne,SACNxiC,EAAE+yD,UAAUpS,EAAGne,SAGZme,EAAGqS,YAAWhzD,EAAEgzD,UAAYrS,EAAGqS,WAC/BrS,EAAGsS,YAAWjzD,EAAEizD,UAAYtS,EAAGsS,WAEnCtS,EAAGnE,oBACFr9C,EAAK+zD,6BAELxwC,IAAIywC,EAAkBh0D,EAAKkxD,oBACvBlxD,EAAKi0D,kBACJlZ,KAAKmP,UAAUlqD,EAAKi0D,oBAAsBlZ,KAAKmP,UAAU8J,KAM9Dh0D,EAAKi0D,iBAAmBD,EACxBjyD,6BAAiB/B,EAAKi0D,iBAAmB,MAAM,KAE3CpzD,EAAEizD,UACLjzD,EAAEizD,UAAU9zD,GAERA,EAAKk0D,gBACRl0D,EAAKm0D,oBAEIn0D,EAAKo0D,aACdp0D,EAAKqC,SAAQ,KAKhBxB,EAAIjC,OAAOgiC,OAAO//B,EAAG2gD,MAInB7uC,OAAOw4B,SAEVnrC,KAAK+zD,6BACuB,IAAxB/zD,KAAKylC,QAAQ7iC,OAEhB5C,KAAK07C,KAAK2Y,YAEVr0D,KAAK07C,KAAK4Y,YAIZ1uD,YAAY6/B,GACXzlC,KAAKylC,QAAQ9hB,aAAI9iB,GAChBA,EAAE+yD,UAAUnuB,EAAQ5kC,EAAEo/C,cAIxBr6C,kBAAkBgpD,GAGjB,GAFKA,IAAeA,EAAgBppD,OAAOopD,eAEvCA,EAAe,CAClB9oD,IAAMo4C,EAASt/C,OAAO8kB,KAAKkrC,GAIrB2F,EAFiBv0D,KAAKylC,QAAQ9yB,gBAAO9R,UAAKq9C,EAAOt5B,SAAS/jB,EAAE2gD,GAAGvB,aAErCt8B,aAAI9iB,GACnC,kBACCiF,IAAMmJ,EAAQ2/C,EAAc/tD,EAAE2gD,GAAGvB,WACjCp/C,EAAEujD,UAAUn1C,MAOd,OAJAslD,EAAShxD,gBACRiC,OAAOopD,cAAgB,OAGjBppD,OAAOuoD,aAAawG,IAI7B3uD,gBACC5F,KAAK07C,KAAK8Y,eAGX5uD,QAAQ6uD,cACPz0D,KAAKgyD,gBAAe,GACpBhyD,KAAKiyD,eAAc,GACnB1uC,IAAIkiB,EAAUzlC,KAAKkxD,mBAAkB,GAOjCwD,EAAsB10D,KAAKylC,QAC7B9hB,aAAKhR,GACL,OACE8hD,IACA9hD,EAAO0wB,UAAY1wB,EAAO1D,QAAW0D,EAAO0wB,UAAY1wB,EAAO1D,SAGjEwrB,eAAOk6B,UAAgB,IAARA,IAEjB30D,KAAK40D,sBAGD50D,KAAK60D,WACR70D,KAAK60D,UAAUC,QAGhBhvD,IAAMivD,EAAe/0D,KAAKg1D,mBAM1B,OAJID,EAAaE,uBAChBxvB,EAAQwvB,qBAAuBF,EAAaE,sBAGtC,IAAInjC,iBAAQC,GAClB/xB,EAAK60D,UAAYrvD,OAAOzG,KAAK,CAC5BuR,OAAQ,+BACRqK,KAAM,MACN1B,KAAM,CACLyhC,YAAa16C,EAAK06C,YAClBjV,QAASA,EACTyvB,QAASl1D,EAAKw+C,gBAAgB2W,KAC9BC,aAAcp1D,EAAKw+C,gBAAgB4W,aACnCV,oBAAqBA,GAEtB37C,SAAUgZ,EACVsjC,yBAAcr1D,EAAK07C,KAAK4Z,cAAcpgD,KAAK,YAAY,QAEtDglB,cAAKv7B,GACP4kB,IAAIxf,EAAOpF,EAAEg3B,QAWb,GAVA31B,EAAKu1D,cACLxnD,cAAc/N,EAAKizD,UAEnBjzD,EAAK6yD,eAAiB9uD,EAAK8uD,gBAAkB,GAEzC9uD,EAAKyxD,iBACRx1D,EAAKy1D,YAAY1xD,EAAKyxD,gBACtBx1D,EAAKi0D,iBAAmBlwD,EAAKyxD,gBAG1BzxD,EAAKmwD,gBAAiB,CAKzB,GAJAl0D,EAAKk0D,iBAAkB,EACvBl0D,EAAK01D,yBAA2B3xD,EAAK62C,IAGjCma,EAAaE,qBAAsB,CACtCj1D,EAAKsuD,uBAAyB,OAC9BxoD,IAAM6vD,EAAsB5a,KAAKC,MAAMj3C,EAAK62C,IAAInV,SAChD7mC,OAAOowB,OAAOhvB,EAAKylC,SAAS52B,QAAQ,SAASg1C,GACxC8R,EAAoB9R,EAAM5D,YAC7B4D,EAAM+P,UAAU+B,EAAoB9R,EAAM5D,YAEvC4D,EAAMzkB,QACTykB,EAAMzkB,MAAMxtB,UAAW,KAI1B5R,EAAK41D,4BAA4B7xD,EAAK62C,KAGnC72C,EAAK8xD,iBACR71D,EAAK81D,SAAS/4C,QACd/c,EAAK+1D,eAAehyD,EAAK8xD,iBAGtB9xD,EAAK4xB,UAAY5xB,EAAKmwD,iBAAiBl0D,EAAKg2D,YAAYjyD,EAAK4xB,SAEjE31B,EAAKgyD,gBAAe,GAChBjuD,EAAKwjB,QAAUxjB,EAAKwjB,OAAO3kB,QAC9B5C,EAAKi2D,oBAAoBlyD,GACzB/D,EAAK6vD,cAAgB7vD,EAAKk2D,kBAAkBnyD,GAE5C/D,EAAKm2D,OAAOp5C,QACR/c,EAAK6vD,cACR7vD,EAAKo2D,aAAap2D,EAAK6vD,gBAGvB7vD,EAAKm2D,OAAOp5C,QACR/c,EAAK4vD,eACR5vD,EAAK6vD,cACJrqD,OAAOyqD,aAAaoG,mBACnBr2D,EAAK2nC,QACL3nC,EAAKmwD,SACLnwD,EAAK4vD,cAEP5vD,EAAK6vD,eAAiB7vD,EAAKo2D,aAAap2D,EAAK6vD,iBAG/C7vD,EAAKs2D,mBACLt2D,EAAKqvD,8BAA6B,GAClCrvD,EAAKsvD,6BACLtvD,EAAKu2D,QAAQnU,SAEbpiD,EAAK+D,KAAO,GACZ/D,EAAK2uD,wBAAuB,GAC5B3uD,EAAKqvD,8BAA6B,IAGnCrvD,EAAKw2D,sBACLhxD,OAAOixD,kBACLC,mBACF12D,EAAK22D,wBAIP/wD,eAAe7B,cACdA,EAAK8K,iBAAS+nD,GACbpxD,OAAO0c,MAAM20C,mBAAmBD,GAASE,SAAS92D,EAAK81D,YAGxD91D,KAAK81D,SAAS1T,OAGfx8C,mBACCE,IAAMixD,EAAevxD,OAAO0c,MAAM80C,iBAAiBxxD,OAAOyoD,iBAE1D,OADqBzoD,OAAO0c,MAAM8yC,iBAAiB+B,GAIpDnxD,4BAA4Bg1C,cAC3B,GAAIA,EAAK,CACR56C,KAAK07C,KAAK6T,iBAAiBhV,GAAG,mBAAoB,WACjDt7C,OAAOg4D,KACNzxD,OAAO0xD,OAAOC,aACb,0FACOC,mBAAmBxc,EAAIrrC,UAGjCzJ,IAAMuxD,EAAQ9c,GAAG,iCAAkC,CAAC/0C,OAAOyjD,SAASqO,aAAa1c,EAAI2c,mBAC/EC,EAAQjd,GAAG,2CAA4C,CAACA,GAAG,aAC3Dkd,EAAQld,GAAG,yBAEjBv6C,KAAKg2D,uFAGAqB,mBACAG,oEACiDx3D,uBAAsBy3D,qDAU7Ez3D,KAAK03D,mBAAqB,CACzBC,IAAO,CACNhgB,MAAO4C,GAAG,uBACVqd,iBACC53D,EAAK63D,oCAGPC,KAAQ,CACPngB,MAAO4C,GAAG,QACVqd,iBACCpyD,OAAOQ,UAAUR,OAAOi1C,eAG1Bsd,QAAW,CACVpgB,MAAO4C,GAAG,WACVqd,iBACC53D,EAAK63D,qCAKRt0C,IAAIu+B,EAAiB9hD,KAAK03D,mBAAmB13D,KAAKsuD,wBAE7CtuD,KAAKg4D,gBAAkBh4D,KAAKg4D,eAAejyC,SAAW+7B,EAAenK,QACzE33C,KAAKg4D,eAAiBh4D,KAAK07C,KAAKuc,mBAC/BnW,EAAenK,MACfmK,EAAe8V,QAKlBhyD,+BAA+BsyD,GAC9Bl4D,KAAKg4D,eAAe9iD,KAAK,WAAYgjD,GAGtCtyD,6CACCJ,OAAOssD,MACN,kFACA,CACCrsB,QAASzlC,KAAKkxD,oBACdxW,YAAa16C,KAAK06C,cAElBxgB,cAAKi+B,GAGN,GAFAn4D,EAAKo4D,wBAA0BD,EAE3BA,EAAQv1D,OAAQ,CACnBkD,IAAM6vB,EAAU31B,EAAKq4D,4CAA4CF,GACjEn4D,EAAKs4D,uBAAyB9yD,OAAOo8B,KACpC2Y,GAAG,4BACH5kB,oBACM31B,EAAKu4D,8BACXhe,GAAG,mBACH,GAGDv6C,EAAKs4D,uBAAuBrmB,OAAO7uC,4IAE/Bm3C,GAAG,oDAGP/0C,OAAO0c,MAAMs2C,yBAAyBx4D,EAAKs4D,uBAAuB/gC,QAASv3B,QAE3EA,EAAKu4D,+BAKR3yD,4CAA4CuyD,GAC3CryD,IAAMD,EAAQ,4DAA4D7F,KAAgB,YACpFy4D,EAAqC,GAAlBN,EAAQv1D,qCACAiD,OAAU00C,GAAG,iDACb10C,OAAU00C,GAAG,cAAe,CAAC4d,EAAQv1D,gBAEhE81D,EAAuC,GAAlBP,EAAQv1D,UAC7B23C,GAAG,2DAA4D,CAACke,OAChEle,GAAG,4DAA6D,CAACke,IAEnEE,EAAkB,wBAElBpe,GAAG,gEACHme,iBAOJ,OAFAC,GAAmBR,EAAQx0C,aAFP/M,4DAA2DA,YAAcA,gBAE/CnU,KAAK,MAKpDmD,uCACC5F,KAAKs4D,uBAAuBrW,OAC5Bz8C,OAAOssD,MACN,8EACA,CACCqG,QAASn4D,KAAKo4D,0BAEdl+B,uBAAWl6B,EAAKu4D,+BAGnB3yD,wCAIC,GAHA5F,KAAKquD,gCAA+B,IACpBruD,KAAKylC,QAAQ9yB,gBAAO9R,UAAKA,EAAE2gD,GAAG4G,OACZz1C,gBAAO9R,UAAMA,EAAE4jD,cAC1B7hD,OAAQ,CAC9B2gB,IAAIkiB,EAAUzlC,KAAKkxD,mBAAkB,GACrC,OAAO,IAAIp/B,iBAAQC,UAAWvsB,OAAOzG,KAAK,CACzCuR,OAAQ,kDACRqK,KAAM,MACN1B,KAAM,CACLyhC,YAAa16C,EAAK06C,YAClBjV,QAASA,GAEV1sB,SAAUgZ,MACPmI,cAAKv7B,GACRmH,IAAM/B,EAAOpF,EAAEg3B,QAEf31B,EAAKuuD,yBAA2BxqD,EAAKwL,KACrCgU,IAAIirC,EAAgB,iCAAiCzqD,YACpDw2C,GAAG,0CAA4C,OAChD/0C,OAAOu8C,WAAW,CAACpsB,QAAS64B,EAAexM,UAAW,UAAW,IACjEhiD,EAAK2uD,wBAAuB,MAK/B/oD,oBAAoB7B,GACnB/D,KAAKmwD,SAAWpsD,EAChB/D,KAAK2nC,QAAU3nC,KAAK44D,gBAAgB70D,EAAK4jC,SACzC3nC,KAAK64D,eAAiB,GACtB74D,KAAK+D,KAAO/D,KAAK84D,aAAa/0D,EAAKwjB,QACnCvnB,KAAK+4D,gBAAkB/4D,KAAKg5D,sBAC5Bh5D,KAAKi5D,YAAcj5D,KAAK+D,KAAKyX,cAAK7a,SAAK,WAAYA,IAGpDiF,mBACC2d,IAAIxf,EAAO/D,KAAK+D,KACZ4jC,EAAU3nC,KAAK2nC,QAAQh1B,gBAAQ8lB,UAASA,EAAI+sB,SAQhD,GANIxlD,KAAKmwD,SAAS+I,gBAAkBl5D,KAAKw+C,gBAAgB2W,OACxDpxD,EAAOA,EAAK4kB,SACP3G,QAAQ,EAAG,GAGjBhiB,KAAKu2D,QAAQnU,OACTpiD,KAAKm/C,WAAan/C,KAAKm/C,UAAU1+C,SAChCT,KAAKm/C,UAAU1+C,QAAQgyC,eAAgBzyC,KAAKmwD,SAAS+I,cACzDl5D,KAAKm/C,UAAU1+C,QAAQw8B,SAAWj9B,KAAKi5D,YACvCj5D,KAAKm/C,UAAU98C,QAAQ0B,EAAM4jC,OACvB,CACNpkB,IAAI41C,EAAoB,CACvBxxB,QAASA,EACT5jC,KAAMA,EACN8wB,eAAe,EACfoQ,SAAUz/B,OAAOm7C,KAAKC,KACtB1b,aAAc1/B,OAAO0c,MAAMi9B,UAAU0B,mBACrC5jB,SAAUj9B,KAAKi5D,YACfjlB,OAAQ,QACR7B,WAAY,GACZM,aAAczyC,KAAKmwD,SAAS+I,gBAAkBl5D,KAAKw+C,gBAAgB2W,KACnE7iD,UAAW9M,OAAO0c,MAAM4+B,SAAW,MAAQ,MAC3ClO,MAAO,CACNC,YAAartC,OAAO0c,MAAMk/B,sBAIxBphD,KAAKw+C,gBAAgB4a,wBACxBD,EAAoBn5D,KAAKw+C,gBAAgB4a,sBAAsBD,IAEhEn5D,KAAKm/C,UAAY,IAAIpI,UAAU/2C,KAAKu2D,QAAQ,GAAI4C,GAGA,iBAAtCn5D,KAAKw+C,gBAAgB6a,eAC/Br5D,KAAKm/C,UAAU9oB,WAAWijC,aAAat5D,KAAKw+C,gBAAgB6a,eAEzDr5D,KAAKw+C,gBAAgB+a,wBACxBv5D,KAAKw+C,gBAAgB+a,uBAAuBv5D,KAAKm/C,WAInDv5C,sBACCE,IAAM0zD,EAAgB,+LAIhBjf,GAAG,iCAGTv6C,KAAKy5D,SAASp3C,KAAK,OAAO9f,KAAKi3D,GAC/Bx5D,KAAKu2D,QAAQtU,OACbjiD,KAAKy5D,SAASrX,OAGfx8C,sBACC5F,KAAKy5D,SAASxX,OAGfr8C,kBAAkB7B,GACjBwf,IAAI9iB,EAAUT,KAAKw+C,gBAAgBkb,eAChC15D,KAAKw+C,gBAAgBkb,eAAe31D,EAAK4jC,QAAS5jC,EAAKwjB,QACvDxjB,EAAKk7C,MACJl7C,EAAKk7C,WACLp+B,EAEJ,GAAMpgB,GAAWA,EAAQsD,MAAQtD,EAAQsD,KAAKq/C,QAAU3iD,EAAQsD,KAAKq/C,OAAOxgD,OAAS,EAerF,OAbInC,EAAQkhD,YACXlhD,EAAQkjD,eAAiB,CACxBC,wBAAgBjjD,UAAK6E,OAAO04B,OAAOv9B,EAAG,CACrCghD,UAAWlhD,EAAQkhD,UACnBlhD,QAASA,EAAQA,aAIpBA,EAAQgjD,YAAc,CACrBC,oBAAqB,GAEtBjjD,EAAQwE,OAAS,IAEVxE,EAGRmF,aAAanF,GACZT,KAAKm2D,OAAOp5C,QACZ/c,KAAKm2D,OAAO/T,OACZpiD,KAAKi/C,MAAQ,IAAIz5C,OAAO89C,MAAMtjD,KAAKm2D,OAAO,GAAI11D,GAG/CmF,sCACO+zD,EAAK35D,KACPgwD,EAAgBxqD,OAAOyqD,aAAaC,8BAA8BlwD,KAAK2nC,QAAS3nC,KAAKmwD,UAEzF,SAASyJ,EAAiB5qC,GAezB,OAdAA,EAAO4zB,SAAW,GAClB5zB,EAAOw0B,OAAS,GACZx0B,EAAO2iC,eACV3iC,EAAO2iC,cAAchuC,aAAI9iB,GACxBmuB,EAAO4zB,SAASr/C,KAAK1C,EAAE+wD,SACvB5iC,EAAOw0B,OAAOjgD,KAAK1C,EAAEywD,SAIvBtiC,EAAO4zB,SACN5zB,EAAO4zB,SACLj/B,aAAIhjB,UAAKA,EAAE+a,SACX/I,OAAOw4B,SAEHnc,EAGR,SAAS6qC,IACR/zD,IAAMyxB,EAAUhvB,EAAEu6C,EAAOgC,YAA2B,cAAEvtB,SAClDvI,EAAS8zB,EAAOgX,YAAW,GAG/B,IAFA9qC,EAAS4qC,EAAiB5qC,IAEfyiC,SAAWziC,EAAO4zB,SAAShgD,OAAQ,CAC7C2gB,IAAI9iB,EAAU+E,OAAOyqD,aAAaoG,mBAAmBsD,EAAGhyB,QAASgyB,EAAGxJ,SAAUnhC,GAC9E2qC,EAAG/J,aAAe5gC,EAClBuI,EAAQxa,QACR,IAAIvX,OAAO89C,MAAM/rB,EAAQ,GAAI92B,GAC7B82B,EAAQlV,KAAK,wDAAwD4/B,OACrE1qB,EAAQ6qB,OAERU,EAAOgC,YAAmC,sBAAEtD,GAAGgE,OAAS,EACxD1C,EAAOzgD,eAGPk1B,EAAQ,GAAG/3B,UACX,mHACQ+6C,GAAG,yDAKbz0C,IAAMg9C,EAAS,IAAIt9C,OAAOy3C,GAAGyE,OAAO,CACnC1P,MAAOuI,GAAG,gBACV2D,OAAQ,CACP,CACC+B,UAAW,UACXtI,MAAO,UACPgK,UAAW,SACXte,QAASs2B,EAAG/J,aAAc+J,EAAG/J,aAAa6B,QAAS,KACnDhxD,QAASuvD,EAAc+J,oBAExB,CACC9Z,UAAW,OACX0B,UAAW,gBAEZ,CACC1B,UAAW,aACXtI,MAAO,gBACPgK,UAAW,SACXlhD,QAAS,CAAC,MAAO,OAAQ,aAAc,MAAO,SAC9C4iC,QAASs2B,EAAG/J,aAAc+J,EAAG/J,aAAanN,WAAY,OAEvD,CACCxC,UAAW,OACX0B,UAAW,gBACXhK,MAAO,UAER,CACCsI,UAAW,gBAAiB0B,UAAW,QACvCzD,OAAQ,CACP,CACCyD,UAAW,SACX1B,UAAW,UACX1wC,KAAM,UACNooC,MAAO4C,GAAG,WACV95C,QAASuvD,EAAcS,eACvBzK,aAAc,GAEf,CACCrE,UAAW,QACX1B,UAAW,QACX1wC,KAAM,QACNooC,MAAO4C,GAAG,SACVyL,aAAc,KAIjB,CACC/F,UAAW,uBACX0B,UAAW,SACXhK,MAAO,gBACPigB,MAAOiC,GAER,CACC5Z,UAAW,OACX0B,UAAW,gBACXhK,MAAO,iBAER,CACCsI,UAAW,gBACXtI,MAAO,gBACPgK,UAAW,QAEZ,CACC1B,UAAW,wBACXtI,MAAO,yBACPgK,UAAW,SACX6D,OAAQ,EACRoS,iBACC9U,EAAOb,OACPjiD,EAAK+vD,4BAIR7D,qBAAsB3R,GAAG,UACzBuH,wBAAiB9yB,GAChBA,EAAS4qC,EAAiB5qC,GAE1BzL,IAAI9iB,EACH+E,OAAOyqD,aAAaoG,mBACnBr2D,EAAK2nC,QACL3nC,EAAKmwD,SACLnhC,GAEF2qC,EAAG/J,aAAe5gC,EAElBzL,IAAIy2C,EACHhK,EAAcS,eAAe99C,gBAAOkxC,UACnCA,EAAM50C,OAAS+f,EAAO4zB,SAAS,KAC9B,GAAGjL,MACFsiB,EACHjK,EAAc+J,mBAAmBpnD,gBAAOkxC,UACvCA,EAAM50C,OAAS+f,EAAOyiC,UACrB,GAAG9Z,MAENl3C,EAAQuxC,MAAQuI,GAAG,kBAAmB,CAACv6C,EAAK06C,YAAasf,EAAeC,IAExEj6D,EAAKo2D,aAAa31D,GAClBT,EAAKqvD,8BAA6B,GAElCvM,EAAOb,UAITa,EAAOV,OAGPrgD,WAAW83D,EAAe,KAG3Bj0D,gBAAgB+hC,cACf,OAAOA,EAAQhkB,aAAI2V,GAClBA,EAAS9zB,OAAOyqD,aAAaiK,0BAA0B5gC,GAEvDxzB,IAAMq0D,WAAelrD,EAAOsqB,EAAKD,EAAQv1B,GACxC,GAAIu1B,EAAO0C,WAAaj4B,GAAQ/D,EAAK+D,KAAM,CAK1Cwf,IAAI7K,EAAQ,EAEZ,GAAI1Y,EAAKw+C,gBAAgB4a,sBAAuB,CAC/C71C,IAAI47B,EAAYn/C,EAAKw+C,gBAAgB4a,sBAAsB,IACvDja,GAAaA,EAAU7W,iBAAgB5vB,EAAQ,GAGhD4gB,EAAO/E,WAAa7b,GAAUzJ,EAGvB44C,QAAQ,CAAC,WAAY,SAAUvuB,EAAOqoB,aAEhD59C,EAAO/D,EAAK+D,KAAK,KAJjBkL,EAAQ,QACRqqB,EAAS,CAAEqoB,UAAW,SAMxB,OAAOn8C,OAAO04B,OAAOjvB,EAAOqqB,EAC3B,CAAC8gC,WAAW,EAAOtW,sBAAsB,GAAO//C,IAG9CilD,EAAY,KAYhB,MAXyB,SAArB1vB,EAAOqoB,YACVqH,WAAap1B,EAAM+R,GAClB,IAAK/R,EAAKqF,QAAS,OAAO,KAC1B,GAAI0M,EAAQ/iC,SAAW,aAAaA,OAAQ,OAAO,KAEnDkD,IAAM4gC,EAAelhC,OAAOyjD,SAASC,YAAYvjB,GAEjD,MAAO,EADWngC,OAAOyjD,SAASE,WAAWv1B,EAAKqF,UAC7ByN,KAIhB9nC,OAAOgiC,OAAOtH,EAAQ,CAC5B1f,GAAI0f,EAAO2mB,UACX1wC,KAAMgrC,GAAGjhB,EAAOqe,MAAO,0BAA2B33C,mBAClD+J,MAAO3F,SAASk1B,EAAOvvB,QAAU,KACjC2uB,UAAU,EACV2N,aAAc2iB,EACd9qB,gBAASjvB,EAAOsqB,EAAKD,EAAQv1B,GAC5B,OAAI/D,EAAKw+C,gBAAgBvY,UACjBjmC,EAAKw+C,gBAAgBvY,UAAUh3B,EAAOsqB,EAAKD,EAAQv1B,EAAMo2D,GAE1DA,EAAYlrD,EAAOsqB,EAAKD,EAAQv1B,QAM3C6B,aAAa7B,cACZ,OAAOA,EAAK4f,aAAI4V,GACfhW,IAAI82C,EAAU,GACd,OAAIx4C,MAAM4C,QAAQ8U,IACjBv5B,EAAK2nC,QAAQ94B,iBAASyqB,EAAQxrB,GAC7BusD,EAAQ/gC,EAAO1f,IAAM2f,EAAIzrB,KAGnBusD,GAED9gC,IAIT3zB,iCAGC,OAF2B5F,KAAKm/C,UAAU/nB,YAAYkS,YAAW,GAAM3lB,aAAI8U,UAAOA,EAAI7e,KAGpF+J,aAAI/J,UAAM5Z,EAAK2nC,QAAQtlB,cAAKoW,UAAOA,EAAI7e,KAAOA,MAC9CjH,OAAOw4B,SAGVvlC,kBAAkB00D,GAGjBx0D,IACMy0D,EADYv6D,KAAKylC,QAAQ9yB,gBAAO9R,UAAMA,EAAE2gD,GAAG4G,MAAQvnD,EAAE2gD,GAAGgZ,YAC1B7nD,gBAAO9R,UAAMA,EAAE4jD,cACnD,GAAI6V,GAASC,EAAkB33D,OAAS,EAAG,CAC1C2gB,IAAIoS,EAAU4kB,GAAG,sBAGjB,MAFAv6C,KAAK22D,sBACL32D,KAAKgyD,eAAesI,EAAO3kC,GACrB,iBAuBP,OApBA2kC,GAASt6D,KAAKgyD,gBAAe,GAEbhyD,KAAKylC,QACnB9yB,gBAAO9R,UAAKA,EAAE4jD,cACd9gC,aAAI9iB,SACAuB,EAAIvB,EAAE4jD,YAOV,OALI5jD,EAAE2gD,GAAGgE,SAAQpjD,EAAIvB,EAAEoO,OACb,MAAN7M,IAAWA,EAAI,MACfvB,EAAE2gD,GAAGiZ,kBACRr4D,EAAI,IAAIA,UAEF,IACLvB,EAAE2gD,GAAGvB,WAAY79C,MAGnB+vB,gBAAQC,EAAKvxB,GAEb,OADAjC,OAAOgiC,OAAOxO,EAAKvxB,GACZuxB,GACL,IAILxsB,WAAWq6C,GACVn6C,IAAM+9C,GAAS7jD,KAAKylC,SAAW,IAAIpjB,cAAKxhB,UAAKA,EAAE2gD,GAAGvB,YAAcA,IAIhE,OAHK4D,GACJpyB,QAAQmQ,uCAAuCqe,GAEzC4D,EAGRj+C,iBAAiBq6C,GAChBn6C,IAAM+9C,EAAQ7jD,KAAK06D,WAAWza,GAC9B,OAAO4D,EAAQA,EAAMY,YAAc,KAGpC7+C,iBAAiBq6C,EAAWhxC,cACvB0rD,EAAkB,GACG,iBAAd1a,EACV0a,EAAgB1a,GAAahxC,EAE7B0rD,EAAkB1a,EAGnBjgD,KAAKo0D,aAAc,EACnBx1D,OAAO8kB,KAAKi3C,GACV9rD,iBAASoxC,EAAWnyC,EAAG2kB,GACvB3sB,IAAMmJ,EAAQ0rD,EAAgB1a,GAE1BnyC,IAAM2kB,EAAI7vB,OAAS,IACtB5C,EAAKo0D,aAAc,GAGpBp0D,EAAK06D,WAAWza,GAAWmE,UAAUn1C,KAIxCrJ,kBACC,GAAK5F,KAAK66C,YAAe76C,KAAK66C,WAAWyP,YAAzC,CACAxkD,IAAMwkD,EAAc9kD,OAAOo1D,SAAS56D,KAAK66C,WAAWyP,aACpD9kD,OAAOq1D,YAAY5rC,IAAIq7B,EAAYrsD,SAGpC2H,gBAAiB0K,EAAQwqD,GACxBt1D,OAAOzG,KAAK,4DACX,CACCk9C,QAASj8C,KAAKi8C,SAAW,GACzBvB,YAAa16C,KAAK06C,YAClBjV,QAASzlC,KAAKkxD,oBACd6J,UAAWD,EACXxqD,OAAQA,IAIX1K,aAAaulD,GACZrlD,IAAMk1D,EAAgBh7D,KAAKw+C,gBAAgBoU,aAAe,KACpDqI,EAAej7D,KAAKsrD,6BACpB4P,EAA0C,aAA9B/P,EAAegQ,YAEjCn7D,KAAKo7D,gBAAgB,QAAS,OAC9B51D,OAAO4lD,YAAY,CAClBiQ,SAAUlQ,EAAexjB,QAAU,aAAeqzB,EAClDhpB,MAAOuI,GAAGv6C,KAAK06C,aACf2Q,SAAU4P,EACV9P,eAAgBA,EAChB+P,UAAWA,EACXz1B,QAASzlC,KAAKkxD,oBACdntD,KAAM/D,KAAKs7D,qBACX3zB,QAAS3nC,KAAKu7D,sBAAsBpQ,EAAgB6P,GACpDQ,cAAex7D,KAAK+D,KACpB0oD,OAAQzsD,KACRurD,qBAAsD,QAAhCvrD,KAAK66C,WAAW8R,aAAyBqO,EAAgB,EAAI,IAIrFp1D,WAAWulD,GAuCV,IAtCArlD,IAAM21D,EAAWj2D,OAAO0xD,OAAOwE,eACzBC,EAAYn2D,OAAOm7C,KAAKgb,UACxBT,EAA0C,aAA9B/P,EAAegQ,YAE3BH,EAAgBh7D,KAAKw+C,gBAAgBoU,aAAe,KACpDjrB,EAAU3nC,KAAKu7D,sBAAsBpQ,EAAgB6P,GACrDj3D,EAAO/D,KAAKs7D,qBACZM,EAAkB57D,KAAKkxD,oBAEvB+J,EAAej7D,KAAKsrD,6BACpB+P,EACLlQ,EAAexjB,UAAYqzB,EAAgB,aAAeA,EACrD/hC,EAAUzzB,OAAOq2D,gBAAgBR,EAAU,CAChDrpB,MAAOuI,GAAGv6C,KAAK06C,aACf2Q,SAAU4P,EACVx1B,QAASm2B,EACT73D,KAAMA,EACNy3D,cAAex7D,KAAK+D,KACpB4jC,QAASA,EACT8kB,OAAQzsD,OAIHuC,EAAOiD,OAAOq2D,gBAAgB,iBAAkB,CACrD7pB,MAAOuI,GAAGv6C,KAAK06C,aACfzhB,QAASA,EACTwiC,SAAUA,EACVE,UAAWA,EACXxQ,eAAgBA,EAChB+P,UAAWA,EACXvzB,QAASA,EACTiZ,KAAMp7C,OAAOm7C,KAAKC,KAClBkb,iBAAkBt2D,OAAO0c,MAAM4+B,SAAW,MAAQ,MAClDyK,qBAAsD,QAAhCvrD,KAAK66C,WAAW8R,aAAyBqO,EAAgB,EAAI,IAGhFe,EAAgB,GACnBC,EAAW,QACIp9D,OAAO8kB,KAAKk4C,mBAAkB,CAAzC,IAAIviD,OAER,IADA2iD,GAAsBJ,EAAgBviD,GAAKva,WAAW8D,QACvC,IAAK,MACpBm5D,EAAcx4D,KAAKq4D,EAAgBviD,IAEpC8xC,EAAezQ,YAAiBH,GAAGv6C,KAAK06C,iBAAgBqhB,EAAct5D,KAAK,YAC3E+C,OAAOy2D,WAAW15D,EAAM4oD,GAGzBvlD,6BACCE,IAAM81D,EAAkB57D,KAAKkxD,oBAC7B,OAAOtyD,OAAO8kB,KAAKk4C,GACjBj4C,aAAKs8B,GACLn6C,IAAM87C,EAAWp8C,OAAOgoD,aAAakN,WAAWza,GAAWuB,GACrDvyC,EAAQ2sD,EAAgB3b,GAC9B,aAAc1F,GAAGqH,EAASjK,YAAWnyC,OAAO04B,OAAOjvB,EAAO2yC,aAE1Dn/C,KAAK,IAGRmD,2BACC,GAAI5F,KAAKk8D,cAGR,OAFAl8D,KAAKk8D,cAAcp5D,aACnB9C,KAAKk8D,cAAc9Z,OAIpB7+B,IAAI44C,EAAuB,CAC1B,CACCxkB,MAAO4C,GAAG,sBACV0F,UAAW,cACX0B,UAAW,SACXlhD,QAAS,CAAC,QAAS,OACnB4iC,QAAS,QACT+kB,KAAM,IAIJpoD,KAAKi5D,aACRkD,EAAqB54D,KAAK,CACzBo0C,MAAO4C,GAAG,uBACV0F,UAAW,sBACX0B,UAAW,UAIb3hD,KAAKk8D,cAAgB12D,OAAOglD,OAAO2R,WAAuB14C,+CAEzD,GADAzjB,EAAKo7D,gBAAgB,SAAUN,GACX,QAAhBA,EAAuB,CAC1Bh1D,IAAMs2D,EAAap8D,EAAK2nC,QAAQxV,gBAAQC,EAAKqG,GAI5C,OAHKA,EAAI+sB,QACRpzB,EAAI7uB,KAAKk1B,EAAIkf,OAEPvlB,GACL,IACGruB,EAAO/D,EAAKq8D,iBAAiBC,GAC7BtqC,EAAM,CAACoqC,GAAYl5D,OAAOa,GAEhCyB,OAAO+2D,MAAMC,YAAYxqC,EAAK,KAAMhyB,EAAK06C,iBACnC,CACNn3B,IAAIkiB,EAAUzlC,EAAKkxD,mBAAkB,GACjC1rD,OAAO0xD,OAAOuF,SAAS,0BAC1Bh3B,EAAU7mC,OAAOgiC,OAAOp7B,OAAO0xD,OAAOuF,SAAS,wBAAyBh3B,IAGzE3/B,IAAM42D,EAAc18D,EAAKm/C,UAAUtR,aAAaoD,kBAC5CyrB,EAAY95D,OAAS,IAAM5C,EAAK+D,KAAKnB,QACxC85D,EAAYn5D,KAAKm5D,EAAY95D,QAG9BkD,IAAMmT,EAAO,CACZkzC,IAAK,wCACLzR,YAAa16C,EAAK06C,YAClBme,eAAgB74D,EAAK64D,eAAej2D,OAAQ5C,EAAK64D,eAAgB,GACjEzM,iBAAkB0O,EAClBr1B,QAASA,cACTi3B,sBACAJ,GAGDhQ,cAAc9mD,OAAO+mD,QAAQC,IAAKvzC,KAEjCshC,GAAG,qBAAsB,CAACv6C,KAAK06C,cAAeH,GAAG,aAGrD30C,iBAAiB02D,cACVl7D,EAAOpB,KAAKm/C,UAAUtR,aAAaC,YAIzC,OAHI9tC,KAAKmwD,SAAS+I,eACjB93D,EAAKmC,KAAKvD,KAAKm/C,UAAUtR,aAAa8E,eAEhCvxC,EAAKuiB,aAAI4V,GACfzzB,IAAM62D,EAAwB38D,EAAKm/C,UAAU/nB,YAAY2T,yBACzD,OAAOxR,EACL5Q,MAAMg0C,GACNh5C,aAAKiQ,EAAM9lB,GAOX,MAN8B,aAA1B8lB,EAAK0F,OAAOqoB,YACf/tB,EAAKqF,QAAUzzB,OAAO0c,MAAM06C,uBAAuBhpC,EAAKqF,UAErDqjC,GAA2B,IAAJxuD,IAC1B8lB,EAAKqF,QAAU,MAAM4jC,OAAOtjC,EAAI6C,KAAKc,SAAWtJ,EAAKqF,SAAW,KAE1DrF,EAAKqF,SAAW,OAK3BrzB,gCACC,IAAK5F,KAAK+D,KAAKnB,OACd,MAAO,GAGRkD,IAAM1E,EAAOpB,KAAKm/C,UAAU/nB,YAAYgS,aAAazlB,aAAIjL,GACxD,GAAI1Y,EAAKm/C,UAAUtR,aAAaoD,kBAAkBrsB,SAASlM,GAC1D,OAAO1Y,EAAK+D,KAAK2U,KAEhB/F,OAAOw4B,SAEV,GAAInrC,KAAKmwD,SAAS+I,cAAe,CAChC31C,IAAImvB,EAAW1yC,KAAKm/C,UAAUtR,aAAa8E,cAAcxgB,gBAAQoH,EAAK3F,GAGrE,OAFA2F,EAAI3F,EAAK0F,OAAO1f,IAAMga,EAAKqF,QAC3BM,EAAIujC,cAAe,EACZvjC,GACL,IAEHn4B,EAAKmC,KAAKmvC,GAEX,OAAOtxC,EAGRwE,sBAAsBulD,EAAgB6P,GAWrC,OARI7P,GAAkBA,EAAexjB,QAC1B3nC,KAAK+8D,sBAAsBpqD,gBAAO2mB,UAC3C6xB,EAAexjB,QAAQ/iB,SAAS0U,EAAO2mB,aAG9B+a,EAAgBh7D,KAAK2nC,QAAU3nC,KAAK+8D,sBAMhDn3D,4BACK6b,EAAQ,CACX,CACCk2B,MAAO4C,GAAG,WACV7N,yBAAc1sC,EAAKqC,WACnBu3B,MAAO,cAER,CACC+d,MAAO4C,GAAG,QACV7N,yBAAclnC,OAAOQ,UAAU,OAAQ,SAAUhG,EAAK06C,cACtDmQ,4BAAiBrlD,OAAOm6C,KAAKqd,qBAC7B7P,UAAU,GAEX,CACCxV,MAAO4C,GAAG,SACV7N,kBACCnpB,IAAIu/B,EAASt9C,OAAOy3C,GAAGiO,oBACtB,WACAC,UAAkBnrD,EAAKi9D,aAAa9R,IACpCnrD,EAAK66C,WAAWqiB,YAChBl9D,EAAK+8D,uBAEN/8D,EAAKm9D,qBAAqBra,IAE3B+H,4BAAiBrlD,OAAOo5C,MAAMwe,UAAUp9D,EAAK66C,WAAWyP,cACxD6C,UAAU,GAEX,CACCxV,MAAO4C,GAAG,OACV7N,kBACCnpB,IAAIu/B,EAASt9C,OAAOy3C,GAAGiO,oBACtB,WACAC,UAAkBnrD,EAAKq9D,WAAWlS,IAClCnrD,EAAK66C,WAAWqiB,YAChBl9D,EAAK+8D,uBAGN/8D,EAAKm9D,qBAAqBra,IAE3B+H,4BAAiBrlD,OAAOo5C,MAAMwe,UAAUp9D,EAAK66C,WAAWyP,cACxD6C,UAAU,GAEX,CACCxV,MAAO4C,GAAG,UACV7N,yBAAc1sC,EAAKs9D,iBACnBzS,4BAAiBrlD,OAAOo5C,MAAMkN,WAAW9rD,EAAK66C,WAAWyP,cACzD6C,UAAU,GAEX,CACCxV,MAAO4C,GAAG,oBACV7N,yBAAclnC,OAAOQ,UAAU,OAAQ,oBAAqB,CAACymD,OAAWzsD,EAAK06C,eAC7EyS,UAAU,GAEX,CACCxV,MAAO4C,GAAG,cACV7N,kBACCnpB,IAAI5iB,EAAI,IAAI6E,OAAOy3C,GAAGyE,OAAO,CAC5B1P,MAAOuI,GAAG,cACV2D,OAAQ,CACP,CACCyD,UAAW,SACX1B,UAAW,UACXtI,MAAO4C,GAAG,sBACV95C,QAAST,EAAK+4D,gBAAgBp1C,aAAI69B,UAAS7J,MAAO6J,EAAGvF,QAAShtC,MAAOuyC,EAAGvF,WACxEiI,kBACC3gC,IAAI04B,EAAUt7C,EAAE8jD,UAAU,WAC1Bj/C,OAAOo5C,MAAM0T,aAAarW,aACzB14B,IAAI9iB,EAAU+E,OAAO42B,KAAK4rB,cAAc/L,GACtCtpC,OAAOnN,OAAOo5C,MAAMyH,eACpB1iC,aAAI69B,UAAS7J,MAAO6J,EAAG7J,MAAO1oC,MAAOuyC,EAAGvB,aAE1Ct/C,EAAE48D,gBAAgB,QAAS,UAAW98D,EAAQkR,KAAK,SAASvT,EAAGD,GAC9D,OAAIC,EAAEu5C,MAAQx5C,EAAEw5C,OACP,EAELv5C,EAAEu5C,MAAQx5C,EAAEw5C,MACR,EAED,SAMX,CACCgK,UAAW,SACXhK,MAAO4C,GAAG,SACV0F,UAAW,QACXx/C,QAAS,IAEV,CACCkhD,UAAW,SACXhK,MAAO4C,GAAG,gBACV0F,UAAW,eACXx/C,QAAST,EAAK2nC,QAAQhkB,aAAI69B,UAAMA,EAAG7J,UAGrCmK,wBAAiB9yB,GAChBlpB,IAAM+yD,EAAiB,GACnBrX,EAAKh8C,OAAO42B,KAAKgrB,aAAap4B,EAAOitB,QAASjtB,EAAO60B,OACnD2Z,EAAqBx9D,EAAK2nC,QAC9B2C,mBAAUhR,UAAUA,EAAOqe,QAAU3oB,EAAOyuC,eAE1Cxd,EAAYjgD,EAAK09D,yBAAyBlc,EAAGvB,UAAWjxB,EAAOitB,SAEnE4c,EAAet1D,KAAK,CACnB08C,UAAWA,EACX4D,MAAO70B,EAAO60B,MACdlC,UAAWH,EAAGG,UACdhK,MAAO6J,EAAG7J,MACV6lB,mBAAoBA,EACpBG,WAAY39D,EAAK49D,kBAAkB5uC,EAAOitB,SAC1CA,QAASjtB,EAAOitB,QAChBx7C,QAAS+gD,EAAG/gD,QACZsJ,MAAO,MAGR/J,EAAK64D,eAAiB74D,EAAK64D,eAAe31D,OAAO21D,GACjDrzD,OAAOzG,KAAK,CACXuR,OAAQ,qDACR2I,KAAM,CACLgjC,QAASjtB,EAAOitB,QAChBgE,UAAWA,EACX4D,MAAO70B,EAAO60B,OAEf9qC,kBAAWpa,GACVmH,IAAM+3D,EAAcl/D,EAAEg3B,QAChBgoC,EAAa39D,EAAK49D,kBAAkB5uC,EAAOitB,SACjDj8C,EAAK89D,kBAAkBjF,EAAgBgF,EAAaF,EAAY1d,EAAWud,GAC3E78D,EAAEshD,UAGJjiD,EAAK+9D,oBAIPp9D,EAAEyhD,QAEH+K,UAAU,GAEX,CACCxV,MAAO4C,GAAG,oBACV7N,yBAAclnC,OAAOQ,UAAU,OAAQ,kBAAmB,CACzDi2C,QAAS,SACT1sC,KAAMvP,EAAK06C,eAEZmQ,4BAAiBrlD,OAAOo5C,MAAMoO,yBAAyB,WACvDG,UAAU,IA0CZ,OAtCI3nD,OAAOm6C,KAAKqd,qBACfv7C,EAAMle,KAAK,CACVo0C,MAAO4C,GAAG,QACV7N,kBACCnpB,IAAI5iB,EAAI,IAAI6E,OAAOy3C,GAAGyE,OAAO,CAC5B1P,MAAOuI,GAAG,eACV2D,OAAQ,CACP,CACCyD,UAAW,OACX1B,UAAW,cACXtI,MAAO4C,GAAG,eACVlX,QAAwC,MAA/BrjC,EAAK66C,WAAW8R,YAAsB3sD,EAAK06C,YAAc,GAClE0N,MAAM,IAGRtG,wBAAiB9yB,GAChBxpB,OAAOzG,KAAK,CACXuR,OAAQ,uCACR2I,KAAM,CACL85C,iBAAkB/yD,EAAK06C,YACvBA,YAAa1rB,EAAO0rB,YACpB/S,QAAS3nC,EAAK+8D,sBACdt3B,QAASzlC,EAAKkxD,qBAEfn4C,SAAU,SAASpa,GAClBqB,KAAKivD,WAAY,EACjBtuD,EAAEshD,OACFz8C,OAAOQ,UAAU,eAAgBrH,EAAEg3B,eAKvCh1B,EAAEyhD,QAEH+K,UAAU,IAIL1rC,EAGR7b,qBAAqBk9C,GAChB9iD,KAAK2nC,QAAQ/kC,OAAS,IACzBkgD,EAAOya,gBAAgB,cAAe,oBACrCh6C,IACIw/B,EAAwB,aADhBD,EAAO2B,UAAU,eAE1BlK,GAAG,oEACH,GACHuI,EAAOya,gBAAgB,cAAe,cAAexa,KAKxDn9C,yBAAyBq6C,EAAWhE,GAEnC14B,IAAIy6C,EAAsB,GAU1B,OATAh+D,KAAK2nC,QAAQ94B,iBAAQyqB,GACpB0kC,EAAoBz6D,KAAK+1B,EAAO2mB,aAI7B+d,EAAoBp5C,SAASq7B,KAChCA,EAAYz6C,OAAOo5C,MAAMqf,MAAMhe,EAAY,IAAMhE,IAG3CgE,EAGRr6C,kBAAkBs4D,EAAeL,EAAaF,EAAYQ,EAAcX,GACvE13D,IAAMwzB,EAASt5B,KAAK44D,gBAAgBsF,GAEpCl+D,KAAK2nC,QAAQ3lB,OAAOw7C,EAAqB,EAAG,EAAGlkC,EAAO,IAEtDt5B,KAAK+D,KAAK8K,iBAAQ0qB,GACjBA,EAAI4kC,GAAgBN,EAAYtkC,EAAIokC,MAGrC39D,KAAKs2D,mBAGN1wD,iCACKw4D,EAAW,GACXC,EAAgB,GAChBC,EAAmB,IAAIC,IAsC3B,OArCAv+D,KAAK49D,kBAAoB,GAEzB59D,KAAK2nC,QAAQ94B,iBAAQ2yC,GACA,QAAhBA,EAAGG,WAAuBH,EAAG/gD,SAAyB,YAAd+gD,EAAG/gD,QAC9C29D,EAAS76D,KAAK,CACb04C,QAASuF,EAAG/gD,QACZw/C,UAAWuB,EAAGvB,YAGS,gBAAhBuB,EAAGG,WAA+BH,EAAG/gD,SAC7C49D,EAAc96D,KAAK,CAClBi7D,UAAWhd,EAAG/gD,QACdw/C,UAAWuB,EAAGvB,cAKjBjgD,KAAK+D,KAAK8K,iBAAQ0qB,GACjB8kC,EAAcxvD,iBAAQg1C,GACjBtqB,EAAIsqB,EAAM2a,YACbF,EAAiBrvC,IAAIsK,EAAIsqB,EAAM2a,WAAa,IAAM3a,EAAM5D,gBAK3Dme,EAAWA,EAASl7D,OAAO2e,MAAMzS,KAAKkvD,GAAkB36C,aAAIhjB,GAC3DmF,IAAM24D,EAAiB99D,EAAEC,MAAM,KAC/B,MAAO,CACNq7C,QAASwiB,EAAe,GACxBxe,UAAWwe,EAAe,QAInB5vD,iBAAQ+rC,GAChB56C,EAAK49D,kBAAkBhjB,EAAIqB,SAAWrB,EAAIqF,YAGpCme,EAGRx4D,uBACC,IAAI5F,KAAKu2D,QAAT,CAGAhuD,EAAE,sBAAsBi4C,YAAY,iBAEpCj9B,IAAIowC,EAAY3zD,KAAK07C,KAAKC,KAAKt5B,KAAK,cACpCriB,KAAK0+D,QAAUn2D,EAAE,qDACf05C,OAAO0c,YAAYhL,GAErB3zD,KAAK81D,SAAWvtD,EAAE,sCAChB05C,OAAO6U,SAAS92D,KAAK07C,KAAKC,MAE5B37C,KAAKm2D,OAAS5tD,EAAE,+BAA+B05C,OAAO6U,SAAS92D,KAAK07C,KAAKC,MAEzE37C,KAAKy5D,SAAWlxD,EAAEvI,KAAK4+D,YAAY,KAAK3c,OAAO6U,SAAS92D,KAAK07C,KAAKC,MAClE37C,KAAKu2D,QAAUhuD,EAAE,gCAAgCuuD,SAAS92D,KAAK07C,KAAKC,MACpE37C,KAAK6+D,SAAWt2D,EAAEvI,KAAK4+D,YAAY,KAAK3c,OAAO6U,SAAS92D,KAAK07C,KAAKC,OAGnE/1C,YAAYk5D,GACX9+D,KAAK0+D,QAAQn8D,KAAKu8D,GAAgB1c,OAGnCx8C,cACC5F,KAAK0+D,QAAQzc,OAGdr8C,sBACC5F,KAAK++D,gBAAkB/+D,KAAK++D,eAAejoC,SAC3C92B,KAAK++D,eAAiBx2D,EAAE,gDAAgDuuD,SAAS92D,KAAK07C,KAAKC,MACvF37C,KAAKi5D,cACRj5D,KAAKg/D,aAAez2D,kIAEhBgyC,GAAG,uHAEHA,GAAG,2CAEPhyC,EAAEvI,KAAK++D,gBAAgB57D,OAAOnD,KAAKg/D,cACnCh/D,KAAKg/D,aAAa38C,KAAK,mCAAmC+/B,OAC1DpiD,KAAKg/D,aAAa38C,KAAK,iCAAiC4/B,QAGzDn8C,IAAM6vB,EAAU4kB,GAAG,0FACb0kB,EAAqB1kB,GAAG,0BAA2B,CAACv6C,KAAK6yD,gBAAkB,KAEjF7yD,KAAK++D,eAAe57D,gDACVwyB,qCAA0CspC,yBAIrDr5D,kBACC5F,KAAKg/D,aAAa38C,KAAK,iCAAiC4/B,OACxDjiD,KAAKm/C,UAAU9oB,WAAW6oC,iBAC1Bl/D,KAAKg/D,aAAa38C,KAAK,mCAAmC+/B,OAG3Dx8C,oBACC5F,KAAKg/D,aAAa38C,KAAK,mCAAmC4/B,OAC1DjiD,KAAKm/C,UAAU9oB,WAAW8oC,mBAC1Bn/D,KAAKg/D,aAAa38C,KAAK,iCAAiC+/B,OAGzDx8C,YAAY+vB,GACX,qGACQA,uBAIT/vB,oBACC5F,KAAKu1D,cACLv1D,KAAK2uD,wBAAuB,GAC5B3uD,KAAKqC,UAGNuD,uBAAuBq1B,GACtB1X,IAAIoS,EAAW31B,KAAKk0D,kBAAoBl0D,KAAK01D,yBAC1Cnb,GAAG,gGACHv6C,KAAKo/D,wBAERp/D,KAAKgyD,eAAe/2B,EAAMtF,GAEtBsF,GAAQj7B,KAAKk0D,kBAChBl0D,KAAKsuD,uBAAyB,MACzBtuD,KAAKg4D,eAAe11C,GAAG,aAC3BtiB,KAAK41D,+BAKRhwD,eAAeq1B,EAAMtF,GAChBsF,GACHj7B,KAAK6+D,SAASx8C,KAAK,OAAO9f,KAAKozB,GAC/B31B,KAAK6+D,SAASzc,QAEdpiD,KAAK6+D,SAAS5c,OAIhBr8C,sBAAsBq6C,EAAWhlB,GAChCj7B,KAAKq/D,MAAMh9C,2BAA2B49B,OAAcx9B,YAAY,eAAgBwY,GAGjFr1B,cAAcq1B,GACbj7B,KAAKu2D,QAAQpmB,OAAOlV,GACpBj7B,KAAKm2D,OAAOhmB,OAAOlV,GACnBj7B,KAAK81D,SAAS3lB,OAAOlV,GAGtB6+B,iBACC,OAAO95D,KAAKkxD,oBAIdtyD,OAAO8/B,eAAel5B,OAAQ,+BAAgC,CAC7D2O,eAEC,OADAsd,QAAQmQ,KAAK,wMACN,o6OCx0DTp8B,OAAOw0C,QAAQ,gBAEfx0C,OAAOy3C,GAAGO,QAAU,MACnB53C,YAAY05D,GACXt/D,KAAKs/D,YAAcA,EACnBt/D,KAAK07C,KAAO4jB,EAAY5jB,KACxB17C,KAAKi8C,QAAUqjB,EAAYrjB,QAC3Bj8C,KAAKu/D,OAGN35D,OACC5F,KAAKw/D,uBACLx/D,KAAKy/D,wBACLz/D,KAAK0/D,qBAGN95D,wBACCE,IAAM65D,EAA0B,CAC/B,CAACpwD,KAAM,QAASooC,MAAO4C,GAAG,UAC1B,CAAChrC,KAAM,MAAOooC,MAAO4C,GAAG,QACxB,CAAChrC,KAAM,MAAOooC,MAAO4C,GAAG,aAGnBqlB,EAAoBr3D,EACzB/C,OAAOq2D,gBAAgB,WAAY,CAClC5f,QAASj8C,KAAKi8C,QACd4jB,oBAAqB7/D,KAAK8/D,sBAC1BC,8BAA+BJ,KAIjC3/D,KAAKggE,gBAAgBC,QAAQ,CAC5BhnC,QAAS2mC,EACTvE,SAAU,wLAOV94D,MAAM,EACN29D,QAAS,SACTrmD,UAAW,OACXsmD,UAAW,SACXtuB,OAAQ,cAKVjsC,gCACC2C,EAAElJ,SAASqM,MAAMyW,GAAG,iBAAUhhB,GACzBnB,EAAKu3B,SAAWv3B,EAAKu3B,QAAQjV,GAAG,cAEkB,IAApD/Z,EAAEpH,EAAE8O,QAAQmwD,QAAQ,qBAAqBx9D,QACO,IAAhD2F,EAAEpH,EAAE8O,QAAQmwD,QAAQ,iBAAiBx9D,QACc,IAAnD2F,EAAEpH,EAAE8O,QAAQmwD,QAAQ,oBAAoBx9D,QACvC2F,EAAEpH,EAAE8O,QAAQqS,GAAGtiB,EAAKggE,kBAErBhgE,EAAKu3B,SAAWv3B,EAAKggE,gBAAgBC,QAAQ,WAKhDjgE,KAAKggE,gBAAgB79C,GAAG,mBACvBniB,EAAKggE,gBAAgBC,QAAQ,YAG9BjgE,KAAKggE,gBAAgB79C,GAAG,8BAClBniB,EAAKu3B,UACTv3B,EAAKu3B,QAAUhvB,EAAE,qBACjBvI,EAAKqgE,yBAIPrgE,KAAKggE,gBAAgB79C,GAAG,+BACvBniB,EAAKsgE,2BAGN96D,OAAO+6D,OAAOp+C,GAAG,oBAChBniB,EAAKggE,gBAAgBC,QAAQ,UAI/Br6D,sBACC5F,KAAKwgE,kBAAoB,GACzBxgE,KAAKygE,gBAAkBzgE,KAAKu3B,QAAQlV,KAAK,mBACzCriB,KAAK0gE,gBAAkB1gE,KAAKygE,gBAAgBtrD,IAAInV,KAAK0gE,gBACrD1gE,KAAK2gE,0BAA4B3gE,KAAKu3B,QAAQlV,KAC7C,6BAEDriB,KAAK4gE,oBAAsB5gE,KAAKu3B,QAAQlV,KAAK,uBAC7CriB,KAAK6gE,uBAAyB7gE,KAAKu3B,QAAQlV,KAAK,oBAE5CriB,KAAK8gE,mBACR9gE,KAAK2gE,0BAA0BxrD,IAAInV,KAAK8gE,qBAGxC9gE,KAAK2gE,0BAA0BxrD,IAAI,SACnCnV,KAAK8gE,mBAAqB,SAG3B9gE,KAAK+gE,4BACL/gE,KAAKghE,cAAgBhhE,KAAK4gE,oBAAoBzrD,IAAInV,KAAKihE,oBAEvDjhE,KAAKkhE,sBAGNt7D,iCAEC5F,KAAKygE,gBAAgBt+C,GAAG,oBACvBniB,EAAK0gE,eAAiB1gE,EAAKygE,gBAAgBtrD,MAC3CnV,EAAKmhE,iBAAmBnhE,EAAKygE,gBAC3Bp+C,KAAK,aACLgC,KAAK,gBACPrkB,EAAKohE,+BAGNphE,KAAK2gE,0BAA0Bx+C,GAAG,oBAEjCniB,EAAK+gE,4BACL/gE,EAAK8gE,mBAAqB9gE,EAAK2gE,0BAA0BxrD,MACzDnV,EAAKohE,+BAGNphE,KAAK4gE,oBAAoBz+C,GAAG,oBAC3BniB,EAAKihE,mBAAqBjhE,EAAK4gE,oBAAoBzrD,MACnDnV,EAAKqhE,qBAAuBrhE,EAAK4gE,oBAC/Bv+C,KAAK,aACLgC,KAAK,gBACPrkB,EAAKohE,+BAGNphE,KAAK6gE,uBAAuB1+C,GAAG,mBAC1BniB,EAAKy9C,WACRz9C,EAAKshE,kBACLthE,EAAKuhE,mCAAkC,MAK1C37D,uCACKkO,EAAK9T,KAAK2gE,0BAA0BxrD,MACxC,GAAW,QAAPrB,GAAuB,QAAPA,EAAc,CACjC,IAAK9T,KAAKwgE,kBAAkB59D,OAAQ,CACnC5C,KAAKwgE,kBAAoB,oDACrBjmB,GAAG,6DAIiBv6C,EAAKwhE,WAAWvlB,GACxBptC,iBAASg1C,GAEvB,GAAIr+C,OAAOo5C,MAAMkK,iBAAiBjF,EAAMlC,WAAY,CACnDp+B,IAAIk+C,EACHxlB,GAAWj8C,EAAKi8C,QACb4H,EAAMlM,MACHkM,aAAgBtJ,GAAG0B,OAC1Bj8C,EAAKwgE,mBAAqB,yBAAyBvkB,+BACzC4H,iBAAoBtJ,GAAGknB,mBAVpC,IAAKl+C,IAAI04B,KAAWj8C,EAAKwhE,gBAe1BxhE,KAAK4gE,oBAAoBr+D,KAAKvC,KAAKwgE,mBACnCxgE,KAAKuhE,mCAAkC,QAGvCvhE,KAAKuhE,mCAAkC,GAKzC37D,kCAAkCw8C,GACjCpiD,KAAKygE,gBAAgBljD,SAASkF,YAAY,WAAY2/B,GACtDpiD,KAAKygE,gBAAgBljD,SAASkF,YAAY,YAAa2/B,GACvDpiD,KAAK2gE,0BAA0BpjD,SAASkF,YAAY,WAAY2/B,GAChEpiD,KAAK2gE,0BAA0BpjD,SAASkF,YAAY,YAAa2/B,GACjEpiD,KAAK4gE,oBAAoBrjD,SAAS4yB,OAAOiS,GAG1Cx8C,eACC,OAAI5F,KAAKy9C,SACD,CACNA,SAAUz9C,KAAKy9C,SACfqjB,mBAAoB9gE,KAAK8gE,mBACzBE,aAAchhE,KAAKghE,cAGb,KAITp7D,eAAe2gD,GACdhjC,IAAIm+C,WAAiBnyD,UAASA,EAAK3O,MAAM,KAAK,GAAGqU,QAAQ,KAAM,KAC3D0sD,WAAepyD,UAClBA,EACE3O,MAAM,KAAK,GACXqU,QAAQ,KAAM,IACdA,QAAQ,MAAO,KAOlB,GALKsxC,EAAS9I,SAAS5X,WAAW,UACjC0gB,EAAS9I,SACR,OAASz9C,KAAKi8C,QAAU,MAAQsK,EAAS9I,SAAW,KAGlD8I,EAASya,eAAiBza,EAASya,aAAan7B,WAAW,QAAS,CACvE//B,IAAMu7D,EAAuBrhE,KAAK4hE,yBAAyBrb,GAC3DA,EAASya,aACR,OAASK,EAAuB,MAAQ9a,EAASya,aAAe,IAIlEhhE,KAAK0gE,eAAiBgB,EAAcnb,EAAS9I,UAC7Cz9C,KAAKmhE,iBAAmBQ,EAAYpb,EAAS9I,UAE7Cz9C,KAAK8gE,mBAAqBva,EAASua,mBAE/Bva,EAASya,eACZhhE,KAAKihE,mBAAqBS,EAAcnb,EAASya,cACjDhhE,KAAKqhE,qBAAuBM,EAAYpb,EAASya,eAGlDhhE,KAAK6hE,iBACL7hE,KAAKsgE,yBAGN16D,yBAAyB2gD,GACxB,IAAK,UAAe3nD,OAAO8kB,KAAK1jB,KAAKwhE,4BAAa,CAA7Cj+C,IAAI04B,OAER,GADkBj8C,KAAKwhE,WAAWvlB,GACpB55B,cAAMwhC,UAAUA,EAAM5D,WAAasG,EAASya,eACzD,OAAO/kB,GAKVr2C,uBACC5F,KAAK07C,KAAKnkB,QAAQlV,KAAK,kBAAkBy/C,OACxCv5D,oKAGK/C,OAAO0c,MAAM6/C,KAAK,iGAGlBxnB,GAAG,sEAMTv6C,KAAKggE,gBAAkBhgE,KAAK07C,KAAKnkB,QAAQlV,KAAK,oBAG/Czc,iBAiBC,OAhBA5F,KAAKy9C,SACJ,OAASz9C,KAAKmhE,iBAAmB,MAAQnhE,KAAK0gE,eAAiB,IAEhC,UAA5B1gE,KAAK8gE,oBACR9gE,KAAKihE,mBAAqB,KAC1BjhE,KAAKqhE,qBAAuB,MAE5BrhE,KAAKghE,aACJ,OACAhhE,KAAKqhE,qBACL,MACArhE,KAAKihE,mBACL,OAKAjhE,KAAKy9C,WACLz9C,KAAK8gE,qBACJ9gE,KAAKihE,oBAAkD,UAA5BjhE,KAAK8gE,oBAQpCl7D,6BACK5F,KAAK6hE,kBACR7hE,KAAKs/D,YAAYj9D,UAInBuD,SAASqT,GACJjZ,KAAK8gE,oBAAsB9gE,KAAKy9C,WACnCz9C,KAAKs/D,YAAY7hB,SAAWz9C,KAAKy9C,SACjCz9C,KAAKs/D,YAAY0C,QAAU,oBAC3BhiE,KAAKs/D,YAAY2C,WAAa,OAI5BjiE,KAAKs/D,YAAYphB,OAAOv6B,aAAK9iB,UAAMA,EAAE,KAAI+jB,SAAS,uBAEnD5kB,KAAKkiE,gBAAkBliE,KAAKs/D,YAAYphB,OAAOv6B,aAAK9iB,UAAMA,KAG3Db,KAAKs/D,YAAYphB,OAAS,CAAC,CAACl+C,KAAK0gE,eAAgB1gE,KAAKmhE,mBAGtDloD,EAAKilC,OAASl+C,KAAKs/D,YAAY6C,aAG/BniE,KAAKs/D,YAAYphB,OAAO36C,KAAK,CAC5B,oBACAvD,KAAKqhE,sBAAwBrhE,KAAKi8C,UAInCj8C,KAAKs/D,YAAY/jB,gBAEjB38C,OAAOgiC,OAAO3nB,EAAM,CACnBmpD,oBAAoB,EACpBnB,mBAAoBjhE,KAAKihE,oBAAsB,OAC/CI,qBAAsBrhE,KAAKqhE,sBAAwBrhE,KAAKi8C,QACxD6kB,mBAAoB9gE,KAAK8gE,oBAAsB,QAC/CrjB,SAAUz9C,KAAKs/D,YAAY7hB,UAAY,KACvCxC,SAAU,4BAKbr1C,wBAEC2d,IAAIq+B,EAAW,GAyBf,MAxBgC,UAA5B5hD,KAAK8gE,mBACRlf,EAAW,CACVD,UAAW,MACXhK,MAAO4C,GAAG,SACVh9B,OAAQvd,KAAKi8C,QACblyC,MAAO,MAIR63C,EAAWhjD,OAAOgiC,OACjB,GACAp7B,OAAO42B,KAAKqsB,aAAazoD,KAAKqhE,sBAC7BrhE,KAAKihE,qBAIyB,QAA5BjhE,KAAK8gE,mBACRlf,EAASjK,MAAQ4C,GAAG,aAAc,CAACA,GAAGqH,EAASjK,SAE/CiK,EAASjK,MAAQ4C,GAAG,iBAAkB,CAACA,GAAGqH,EAASjK,UAIrDiK,EAAS3B,UAAY,oBACd2B,EAGRh8C,kBACC5F,KAAKi7C,SAAW,GAChBj7C,KAAKy9C,SAAW,KAChBz9C,KAAK0gE,eAAiB,KACtB1gE,KAAKs/D,YAAY7hB,SAAW,KAC5Bz9C,KAAK8gE,mBAAqB,QAC1B9gE,KAAKghE,aAAe,KACpBhhE,KAAKihE,mBAAqB,KAC1BjhE,KAAKygE,gBAAgBtrD,IAAI,IACzBnV,KAAK2gE,0BAA0BxrD,IAAI,SACnCnV,KAAK4gE,oBAAoB7jD,QAAQ5H,IAAI,IACrCnV,KAAK4gE,oBAAoBrjD,SAAS0kC,OAG9BjiD,KAAKkiE,gBACRliE,KAAKs/D,YAAYphB,OAASl+C,KAAKkiE,gBAE/BliE,KAAKs/D,YAAY1Z,qBAGlB5lD,KAAKs/D,YAAY/jB,gBACjBv7C,KAAKkiE,gBAAkB,KACvBliE,KAAKs/D,YAAYj9D,UAGlBuD,iCACC5F,KAAKqiE,gBAAkB,GACvBriE,KAAKwhE,WAAa,GAElB17D,IAAMo4C,EAASl+C,KAAKs/D,YAAYljC,KAAK8hB,OAAOvrC,gBAAQ9R,SACnD,CAAC,SAAU,OAAQ,OAAQ,MAAO,SAAS+jB,SAAS/jB,EAAE8gD,aAEjD2gB,EAAY,CAAEriB,UAAW,aAAc0B,UAAW,OAAQhK,MAAO4C,GAAG,SAC1Ev6C,KAAKqiE,gBAAgBriE,KAAKi8C,SAAWiC,EACnCh7C,OAAOo/D,GACP3wD,cAAMvT,EAAGD,UAAMo8C,GAAGn8C,EAAEu5C,OAAO4qB,cAAchoB,GAAGp8C,EAAEw5C,UAChD33C,KAAKwhE,WAAWxhE,KAAKi8C,SAAWj8C,KAAKs/D,YAAYljC,KAAK8hB,OAEtDp4C,IAAM8hD,WAA0BpG,UAC9BqG,QAAQriD,OAAOo5C,MAAMkJ,cAAetG,EAAGG,aAAeH,EAAG8E,aAgB3D,OAdqB9gD,OAAO42B,KAC1BisB,iBAAiBroD,KAAKi8C,SACtBtpC,gBAAQ6uC,UAAQA,EAAGgE,SAER32C,iBAAS2yC,GACrB17C,IAAMq6C,EAAMqB,EAAG/gD,QACT6nD,EAAqB9iD,OAAO42B,KAChC4rB,cAAc7H,GACdxtC,OAAOi1C,GACPj2C,cAAMvT,EAAGD,UAAMo8C,GAAGn8C,EAAEu5C,OAAO4qB,cAAchoB,GAAGp8C,EAAEw5C,UAChD33C,EAAKqiE,gBAAgBliB,GAAOmI,EAC5BtoD,EAAKwhE,WAAWrhB,GAAOmI,IAGjBtoD,KAAKqiE,gBAGbz8D,yBACCE,IAAM08D,EAAmBr3B,QAAQnrC,KAAK0gE,gBAChC+B,EAAeD,EAClBjoB,GAAG,eAAgB,CAACv6C,KAAK0iE,6BACzBnoB,GAAG,aAENv6C,KAAKggE,gBACHv9C,YAAY,eAAgB+/C,GAC5B//C,YAAY,oBAAqB+/C,GAEnCxiE,KAAKggE,gBAAgB39C,KAAK,kBACxBI,YAAY,SAAU+/C,GAExBxiE,KAAKggE,gBAAgB39C,KAAK,iBAAiB9f,KAAKkgE,GAChDziE,KAAKggE,gBAAgB37C,KAAK,QAASo+C,GAGpC78D,sCACC,OAAO5F,KAAKqiE,gBAAgBriE,KAAKmhE,kBAAkB9+C,cAClDwhC,UAASA,EAAM5D,WAAajgD,EAAK0gE,iBAChC/oB,QChbJnyC,OAAOw0C,QAAQ,uBAEfx0C,OAAOyqD,aAAe,CACrBoG,mBAAoB,SAAS1uB,EAASwoB,EAAU1sC,qEACzC9I,EAAO8nC,EAAW5iD,cAEpBuB,EAAQ+uD,EAAS5oC,OAAO5U,gBAAO1D,UAASrQ,OAAO8kB,KAAKzU,GAAOrM,SAE3DwgD,EAASuf,EAAkBlR,GAC3BxO,EAAWL,EAASj/B,aAAIiuC,UAC3BriD,KAAM/J,OAAOo5C,MAAMyS,QAAQO,GAC3B5iC,OAAQ2zC,EAAkB/Q,GAASjuC,aAAIhjB,UAAK0+B,OAAO1+B,QAUpD,OAPIwvD,EAAS+I,gBACZ9V,EAASA,EAAOz6B,MAAM,GAAI,GAC1Bs6B,EAASp0C,iBAAQuV,GAChBA,EAAQ4K,OAAS5K,EAAQ4K,OAAOrG,MAAM,GAAI,MAIrC,CACN5kB,KAAM,CACLq/C,OAAQA,EAAOxgD,OAAQwgD,EAAQ,KAC/BH,SAAUA,GAEXM,gBAAiB,EACjB5oC,KAAMA,EACN1V,OAAQA,GAAkB,IAC1Bu+C,OAAQA,EACRC,YAAa,CACZC,oBAAqB,EACrBkf,UAAW,SAIb,SAASD,EAAkB9b,GAC1B,GAAIhlC,MAAM4C,QAAQrjB,EAAK,IAAK,CAC3BmiB,IAAIs/C,EAAel7B,EAAQ2C,mBAAUhR,UAAUA,EAAO2mB,WAAa4G,IACnE,OAAOzlD,EAAKuiB,aAAI4V,UAAOA,EAAIspC,KAE3B,OAAOzhE,EAAKuiB,aAAI4V,UAAOA,EAAIstB,OAK9BqJ,8BAA+B,SAASvoB,EAAS5jC,GAChD+B,IAAM1E,EAAQ2C,EAAKwjB,OAAO5U,gBAAO1D,UAASrQ,OAAO8kB,KAAKzU,GAAOrM,SAGvDkgE,GAFYjhD,MAAM4C,QAAQrjB,EAAK,IAAMA,EAAK,GAAKumC,EAAQhkB,aAAI8U,UAAOr3B,EAAK,GAAGq3B,EAAIwnB,cAE1D9tB,gBAAQ4wC,EAAaC,EAAeC,GAI7D,OAHI5jC,OAAO6jC,SAASF,IACnBD,EAAYx/D,KAAK0/D,GAEXF,GACL,IAEH,SAASI,EAAYjlB,GACpB,OAAOA,EAAOv6B,aAAKkgC,GAClB,OAAIA,EAAM5D,UACF,CAACtI,MAAOkM,EAAMlM,MAAO1oC,MAAO40C,EAAM5D,WAGlC,CAACtI,OADRkM,EAAQr+C,OAAOyqD,aAAaiK,0BAA0BrW,IACjClM,MAAO1oC,MAAO40C,EAAM5D,aAK5Cn6C,IAAM2qD,EAAiB9oB,EAAQh1B,gBAAQ8lB,EAAK3qB,UAAMg1D,EAAQl+C,SAAS9W,KAC7DisD,EAAqBpyB,EAAQh1B,gBAAQ8lB,EAAK3qB,UAAOg1D,EAAQl+C,SAAS9W,KAKxE,MAAO,CACN2iD,eAJ2B0S,EAAY1S,GAKvCsJ,mBAJ+BoJ,EAAYpJ,KAQ7CG,0BAA2B,SAAS5gC,SACnC,GAAsB,iBAAXA,EACV,GAAIA,EAAO1U,SAAS,KAAM,CACzB,IACInkB,IAD4B64B,EAAO14B,MAAM,0BAGzC+gD,EAAU/8B,SAAS,SACC+8B,EAAU/gD,MAAM,KAAtC+gD,OAAWlhD,QAGb64B,EAAS,OACRqe,EACAsI,UAAWtI,YACXgK,QACA53C,UACAtJ,QAGD64B,EAAS,CACRqe,MAAOre,EACP2mB,UAAW3mB,EACXqoB,UAAW,QAId,OAAOroB,GAGR8pC,mBAAoB,SAAS1oB,GAE5B,GAAIl1C,OAAO+sD,cAAc7X,GAAc,CACtCn3B,IAAIkiB,EAAUjgC,OAAO+sD,cAAc7X,GAAajV,QAChD,OAAO3T,QAAQC,QAAQ0T,GAGxB,OAAOjgC,OAAOssD,MACb,sCACA,CACCpX,YAAaA,IAEbxgB,cAAKv7B,GAEN,OADA6G,OAAOgU,IAAIg5C,KAAK7zD,EAAE8zD,QAAU,IACrBjtD,OAAOktD,sBACb,OAAOltD,OAAO+sD,cAAc7X,IAAgBl1C,OAAO+sD,cAAc7X,GAAajV,aAKjFyrB,2BAAkBzrB,GAYjB,OAXoBA,EAClB9hB,aAAI9iB,SACAuB,EAAIvB,EAAEwiC,QACV,SAAO,IACLxiC,EAAEo/C,WAAY79C,MAGhB+vB,gBAAQC,EAAKvxB,GAEb,OADAjC,OAAOgiC,OAAOxO,EAAKvxB,GACZuxB,GACL,KAILixC,0BAAiBvvD,EAAIkb,GAOpB,MANmB,CAClBs0C,iBAAWt0C,UAAUA,EAAOmD,gBAAQ1oB,EAAK0L,UAAQlR,KAAKwF,IAAIA,EAAK0L,IAAM6Z,EAAO,KAC5Eu0C,iBAAWv0C,UAAUA,EAAOmD,gBAAQ1oB,EAAK0L,UAAQlR,KAAKI,IAAIoF,EAAK0L,IAAM6Z,EAAO,KAC5Ew0C,iBAAWx0C,UAAUA,EAAOmD,gBAAQ/zB,EAAGD,UAAMC,EAAID,GAAG,GAAK6wB,EAAOpsB,QAChE6gE,aAAOz0C,UAAUA,EAAOmD,gBAAQ/zB,EAAGD,UAAMC,EAAID,GAAG,KAE/B2V,GAAIkb"}